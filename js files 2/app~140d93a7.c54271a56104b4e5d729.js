(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1280:function(e,t,a){"use strict";a.d(t,"a",(function(){return X})),a.d(t,"b",(function(){return J}));a(10),a(11);var o=a(0),n=a.n(o),l=a(37),r=a(12),i=a(180),s=a(19),c=a(6),u=a(47),d=a(1),m=a(21),p=a(199),y=a(87),v=a(3),g=a(107),b=a(63),f=a(2103),h=a(2329),x=a(2335),C=a(2341),T=a(2373),E=a(473),O=a(1396),D=a(2355),P=a(252),k=a(20),S=a(210),I=a(28),N=a(85),j=a(213),L=a(187),w=a(130),F=a(214),R=a(38);const A=Object(j.a)(e=>Object(L.a)({listbox:{fontSize:"inherit","& :hover":{backgroundColor:e.palette.grey[100]+"!important"},"&:hover:not(:disabled):not(:focus-within)":{backgroundColor:e.palette.common.white+"!important"},"&:focus-within":{backgroundColor:e.palette.background.paper}},errorMsg:{color:e.palette.error.main}})),$=({label:e,options:t,selectedSpeed:a,voyage:l,isBallast:r,i:i})=>{const s=e=>"string"==typeof e,{vessel:u,model:d,voyages:m,common:p}=i.getLanguageFile(),y=Object(O.a)({limit:6}),[v,g]=Object(o.useState)(!1),[j,L]=Object(o.useState)(!1),$=A({}),[H]=Object(c.a)([k.a.IVoyageDrawerController]),[B,K]=Object(o.useState)({speed:"",consumption:""}),V=Object(o.useCallback)(()=>{K({speed:"",consumption:""}),L(!1)},[]),M=Object(o.useCallback)(e=>{e.preventDefault();const a=new P.a({speed:parseFloat(B.speed),foConsumption:parseFloat(B.consumption),speedType:r?"B":"L"});t.some(e=>e.speed===a.speed&&e.foConsumption===a.foConsumption)?g(!0):(H.addNewSpeedToVoyage(l,a),V())},[H,B.consumption,B.speed,V,r,t,l]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{id:"add-speed-option-dialog",classes:{listbox:$.listbox},options:t,disableClearable:!0,getOptionLabel:e=>e.speed&&e.foConsumption?e.speed+" "+b.a.Knot+" "+e.foConsumption+" "+b.a.Weight:e.inputValue?e.title:"object"==typeof e&&e.text?e.text:s(e)?e:"",renderOption:(e,t)=>{if(t.speed&&t.foConsumption){const o=t.key===a.key?R.b.navigator.secondary[1]:R.b.bergenRain.secondary[1];return n.a.createElement("li",Object.assign({},e,{key:t.key,style:{backgroundColor:o}}),t.speed+" "+b.a.Knot+" "+t.foConsumption+" "+b.a.Weight)}return t.inputValue?n.a.createElement("span",Object.assign({},e,{style:{backgroundColor:"white"}}),t.title):"object"==typeof t&&t.text?n.a.createElement("span",Object.assign({},e),t.text):s(t)?t:""},renderInput:t=>n.a.createElement(f.a,Object.assign({},t,{InputLabelProps:{shrink:!0},label:e})),value:a,isOptionEqualToValue:(e,t)=>e.id===t.id,onChange:(e,t)=>{t&&t.inputValue?setTimeout(()=>{L(!0),K({speed:t.inputValue,consumption:""})}):"string"==typeof t?setTimeout(()=>{L(!0),K({speed:t,consumption:""})}):t&&"object"==typeof t&&H.onChangeSpeed(l,r,t)},filterOptions:(e,t)=>{const a=y(e,t);return void 0!==t.inputValue&&""!==t.inputValue&&a.push({inputValue:t.inputValue,title:m.addANewSpeed}),a}}),n.a.createElement(h.a,{open:j,onClose:V,maxWidth:"xs",fullWidth:!0},n.a.createElement("form",{onSubmit:M},n.a.createElement(x.a,null,n.a.createElement(w.a,{variant:"h3"},m.addANewSpeed)),n.a.createElement(C.a,null,n.a.createElement(F.a,{container:!0,spacing:1},n.a.createElement(F.a,{item:!0,xs:6},n.a.createElement(S.a,{value:Number.parseFloat(B.speed),onChange:e=>{K(Object.assign(Object.assign({},B),{speed:e?e.toString():""})),v&&g(!1)},maskSettings:I.a.mask16,formControlProps:{required:!0},InputProps:{sx:{},endAdornment:b.a.Knot},label:d.speedShort,reactKeyPrefix:"speed-newspeed-voyage-vessel-overview",validation:[{type:N.a.RANGE,min:1,max:99}]})),n.a.createElement(F.a,{item:!0,xs:6},n.a.createElement(S.a,{value:Number.parseFloat(B.consumption),onChange:e=>{K(Object.assign(Object.assign({},B),{consumption:e?e.toString():""})),v&&g(!1)},validation:[{type:N.a.RANGE,min:1,max:99}],maskSettings:I.a.mask16,InputProps:{sx:{},endAdornment:b.a.Weight},formControlProps:{required:!0},label:u.consumption,reactKeyPrefix:"consumption-newspeed-voyage-vessel-overview"})),n.a.createElement(F.a,{item:!0,className:$.errorMsg},v?p.speedExistError:""))),n.a.createElement(T.a,null,n.a.createElement(E.a,{onClick:V},p.cancel),n.a.createElement(E.a,{variant:"contained",type:"submit",disabled:v||"0"===B.speed||"0"===B.consumption||""===B.speed||""===B.consumption||Number.parseFloat(B.speed)>99||Number.parseFloat(B.consumption)>99},p.add)))))},H=n.a.memo($);var B=a(108),K=a(144),V=a(96),M=a(30),_=a(50),U=a(181),z=a(60),q=a(78),G=a(15),W=a(27);var Y=a(411);const X="VESSEL_TC_IN_CONTRACTS",Q=n.a.memo((function(e){const{voyage:t,userLocale:a,reactKeyPrefix:o,user:u,state:{allTcs:m}}=e,[y]=Object(c.a)([v.a.IInternationalization]),f=Object(Y.a)({}),h=Object(p.a)(u,function(e,t,a,o,l){var i,s,u,m,p,y,v,f,h,x,C,T,E,O,D,P,S;const[N]=Object(c.a)([k.a.IVoyageDrawerController]),j=t.getLanguageFile(),L=e.partOfSchedule.every(a=>t.formatNumber(a.percentExtraAtSea,{minDecimals:2,maxDecimals:2})===t.formatNumber(e.percentExtraAtSea,{minDecimals:2,maxDecimals:2}));e.partOfSchedule.every(a=>t.formatNumber(a.percentExtraAtSea,{minDecimals:2,maxDecimals:2})===t.formatNumber(e.partOfSchedule[0].percentExtraAtSea,{minDecimals:2,maxDecimals:2}))&&!L&&N.updateVoyage({key:e.key,percentExtraAtSea:e.partOfSchedule[0].percentExtraAtSea});const w=[].concat(null!==(i=null!=o?o:e.tcIn)&&void 0!==i?i:[]),F=null!==(m=null===(u=null===(s=null==e?void 0:e.voyageHeader)||void 0===s?void 0:s.voyageStatus)||void 0===u?void 0:u.statusTypeCode)&&void 0!==m?m:"",R=["EST","SCU"].includes(F),A=!!(null===(p=e.voyageHeader)||void 0===p?void 0:p.isTemplate),$=null!==(f=null===(v=null===(y=e.tcIn)||void 0===y?void 0:y.currency)||void 0===v?void 0:v.currencyCode)&&void 0!==f?f:"",Y=null!==(x=null===(h=null==e?void 0:e.voyageCurrency)||void 0===h?void 0:h.currencyCode)&&void 0!==x?x:"",X=null!==e.tcIn,Q=_.a.getSpeedRef(e.partOfSchedule,!0),J=_.a.getSpeedRef(e.partOfSchedule,!1),Z=U.a.getSpeeds(e.vessel,!0),ee=U.a.getSpeeds(e.vessel,!1),te=z.a.getVoyageSpeeds(e,!0),ae=z.a.getVoyageSpeeds(e,!1),oe=Z.concat(te),ne=ee.concat(ae);return[{fieldName:"vessel",label:j.model.vessel,disabled:!R,typeaheadProps:{isClearable:!1,shouldPreload:!0,objectPaths:["vesselName"],fields:{vesselName:"*",speeds:g.h},query:"expression=(vesselCodes!=null)&sort=key(ASI)"},openObject:{permissions:[M.a.VesselGET],onOpen:W.a.openDrawer.bind(null,null!==(T=null===(C=e.vessel)||void 0===C?void 0:C.key)&&void 0!==T?T:-1,G.a.vesselDrawer)},breakpoints:r.h,onUpdateOverride:t=>{N.changeVessel(e,t)}},{disabled:!R&&!(null===(E=e.voyageHeader)||void 0===E?void 0:E.isVoyageStartFixed),fieldName:"ballastPort",label:j.model.ballastPort,formControlProps:{required:!0},typeaheadProps:{objectPaths:["portName"],query:V.d},breakpoints:r.h,onUpdateOverride:t=>N.updateBallastPortField("ballastPort",t.key,e.key)},{overrideComponent:n.a.createElement(H,{label:j.model.speedBallast,options:oe,selectedSpeed:oe.length?null!=Q?Q:{text:j.common.multiple}:null,voyage:e,isBallast:!0,i:t})},{overrideComponent:n.a.createElement(H,{label:j.model.speedLaden,options:ne,selectedSpeed:ne.length?null!=J?J:{text:j.common.multiple}:null,voyage:e,isBallast:!1,i:t})},{fieldName:"foPrice",label:j.model.foPrice,disabled:!R,numberInputProps:{maskSettings:I.a.mask2},breakpoints:r.f,onUpdateOverride:t=>N.updateBunkerStockPrice(e,K.a.FO,t)},{fieldName:"dlPrice",label:j.model.lsmgoPrice,disabled:!R,numberInputProps:{maskSettings:I.a.mask2},breakpoints:r.f,onUpdateOverride:t=>N.updateBunkerStockPrice(e,K.a.DL,t)},{fieldName:"doPrice",label:j.model.mgoPrice,disabled:!R,numberInputProps:{maskSettings:I.a.mask2},breakpoints:r.f,onUpdateOverride:t=>N.updateBunkerStockPrice(e,K.b[K.a.DO].toUpperCase(),t)},{fieldName:"flPrice",label:j.model.flPrice,disabled:!R,numberInputProps:{maskSettings:I.a.mask2},breakpoints:r.f,onUpdateOverride:t=>N.updateBunkerStockPrice(e,K.a.FL,t)},{fieldName:"tcIn",label:j.model.tcInContract,typeaheadProps:{resolver:e=>{var o,n;return[q.a.getFormattedDateString(e.cpDate,a,!0),null!==(n=null===(o=e.owner)||void 0===o?void 0:o.businessPartnerName)&&void 0!==n?n:t.lang().tc.noOwnerOnTCContract].filter(Boolean).join(", ")},options:w},onUpdateOverride:t=>{var a;return N.updateVoyageField("tcIn",null!==(a=null==t?void 0:t.key)&&void 0!==a?a:null,e.key)},openObject:{permissions:[M.a.TcGET],onOpen:W.a.openDrawer.bind(null,null!==(D=null===(O=e.tcIn)||void 0===O?void 0:O.key)&&void 0!==D?D:-1,G.a.tcDrawer)}},{fieldName:"tcRate",label:j.model.dailyHire,disabled:X,InputProps:{endAdornment:X?$:Y},onUpdateOverride:t=>N.updateVoyageField("tcRate",t,e.key),numberInputProps:{maskSettings:I.a.mask4}},{fieldName:"ballastBonus",label:j.model.ballastBonus,disabled:X,InputProps:{endAdornment:X?$:Y},onUpdateOverride:t=>N.updateVoyageField("ballastBonus",t,e.key),numberInputProps:{maskSettings:I.a.mask4}},{fieldName:"tcHireCommission",label:j.model.commissionAddress,disabled:X,InputProps:{endAdornment:b.a.Percent},onUpdateOverride:t=>N.updateVoyageField("tcHireCommission",t,e.key),breakpoints:r.f},{fieldName:"isLastVoyage",disabled:!e.tcIn,label:j.model.isLastVoyage,overrideType:d.a.voyageheader,overrideObject:e.voyageHeader?e.voyageHeader:new B.a({}),onUpdateOverride:t=>N.updateVoyageHeaderField("isLastVoyage",t,e),breakpoints:r.f,formControlLabelProps:{classes:l,labelPlacement:"top",checked:null===(P=e.voyageHeader)||void 0===P?void 0:P.isLastVoyage}},...A?[{fieldName:"vesselEarningPoint",label:j.model.vesselEarningPoint,overrideType:d.a.voyageheader,overrideObject:null!==(S=e.voyageHeader)&&void 0!==S?S:new B.a({}),numberInputProps:{maskSettings:I.a.mask3},onUpdateOverride:t=>N.updateVoyageHeaderField("vesselEarningPoint",t,e),breakpoints:r.f}]:[],{fieldName:"tcBenchmarkPercent",label:j.model.tcBenchmarkPercent,overrideType:d.a.voyageheader,overrideObject:e.voyageHeader?e.voyageHeader:new B.a({}),InputProps:{endAdornment:b.a.Percent},onUpdateOverride:t=>N.updateVoyageHeaderField("tcBenchmarkPercent",t,e),numberInputProps:{inputLabelProps:{sx:{textOverflow:"",overflow:"visible"}},maskSettings:I.a.mask4},breakpoints:A?r.f:void 0},{fieldName:"tcBenchmarkIndex",typeaheadProps:{shouldPreload:!0,objectPaths:["marketIndexCode"],fields:{marketIndexCode:"*"},query:"filter=marketIndexCategory.marketIndexCategoryCode(EQ)TC&sort=marketIndexCode(AS)"},overrideObject:e.voyageHeader?e.voyageHeader:new B.a({}),overrideType:d.a.voyageheader,onUpdateOverride:t=>{var a;return N.updateVoyageHeaderField("tcBenchmarkIndex",null!==(a=null==t?void 0:t.key)&&void 0!==a?a:null,e)}},{fieldName:"percentExtraAtSea",label:j.model.percentExtraAtSea,disabled:!L,overrideFieldType:L?void 0:"string",InputProps:Object.assign(Object.assign({},!L&&{value:j.common.multiple}),{endAdornment:L?b.a.Percent:void 0}),onUpdateOverride:t=>{const a=e.partOfSchedule.map(({key:e})=>({key:e,percentExtraAtSea:t}));N.updateVoyage({key:e.key,partOfSchedule:a,percentExtraAtSea:t})}}]}(t,y,a,m,f)),x=Object(s.a)({fieldOptions:h,object:t,parentData:{key:t.key,type:d.a.voyage},type:d.a.voyage,userLocale:a,disableUpdate:!0,reactKeyPrefix:o,smartResponse:!0});return n.a.createElement(i.a,{title:y.lang().model.vessel,reactKeyPrefix:o+"-vessel-section",headerElementsPosition:"left"},n.a.createElement(l.a,{reactKeyPrefix:o+"horizontal_list",key:o+"horizontal_list",items:x,breakpoints:r.h}))})),J=Object(u.a)((e,t)=>({allTcs:m.a.getTSModelsBuilt(e,d.a.tc,Object(y.a)(["key","owner.businessPartnerName","vesselCode.vessel.key","cpDate","currency.currencyCode"]),X)}),Object(o.memo)(Q))},1902:function(e,t,a){"use strict";a.d(t,"a",(function(){return ie}));a(10),a(11);var o=a(0),n=a.n(o),l=a(67),r=a(6),i=a(7),s=a(62),c=a(107),u=a(1),d=a(1329),m=a(472),p=a(1392),y=a(81),v=a(497),g=a(14),b=a(3);const f=g.a.get(b.a.IInternationalization),h={createdDate:"*",voyageSnapshotDesc:"*",voyage:{freight:"*",createdDate:"*",cveTcOut:"*",ilohcTcOut:"*",variousRevenue:"*",modifiedDate:"*",grossFreight:"*",commission:"*",netFreight:"*",daysOffhire:"*",daysTotal:"*",demurrage:"*",despatch:"*",ballastBonusRevenue:"*",portCost:"*",canalCost:"*",variousCost:"*",handlingCost:"*",freightCost:"*",doCost:"*",foCost:"*",dlCost:"*",flCost:"*",ilohcTcIn:"*",tcResult:"*",tcResultDay:"*",tcHireNet:"*",ballastBonusNet:"*",cveTcIn:"*",voyageResult:"*",voyageHeader:{foProfitLossHedge:"*",voyageStatus:{statusTypeCode:"*"}},cargos:{weight:"*"}}},x=e=>"Preliminary"===e.voyageSnapshotDesc,C=(e,t,a,o,n,l)=>{let r=0,i=0;return"weight"===a?(r=Object(p.a)(e.cargos,e=>e.weight),i=Object(p.a)(t.cargos,e=>e.weight)):"bunkers"===a?(r=Object(y.a)(e,"foCost",0)+Object(y.a)(e,"doCost",0)+Object(y.a)(e,"flCost",0)+Object(y.a)(e,"dlCost",0),i=Object(y.a)(t,"foCost",0)+Object(y.a)(t,"doCost",0)+Object(y.a)(t,"flCost",0)+Object(y.a)(t,"dlCost",0)):(r=Object(y.a)(e,a,0),i=Object(y.a)(t,a,0)),r-i>0?"+"+o.formatNumber(r-i,{minDecimals:l,maxDecimals:l,locale:n}):o.formatNumber(r-i,{minDecimals:l,maxDecimals:l,locale:n})},T=(e,t,a,o,n)=>{let l=0,r=0;return"weight"===a?(l=Object(p.a)(e.cargos,e=>e.weight),r=Object(p.a)(t.cargos,e=>e.weight)):"bunkers"===a?(l=Object(y.a)(e,"foCost",0)+Object(y.a)(e,"doCost",0)+Object(y.a)(e,"flCost",0)+Object(y.a)(e,"dlCost",0),r=Object(y.a)(t,"foCost",0)+Object(y.a)(t,"doCost",0)+Object(y.a)(t,"flCost",0)+Object(y.a)(t,"dlCost",0)):(l=Object(y.a)(e,a,0),r=Object(y.a)(t,a,0)),0===r?"-":l-r>0?"+"+o.formatNumber((l-r)/Math.abs(r)*100,{minDecimals:2,maxDecimals:2,locale:n}):o.formatNumber((l-r)/Math.abs(r)*100,{minDecimals:2,maxDecimals:2,locale:n})},E=(e,t,a,o,n)=>"weight"===t?a.formatNumber(Object(p.a)(e.cargos,e=>e.weight),{maxDecimals:n,minDecimals:n,locale:o}):"bunkers"===t?a.formatNumber(Object(y.a)(e,"foCost",0)+Object(y.a)(e,"flCost",0)+Object(y.a)(e,"doCost",0)+Object(y.a)(e,"dlCost",0),{maxDecimals:n,minDecimals:n,locale:o}):a.formatNumber(Object(y.a)(e,t,0),{maxDecimals:n,minDecimals:n,locale:o});function O(e){return parseFloat(e.toFixed(2))}const D={voyageResult:e=>O(e.voyageResult),bunkers:e=>O(e.dlCost+e.flCost+e.doCost+e.foCost),totalDays:e=>O(e.daysTotal),portCost:e=>O(e.portCost),TCE:e=>O(e.tcResultDay)},P={voyageResult:f.lang().model.voyageResult,bunkers:f.lang().model.bunkers,totalDays:f.lang().model.totalDays,portCost:f.lang().model.portCost,TCE:f.lang().model.tce};var k=a(214),S=a(323),I=a(473),N=a(261),j=a(470),L=a(414),w=a(38),F=a(35),R=a(123),A=(a(2305),a(2478)),$=a(2479);function H({voyageKey:e,voyageItems:t,userLocale:a,attributes:l,reactKeyPrefix:c,onClick:d,selectedVoyageItems:m}){const[p,y,v]=Object(r.a)([i.a.ISelectedAuditLogActions,i.a.Store,b.a.IInternationalization]),{common:g}=v.getLanguageFile(),[f,h]=Object(o.useState)("voyageResult"),[x,C]=Object(o.useState)("TCE"),T={box:{display:"flex",width:"100%"},spreadBox:{alignItems:"center"},selector:{minWidth:150},selectorTitle:{px:.5}},E=Object(o.useCallback)(()=>{var t;const{current:a,previous:o}=m;(null==a?void 0:a.voyage)&&(null==a?void 0:a.date)&&y.dispatch(p.setAction({key:e,tsModelType:u.a.voyage,fromDate:null!==(t=null==o?void 0:o.date)&&void 0!==t?t:void 0,toDate:a.date}))},[p,m,y,e]),O=Object(o.useMemo)(()=>function(e){const{voyageItems:t,barIteratee:a,lineIteratee:o,userLocale:n,barAttribute:l,lineAttribute:r,onClick:i}=e;return{series:[{name:P[l],type:"column",data:t.map(({voyage:e})=>{var t;return null!==(t=a(null!=e?e:new s.a({})))&&void 0!==t?t:0})},{name:P[r],type:"line",data:t.map(({voyage:e})=>{var t;return null!==(t=o(null!=e?e:new s.a({})))&&void 0!==t?t:0}),color:w.a.accents.priority6}],chart:{height:350,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(e,a,o)=>{o.dataPointIndex>0?i({previous:t[o.dataPointIndex-1],current:t[o.dataPointIndex]}):i({previous:null,current:null})},dataPointMouseEnter:e=>{e.path[0].style.cursor="pointer"}}},fill:{colors:[B]},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{theme:"dark",x:{formatter:e=>{var a;return Object(j.a)(null!==(a=t[e-1].date)&&void 0!==a?a:new Date,F.a.longLocalizedDate,{locale:n.localeConfig})}},y:{formatter:e=>(e=>R.a.formatNumberLocalized(e,n.isoCode))(e)}},stroke:{width:[0,2]},labels:t.map(({date:e})=>Object(j.a)(new Date(null!=e?e:0),F.a.shortLocalizedDate,{locale:n.localeConfig})),yaxis:[{},{opposite:!0}]}}({voyageItems:t,barIteratee:l[f],lineIteratee:l[x],userLocale:a,barAttribute:f,lineAttribute:x,onClick:d}),[l,f,x,d,a,t]),H=Object(o.useMemo)(()=>Object.keys(D).map(e=>P[e]),[]);return n.a.createElement(k.a,{container:!0},n.a.createElement(k.a,{container:!0,justifyContent:"flex-start",item:!0,xs:12},n.a.createElement(S.a,{component:"span",m:1,sx:T.box},n.a.createElement(k.a,{item:!0,container:!0,alignItems:"center",justifyContent:"flex-start"},n.a.createElement(A.a,{style:{color:w.a.accents.priority1}}),n.a.createElement(N.a,{reactKeyPrefix:c+"-attribute-bar-selector",options:H,label:g.bar,value:P[f],variant:"outlined",formControlProps:{fullWidth:!1},sx:T.selector,size:"small",inputLabelProps:{sx:T.selectorTitle},onInputChange:e=>{var t;const a=null!==(t=Object.keys(P).find(t=>P[t]===e))&&void 0!==t?t:"voyageResult";h(a)}}),n.a.createElement($.a,{style:{color:w.a.accents.priority6}}),n.a.createElement(N.a,{reactKeyPrefix:c+"-attribute-line-selector",options:H,label:g.line,value:P[x],variant:"outlined",size:"small",formControlProps:{fullWidth:!1},sx:T.selector,inputLabelProps:{sx:T.selectorTitle},onInputChange:e=>{var t;const a=null!==(t=Object.keys(P).find(t=>P[t]===e))&&void 0!==t?t:"voyageResult";C(a)}})),n.a.createElement(k.a,{item:!0,container:!0,alignItems:"flex-end",justifyContent:"flex-end"},n.a.createElement(I.a,{id:c+"-see-audit-log-btn",color:"primary",variant:"outlined",onClick:E,disabled:!m.current},g.seeAuditlog)))),n.a.createElement(k.a,{item:!0,xs:12},n.a.createElement(L.a,{elevation:0,reactKeyPrefix:c+"-voyage-analysis-chart",type:"line",height:400,options:O,series:O.series})))}function B({value:e}){return e>0?w.a.accents.priority5:w.a.accents.priority1}var K=a(5),V=a(130),M=a(695);function _({percent:e,difference:t,userLocale:a}){const o=Object(M.a)({root:{color:w.b.greenSea.primary}})(V.a),l=Object(M.a)({root:{color:w.b.sunsetRed.secondary[3]}})(V.a);return n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{container:!0,justifyContent:"space-between"},n.a.createElement(k.a,{item:!0,sm:12,md:9},n.a.createElement(V.a,{display:"inline",variant:"subtitle2",color:"textSecondary"},R.a.formatNumberLocalized(t,a.isoCode,{maxDecimals:2,minDecimals:2}))),n.a.createElement(k.a,{item:!0,sm:12,md:2},(e=>{const t=R.a.formatNumberLocalized(e,a.isoCode,{maxDecimals:1,minDecimals:0});return e<0?n.a.createElement(l,{display:"inline",variant:"subtitle2",color:"textSecondary"},t,"%"):e>0?n.a.createElement(o,{display:"inline",variant:"subtitle2",color:"textSecondary"},"+",t,"%"):n.a.createElement(n.a.Fragment,null," ")})(e))))}const U=(e,t,a,o,n)=>{const{common:l,model:r}=a.getLanguageFile(),i=[{content:e?l.revenue:r.cost,contentType:K.a.TEXT,className:o.topHeader}];return t&&i.push({content:r.template,contentType:K.a.TEXT,alignHeaderContent:K.c.RIGHT,className:o.topHeader}),i.push({content:n,contentType:K.a.TEXT,alignHeaderContent:K.c.RIGHT,className:o.topHeader},{content:l.current,contentType:K.a.TEXT,alignHeaderContent:K.c.RIGHT,className:o.topHeader}),t&&i.push({content:l.currentvstemplate,contentType:K.a.ELEMENT,alignHeaderContent:K.c.RIGHT,className:o.topHeader}),i.push({content:l.current+" vs. "+n,contentType:K.a.ELEMENT,alignHeaderContent:K.c.RIGHT,className:o.topHeader}),i},z=e=>null===e?0:e.portCost+e.canalCost+e.handlingCost+e.variousCost+e.freightCost+e.doCost+e.foCost+e.flCost+e.dlCost+e.ilohcTcIn+(e.voyageHeader?e.voyageHeader.foProfitLossHedge:0),q=e=>null===e?0:e.portCost+e.canalCost+e.variousCost+e.doCost+e.foCost+e.flCost+e.dlCost+e.ilohcTcOut,G=(e,t,a,o,l,r,i)=>{const s=l-o,c=l-(null!=a?a:0),u=o?s/Math.abs(o)*100:0,d=a?c/Math.abs(a)*100:0;return{id:e,content:[t,...null!==a?[a]:[],i.formatNumber(o,{minDecimals:2,maxDecimals:2}),i.formatNumber(l,{minDecimals:2,maxDecimals:2}),...null!==a?[{rawValue:c,content:n.a.createElement(_,{percent:d,difference:c,userLocale:r})}]:[],{rawValue:s,content:n.a.createElement(_,{percent:u,difference:s,userLocale:r})}],disableOnClickForRow:!0}},W=(e,t,a,o,n)=>{var l,r,i,s,c,u,d,m,p,y,v,g,b,f,h;const{common:x,model:C}=n.getLanguageFile();let T=0;const E=[],O=null!==(l=null==o?void 0:o.voyage)&&void 0!==l?l:null;return t.isTc?(E.push(G(T++,C.hire,O?null==O?void 0:O.freight:null,e.freight,t.freight,a,n)),E.push(G(T++,C.ballastBonus,null!==(r=null==O?void 0:O.ballastBonusRevenue)&&void 0!==r?r:null,e.ballastBonusRevenue,t.ballastBonusRevenue,a,n)),E.push(G(T++,C.cve,null!==(i=null==O?void 0:O.cveTcOut)&&void 0!==i?i:null,e.cveTcOut,t.cveTcOut,a,n)),E.push(G(T++,C.ilohc,null!==(s=null==O?void 0:O.ilohcTcOut)&&void 0!==s?s:null,e.ilohcTcOut,t.ilohcTcOut,a,n)),E.push(G(T++,x.various,null!==(c=null==O?void 0:O.variousRevenue)&&void 0!==c?c:null,e.variousRevenue,t.variousRevenue,a,n)),E.push(G(T++,C.grossHire,null!==(u=null==O?void 0:O.grossFreight)&&void 0!==u?u:null,e.grossFreight,t.grossFreight,a,n)),E.push(G(T++,C.commission,null!==(d=null==O?void 0:O.commission)&&void 0!==d?d:null,e.commission,t.commission,a,n)),E.push(G(T++,x.netHire,null!==(m=null==O?void 0:O.netFreight)&&void 0!==m?m:null,e.netFreight,t.netFreight,a,n))):(E.push(G(T++,C.freight,null!==(p=null==O?void 0:O.freight)&&void 0!==p?p:null,e.freight,t.freight,a,n)),E.push(G(T++,x.variousRevenue,null!==(y=null==O?void 0:O.variousRevenue)&&void 0!==y?y:null,e.variousRevenue,t.variousRevenue,a,n)),E.push(G(T++,C.demurrage,null!==(v=null==O?void 0:O.demurrage)&&void 0!==v?v:null,e.demurrage,t.demurrage,a,n)),E.push(G(T++,C.grossRevenue,null!==(g=null==O?void 0:O.grossFreight)&&void 0!==g?g:null,e.grossFreight,t.grossFreight,a,n)),E.push(G(T++,C.commission,null!==(b=null==O?void 0:O.commission)&&void 0!==b?b:null,e.commission,t.commission,a,n)),E.push(G(T++,C.despatch,null!==(f=null==O?void 0:O.despatch)&&void 0!==f?f:null,e.despatch,t.despatch,a,n)),E.push(G(T++,x.netRevenue,null!==(h=null==O?void 0:O.netFreight)&&void 0!==h?h:null,e.netFreight,t.netFreight,a,n))),E},Y=e=>{const t=e.daysTotal-e.daysOffhire;return e.daysOffhire&&t?e.tcResult/t:e.tcResultDay},X=(e,t,a,o,n)=>{var l,r,i,s,c,u,d,m,p,y,v,g,b,f,h,x,C,T,E,O,D,P,k,S,I,N,j,L,w,F,R,A,$,H,B,K,V;const{common:M,model:_}=n.getLanguageFile();let U=0;const W=[],X=null!==(l=null==o?void 0:o.voyage)&&void 0!==l?l:null;return W.push(G(U++,_.portCost,null!==(r=null==X?void 0:X.portCost)&&void 0!==r?r:null,null!==(i=null==e?void 0:e.portCost)&&void 0!==i?i:0,t.portCost,a,n)),W.push(G(U++,_.canalCost,null!==(s=null==X?void 0:X.canalCost)&&void 0!==s?s:null,null!==(c=null==e?void 0:e.canalCost)&&void 0!==c?c:0,t.canalCost,a,n)),W.push(G(U++,_.ilohc,null!==(u=null==X?void 0:X.ilohcTcIn)&&void 0!==u?u:null,null!==(d=null==e?void 0:e.ilohcTcIn)&&void 0!==d?d:0,t.ilohcTcIn,a,n)),!t.isTc&&W.push(G(U++,_.handlingCost,null!==(m=null==X?void 0:X.handlingCost)&&void 0!==m?m:null,null!==(p=null==e?void 0:e.handlingCost)&&void 0!==p?p:0,t.handlingCost,a,n)),W.push(G(U++,_.variousCost,null!==(y=null==X?void 0:X.variousCost)&&void 0!==y?y:null,null!==(v=null==e?void 0:e.variousCost)&&void 0!==v?v:0,t.variousCost,a,n)),!t.isTc&&W.push(G(U++,_.freightCost,null!==(g=null==X?void 0:X.freightCost)&&void 0!==g?g:null,null!==(b=null==e?void 0:e.freightCost)&&void 0!==b?b:0,t.freightCost,a,n)),W.push(G(U++,_.foCost,null!==(f=null==X?void 0:X.foCost)&&void 0!==f?f:null,null!==(h=null==e?void 0:e.foCost)&&void 0!==h?h:0,t.foCost,a,n)),W.push(G(U++,_.doCost,null!==(x=null==X?void 0:X.doCost)&&void 0!==x?x:null,null!==(C=null==e?void 0:e.doCost)&&void 0!==C?C:0,t.doCost,a,n)),W.push(G(U++,_.flCost,null!==(T=null==X?void 0:X.flCost)&&void 0!==T?T:null,null!==(E=null==e?void 0:e.flCost)&&void 0!==E?E:0,t.flCost,a,n)),W.push(G(U++,_.dlCost,null!==(O=null==X?void 0:X.dlCost)&&void 0!==O?O:null,null!==(D=null==e?void 0:e.dlCost)&&void 0!==D?D:0,t.dlCost,a,n)),W.push(G(U++,M.bunkerHedgeResult,null!==(k=null===(P=null==X?void 0:X.voyageHeader)||void 0===P?void 0:P.foProfitLossHedge)&&void 0!==k?k:0,0,null!==(I=null===(S=t.voyageHeader)||void 0===S?void 0:S.foProfitLossHedge)&&void 0!==I?I:0,a,n)),t.isTc?W.push(G(U++,_.totalCost,q(X),q(e),q(t),a,n)):W.push(G(U++,_.totalCost,z(X),z(e),z(t),a,n)),W.push(G(U++,_.contribution,null!==(N=null==X?void 0:X.tcResult)&&void 0!==N?N:null,null!==(j=null==e?void 0:e.tcResult)&&void 0!==j?j:0,t.tcResult,a,n)),W.push(G(U++,_.tcEquivalent,null!==(L=null==X?void 0:X.tcResultDay)&&void 0!==L?L:null,null!==(w=null==e?void 0:e.tcResultDay)&&void 0!==w?w:0,t.tcResultDay,a,n)),W.push(G(U++,_.tcEquivalentExcludingOffhireParanthesised,X?Y(X):null,e?Y(e):0,Y(t),a,n)),W.push(G(U++,_.hirePayable,null!==(F=null==X?void 0:X.tcHireNet)&&void 0!==F?F:null,null!==(R=null==e?void 0:e.tcHireNet)&&void 0!==R?R:0,t.tcHireNet,a,n)),W.push(G(U++,_.ballastBonus,null!==(A=null==X?void 0:X.ballastBonusNet)&&void 0!==A?A:null,null!==($=null==e?void 0:e.ballastBonusNet)&&void 0!==$?$:0,t.ballastBonusNet,a,n)),W.push(G(U++,_.cve,null!==(H=null==X?void 0:X.cveTcIn)&&void 0!==H?H:null,null!==(B=null==e?void 0:e.cveTcIn)&&void 0!==B?B:0,t.cveTcIn,a,n)),W.push(G(U++,_.result,null!==(K=null==X?void 0:X.voyageResult)&&void 0!==K?K:null,null!==(V=null==e?void 0:e.voyageResult)&&void 0!==V?V:0,t.voyageResult,a,n)),W};var Q=a(209);const J={greenText:{color:w.b.greenSea.primary},redText:{color:w.b.sunsetRed.secondary[3]}};function Z({reactKeyPrefix:e,voyage:t,snapshot:a,yesterday:o,userLocale:l}){var i,s;const[c]=Object(r.a)([b.a.IInternationalization]),u=c.getLanguageFile(),{model:d,common:m}=u,p=l.isoCode,y=(e,n)=>({current:E(t,e,c,p,n),snapDelta:a.key?C(t,a,e,c,p,n):"-",snapPercentage:a.key?T(t,a,e,c,p):"-",yesterdayDelta:o.key?C(t,o,e,c,p,n):"-",yesterdayPercentage:o.key?T(t,o,e,c,p):"-"}),v=null!==(s=null===(i=t.voyageCurrency)||void 0===i?void 0:i.currencyCode)&&void 0!==s?s:"",g=y("tcResultDay",0),f=y("tcResult",0),h=y("daysTotal",2),x=y("bunkers",0),O=y("portCost",0),D=y("weight",2),P=e=>parseFloat(e)<0?J.redText:parseFloat(e)>0?J.greenText:{},k=[{primaryTitle:{text:d.tce},primaryText:{text:`${g.current} ${v}`,tooltip:d.tceCurrent},tertiaryTitle:{text:[""+m.preliminary,""+g.snapDelta,g.snapPercentage+"%"],tooltip:"",sx:[{},P(g.snapDelta),P(g.snapDelta)]},tertiaryText:{text:[""+m.yesterday,""+g.yesterdayDelta,g.yesterdayPercentage+"%"],tooltip:"",sx:[{},P(g.yesterdayDelta),P(g.yesterdayDelta)]}},{primaryTitle:{text:d.contribution},primaryText:{text:`${f.current} ${v}`,tooltip:d.contributionCurrent},tertiaryTitle:{text:[""+m.preliminary,""+f.snapDelta,f.snapPercentage+"%"],tooltip:"",sx:[{},P(f.snapDelta),P(f.snapDelta)]},tertiaryText:{text:[""+m.yesterday,""+f.yesterdayDelta,f.yesterdayPercentage+"%"],tooltip:"",sx:[{},P(f.yesterdayDelta),P(f.yesterdayDelta)]}},{primaryTitle:{text:m.days},primaryText:{text:""+h.current,tooltip:d.daysCurrent},tertiaryTitle:{text:[""+m.preliminary,""+h.snapDelta,h.snapPercentage+"%"],tooltip:"",sx:[{},P(h.snapDelta),P(h.snapDelta)]},tertiaryText:{text:[""+m.yesterday,""+h.yesterdayDelta,h.yesterdayPercentage+"%"],tooltip:"",sx:[{},P(h.yesterdayDelta),P(h.yesterdayDelta)]}},{primaryTitle:{text:d.bunkers},primaryText:{text:`${x.current} ${v}`,tooltip:d.bunkersCurrent},tertiaryTitle:{text:[""+m.preliminary,""+x.snapDelta,x.snapPercentage+"%"],tooltip:"",sx:[{},P(x.snapDelta),P(x.snapDelta)]},tertiaryText:{text:[""+m.yesterday,""+x.yesterdayDelta,x.yesterdayPercentage+"%"],tooltip:"",sx:[{},P(x.yesterdayDelta),P(x.yesterdayDelta)]}},{primaryTitle:{text:d.portCost},primaryText:{text:`${O.current} ${v}`,tooltip:d.portCostCurrent},tertiaryTitle:{text:[""+m.preliminary,""+O.snapDelta,O.snapPercentage+"%"],tooltip:"",sx:[{},P(O.snapDelta),P(O.snapDelta)]},tertiaryText:{text:[""+m.yesterday,""+O.yesterdayDelta,O.yesterdayPercentage+"%"],tooltip:"",sx:[{},P(O.yesterdayDelta),P(O.yesterdayDelta)]}},{primaryTitle:{text:d.quantity},primaryText:{text:""+D.current,tooltip:d.quantityCurrent},tertiaryTitle:{text:[""+m.preliminary,""+D.snapDelta,D.snapPercentage+"%"],tooltip:d.quantityCurrent,sx:[{},P(D.snapDelta),P(D.snapDelta)]}}];return n.a.createElement(Q.a,{data:k,reactKeyPrefix:e+"tile-group",breakpoints:{xs:6,sm:4,md:4,lg:2,xl:2}})}var ee=a(2383);function te(){const e=n.a.createElement(ee.a,{variant:"rectangular",width:"calc(100% / 6 - 8px)",height:75,sx:{ml:1}});return n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{container:!0,item:!0,xs:12,alignContent:"flex-start"},n.a.createElement(ee.a,{variant:"rectangular",width:"calc(100% / 6)",height:72}),[...Array(5).keys()].map(()=>e)),n.a.createElement(k.a,{container:!0,item:!0,lg:8,md:12,spacing:2,alignContent:"flex-start"},n.a.createElement(k.a,{item:!0,xs:12},n.a.createElement(ee.a,{variant:"rectangular",width:"100%",height:300})),n.a.createElement(k.a,{item:!0,xs:12},n.a.createElement(ee.a,{variant:"rectangular",width:"100%",height:200})),n.a.createElement(k.a,{item:!0,xs:12},n.a.createElement(ee.a,{variant:"rectangular",width:"100%",height:200}))))}var ae=a(213),oe=a(187),ne=a(21),le=a(23);const re=Object(ae.a)(e=>Object(oe.a)({blankFiller:{border:"none",backgroundColor:e.palette.action.hover},topHeader:{paddingTop:11,fontWeight:"700",backgroundColor:e.palette.action.hover},rowHeader:{fontWeight:"700",borderLeft:"none",borderRight:"none",borderTop:"none",paddingTop:2,backgroundColor:e.palette.action.hover}}));function ie({reactKeyPrefix:e,voyage:t,userLocale:a}){var p,y,g,f,C,T;const[E,O]=Object(r.a)([b.a.IInternationalization,i.a.ITSModelActionsAsync]),{common:P,model:S}=E.getLanguageFile(),[I,j]=Object(o.useState)({current:null,previous:null}),L=Object(o.useRef)(!1),w=Object(o.useRef)(!1);Object(o.useEffect)(()=>{var e;(null===(e=t.voyageHeader)||void 0===e?void 0:e.key)&&(((e,t,a)=>{t.loadMultipleAction({query:["expression=voyageHeader="+e,"&sort=key(AS)"].join(" "),identifier:"VOYAGE_ANALYSIS_SNAPSHOTS_ID",fields:h,type:u.a.voyagesnapshot,overwriteKeysOnLoad:!0,callback:a})})(t.voyageHeader.key,O,()=>L.current=!0),O.loadSingleAction({fields:c.m,key:t.key,type:u.a.voyage}))},[]);const F=null!==(p=Object(le.a)(ne.a.getTSModelsBuilt,u.a.voyagesnapshot,h,"VOYAGE_ANALYSIS_SNAPSHOTS_ID"))&&void 0!==p?p:[],{preliminary:R,yesterday:A,voyages:$,all:B}=Object(o.useMemo)(()=>((e,t)=>{var a,o,n,l,r,i,s;const c=Object(d.a)(t,"key").reverse(),u=c.find(x),p=t.filter(e=>!x(e)).map(({voyage:e})=>e).filter(Boolean);return{preliminary:{voyage:null!==(a=null==u?void 0:u.voyage)&&void 0!==a?a:null,date:null!==(n=null===(o=null==u?void 0:u.voyage)||void 0===o?void 0:o.createdDate)&&void 0!==n?n:null,label:null==u?void 0:u.voyageSnapshotDesc,value:null==u?void 0:u.key},voyages:[...p.map(e=>{var t;return{voyage:e,date:null!==(t=e.createdDate)&&void 0!==t?t:new Date}}),{voyage:e,date:(null===(r=null===(l=e.voyageHeader)||void 0===l?void 0:l.voyageStatus)||void 0===r?void 0:r.statusTypeCode)===v.b.FINISHED?e.modifiedDate:new Date}],yesterday:{voyage:null!==(s=null===(i=Object(m.a)(c))||void 0===i?void 0:i.voyage)&&void 0!==s?s:null,date:null},all:t.map(e=>{var t,a;return{voyage:e.voyage,date:null!==(a=null===(t=e.voyage)||void 0===t?void 0:t.createdDate)&&void 0!==a?a:null,label:e.voyageSnapshotDesc,value:e.key}})}})(t,F),[F,t]),K=Object(o.useMemo)(()=>[R,...$].filter(e=>!!e.voyage),[R,$]),[V,M]=Object(o.useState)(R),_=re({}),z=null===(y=null==t?void 0:t.voyageHeader)||void 0===y?void 0:y.templateVoyageHeader;Object(o.useEffect)(()=>{L.current&&!w.current&&(M(R),w.current=!0)},[R]);const q=Object(o.useCallback)(({previous:e,current:t})=>{var a,o,n;(null===(a=I.current)||void 0===a?void 0:a.voyage)&&(null===(o=I.current.voyage)||void 0===o?void 0:o.key)===(null===(n=null==t?void 0:t.voyage)||void 0===n?void 0:n.key)?j({previous:null,current:null}):j({previous:e,current:t})},[I]),G=Object(o.useCallback)(e=>{const t=B.find(t=>t.value===e);t&&M(t)},[B]),Y=null!==(g=V.label)&&void 0!==g?g:P.preliminary,Q={content:" ",rawValue:" "},J=[{cellCustomisation:{className:_.blankFiller},content:z?Array(6).fill(Q):Array(4).fill(Q),id:9},{cellCustomisation:{className:_.rowHeader},content:[{content:S.cost,rawValue:S.cost},z?{content:S.template,rawValue:S.template}:null,{content:Y,rawValue:Y},{content:P.current,rawValue:P.current},z?{content:P.currentvstemplate,rawValue:P.currentvstemplate}:null,{content:P.current+" vs. "+Y,rawValue:P.current+" vs. "+Y}].filter(Boolean),id:10}],ee=Object(o.useMemo)(()=>n.a.createElement(H,{voyageKey:t.key,voyageItems:K,userLocale:a,attributes:{totalDays:D.totalDays,bunkers:D.bunkers,TCE:D.TCE,portCost:D.portCost,voyageResult:D.voyageResult},reactKeyPrefix:e,onClick:q,selectedVoyageItems:I}),[K,q,e,I,a,t.key]);return L.current&&w.current?n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{item:!0,sm:12},n.a.createElement(Z,{reactKeyPrefix:e+"voyage-analysis-kpi-tiles",voyage:t,snapshot:null!==(f=null==R?void 0:R.voyage)&&void 0!==f?f:new s.a({}),yesterday:null!==(C=A.voyage)&&void 0!==C?C:new s.a({}),userLocale:a})),n.a.createElement(k.a,{container:!0,item:!0,lg:8,md:12,spacing:2,alignContent:"flex-start"},n.a.createElement(k.a,{item:!0,sm:12},ee),n.a.createElement(k.a,{item:!0,sm:12},n.a.createElement(N.a,{reactKeyPrefix:e+"select-snapshot",options:B,variant:"outlined",formControlProps:{fullWidth:!1},label:S.snapshot,onInputChange:G,value:V.value,sx:{mb:2}}),n.a.createElement(l.a,{key:"voyage-analysis-table",headers:U(!0,!!z,E,_,Y),data:W(null!==(T=V.voyage)&&void 0!==T?T:new s.a({}),t,a,z,E).concat(J).concat(X(V.voyage,t,a,z,E)),reactKeyPrefix:e+"voyage-analysis-tables",userLocale:a,customisation:{disableToolbar:!0,responsive:!0,disableSorting:!0,disableCardWrapper:!0,disableHeaderStylePropagation:!0}})))):n.a.createElement(te,null)}},1919:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var o=a(2080),n=a(214),l=a(0),r=a.n(l),i=a(137),s=a(2074),c=a(1787),u=a(1921),d=a(852),m=a(2075),p=a(1280),y=(a(10),a(11),a(473)),v=a(2523),g=a(893),b=a(2532),f=a(6),h=a(135),x=a(3),C=(a(268),a(269),a(118),a(1381)),T=a(414),E=a(38),O=a(50),D=a(78);function P(e){const{voyage:t,userLocale:a}=e,[o]=Object(f.a)([x.a.IInternationalization]),n=Object(l.useMemo)(()=>function(e,t){var a;return[{name:null===(a=e.ballastPort)||void 0===a?void 0:a.portName,data:[0]},...e.partOfSchedule.sort(O.a.sortByPortCallSequence).flatMap(e=>{var a;return[{name:t.lang().model.daysAtSea,data:[e.daysAtSea]},{name:null===(a=e.port)||void 0===a?void 0:a.portName,data:[e.daysInPort]}]})]}(t,o),[o,t]),i=Object(l.useMemo)(()=>function(e,t,a){const o=function(e,t,a){return[{data:[]},...e.partOfSchedule.sort(O.a.sortByPortCallSequence).flatMap(e=>{const o=O.a.getEventLogDateFromPC(e,"ARR"),n=O.a.getEventLogDateFromPC(e,"DEP"),l=e.daysAtSea;return[{data:[{label:"",value:l?k(l,t,a):void 0}]},{data:[{label:t.lang().model.arrival,value:o?D.a.getFormattedDateString(o,a):void 0},{label:t.lang().model.departure,value:o?D.a.getFormattedDateString(n,a):void 0},{label:t.lang().model.daysInPort,value:k(e.daysInPort,t,a)}]}]})]}(e,t,a);return{annotations:{xaxis:S(e)},colors:Object(C.a)(Array(e.partOfSchedule.length+1).fill([E.b.greenSea.secondary[2],E.b.oceanMist.secondary[1]])),legend:{show:!1},chart:{stacked:!0},plotOptions:{bar:{horizontal:!0}},states:{hover:{filter:{type:"lighten",value:-.3}}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:[" "],labels:{formatter:function(e,o){return t.formatNumber(e,{maxDecimals:0,locale:a.isoCode})}}},dataLabels:{offsetX:0,enabled:!0,formatter:(e,o)=>k(e,t,a)},yaxis:{title:{text:void 0}},tooltip:{custom:e=>`\n                    <table>\n                        <tr><th colspan="2" style="text-align:start">${e.w.config.series[e.seriesIndex].name}</th></tr>\n                        ${o[e.seriesIndex].data.map(({label:e,value:t})=>`\n                                    <tr>\n                                        <td style="text-align:start">${e}</td>\n                                        <td style="padding-left:8px;font-weight:bold;text-align:end">${t}</td>\n                                    </tr>`).join("")}\n                    </table>\n                `},fill:{opacity:1}}}(t,o,a),[o,a,t]);return r.a.createElement(T.a,{elevation:0,reactKeyPrefix:"doc-voyage-voyage-days-chart",type:"bar",height:120,options:i,series:n})}function k(e,t,a){return t.formatNumber(e,{maxDecimals:2,minDecimals:2,locale:a.isoCode})}function S(e){let t=0;return e.partOfSchedule.map(e=>{var a,o;return t+=e.daysAtSea+e.daysInPort,function(e,t){return{x:t,strokeDashArray:0,borderWidth:0,label:{orientation:"horizontal",borderWidth:1,style:{color:"black"},text:e}}}(null!==(o=null===(a=e.port)||void 0===a?void 0:a.portName)&&void 0!==o?o:"",t-e.daysInPort/2)})}a(158);var I=a(213),N=a(187),j=a(5),L=a(67);const w=Object(I.a)(Object(N.a)(e=>({totals:{fontWeight:500}}))),F={maxDecimals:2,minDecimals:2};function R({voyage:e,userLocale:t,reactKeyPrefix:a}){const o=function(e,t){const[a]=Object(f.a)([x.a.IInternationalization]),{model:o,common:n}=a.lang(),l=[{label:o.ballast,days:e.daysBallast},{label:o.laden,days:e.daysLoaded},{label:n.canal,days:e.daysCanal},{label:o.loading,days:e.daysLoading},{label:o.discharging,days:e.daysDischarging},{label:n.extraInPort,days:e.daysExtraInPort},{label:o.daysWaiting,days:e.daysWaiting}],r=l.reduce((e,t)=>e+t.days,0);return l.push({label:n.total,days:r,className:t},{label:o.offhire,days:e.daysOffhire},{label:n.totalExcludingOffhire,days:r-e.daysOffhire,className:t}),l}(e,w({}).totals);return r.a.createElement(L.a,{headers:A(),data:(n=o,n.map((e,t)=>({content:[e.label,e.days],id:t,cellCustomisation:{className:e.className}}))),customisation:{disableSorting:!0},userLocale:t,reactKeyPrefix:a+"-voyage-days-table",hideToolbar:!0,hidePaper:!0});var n}function A(){const[e]=Object(f.a)([x.a.IInternationalization]),{common:t}=e.lang();return[{content:t.type,contentType:j.a.TEXT},{content:t.days,contentType:j.a.NUMBER,numberFormatOptions:F}]}function $(e){const{voyage:t,userLocale:a}=e,[o]=Object(f.a)([x.a.IInternationalization]),n=Object(l.useMemo)(()=>function(e,t,a){const o=K(a,e);return{chart:{height:400,type:"rangeBar",toolbar:{show:!1},zoom:{enabled:!1}},legend:{show:!1},plotOptions:{bar:{barHeight:"100%",columnWidth:"100%",horizontal:!1,distributed:!0}},tooltip:{custom:a=>`\n                    <table>\n                        <tr><th colspan="2" style="text-align:start">${o[a.dataPointIndex].name}</th></tr>\n                            ${o[a.dataPointIndex].breakdown.map(a=>`\n                                <tr>\n                                    <td>${a.name}</td>\n                                    <td style="padding-left:8px;font-weight:bold;text-align:end">${e.formatNumber(a.value,{maxDecimals:0,locale:t.isoCode})}</td>\n                                </tr>`).join("")}\n                    </table>\n                `},fill:{colors:[B]},dataLabels:{offsetX:0,enabled:!0,formatter:function(a,o){const n=o.w.globals.seriesRangeStart[0][o.dataPointIndex],l=a>0&&[0,4,6].includes(o.dataPointIndex)?Number(a):-(Number(a)-n);return H(e,t,l)}},markers:{size:6},xaxis:{axisTicks:{show:!0},tooltip:{enabled:!1}},yaxis:{labels:{formatter:a=>H(e,t,a)}}}}(o,a,t),[o,a,t]),i=Object(l.useMemo)(()=>function(e,t){return[{data:K(e,t).map(e=>({x:e.name,y:e.seriesDataPoint}))}]}(t,o),[o,t]);return r.a.createElement(T.a,{elevation:0,reactKeyPrefix:"doc-voyage-voyage-result-chart",type:"rangeBar",height:400,options:n,series:i})}function H(e,t,a){return 0===a?"":Math.abs(a)>=1e5?e.formatNumber(a/1e3,{maxDecimals:Math.abs(a)>=1e5?0:2,locale:t.isoCode})+"k":e.formatNumber(a,{maxDecimals:0,locale:t.isoCode})}function B({dataPointIndex:e}){switch(e){case 0:case 4:return E.a.accents.priority5;case 1:case 2:case 3:case 5:return E.a.accents.priority1;case 6:return E.a.accents.priority4;default:return"#000000"}}function K(e,t){const a=e.isTc,o=e.portCost+e.canalCost,n=e.ilohcTcIn+e.handlingCost+e.freightCost+e.variousCost,l=e.foCost+e.doCost+e.flCost+e.dlCost,r=e.tcResult,i=e.tcHireNet+e.ballastBonusNet+e.runningCostPerDay+e.cveTcIn,s=e.voyageResult,c=e.netFreight,u=[{name:t.lang().common.netRevenue,seriesDataPoint:c>0?[0,c]:[c,0],breakdown:[{name:a?t.lang().model.hire:t.lang().model.freight,value:e.freight},...a?[{name:t.lang().model.ballastBonus,value:e.ballastBonusRevenue},{name:t.lang().model.cve,value:e.cveTcOut},{name:t.lang().model.ilohc,value:e.ilohcTcOut},{name:t.lang().common.various,value:e.variousRevenue}]:[{name:t.lang().common.various,value:e.variousRevenue},{name:t.lang().model.demurrage,value:e.demurrage}],{name:a?t.lang().model.grossHire:t.lang().model.grossRevenue,value:e.grossFreight},{name:t.lang().model.commission,value:e.commission},...a?[]:[{name:t.lang().model.despatch,value:e.despatch}]]}];return u.push({name:t.lang().model.portCost,seriesDataPoint:[u[u.length-1].seriesDataPoint[1]-o,u[u.length-1].seriesDataPoint[1]],breakdown:[{name:t.lang().model.portCost,value:e.portCost},{name:t.lang().model.canalCost,value:e.canalCost}]}),u.push({name:t.lang().common.otherCost,seriesDataPoint:[u[u.length-1].seriesDataPoint[0]-n,u[u.length-1].seriesDataPoint[0]],breakdown:[{name:t.lang().model.ilohc,value:e.ilohcTcIn},{name:t.lang().model.handlingCost,value:e.handlingCost},{name:t.lang().common.various,value:e.variousCost},{name:t.lang().model.freightCost,value:e.freightCost}]}),u.push({name:t.lang().model.bunkers,seriesDataPoint:[u[u.length-1].seriesDataPoint[0]-l,u[u.length-1].seriesDataPoint[0]],breakdown:[{name:t.lang().model.foCost,value:e.foCost},{name:t.lang().model.flCost,value:e.flCost},{name:t.lang().model.mgoCost,value:e.doCost},{name:t.lang().model.lsmgoCost,value:e.dlCost}]}),u.push({name:t.lang().model.contribution,seriesDataPoint:r>0?[0,r]:[r,0],breakdown:[{name:t.lang().model.totalContribution,value:r}]}),u.push({name:t.lang().model.hire,seriesDataPoint:0!==u[u.length-1].seriesDataPoint[0]?[u[u.length-1].seriesDataPoint[0]-i,u[u.length-1].seriesDataPoint[0]]:[u[u.length-1].seriesDataPoint[1]-i,u[u.length-1].seriesDataPoint[1]],breakdown:[{name:t.lang().model.hirePayable,value:e.tcHireNet},{name:t.lang().model.ballastBonus,value:e.ballastBonusNet},{name:t.lang().model.operatingCost,value:e.runningCostPerDay},{name:t.lang().model.cve,value:e.cveTcIn}]}),u.push({name:t.lang().model.result,seriesDataPoint:s>0?[0,s]:[s,0],breakdown:[{name:t.lang().common.totalResult,value:s}]}),u}function V(e){const{voyage:t,reactKeyPrefix:a,isBreakdownOpen:o,userLocale:i}=e,[s]=Object(f.a)([x.a.IInternationalization]),[c,u]=Object(l.useState)(0),d=Object(l.useMemo)(()=>[{id:"result",label:s.lang().model.result,content:()=>r.a.createElement($,{userLocale:i,voyage:t})},{id:"days",label:s.lang().common.days,content:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{userLocale:i,voyage:t}),r.a.createElement(R,{userLocale:i,voyage:t,reactKeyPrefix:a}))}],[s,a,i,t]),m=Object(l.useMemo)(()=>d.map((e,t)=>r.a.createElement(y.a,{disableElevation:!0,onClick:()=>u(t),variant:c===t?"contained":"outlined",sx:{minWidth:"8rem"},id:a+Object(h.b)(e.label)+"-btn",key:Object(h.b)(e.label)+"-btn"},e.label)),[a,c,d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(n.a,{item:!0,xs:12},r.a.createElement(v.a,{in:o},r.a.createElement(g.a,{sx:{mb:2}},r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{color:"primary","aria-label":"outlined primary button group",sx:{display:"flex",justifyContent:"center",pt:1}},m),d[c].content())))))}var M=a(209),_=a(60);function U(e){var t,a;const{voyage:o,reactKeyPrefix:n,userLocale:l,isFullScreen:i}=e,[s]=Object(f.a)([x.a.IInternationalization]),c=s.getLanguageFile(),{model:u,common:d,menu:m,voyages:p}=c,y=l.isoCode,v=s.formatNumber(o.daysBallast,{maxDecimals:2,minDecimals:2,locale:y}),g=s.formatNumber(o.milesBallast,{maxDecimals:0,minDecimals:0,locale:y}),b=null!==(a=null===(t=o.voyageCurrency)||void 0===t?void 0:t.currencyCode)&&void 0!==a?a:"",h=s.formatNumber(o.co2Ballast,{maxDecimals:2,minDecimals:2,locale:y}),C=s.formatNumber(o.co2Laden,{maxDecimals:2,minDecimals:2,locale:y}),T=s.formatNumber(o.daysTotal,{maxDecimals:2,minDecimals:2,locale:y}),E=s.formatNumber(o.eeoi,{maxDecimals:2,minDecimals:2,locale:y}),O=s.formatNumber(o.handlingCost,{maxDecimals:0,minDecimals:0,locale:y}),D=s.formatNumber(o.daysLoaded,{maxDecimals:2,minDecimals:2,locale:y}),P=s.formatNumber(o.milesLoaded,{maxDecimals:0,minDecimals:0,locale:y}),k=s.formatNumber(o.portCost,{maxDecimals:0,minDecimals:0,locale:y}),S=s.formatNumber(o.voyageResult,{maxDecimals:0,locale:y}),I=s.formatNumber(o.tcResultDay,{maxDecimals:0,locale:y}),N=s.formatNumber(o.tcResult,{maxDecimals:0,locale:y}),j=s.formatNumber(o.ballastEuEtsCost,{maxDecimals:2,minDecimals:2,locale:y}),L=s.formatNumber(o.ladenEuEtsCost,{maxDecimals:2,minDecimals:2,locale:y}),w=s.formatNumber(o.ladenEuEtsCost+o.ballastEuEtsCost,{maxDecimals:2,minDecimals:2,locale:y}),F=s.formatNumber(_.a.getTceExlOffhire(o),{maxDecimals:0}),R=s.formatNumber(o.daysOffhire,{minDecimals:2,maxDecimals:2}),A=o.daysOffhire>0,$=s.formatNumber(o.daysLoading+o.daysDischarging+o.daysExtraInPort+o.daysWaiting,{maxDecimals:2,minDecimals:2,locale:y}),H=s.formatNumber(o.milesBallast+o.milesLoaded,{maxDecimals:0,minDecimals:0,locale:y}),B=s.formatNumber(o.dlConsumption+o.flConsumption+o.doConsumption+o.foConsumption,{maxDecimals:0,locale:y}),K=s.formatNumber(o.ballastConsumption,{maxDecimals:0,minDecimals:0,locale:y}),V=s.formatNumber(o.ladenConsumption,{maxDecimals:0,minDecimals:0,locale:y}),U=[];A?U.push({primaryTitle:{text:u.tce},primaryText:{text:`${I} ${b}`,tooltip:u.tcEquivalent},secondaryTitle:{text:p.exclOffhire},secondaryText:{text:`${F} ${b}`,tooltip:u.tcEquivalentExcludingOffhire},tertiaryTitle:{text:u.contribution},tertiaryText:{text:`${N} ${b}`,tooltip:u.totalContribution},quaternaryTitle:{text:u.result},quaternaryText:{text:`${S} ${b}`,tooltip:u.tceAndVoyageResult}},{primaryTitle:{text:u.daysTotal},primaryText:{text:`${T} ${d.daysLowercase}`,tooltip:u.daysTotal},secondaryTitle:{text:m.offhire},secondaryText:{text:`${R} ${d.daysLowercase}`,tooltip:u.offhireDays},tertiaryTitle:{text:u.ballast},tertiaryText:{text:`${v} ${d.daysLowercase}`,tooltip:`${u.ballast} ${d.days}`},quaternaryTitle:{text:u.laden},quaternaryText:{text:`${D} ${d.daysLowercase}`,tooltip:`${u.laden} ${d.days}`}}):U.push({primaryTitle:{text:u.tce},primaryText:{text:`${I} ${b}`,tooltip:u.tcEquivalent},secondaryTitle:{text:u.contribution},secondaryText:{text:`${N} ${b}`,tooltip:u.totalContribution},tertiaryTitle:{text:u.result},tertiaryText:{text:`${S} ${b}`,tooltip:u.tceAndVoyageResult}},{primaryTitle:{text:u.daysTotal},primaryText:{text:`${T} ${d.daysLowercase}`,tooltip:u.daysTotal},secondaryTitle:{text:u.ballast},secondaryText:{text:`${v} ${d.daysLowercase}`,tooltip:`${u.ballast} ${d.days}`},tertiaryTitle:{text:u.laden},tertiaryText:{text:`${D} ${d.daysLowercase}`,tooltip:`${u.laden} ${d.days}`}}),U.push({primaryTitle:{text:u.distanceTotal},primaryText:{text:`${H} ${d.nm}`,tooltip:""},secondaryTitle:{text:u.ballast},secondaryText:{text:`${g} ${d.nm}`,tooltip:u.ballastDistance},tertiaryTitle:{text:u.laden},tertiaryText:{text:`${P} ${d.nm}`,tooltip:u.ladenDistance}},{primaryTitle:{text:u.bunkerConsumption},primaryText:{text:`${B} ${d.mt}`,tooltip:u.totalConsumption},secondaryTitle:{text:u.ballast},secondaryText:{text:`${K} ${d.mt}`,tooltip:`${u.ballast} ${u.bunkerConsumption}`},tertiaryTitle:{text:u.laden},tertiaryText:{text:`${V} ${d.mt}`,tooltip:`${u.laden} ${u.bunkerConsumption}`}},{primaryTitle:{text:u.eeoi},primaryText:{text:`${E} ${d.eeoiUnit}`,tooltip:u.eeoiIndex},secondaryTitle:{text:`${u.co2} ${u.ballast}`},secondaryText:{text:`${h} ${d.mt}`,tooltip:u.totalBallastEmission},tertiaryTitle:{text:`${u.co2} ${u.laden}`},tertiaryText:{text:`${C} ${d.mt}`,tooltip:u.totalLadenEmission}});const z={primaryTitle:{text:u.daysInPort},primaryText:{text:`${$} ${d.daysLowercase}`,tooltip:""},secondaryTitle:{text:u.portCost},secondaryText:{text:`${k} ${b}`,tooltip:u.portCost},tertiaryTitle:{text:u.handlingCost},tertiaryText:{text:`${O} ${b}`,tooltip:u.handlingCost}};return i?U.push({primaryTitle:{text:u.euEtsCost},primaryText:{text:`${w} ${b}`,tooltip:u.euEtsCostTooltip(!0,!0)},secondaryTitle:{text:u.ballast},secondaryText:{text:`${j} ${b}`,tooltip:u.euEtsCostTooltip(!0,!1)},tertiaryTitle:{text:u.laden},tertiaryText:{text:`${L} ${b}`,tooltip:u.euEtsCostTooltip(!1,!1)}},z):U.push(z),r.a.createElement(M.a,{data:U,reactKeyPrefix:n+"tile-group",breakpoints:{xs:6,sm:4,md:4,lg:2,xl:2},sx:{flexBasis:{md:100/U.length+"%"},maxWidth:{md:100/U.length+"%"}}})}var z=a(2007);const q=e=>{var t;const{voyage:a,userLocale:l,user:y,reactKeyPrefix:v,restrictedAreas:g,overlappingVoyageColourMap:b,refreshFas:f,isBreakdownOpen:h,setSelectedOverviewCargo:x,isFullscreen:C,toggleDateWarningModal:T,showLargeMap:E,setShowLargeMap:O,selectedRoutes:D,showAlternatives:P,lastSelectedRoute:k,onClickMapRoute:S}=e,I=(null===(t=a.tcs)||void 0===t?void 0:t.length)>0,N=Object(o.a)(i.a.breakpoints.down("sm"),{noSsr:!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(n.a,{item:!0,sm:12},r.a.createElement(U,{voyage:a,reactKeyPrefix:v,userLocale:l,isFullScreen:C})),r.a.createElement(n.a,{container:!0,spacing:2,item:!0,lg:C?6:8,sm:6,xs:12,alignContent:"flex-start"},r.a.createElement(n.a,{item:!0,sm:12},r.a.createElement(V,{voyage:a,isBreakdownOpen:h,reactKeyPrefix:v+"-summary",userLocale:l})),!E&&r.a.createElement(n.a,{item:!0,lg:6,md:12,sx:{mt:-2}},r.a.createElement(n.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(z.a,{reactKeyPrefix:v+"-voyage-overview-cargo-list",voyage:a,setSelectedOverviewCargo:x})),r.a.createElement(n.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(p.b,{reactKeyPrefix:v+"voyage-overview-vessel",voyage:a,userLocale:l,user:y})),r.a.createElement(n.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(s.a,{reactKeyPrefix:v+"-speed-and-consumption",voyage:a,userLocale:l})),r.a.createElement(n.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(c.a,{reactKeyPrefix:v+"comment",voyage:a,userLocale:l,user:y}))),r.a.createElement(n.a,{item:!0,lg:E?12:6,md:12,sx:{mt:-2,mb:2}},!E&&r.a.createElement(r.a.Fragment,null,I?r.a.createElement(m.a,{reactKeyPrefix:v+"tc-contract",voyage:a,userLocale:l,user:y}):r.a.createElement(r.a.Fragment,null,r.a.createElement(n.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(u.a,{reactKeyPrefix:v+"performance-cargo",voyage:a,userLocale:l,refreshFas:f,setSelectedOverviewCargo:x,toggleDateWarningModal:T,user:y})))),r.a.createElement(n.a,{item:!0,xs:12,sx:{mb:2}},r.a.createElement(d.a,{restrictedAreas:g,showLargeMap:E,setShowLargeMap:O,calculateHeight:E,voyage:a,mapId:"voyage_map",worldCopyJump:!0,reactKeyPrefix:v+"-map",hideMapControls:N,enableZoom:!0,overlappingVoyageColourMap:b,userLocale:l,showRoutingPoints:!0,selectedRoutes:D,showAlternatives:P,lastSelectedKey:k,onClickMapRoute:S})))))}},1952:function(e,t,a){"use strict";a.d(t,"a",(function(){return M})),a.d(t,"b",(function(){return _}));a(59),a(10),a(11);var o=a(214),n=a(0),l=a.n(n),r=a(61),i=a(180),s=a(1),c=a(24),u=a(14),d=a(4),m=a(3);const p=u.a.get(m.a.IInternationalization),{common:y,model:v}=p.lang(),g=()=>{const e={field:"invoicingStatus.key",filterGroupCode:"VOYAGE_BUNKER_TRANSACTIONS_FILTER_GROUP_CODE",operator:d.c.IN,type:d.d.STRING};return[{label:y.status,filterObjectValuePath:"key",typeaheadProps:{type:s.a.statustype,objectPaths:["statusTypeDesc"],query:"filter=statusClass.statusClassCode(EQ)INV",shouldPreload:!0},filters:[e]}]},b=()=>{const e={field:"account.key",filterGroupCode:"VOYAGE_BUNKER_TRANSACTIONS_FILTER_GROUP_CODE",operator:d.c.IN,type:d.d.STRING};return[{filterObjectValuePath:"key",typeaheadProps:{label:v.account,type:s.a.account,objectPaths:["accountDesc"],query:"filter=accountCode(IN)(FOS,DOS,DOC,FOC,FLS,DLS,DLC,FLC)"},filters:[e]}]},f=l.a.memo(({reactKeyPrefix:e})=>{const t=u.a.get(m.a.IInternationalization),{common:a,model:o}=t.lang();return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{reactKeyPrefix:e+"-account",configs:b(),type:d.b.TYPEAHEAD,label:o.account,clearOnMount:!1,filterCode:"VOYAGE_BUNKER_TRANSACTIONS_FILTER_GROUP_CODE_ACCOUNT"}),l.a.createElement(c.a,{reactKeyPrefix:e+"-status",configs:g(),type:d.b.TYPEAHEAD,label:a.status,clearOnMount:!1,filterCode:"VOYAGE_BUNKER_TRANSACTIONS_FILTER_GROUP_CODE_STATUS"}))});a(93);var h=a(5),x=a(92),C=a(6),T=a(87),E=a(105),O=a(40),D=a(201),P=a(35);const[k]=Object(C.a)([m.a.IInternationalization]),{model:S,common:I}=k.getLanguageFile(),N=[{content:S.documentNo,contentType:h.a.TEXT},{content:I.date,contentType:h.a.DATE,dateTimeFormatOptions:P.a.shortLocalizedDate},{content:S.account,contentType:h.a.TEXT},{content:I.description,contentType:h.a.TEXT},{content:S.quantity,contentType:h.a.NUMBER,numberFormatOptions:x.b.format2},{content:S.unitPrice,contentType:h.a.NUMBER,numberFormatOptions:x.b.format2},{content:I.amount,contentType:h.a.NUMBER,numberFormatOptions:x.b.format2},{content:I.status,contentType:h.a.ELEMENT}],j=Object(T.a)(["documentNo","documentDate","account.accountDesc","invoicingStatus.statusTypeDesc","documentLines.unitPrice","documentLines.documentLineText","documentLines.quantity","documentLines.documentAmount"]);function L(e){var t,a,o;const{documentDate:n,account:r,invoicingStatus:i,documentLines:c,documentNo:u}=e,{documentLineText:d,quantity:m,documentAmount:p,unitPrice:y}=null!==(t=c[0])&&void 0!==t?t:new D.a({}),v=null!==(a=null==i?void 0:i.statusTypeDesc)&&void 0!==a?a:"",g=l.a.createElement(O.a,{label:v,priority:E.a.getStatusPriority(v,s.a.document)});return[u,n,null!==(o=null==r?void 0:r.accountDesc)&&void 0!==o?o:"",d,m,y,p,{content:g,rawValue:v}]}var w=a(2517),F=a(315),R=a(47),A=a(21),$=a(123);const H={fontSize:"unset",color:"black",fontWeight:"bold"},B=Object(R.a)(e=>{var t;return{document:null!==(t=A.a.getTSModelsBuilt(e,s.a.document,j,M))&&void 0!==t?t:[]}},e=>{const{i:t,headers:a,userLocale:o}=e,{document:r}=e.state,{common:i}=t.getLanguageFile(),s=Object(n.useMemo)(()=>Object(F.sum)(r.map(e=>Object(F.sum)(e.documentLines.map(e=>e.documentAmount)))),[r]),c=a.findIndex(e=>e.content===i.amount),u=$.a.formatNumberLocalized(s,o.isoCode,{maxDecimals:2,minDecimals:2});return l.a.createElement(l.a.Fragment,null,!!c&&l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{colSpan:c,sx:H},i.totalAmount),l.a.createElement(w.a,{colSpan:1,align:"right",sx:H},u),l.a.createElement(w.a,{colSpan:1,sx:H})))});var K=a(593),V=function(e,t,a,o){return new(a||(a=Promise))((function(n,l){function r(e){try{s(o.next(e))}catch(e){l(e)}}function i(e){try{s(o.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,i)}s((o=o.apply(e,t||[])).next())}))};const M="VOYAGE_RELATED_BUNKER_TRANSACTIONS_LIST_ID",_=({reactKeyPrefix:e,voyageKey:t,i:a,onToggleBunkerTransactions:c,onClick:u,pendingLinks:d,userLocale:m})=>{const{menu:p}=a.getLanguageFile(),[y,v]=Object(n.useState)(!1),g=Object(n.useCallback)(e=>V(void 0,void 0,void 0,(function*(){e&&(yield c(e)),v(e)})),[c]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{item:!0,xs:12},l.a.createElement(i.a,{reactKeyPrefix:e+"-bunker-transactions",title:p.bunkerTransactions,defaultCollapsed:!0,onChange:g,headerElements:d,headerElementsPosition:"right"},y&&l.a.createElement(r.a,{getColSpec:L,tsmodelType:s.a.document,fields:j,listId:M,reactKeyPrefix:e+"-bunker-transactions-list",tableHeaders:N,queryStr:"filter=account.accountCode(IN)(FOS,DOS,DOC,FOC,FLS,DLS,DLC,FLC)&filter=documentLines.voyage.key(EQ)"+t,onClickItem:u,quickFiltersGroupCode:"VOYAGE_BUNKER_TRANSACTIONS_FILTER_GROUP_CODE",quickFilters:l.a.createElement(f,{reactKeyPrefix:e+"-bunker-transactions-list-filters"}),footer:l.a.createElement(B,{i:a,headers:N,userLocale:m}),defaultSorts:Object(K.a)(K.b.BUNKER_TRANSACTION)}))))}},2071:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));a(10),a(11);var o=a(214),n=a(0),l=a.n(n),r=a(61),i=a(180),s=a(1),c=a(100),u=a.n(c),d=a(5),m=a(3),p=a(6),y=a(40),v=a(105),g=a(87);const[b]=Object(p.a)([m.a.IInternationalization]),{model:f,common:h}=b.getLanguageFile(),x=[{content:f.port,contentType:d.a.TEXT},{content:h.reason,contentType:d.a.TEXT},{content:h.started,contentType:d.a.DATE},{content:h.ended,contentType:d.a.DATE},{content:h.days,contentType:d.a.NUMBER,numberFormatOptions:{minDecimals:5,maxDecimals:5}},{content:h.status,contentType:d.a.ELEMENT}],C=Object(g.a)(["port.portName","reasonForOffhire.reasonForOffhireDesc","offhireStartDate","offhireEndDate","offhireDays","status.statusTypeDesc"]);function T(e){var t,a,o;const{port:n,reasonForOffhire:r,offhireStartDate:i,offhireEndDate:c,offhireDays:u,status:d}=e,{getStatusPriority:m}=v.a,p=null!==(t=null==d?void 0:d.statusTypeDesc)&&void 0!==t?t:"",g=d?l.a.createElement(y.a,{label:p,priority:m(p,s.a.offhire)}):null;return[null!==(a=null==n?void 0:n.portName)&&void 0!==a?a:"",null!==(o=null==r?void 0:r.reasonForOffhireDesc)&&void 0!==o?o:"",i,c,u,{content:g,rawValue:p}]}var E=a(66),O=a(30),D=a(593);const P=({reactKeyPrefix:e,voyageHeaderKey:t,onClick:a,i:c,user:d,onToggleCreateOffhireModal:m})=>{const{model:p,common:y}=c.getLanguageFile(),[v,g]=Object(n.useState)(!1),b=Object(E.a)([O.a.OffhirePOST],d),f=Object(n.useMemo)(()=>[{disabled:!b,icon:u.a,iconButtonProps:{color:"primary","aria-label":y.create},label:y.create,onClick:m,reactKeyPrefix:e+"-create-offhire-action"}],[y.create,b,m,e]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{item:!0,xs:12},l.a.createElement(i.a,{reactKeyPrefix:e+"-offhire",title:p.offhire,defaultCollapsed:!0,onChange:g},v&&l.a.createElement(r.a,{getColSpec:T,tsmodelType:s.a.offhire,fields:C,listId:"VOYAGE_RELATED_OFFHIRE_LIST_ID",reactKeyPrefix:e+"-offhire-list",tableHeaders:x,queryStr:"filter=voyageHeader.key(EQ)"+t,onClickItem:a,primaryActions:f,tableCustomisation:{disableToolbar:!1},defaultSorts:Object(D.a)(D.b.OFFHIRE)}))))}},2072:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));a(10),a(11);var o=a(214),n=a(0),l=a.n(n),r=a(61),i=a(180),s=a(1),c=a(66),u=a(30),d=a(100),m=a.n(d),p=a(5),y=a(92),v=a(6),g=a(87),b=a(3),f=a(105),h=a(40),x=a(983);const[C]=Object(v.a)([b.a.IInternationalization]),{model:T,common:E}=C.getLanguageFile(),O=[{content:T.charterer,contentType:p.a.TEXT},{content:T.ports,contentType:p.a.TEXT,textLengthFactor:2},{content:T.demurrage,contentType:p.a.NUMBER,numberFormatOptions:y.b.format0},{content:T.despatch,contentType:p.a.NUMBER,numberFormatOptions:y.b.format0},{content:T.currency,contentType:p.a.TEXT},{content:E.status,contentType:p.a.ELEMENT}],D=Object(g.a)(["charterer.businessPartnerName","cargoPorts.reasonForCall.reasonForCallDesc","cargoPorts.port.portName","demurrage","despatch","currency.currencyCode","status.statusTypeDesc"]);function P(e){var t,a,o;const{charterer:n,demurrage:r,despatch:i,currency:c,cargoPorts:u,status:d}=e,m=Object(x.a)(u.map(({port:e,reasonForCall:t})=>{var a,o;return`${null!==(a=null==e?void 0:e.portName)&&void 0!==a?a:""} (${null!==(o=null==t?void 0:t.reasonForCallDesc)&&void 0!==o?o:""})`}).filter(Boolean)),p=null!==(t=null==d?void 0:d.statusTypeDesc)&&void 0!==t?t:"",v=p?l.a.createElement(h.a,{label:p,priority:f.a.getStatusPriority(p,s.a.laytimecalculation)}):null;return[null!==(a=null==n?void 0:n.businessPartnerName)&&void 0!==a?a:"",y.a.getMultipleString(m,2),r,i,null!==(o=null==c?void 0:c.currencyCode)&&void 0!==o?o:"",{content:v,rawValue:p}]}var k=a(593);const S=({reactKeyPrefix:e,voyageKey:t,onClick:a,i:d,user:p,onToggleCreateLaytimeCalculationModal:y})=>{const{model:v,common:g}=d.getLanguageFile(),[b,f]=Object(n.useState)(!1),h=Object(c.a)([u.a.LaytimeCalculationPOST],p),x=Object(n.useMemo)(()=>[{disabled:!h,icon:m.a,iconButtonProps:{color:"primary","aria-label":g.create},label:g.create,onClick:y,reactKeyPrefix:e+"-create-laytime-calculation-action"}],[g.create,h,y,e]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{item:!0,xs:12},l.a.createElement(i.a,{reactKeyPrefix:e+"-laytimeCalculations",title:v.laytimeCalculation,defaultCollapsed:!0,onChange:f},b&&l.a.createElement(r.a,{getColSpec:P,tsmodelType:s.a.laytimecalculation,fields:D,listId:"VOYAGE_RELATED_LAYTIME_CALCULATION_LIST_ID",reactKeyPrefix:e+"-laytime-calculation-list",tableHeaders:O,queryStr:"filter=voyage(EQ)"+t,onClickItem:a,primaryActions:x,tableCustomisation:{disableToolbar:!1},defaultSorts:Object(k.a)(k.b.LAYTIME_CALCULATION)}))))}},2305:function(e,t,a){}}]);