(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1785:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(10),a(11);var n=a(214),o=a(0),r=a.n(o),c=a(1881),i=a(1920),l=a(1902),s=a(1919);function u(e){const{voyage:t,userLocale:a,user:u,reactKeyPrefix:d,restrictedAreas:m,overlappingVoyageColourMap:y,onClickOverlappingChip:p,onClickPorts:b,toggleDateWarningModal:C,openedFromFas:E,refreshFas:g,isFullscreen:P}=e,[O,T]=Object(o.useState)(!1),[I,f]=Object(o.useState)(!1),[v,S]=Object(o.useState)(t.cargos[0]),[N,_]=Object(o.useState)(!1),[A,k]=Object(o.useState)({}),[L,R]=Object(o.useState)(!1),[D,h]=Object(o.useState)(),[F,j]=Object(o.useState)(),G=Object(o.useCallback)(e=>{e?(O||f(!1),T(!O)):(I||T(!1),f(!I))},[I,O]),V=Object(o.useCallback)((e,t,a)=>{k(n=>Object.assign(Object.assign({},n),{[a]:{route:e,tceDiff:t}})),h(e.key)},[]),x=Object(o.useCallback)((e,t)=>j({routeKey:e,pcKey:t}),[]);return r.a.createElement(n.a,{container:!0,spacing:2,marginBottom:2},!I&&r.a.createElement(s.a,Object.assign({},e,{isBreakdownOpen:O,setSelectedOverviewCargo:S,toggleDateWarningModal:C,user:u,userLocale:a,showLargeMap:N,setShowLargeMap:_,selectedRoutes:A,showAlternatives:L,lastSelectedRoute:D,onClickMapRoute:x})),I&&r.a.createElement(l.a,Object.assign({},e)),r.a.createElement(n.a,{container:!0,item:!0,lg:!P||I?4:6,md:I?12:6,sm:6,alignContent:"baseline"},!I&&r.a.createElement(n.a,{item:!0,lg:P?6:12,md:12,pb:2},r.a.createElement(c.a,{reactKeyPrefix:d+"schedule",voyage:t,restrictedAreas:m,userLocale:a,overlappingVoyageColourMap:y,onClickOverlappingChip:p,openedFromFas:E,refreshFas:g,onClickPorts:b,selectedCargo:v,user:u,setShowLargeMap:_,onChangeSelectedRoute:V,selectedRoutes:A,showAlternatives:L,setShowAlternatives:R,clickedMapRoute:F})),r.a.createElement(n.a,{item:!0,lg:!P||I?12:6,pl:P&&!I?2:0},r.a.createElement(i.a,{reactKeyPrefix:d,voyage:t,userLocale:a,isBreakdownOpen:O,isAnalysisOpen:I,toggleBreakdownChart:G}))))}const d=r.a.memo(u)},1901:function(e,t,a){"use strict";a.d(t,"a",(function(){return te}));a(10),a(11);var n=a(0),o=a.n(n),r=a(97),c=a(46),i=a(464),l=a(6),s=a(3),u=a(15),d=a(27),m=(a(59),a(2357)),y=a(218),p=a(473),b=a(20),C=a(1234),E=a(1225),g=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function c(e){try{l(n.next(e))}catch(e){r(e)}}function i(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(c,i)}l((n=n.apply(e,t||[])).next())}))};function P({reactKeyPrefix:e,i:t,voyage:a}){var r,c;const[i]=Object(l.a)([b.a.IVoyageDrawerController]),{common:s}=t.getLanguageFile(),[u,d]=Object(n.useState)(!1),[P,O]=Object(n.useState)(!1),[T,I]=Object(n.useState)([]),[f,v]=Object(n.useState)(),[S,N]=Object(n.useState)(),[_,A]=Object(n.useState)(),[k,L]=Object(n.useState)([]),[R,D]=Object(n.useState)([]),h=null===(r=null==a?void 0:a.tcIn)||void 0===r?void 0:r.key,F=null===(c=null==a?void 0:a.tcs[0])||void 0===c?void 0:c.key;Object(n.useEffect)(()=>{h&&(i.loadTc(h,N),i.getDocumentCurrencies(String(h),L))},[h,i]),Object(n.useEffect)(()=>{F&&(i.loadTc(F,A),i.getDocumentCurrencies(String(F),D))},[F,i]);const j=e=>g(this,void 0,void 0,(function*(){const t=e?S:_,a=e?k:R;v(t),I(a),t&&(!t.company||a.length>0)&&O(!0)})),G=o.a.createElement(C.a,{reactKeyPrefix:e+"-print-soa-vc-modal",onClose:()=>d(!1),open:u,voyageKey:a.key}),V=f&&o.a.createElement(E.a,{reactKeyPrefix:e+"-print-soa-tc-modal",onClose:()=>O(!1),open:P,tc:f,currencies:T});return o.a.createElement(o.a.Fragment,null,u&&[G],P&&[V],o.a.createElement(m.a,{display:"flex",justifyContent:"flex-end",gap:2,direction:"row"},S&&o.a.createElement(y.a,{title:0===k.length?s.noInvoicesOrCreditNotes:S.company?"":s.noCompanyForTcContract},o.a.createElement("span",null,o.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:()=>j(!0),disabled:0===k.length||!S.company,size:"small"},s.printOwnerStatement))),_&&o.a.createElement(y.a,{title:0===R.length?s.noInvoicesOrCreditNotes:_.company?"":s.noCompanyForTcContract},o.a.createElement("span",null,o.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:()=>j(!1),disabled:0===R.length||!_.company,size:"small"},s.printChartererStatement))),!a.isTc&&o.a.createElement("span",null,o.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:()=>d(!0),size:"small"},s.printChartererStatement))))}var O=a(214),T=a(61),I=a(230),f=a(180),v=a(1),S=a(21),N=a(7),_=a(24),A=a(4);function k({reactKeyPrefix:e,i:t,voyageKey:a}){const{common:n,model:r,menu:c}=t.lang();return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{reactKeyPrefix:e+"-account",configs:(()=>{const e={field:"key",filterGroupCode:"VOYAGE_INVOICE_LINES_LIST_FILTER_GROUP_CODE",operator:A.c.IN,type:A.d.STRING,optionCode:"accountFilter",queryParamName:"account.key"};return[{filterObjectValuePath:"key",label:c.account,typeaheadProps:{type:v.a.account,objectPaths:["accountDesc"]},filters:[e]}]})(),type:A.b.TYPEAHEAD,label:r.account,filterCode:"ACCOUNT"}),o.a.createElement(_.a,{reactKeyPrefix:e+"-port",configs:(()=>{const e={field:"key",filterGroupCode:"VOYAGE_INVOICE_LINES_LIST_FILTER_GROUP_CODE",operator:A.c.IN,type:A.d.STRING,optionCode:"cargoPortPortFilter",queryParamName:"cargoPort.key"},t={field:"key",filterGroupCode:"VOYAGE_INVOICE_LINES_LIST_FILTER_GROUP_CODE",operator:A.c.IN,type:A.d.STRING,optionCode:"portCallPortFilter",queryParamName:"portCall.key"};return[{filterObjectValuePath:"key",label:r.cargoPort,typeaheadProps:{label:r.cargoPort,type:v.a.cargoport,objectPaths:["port.portName","reasonForCall.reasonForCallDesc"],query:"filter=cargo.voyage.key(EQ)"+a},filters:[e]},{filterObjectValuePath:"key",label:r.portCall,typeaheadProps:{label:r.portCall,type:v.a.portcall,query:"filter=voyage.key(EQ)"+a,objectPaths:["port.portName","reasonForCall.reasonForCallDesc"]},filters:[t]}]})(),type:A.b.TYPEAHEAD,label:r.port,filterCode:"PORT"}),o.a.createElement(_.a,{reactKeyPrefix:e+"-business-partner",configs:(()=>{const e={field:"key",filterGroupCode:"VOYAGE_INVOICE_LINES_LIST_FILTER_GROUP_CODE",operator:A.c.IN,type:A.d.STRING,optionCode:"businessPartnerFilter",queryParamName:"businessPartner.key"};return[{label:n.invoiceParty,filterObjectValuePath:"key",typeaheadProps:{type:v.a.businesspartner,objectPaths:["businessPartnerName"]},filters:[e]}]})(),type:A.b.TYPEAHEAD,label:r.businessPartner,filterCode:"BUSINESS_PARTNER"}),o.a.createElement(_.a,{reactKeyPrefix:e+"-bookingNo",configs:(()=>{const e={field:"key",filterGroupCode:"VOYAGE_INVOICE_LINES_LIST_FILTER_GROUP_CODE",operator:A.c.IN,type:A.d.STRING,optionCode:"cargoReferenceFilter",queryParamName:"cargo.key"};return[{label:r.bookingNo,filterObjectValuePath:"key",typeaheadProps:{type:v.a.cargo,objectPaths:["cargoReference","charterer.businessPartnerName"],query:"filter=voyage.key(EQ)"+a},filters:[e]}]})(),type:A.b.TYPEAHEAD,label:r.cargoReference,filterCode:"CARGO_REFERENCE"}))}var L=a(86);function R({reactKeyPrefix:e,i:t}){const{common:a,model:n}=t.lang();return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{reactKeyPrefix:e+"-accounts",configs:[{label:a.receivable,filters:[{field:"documentType",filterGroupCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE",queryParamName:"documentType.documentType",operator:A.c.IN,type:A.d.STRING,value:["INO","CRO","PMI","PMO"],optionCode:"accountFilterReceivable",filterCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE_ACCOUNTS"}]},{label:a.payable,filters:[{field:"documentType",filterGroupCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE",queryParamName:"documentType.documentType",operator:A.c.IN,type:A.d.STRING,value:["INI","CRI","APR","PMI","PMO"],optionCode:"accountFilterPayable",filterCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE_ACCOUNTS"}]}],type:A.b.RADIO,label:a.accounts,filterCode:"ACCOUNTS",clearOnMount:!1}),o.a.createElement(_.a,{reactKeyPrefix:e+"-business-partner",configs:(()=>{const e={field:"key",filterGroupCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE",operator:A.c.IN,type:A.d.STRING,optionCode:"businessPartnerFilter",queryParamName:"documentLines.businessPartner.key"};return[{label:n.businessPartner,filterObjectValuePath:"key",typeaheadProps:{type:v.a.businesspartner,objectPaths:L.b.businessPartner,includeDisabledQuery:!0},filters:[e]}]})(),type:A.b.TYPEAHEAD,label:n.businessPartner,filterCode:"BUSINESS_PARTNER",clearOnMount:!1}),o.a.createElement(_.a,{reactKeyPrefix:e+"-invoicing-status",configs:(()=>{const e={field:"invoicingStatus.key",filterGroupCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE",filterCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE_INVOICING_STATUS",operator:A.c.IN,type:A.d.STRING,optionCode:"invoicingStatusFilter",queryParamName:"documentLines.invoicingStatus"};return[{label:n.invoiceStatus,filterObjectValuePath:"key",typeaheadProps:{type:v.a.statustype,objectPaths:["statusTypeDesc"],query:"filter=statusClass.statusClassCode(EQ)INV",shouldPreload:!0},filters:[e]}]})(),type:A.b.TYPEAHEAD,label:n.invoiceStatus,filterCode:"INVOICING_STATUS",clearOnMount:!1}))}var D=a(5),h=a(35),F=a(40),j=a(105),G=a(87);const[V]=Object(l.a)([s.a.IInternationalization]),{model:x,common:K}=V.getLanguageFile(),w=[{content:x.documentDate,contentType:D.a.DATE,dateTimeFormatOptions:h.a.shortLocalizedDate},{content:x.documentType,contentType:D.a.TEXT},{content:x.documentNo,contentType:D.a.TEXT},{content:x.businessPartner,contentType:D.a.TEXT},{content:x.documentText,contentType:D.a.TEXT,textLengthFactor:10,wrap:!0},{content:x.currency,contentType:D.a.TEXT},{content:K.amount,contentType:D.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:K.status,contentType:D.a.ELEMENT}],q=[{content:x.documentNo,contentType:D.a.TEXT},{content:x.port,contentType:D.a.TEXT},{content:x.cargoReference,contentType:D.a.TEXT},{content:x.account,contentType:D.a.TEXT},{content:x.documentLineText,contentType:D.a.TEXT,textLengthFactor:10,wrap:!0},{content:x.quantity,contentType:D.a.NUMBER,numberFormatOptions:{minDecimals:3,maxDecimals:3}},{content:x.unitPrice,contentType:D.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},aggregateTotals:!1},{content:x.currency,contentType:D.a.TEXT},{content:K.amount,contentType:D.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:x.businessPartner,contentType:D.a.TEXT}],U=Object(G.a)(["documentDate","documentType.documentTypeDesc","documentNo","businessPartner.businessPartnerName","documentText","documentCurrency.currencyCode","documentAmount","invoicingStatus.statusTypeDesc","paidAmount"]),M=Object(G.a)(["key","document.documentNo","cargoPort.port.portName","portCall.port.portName","cargo.cargoReference","account.accountDesc","documentLineText","quantity","unitPrice","documentCurrency.currencyCode","documentAmount","businessPartner.businessPartnerName"]);function Y(e){var t,a,n,r;const{documentAmount:c,documentDate:i,documentNo:l,businessPartner:s,documentCurrency:u,documentType:d,invoicingStatus:m,documentText:y}=e,p=null!==(t=null==m?void 0:m.statusTypeDesc)&&void 0!==t?t:"",b=o.a.createElement(F.a,{label:p,priority:j.a.getStatusPriority(p,v.a.document)});return[i,null!==(a=null==d?void 0:d.documentTypeDesc)&&void 0!==a?a:"",null!=l?l:"",null!==(n=null==s?void 0:s.businessPartnerName)&&void 0!==n?n:"",null!=y?y:"",null!==(r=null==u?void 0:u.currencyCode)&&void 0!==r?r:"",c,{rawValue:p,content:b}]}function H(e){var t,a,n,o,r,c,i,l,s,u,d,m,y,p,b,C,E,g,P,O;return[null!==(a=null===(t=e.document)||void 0===t?void 0:t.documentNo)&&void 0!==a?a:"",null!==(l=null!==(r=null===(o=null===(n=e.cargoPort)||void 0===n?void 0:n.port)||void 0===o?void 0:o.portName)&&void 0!==r?r:null===(i=null===(c=e.portCall)||void 0===c?void 0:c.port)||void 0===i?void 0:i.portName)&&void 0!==l?l:"",null!==(u=null===(s=e.cargo)||void 0===s?void 0:s.cargoReference)&&void 0!==u?u:"",null!==(m=null===(d=e.account)||void 0===d?void 0:d.accountDesc)&&void 0!==m?m:"",null!==(y=e.documentLineText)&&void 0!==y?y:"",null!==(p=e.quantity)&&void 0!==p?p:0,null!==(b=e.unitPrice)&&void 0!==b?b:0,null!==(E=null===(C=e.documentCurrency)||void 0===C?void 0:C.currencyCode)&&void 0!==E?E:"",null!==(g=e.documentAmount)&&void 0!==g?g:0,null!==(O=null===(P=e.businessPartner)||void 0===P?void 0:P.businessPartnerName)&&void 0!==O?O:""]}var B=a(16);const X=new(a(88).a),{common:Q,model:z}=X.getLanguageFile(),J="VOYAGE_INVOICES_LIST_SORT_GROUP_CODE",W=[{field:z.createdDate,groupCode:J,operator:B.b.DESC,queryParamName:"key"}],Z={createdDate:{field:z.createdDate,groupCode:J,operator:B.b.DESC,queryParamName:"key"},documentType:{field:z.documentType,groupCode:J,operator:B.b.ASC,queryParamName:"documentType.documentTypeDesc"},documentNo:{field:z.documentNo,groupCode:J,operator:B.b.ASC,queryParamName:"documentNo"},businessPartner:{field:z.businessPartner,groupCode:J,operator:B.b.ASC,queryParamName:"businessPartner%2B.businessPartnerName"},currency:{field:z.currency,groupCode:J,operator:B.b.ASC,queryParamName:"documentCurrency.currencyCode"},amount:{field:Q.amount,groupCode:J,operator:B.b.ASC,queryParamName:"documentAmount"},paidAmount:{field:Q.paidAmount,groupCode:J,operator:B.b.ASC,queryParamName:"paidAmount"},status:{field:Q.status,groupCode:J,operator:B.b.ASC,queryParamName:"invoicingStatus.statusTypeDesc"}},$=({reactKeyPrefix:e,voyageKey:t,onClick:a,i:r})=>{const[c]=Object(l.a)([N.a.Store]),{menu:i,invoices:s}=r.getLanguageFile(),[u,d]=Object(n.useState)(!0),[m,y]=Object(n.useState)(!1),p=Object(n.useCallback)(()=>{y(!m)},[m]),b=m?"&filter=voyage.key(EQ)"+t+"&filter=document(NOTNULL)&filter=document.documentType.documentType(IN)(INI,CRI,INO,CRO,APR,PMI,PMO)&sort=document.documentDate(DSI)&sort=key(DSI)":"filter=documentType.documentType(IN)(INI,CRI,INO,CRO,APR,PMI,PMO)&filter=documentLines.voyage.key(EQ)"+t+"&sort=key(DSI)",C=Object(n.useCallback)(()=>o.a.createElement(I.a,{disabled:!1,reactKeyPrefix:e+"select-chip-change-view",selected:m,label:s.viewLineItems,onClick:p,isClearable:!0}),[s.viewLineItems,m,p,e]),E=Object(n.useMemo)(()=>[{label:m?s.viewDocuments:s.viewDocumentLines,renderElement:C,reactKeyPrefix:e+"-primary-actions-change-view"}],[s,m,e,C]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(f.a,{reactKeyPrefix:e+"-invoices",title:i.invoices,onChange:d,headerElementsPosition:"right",disableTopSpacing:!0},u&&(m?o.a.createElement(T.a,{pageItemLimit:100,getColSpec:H,tsmodelType:v.a.documentline,fields:M,listId:"VOYAGE_INVOICES_LIST_LINES_ID",reactKeyPrefix:e+"-invoice-lines-list",tableHeaders:q,primaryActions:E,queryStr:b,onClickItem:e=>{const t=S.a.getTSModelsBuilt(c.getState(),v.a.documentline,{document:{key:"*"}},"VOYAGE_INVOICES_LIST_LINES_ID").find(t=>t.key===e);(null==t?void 0:t.document)&&a(t.document.key)},quickFilters:o.a.createElement(k,{reactKeyPrefix:e+"-lines",i:r,voyageKey:t}),quickFiltersGroupCode:"VOYAGE_INVOICE_LINES_LIST_FILTER_GROUP_CODE",sortOptions:Object.values(Z),defaultSorts:W,tableCustomisation:{disableToolbar:!1,disableCardSorting:!0,disableSorting:!1,aggregateTotals:!0}}):o.a.createElement(T.a,{pageItemLimit:100,getColSpec:Y,tsmodelType:v.a.document,fields:U,listId:"VOYAGE_INVOICES_LIST_ID",reactKeyPrefix:e+"-invoice-list",tableHeaders:w,primaryActions:E,queryStr:b,onClickItem:a,quickFilters:o.a.createElement(R,{reactKeyPrefix:e,i:r}),quickFiltersGroupCode:"VOYAGE_INVOICE_LIST_FILTER_GROUP_CODE",sortOptions:Object.values(Z),defaultSorts:W,tableCustomisation:{disableToolbar:!1,disableCardSorting:!0,disableSorting:!1,aggregateTotals:!0}})))))},ee=({reactKeyPrefix:e,title:t,userLocale:a,isHirePayable:r,isAccountsPayable:c,onAssemble:l,group:s})=>{const[u,d]=Object(n.useState)(!1);return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{reactKeyPrefix:e,title:t,onChange:d,headerElementsPosition:"right",disableTopSpacing:!0},u&&o.a.createElement(i.b,{group:s,isAccountsPayable:c,isHirePayable:r,reactKeyPrefix:e,userLocale:a,onAssemble:l,disableGutters:!0})))};function te({reactKeyPrefix:e,voyage:t,userLocale:a}){var m;const[y]=Object(l.a)([s.a.IInternationalization]),{invoices:p}=y.getLanguageFile(),b=Object(r.g)(),C=Object(r.h)(),E=Object(n.useCallback)(e=>d.a.openDrawer(e,u.a.invoiceDrawer,C,b),[C,b]),g=e=>{E(e.key),c.a.next()},O=null===(m=null==t?void 0:t.tcIn)||void 0===m?void 0:m.key;return o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{reactKeyPrefix:e+"printSOA",i:y,voyage:t}),o.a.createElement(ee,{reactKeyPrefix:e+"pendingReceivable",title:p.pendingReceivable,userLocale:a,isAccountsPayable:!1,isHirePayable:!1,onAssemble:g,group:{key:t.key,type:i.a.Voyage}}),o.a.createElement(ee,{reactKeyPrefix:e+"pendingPayable",title:p.pendingPayable,userLocale:a,isAccountsPayable:!0,isHirePayable:!1,onAssemble:g,group:{key:t.key,type:i.a.Voyage}}),O&&o.a.createElement(ee,{reactKeyPrefix:e+"pendingHirePayable",title:p.pendingHirePayable,userLocale:a,isAccountsPayable:!0,isHirePayable:!0,onAssemble:g,group:{key:O,type:i.a.Tc}}),o.a.createElement($,{reactKeyPrefix:e+"invoicesList",voyageKey:t.key,onClick:E,i:y}))}}}]);