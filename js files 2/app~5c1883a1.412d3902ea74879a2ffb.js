(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1213:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));a(10),a(11);var n=a(323),l=a(1329),i=a(0),o=a.n(i),r=a(1314),s=a(105),c=a(950),u=a(40),d=a(6),m=a(117),b=a(3),p=a(174),f=a(20);function g({drawerStatus:e,tsModelType:t,getLabelPriority:a,prefix:n}){var b,g,v,O,j;const[h]=Object(d.a)([f.a.IDrawerStatusController]),y=null!==(g=null===(b=e.statusObject)||void 0===b?void 0:b.statusTypeCode)&&void 0!==g?g:"",C=null!==(j=null===(O=null===(v=e.statusObject)||void 0===v?void 0:v.statusClass)||void 0===O?void 0:O.statusClassCode)&&void 0!==j?j:"",E=Object(i.useMemo)(()=>h.getStatuses(t),[h,t,e]),w=Object(i.useMemo)(()=>Object(l.a)(h.getStatusTransitions(),"toStatusType.statusTypeSequence"),[h,e]),S=Object(i.useMemo)(()=>w.filter(({fromStatusType:e,toStatusType:t})=>{var a,n;return(null==e?void 0:e.statusTypeCode)===y&&(null===(a=null==e?void 0:e.statusClass)||void 0===a?void 0:a.statusClassCode)===C&&(null===(n=null==t?void 0:t.statusClass)||void 0===n?void 0:n.statusClassCode)===C}),[w,y,C]),k=Object(i.useMemo)(()=>{const{overrideAllowedStatuses:t}=e;return E.filter(e=>e.statusTypeCode!==y&&t&&!r.a.isStatusDisabled(e,t)||!S.length&&e.statusTypeCode!==y)},[e,y,E,S.length]),T=Object(i.useMemo)(()=>{const{overrideAllowedStatuses:t}=e;return!(null==t?void 0:t.length)},[e]),x=Object(i.useCallback)(()=>r.a.getCurrentStatusIndex(E,S,e.statusObject,T),[e.statusObject,E,T,S]),[L,M]=Object(i.useState)(x());Object(i.useEffect)(()=>M(x()),[e.statusObject]);const A=Object(i.useCallback)(t=>{var a;if(e.onClick){const{overrideAllowedStatuses:n}=e;let l=k[t>k.length?t-1:t];S.length&&!(null==n?void 0:n.length)&&(l=null!==(a=S[t].toStatusType)&&void 0!==a?a:new m.a({})),e.onClick(l)}},[e,k,S]);if(e){const{statusObject:l,type:i,overrideStatusLabel:d,overrideAllowedStatuses:m=[]}=e;if(d)return d;if(t&&l){const e=a?a(l.statusTypeDesc):s.a.getStatusPriority(l.statusTypeDesc,t),{statusTypeDesc:d}=l,b=d?(null!=n?n:"")+d:"",f=r.a.getStatusDropdownLabels(S,T,m).map(t=>({color:e,current:b,label:t}));if(0===f.length&&f.push({label:"",current:b,color:e}),i===p.b.LABEL)return o.a.createElement(u.a,{label:l.statusTypeDesc,priority:e});if(i===p.b.TRANSITION&&void 0!==L&&E.length>0)return o.a.createElement(c.a,{reactKeyPrefix:"-status-dropdown",data:f,onClick:A,activeIndex:L>=f.length?L-1:L,disabled:0===S.length||!T})}}return null}function v(e,t,a,l,i){return o.a.createElement(n.a,{sx:{pl:1}},a&&function(e){const[t]=Object(d.a)([b.a.IInternationalization]),{common:a}=t.getLanguageFile();return(e=>void 0===e||(void 0===e._isObjectActive||e._isObjectActive))(e)?void 0:o.a.createElement(u.a,{label:a.disabled.toLocaleUpperCase(),priority:u.c.NoPriority})}(a)," ",e&&o.a.createElement(g,{drawerStatus:e,tsModelType:t,getLabelPriority:l,prefix:i}))}},27:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(10),a(11),a(109),a(163);var n=a(15),l=a(174),i=a(2352),o=a(2353),r=a(2354),s=a(81),c=a(730);function u(){const e=window.location.hash,t=[],a=Object.values(n.a),l=e.split("/");for(let e=0;e<l.length;e++)if(a.indexOf(l[e])>=0){const a={hash:l[e],id:parseInt(l[e+1],10)};t.push(a)}return t}function d(e){switch(e){case l.a.MEDIUM:return c.a.medium.max;case l.a.LARGE:return c.a.large.max;case l.a.FULL:return c.a.full.min;case l.a.DEFAULT:default:return c.a.default.max}}const m={createKeyFromString:function(e){return e.replace(/[^A-Za-z0-9]/g,"")},getCurrentlyOpenedDrawers:u,openDrawer:function(e,t,a,n){if(n&&a){const l=u(),i=`/${t}/${e}`;let o=a.pathname;l.length>0?(a.pathname.indexOf(t)>-1&&([o]=a.pathname.split("/"+t)),n.replace(o+i)):n.push(o+i)}},openTab:function(e,t,a,n,l){if(l&&n){const i=`/${t}/${e}`,[o]=n.pathname.split(i);l.replace(o+i+(a?"-"+a:""))}},splitRoute:function(e){const t=window.location.hash.split("/");let a=-1;if(e)for(let n=0;n<t.length;n++)if(t[n].toLowerCase().includes(e))return a=n,"/"+t.slice(1,a).join("/");return"/"+t.slice(1).join("/")},getSubjectName:function(e,t,a){var n;return t.map(t=>{var n;return null!==(n=Object(s.a)(e,t)||(null==a?void 0:a.default))&&void 0!==n?n:""}).join(null!==(n=null==a?void 0:a.delimiter)&&void 0!==n?n:" - ")},getDrawerWidthPerSize:d,isOverlayingOtherDrawers:function(e,t,a){var n;const l=Object(i.a)(Object(o.a)([...t].reverse(),t=>t.id!==e)),s=null===(n=a.get(e))||void 0===n?void 0:n.size;return Object(r.a)(l,e=>{const t=a.get(e.id);return!!t&&!!s&&d(t.size)<=d(s)}).some(e=>{var t;return(null===(t=a.get(e.id))||void 0===t?void 0:t.size)===s})}}},317:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(118);var n,l,i=a(9),o=a(31),r=a(1168),s=a(253),c=a(1),u=a(21),d=a(7),m=function(e,t,a,n){var l,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(i<3?l(o):i>3?l(t,a,o):l(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e,t){return function(a,n){t(a,n,e)}};const f={[c.a.billoflading.name]:"BOL",[c.a.bunkerorder.name]:"BO",[c.a.cargo.name]:"BKG",[c.a.coa.name]:"COA",[c.a.document.name]:"INV",[c.a.laytimecalculation.name]:"LAY",[c.a.offhire.name]:"OFF",[c.a.serviceorder.name]:"SO",[c.a.tc.name]:"TC",[c.a.voyage.name]:"VOY"};let g=n=class{constructor(e){this.store=e}getStatuses(e){if(e){const t=u.a.getAllTSModelsBuilt(this.store.getState(),c.a.statustype,s.a),a=n.getStatusClassCode(e);return t.filter(e=>{var t;return(null===(t=e.statusClass)||void 0===t?void 0:t.statusClassCode)===a}).sort((e,t)=>e.statusTypeSequence-t.statusTypeSequence)}return[]}getStatusesByClassCode(e){return u.a.getAllTSModelsBuilt(this.store.getState(),c.a.statustype,s.a).filter(t=>{var a;return(null===(a=t.statusClass)||void 0===a?void 0:a.statusClassCode)===e}).sort((e,t)=>e.statusTypeSequence-t.statusTypeSequence)}getStatusTransitions(){return u.a.getAllTSModelsBuilt(this.store.getState(),c.a.statustypetransition,r.a)}static getStatusClassCode(e){return e.name in f?f[e.name]:void 0}};g=n=m([Object(i.injectable)(),p(0,Object(i.inject)(d.a.Store)),b("design:paramtypes",["function"==typeof(l=void 0!==o.Store&&o.Store)?l:Object])],g)},730:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var n,l=a(245),i=a(213),o=a(187),r=a(354),s=a(1143),c=a(797);!function(e){e.DEFAULT="default",e.MEDIUM="medium",e.LARGE="large",e.FULL="full"}(n||(n={}));const u={[n.DEFAULT]:{min:700,max:900},[n.MEDIUM]:{min:900,max:1100},[n.LARGE]:{min:1100,max:1200},[n.FULL]:{min:1400,max:1600}},d=Object(i.a)(e=>Object(o.a)({paper:{width:"100vw",maxWidth:"100vw",display:"block",overflow:"hidden"},drawerWrapper:{height:"100%",position:"relative",display:"flex",flexDirection:"column",overflowY:"auto"},default:{[e.breakpoints.up(768)]:{width:u.default.min},[e.breakpoints.up(1600)]:{width:u.default.max}},medium:{[e.breakpoints.up(768)]:{width:u.medium.min},[e.breakpoints.up(1600)]:{width:u.medium.max}},large:{[e.breakpoints.up(768)]:{width:u.large.min},[e.breakpoints.up(1600)]:{width:u.large.max}},full:{width:e=>{const{windowWidth:t}=e,{min:a,max:n}=u.full;return t<=n+r.b&&t>a+r.b?t-r.b:t>n+r.b?n:a}},subject:{display:"flex",flexDirection:"column",flex:1,minWidth:0},subText:{fontWeight:500,margin:e.spacing(2,0,.5)},subName:Object.assign(Object.assign({color:Object(l.a)(e.palette.common.black,.54),fontSize:"1rem"},c.a),{display:"inline-flex",alignItems:"center","& > *":{marginRight:e.spacing(.5)}}),leftMargin:{marginLeft:e.spacing(1)},content:Object.assign(Object.assign({},Object(s.a)(e).content),{paddingTop:e.spacing(2),flex:"1 0 auto",position:"relative"}),commentTab:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},display:"flex",flexDirection:"column",position:"relative",flex:"1 0 auto"}}))},82:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));a(10),a(11),a(109),a(163),a(268),a(269),a(158);var n=a(0),l=a.n(n),i=a(2080),o=a(474),r=a(600),s=a(1327),c=a(2372),u=a(323),d=a(2106),m=a(246),b=a(2085),p=a(2095),f=a(1430),g=a(218),v=a(130),O=a(308),j=a.n(O),h=a(922),y=a.n(h),C=a(1756),E=a.n(C),w=a(1755),S=a.n(w),k=a(26),T=a(1889),x=a(6),L=a(7),M=a(137),A=a(135),D=a(3),F=a(1213),N=a(27),I=a(174),R=a(97),P=a(80),z=a(730),U=a(373),B=a(649),K=a(354),V=a(472),W=a(2090),$=a(914),q=a(47),G=a(1760),J=a(838);const Y=M.a.transitions.duration.leavingScreen,Z=new Map,_=()=>{const e=localStorage.getItem("com.dataloy.dataloyVms.globals.drawerView");return e?JSON.parse(e):[]},H=l.a.memo(({reactKeyPrefix:e,children:t,subject:a,subjectName:O,subjectLoaded:h,drawerRoute:C,isObjectActive:w,status:B,drawerKey:q,size:G=I.a.DEFAULT,secondaryActions:H,actionsMenu:Q,primaryActions:X,tabs:ee,tabId:te,tsModelType:ae,onClose:ne,onGoBack:le,reloadParentDrawer:ie,onChangeTab:oe,onChangeFullscreen:re,subjectComponentRight:se,subjectComponentLeft:ce,windowTitleSubjectName:ue,enableFullscreen:de,state:{isSideNavOpen:me,pageTitle:be}})=>{var pe,fe;const[ge,ve,Oe,je]=Object(x.a)([D.a.IInternationalization,L.a.ISelectedAuditLogActions,L.a.ISelectedAttachmentActions,L.a.Store]),{common:he,model:ye}=ge.getLanguageFile(),[Ce,Ee]=Object(n.useState)(null),[we,Se]=Object(n.useState)(0),[ke,Te]=Object(n.useState)(null),[xe,Le]=Object(n.useState)(!1),[Me,Ae]=Object(n.useState)(_().includes(C)),[De,Fe]=Object(n.useState)(!de),Ne=Object(R.g)(),Ie=Object(R.h)(),Re=Object(U.a)(),Pe=Object(n.useRef)(null),ze={isSideNavOpen:me,windowWidth:null!==(pe=Re.width)&&void 0!==pe?pe:0},Ue=Object(z.b)(ze),Be=Me?I.a.FULL:G,Ke=Object(i.a)(M.a.breakpoints.only("xs")),Ve=N.a.getCurrentlyOpenedDrawers(),We=Ve.length>1&&(null===(fe=Object(V.a)(Ve))||void 0===fe?void 0:fe.id)!==q,$e=Object(n.useCallback)(()=>{Ae(!Me),localStorage.setItem("com.dataloy.dataloyVms.globals.drawerView",JSON.stringify(Object(W.a)(_(),[C])))},[C,Me]),qe=Object(n.useCallback)(()=>{ie&&ie(),le?le():Ne&&Ie&&(Le(!1),setTimeout(()=>{const e=Ie.pathname.replace(`/${C}/${q}${te?"-"+te:""}`,"");Ne.replace(e)},Y))},[q,C,Ne,Ie,le,ie,te]),Ge=Object(n.useCallback)(()=>{const e=()=>{Ne&&Ie&&(Le(!1),setTimeout(()=>{Ne.replace(Ie.pathname.replace(/\/[a-zA-Z0-9\-]+\-drawer.+/,""))},Y))};ne?ne(e):e()},[Ne,Ie,ne]),Je=e=>Ee(e.currentTarget),Ye=e=>Te(e.currentTarget),Ze=()=>Ee(null),_e=()=>Te(null),He=Object(n.useMemo)(()=>We?l.a.createElement(J.a,{reactKeyPrefix:e,onClickBack:qe}):null,[We,qe,e]),Qe=Object(n.useMemo)(()=>{const t={disabled:!1,icon:Me?S.a:E.a,label:Me?he.openDefaultView:he.openExpandedView,onClick:$e},a=N.a.createKeyFromString(t.label+q);return l.a.createElement(g.a,{title:t.label,key:a},l.a.createElement("div",null,l.a.createElement(m.a,{id:e+"primary-action"+Object(A.b)(t.label),onClick:$e,disabled:t.disabled},l.a.createElement(t.icon,Object.assign({},t.iconColorProps)))))},[he.openDefaultView,he.openExpandedView,q,Me,$e,e]),Xe=Object(n.useCallback)(()=>{q&&(_e(),je.dispatch(ve.setAction({key:q,tsModelType:ae})))},[q,ve,je,ae]),et=Object(n.useCallback)(()=>{q&&(_e(),je.dispatch(Oe.setAction({key:Number(q),tsModelType:ae})))},[q,Oe,je,ae]),tt=Object(n.useCallback)((t,a)=>t.filter(e=>!e.hide).map(t=>{const n="text"in t?t.text:t.label,i=Object(A.b)(n),r="tooltipText"in t?t.tooltipText:void 0,s="text"in t?()=>{a(),t.onClick(t)}:()=>{a(),t.onClick()},c=l.a.createElement(o.a,{id:e+"action-menu-item"+i,onClick:s,disabled:t.disabled,key:i},n);return r?l.a.createElement(g.a,{title:r,key:i,placement:"left"},l.a.createElement("div",null,c)):c}),[e]),at=Object(n.useMemo)(()=>{var t,a,n,i;if(Ke||!h)return null;const o=[];if(X&&X.filter(e=>!e.hide&&!Array.isArray(e)).forEach(t=>{o.push(l.a.createElement(g.a,{title:t.label,key:t.label},l.a.createElement("div",null,l.a.createElement(m.a,{id:e+"primary-action"+Object(A.b)(t.label),onClick:t.onClick,disabled:t.disabled},l.a.createElement(t.icon,Object.assign({},t.iconColorProps))))))}),Q)for(const s of Q){const c=s.tooltipText?s.tooltipText:he.more,u=N.a.createKeyFromString(c+q),d=s.icon?l.a.createElement(s.icon,Object.assign({},s.iconColorProps)):l.a.createElement(y.a,null);o.push(l.a.createElement(l.a.Fragment,{key:u},l.a.createElement(g.a,{title:c,"aria-label":c,enterDelay:300},l.a.createElement(m.a,{id:e+"actions-menu"+Object(A.b)(null!==(a=null===(t=s.data[0])||void 0===t?void 0:t.text)&&void 0!==a?a:""),onClick:Je},d)),l.a.createElement(r.a,{id:e+"menu-close-btn"+Object(A.b)(null!==(i=null===(n=s.data[0])||void 0===n?void 0:n.text)&&void 0!==i?i:""),anchorEl:Ce,open:Boolean(Ce),onClose:Ze,disableRestoreFocus:!0},tt(s.data,Ze))))}return de&&De&&(null==o||o.push(Qe)),o.length>0?o:null},[Q,Ce,he.more,q,de,tt,Qe,Ke,X,e,De,h]),nt=Object(n.useMemo)(()=>{const t=null==Q?void 0:Q.flatMap(({data:e})=>e);return[...Ke&&X?[...tt(X,_e),l.a.createElement(s.a,{key:"primary"})]:[],...Ke&&t?[...tt(t,_e),l.a.createElement(s.a,{key:"actions"})]:[],...H?[...tt(H,_e),l.a.createElement(s.a,{key:"secondary"})]:[],l.a.createElement(o.a,{id:e+"audit-log-btn",onClick:Xe,key:"audit-log"},he.auditLog),l.a.createElement(o.a,{id:e+"attachments-btn",onClick:et,key:"attachments"},ye.attachments)]},[Q,he.auditLog,tt,Ke,ye.attachments,et,Xe,X,e,H]),lt=Object(n.useMemo)(()=>{if(!h)return null;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{title:he.more,"aria-label":he.more,enterDelay:300},l.a.createElement(m.a,{id:e+"more-btn",onClick:Ye},l.a.createElement(y.a,null))),l.a.createElement(r.a,{id:e+"close-secondary-menu",anchorEl:ke,open:Boolean(ke),onClose:_e,disableRestoreFocus:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},nt))},[he.more,e,ke,nt,h]),it=Object(n.useMemo)(()=>{const t={content:()=>l.a.createElement(T.a,{reactKeyPrefix:e+"drawer-comments",sourceKey:Number(q)}),label:ye.comments,id:"comments"};return[...ee.filter(e=>!e.hidden),t]},[q,ye.comments,e,ee]),ot=Object(n.useCallback)((e,t)=>{Se(t),N.a.openTab(q,C,0!==t?it[t].id:"",Ie,Ne),oe&&oe()},[it,q,C,Ne,Ie,oe]),rt=Object(n.useMemo)(()=>h&&it?l.a.createElement(p.a,{id:e+"drawer-tabs",value:we,onChange:ot,variant:"scrollable",scrollButtons:"auto"},it.map(t=>l.a.createElement(b.a,{id:e+"-drawer-tab-"+Object(A.b)(t.label),label:t.label,key:t.label,disabled:!!t.disabled,disableRipple:!0}))):null,[we,it,e,ot,h]),st=Object(n.useMemo)(()=>h?it[we].content():null,[we,it,h]),ct=Object(n.useMemo)(()=>Object(F.a)(B,ae,w),[w,B,ae]);Object(n.useEffect)(()=>{Z.set(q,{title:null!=ue?ue:O,size:Be})},[q,Be,O,ue]),Object(n.useEffect)(()=>{var e;const t=Object($.a)(Ve);if(t&&t.id===q){const t=null===(e=Z.get(q))||void 0===e?void 0:e.title;h&&void 0!==t&&(document.title=Ve.reduce((e,t)=>{var a,n;return(null!==(n=null===(a=Z.get(t.id))||void 0===a?void 0:a.title)&&void 0!==n?n:"")+" - "+e},be))}},[q,Ve,be,h]),Object(n.useEffect)(()=>{re&&re(Me)},[Me,re]),Object(n.useEffect)(()=>{var e;if(de){const t=N.a.getDrawerWidthPerSize(I.a.FULL)+K.b<(null!==(e=Re.width)&&void 0!==e?e:0);Me?!t&&Re.width?($e(),Fe(!1)):Fe(!0):Fe(t)}},[de,me,Me,G,Re.width]),Object(n.useEffect)(()=>{if(te){const e=it.findIndex(e=>e.id===te);Se(Math.max(0,e))}},[we,it,te]),Object(n.useEffect)(()=>{Le(!0)},[]);const ut=Object(n.useMemo)(()=>Ve[0].id===q||!N.a.isOverlayingOtherDrawers(q,Ve,Z),[q,Ve]),dt={leftComponent:ce,subjectName:O,drawerStatus:ct,rightComponent:se};return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{id:e,variant:"persistent",anchor:"right",onClose:Ge,open:xe,classes:{paper:Object(k.default)(Ue.paper,Ue[Be])},PaperProps:{elevation:ut?7:0},ref:Pe},l.a.createElement("div",{className:Ue.drawerWrapper},l.a.createElement(d.a,{elevation:0,color:"default",position:"sticky"},l.a.createElement(f.a,null,He,l.a.createElement(u.a,{component:"div",className:Ue.subject},l.a.createElement(v.a,{variant:"h4",className:Ue.subText},a.toUpperCase()),h&&l.a.createElement(u.a,{component:"span",display:"inline-flex"},Object.entries(dt).map(e=>l.a.createElement(v.a,{variant:"h6",className:Ue.subName,key:e[0],"data-mabl":e[0]},e[1])))),at,lt,!We&&l.a.createElement(g.a,{title:he.close,"aria-label":he.close,enterDelay:300},l.a.createElement(m.a,{id:e+"close-drawer-btn",onClick:Ge},l.a.createElement(j.a,null)))),rt),l.a.createElement("div",{className:we!==ee.length?Ue.content:Ue.commentTab},st,t))),l.a.createElement(P.a,null))}),Q=Object(q.a)(e=>({isSideNavOpen:B.a.get(e),pageTitle:G.a.get(e)}),Object(n.memo)(H))}}]);