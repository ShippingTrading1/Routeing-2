(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return be})),a.d(t,"b",(function(){return pe})),a.d(t,"c",(function(){return ge}));a(10),a(11),a(118);var o=a(1174),n=a.n(o),r=a(1609),l=a.n(r),i=a(1396),c=a(893),s=a(2355),d=a(2103),u=a(2523),m=a(138),b=a(892),p=a(0),g=a.n(p),f=a(410),v=a(359),y=a(14),C=a(3);const O=(e,t,a)=>{const o=y.a.get(C.a.IInternationalization).getLanguageFile(),n=!!t&&t.required;if(n||e){let t=e;const r=a instanceof Array?a.length>0:!!a&&!!a.label;return n&&!r&&(t=o.validation.required),t}};var h=a(135),E=a(1325),j=a(982),k=a(2101),x=a(130),P=a(473),L=a(6),D=a(2458),S=a(81),T=a(213),I=a(187);const w=Object(T.a)(e=>Object(I.a)({multiSelectList:{flex:"1 !important",paddingBottom:e.spacing(1),overflowY:"auto"},checkbox:{width:"100%"},clearAll:{display:"flex",justifyContent:"center","& > *":{width:"100%"}},formGroup:{overflowY:"auto",height:"100%"},noOptionsMessage:{padding:e.spacing(1,2)}}));function F(e){const{typeaheadOptions:t,selectedTypeaheadOptions:a,getOptionLabel:o,reactKeyPrefix:n,query:r,onChange:l,filterActive:i,disableSorting:c,filterOptions:s}=e,[d]=Object(L.a)([C.a.IInternationalization]),{common:u}=d.getLanguageFile(),[m,b]=Object(p.useState)(t),[f,v]=Object(p.useState)(a),[y,O]=Object(p.useState)(),T=w(e);Object(p.useEffect)(()=>{(r||t.length&&!(null==a?void 0:a.length))&&b(s(t))},[s,m.length,r,a,t]);const I=Object(p.useCallback)((e,t)=>{let n;n=t?(null!=a?a:[]).concat(e):(null!=a?a:[]).filter(t=>o(t)!==o(e)),O(!0),l({},n,"selectOption")},[o,l,a]);Object(p.useEffect)(()=>{!y&&a&&v(a)},[y,a]);const F=Object(p.useCallback)(e=>{e.preventDefault(),l({},[],"clear"),O(!0),v([])},[l]),A=Object(p.useMemo)(()=>Object(D.a)([...i?[]:(null!=f?f:[]).slice(0),...s(m)],o),[i,s,o,m,f]),R=Object(p.useMemo)(()=>A.map(e=>{const t=o(e),r=(null!=a?a:[]).some(t=>o(t)===o(e)),l=g.a.createElement(E.a,{className:"multi-select-list-item",checked:r,onChange:()=>I(e,!r),value:t,name:t,key:Object(S.a)(e.value,"key",Object(h.b)(t))});return g.a.createElement(j.a,{className:T.checkbox,control:l,label:e.label,key:`${n}-${Object(h.b)(o(e),"-")}`})}),[T.checkbox,o,I,A,n,a]);return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:T.multiSelectList},g.a.createElement(k.a,{className:T.formGroup,row:!0},r&&0===m.length?g.a.createElement(x.a,{className:T.noOptionsMessage},u.noOptionsFound):R)),g.a.createElement("div",{className:T.clearAll},g.a.createElement(P.a,{variant:"text",color:"primary",onClick:F},u.clearSelected)))}var A=a(323),R=a(218);const N=g.a.memo(({label:e})=>{const[t,a]=Object(p.useState)(!1),o=Object(p.useRef)(null);Object(p.useEffect)(()=>{var e,t;a(!!(null==o?void 0:o.current)&&(null===(e=o.current)||void 0===e?void 0:e.scrollWidth)>(null===(t=o.current)||void 0===t?void 0:t.offsetWidth))},[o]);const n=g.a.createElement(A.a,{component:"span",ref:o,sx:{overflow:"hidden",textOverflow:"ellipsis"}},e);return t?g.a.createElement(R.a,{title:e,placement:"left"},n):n}),M=(e,t)=>{var a;return g.a.createElement("li",Object.assign({},e,{key:null!==(a=t.value.key)&&void 0!==a?a:Object(h.b)(t.label)}),g.a.createElement(N,{label:t.label}))};a(158);var B=a(2102),H=a(250),U=a.n(H),K=a(57),V=a(243);const q=Object(T.a)(e=>Object(I.a)({actionMenu:{maxHeight:"50%"},actionMenuContent:{overflowY:"hidden",position:"relative"}}));function $({reactKeyPrefix:e,children:t,selectedOptions:a,label:o,textFieldProps:n,onClose:r}){const[l,i]=Object(p.useState)(null),[c,s]=Object(p.useState)(!1),[d,u]=Object(p.useState)(!1),m=q({}),b=Object(p.useCallback)(e=>{i(e.currentTarget)},[]),f=Object(p.useCallback)(e=>{e.preventDefault(),b(e)},[b]),v=Object(p.useCallback)(()=>{u(!d)},[d]),y=Object(p.useCallback)(()=>{i(null),s(!0),r&&r()},[r]),C=Object(p.useCallback)(e=>{"Enter"===e.key&&b(e)},[b]),O=Object(p.useCallback)(e=>{"Tab"!==e.key&&"Escape"!==e.key||y()},[y]),h=Object(p.useCallback)(e=>{v(),s(!0)},[v]),E=Object(p.useCallback)(e=>{v()},[v]),j=Object(p.useMemo)(()=>a.reduce((e,t)=>("string"==typeof t.label&&e.push(t.label),e),[]).join(", "),[a]),k=!!a.length&&void 0!==a[0].label,x=n.required&&!k&&c||n.error,P=d&&g.a.createElement(B.a,{position:"end",key:"typeahead_popover_input_adornment"},g.a.createElement(R.a,{title:"Press Enter",open:!0,placement:"bottom",disableHoverListener:!0,disableFocusListener:!0},g.a.createElement(U.a,{color:"primary",style:{alignSelf:"flex-end"}})));return g.a.createElement(g.a.Fragment,null,g.a.createElement(K.b,{reactKeyPrefix:e+"text-input",placeholder:j,value:j,onMouseDownCapture:f,onKeyDown:C,label:o,InputProps:{endAdornment:P},inputProps:{readOnly:!0},required:n.required,error:x,disabled:n.disabled,onBlurCapture:h,onFocusCapture:E,helperText:n.helperText,usePlaceholderInsteadOfValue:!0}),g.a.createElement(V.a,{className:m.actionMenu,reactKeyPrefix:e+"action-menu",anchorEl:l,open:Boolean(l),title:o,onCloseActionMenu:y,PaperProps:{style:{width:362,maxHeight:357}},position:V.b.OverAlignCenterLeft,onKeyDown:O,extraClasses:{content:m.actionMenuContent}},t))}function _(e){const[t]=Object(L.a)([C.a.IInternationalization]),{common:a}=t.getLanguageFile();return""===e?a.typeToSearch:a.noOptionsFound}var z=a(577);function G(e,t){return Y({label:t?t(e):e,value:e})}function W(e,t){return e.map(e=>Y(G(e,t)))}function Y(e){return e.label||(e.label="Error: label undefined or empty string."),e}function Q(e,t){return Array.isArray(e)?e.map(e=>e.value):e?e.value:t?[]:e}var X=a(1171),J=a(725),Z=a(16);a(109),a(163);var ee=a(7),te=a(87);const ae=Object(J.a)((function(e,t,a,o){a(!0),e.loadMultipleAction(o).then(({entities:e})=>{t(null!=e?e:[]),a(!1)}).catch(()=>{t([]),a(!1)})}),200),oe=(e,t,a,o)=>{const[n,r]=Object(p.useState)(!1),[l,i]=Object(p.useState)([]),[c]=Object(L.a)([ee.a.ITSModelActionsAsync]);return Object(p.useEffect)(()=>{if(!Object(v.a)(t)||o&&o.shouldUseCache)return;const{objectPaths:n=[],type:s,fields:d,itemsToShow:u=10,shouldPreload:m,query:b=""}=t;if(""===e&&!m&&l.length>0)return void i([]);if(""===e)return;const p=function(e,t){if(!e.length)throw new Error("Typeahead requires at least one objectPath");return"filter="+e.map(e=>`${e.replace(/\[\d+\]/gi,"")}(LKIC)${t.toUpperCase().replace(/'/g,"\\'")}`).join("&filter=(OR)&filter=")}(n,e),g=[b||function(e,t=Z.c.ASC){return e.map(e=>`sort=${e}(${t})`).filter(Boolean).join("&")}(n),p].filter(Boolean).join("&"),f=d||Object(te.a)(n);ae(c,i,r,{type:s,authdata:a.authdata||"",fields:f,query:g,pageNumber:1,pageItemLimit:u})},[e,a]),[l,n]};var ne=a(44),re=a(47),le=a(43),ie=a(32),ce=a(1610),se=a(1577);const de=Object(T.a)(e=>Object(I.a)({popoverSelect:t=>({paddingRight:t.embed?void 0:e.spacing(2),flex:"0 0 auto"}),typeaheadEmbedded:e=>({position:"relative",maxHeight:e.maxHeightEmbedded,overflow:"hidden"}),multiLayout:{overflow:"hidden",display:"flex",position:"relative",flexDirection:"column",height:"100%","& > *":{flexGrow:0},["& ."+se.a.root]:{marginBottom:8}},multiSelectListCollapse:{overflow:"hidden",display:"flex",flexDirection:"column","&>div":{overflow:"hidden",height:"100%","&>div":{display:"flex",flexDirection:"column",maxHeight:247}}}})),ue=100;function me(e){var t,a;const{defaultSelectedOptions:o,isMulti:r,itemsToShow:m=ue,label:b,reactKeyPrefix:f,resolver:y,onChange:O,onBlur:h,noOptionsMessage:E=_,onFocus:j,objectPaths:k,placeholder:x,overrideDefaultSelectedOptions:P,disabled:D=!1,disableLoadingIndicator:S,embed:T=!1,defaultEmbedExpanded:I=!1,maxHeightEmbedded:w,formatGroupLabel:A,disableSorting:R=!1,showWarning:N=!1,warningText:B,renderOption:H=M,filterOptions:U,autoFocus:K,loading:V,open:q,state:{cacheItem:Y,queryProps:J,user:Z}={},sxProps:te}=e;if(!Object(v.b)(e)&&!Object(v.a)(e))throw new Error("Props missing. You must either use ITypeahead or ITypeaheadAsync props");const[ae,re]=Object(p.useState)(""),[ie,ce]=Object(p.useState)(!1),[se,me]=Object(p.useState)(null),[be,pe]=Object(p.useState)(null),ve=Object(p.useRef)(!1),ye=Object(p.useRef)(!1),[Ce,Oe]=Object(p.useState)(!1),[he,Ee]=Object(p.useState)(I),je=de(e),ke=Object(p.useRef)(null),[xe,Pe]=Object(L.a)([C.a.IInternationalization,ee.a.ITypeaheadCacheController]),{common:Le}=xe.getLanguageFile(),De=!(null===(t=e.formControlProps)||void 0===t?void 0:t.required)&&(null===(a=e.isClearable)||void 0===a||a),Se=Object(v.b)(e)?e.options:[],Te=!!Object(v.a)(e)&&e.shouldPreload,Ie=Object(v.a)(e)?e.type:null,we=Object(v.a)(e)?e.fields:void 0;Object(p.useEffect)(()=>{Te&&Ie&&k&&Pe.initCache({type:Ie,objectPaths:k,fields:we,query:J})},[Pe,we,k,J,Te,Ie]);const[Fe,Ae]=oe(ae,e,null!=Z?Z:new le.a({}),Y),Re=Object(v.a)(e)&&!(null==Y?void 0:Y.shouldUseCache),Ne=(null==Y?void 0:Y.shouldUseCache)?Y.cached:Re?Fe:Se,Me=(e,t,a)=>{"reset"!==a&&re(t)},Be=Object(p.useCallback)((e,t,a)=>{const o=Q(t,!!r);if(r&&Array.isArray(o)&&0===o.length){if(!De)return;Ee(!0)}pe(t),ye.current=!0,O&&O(o)},[r,De,O]),He=Object(p.useCallback)((e,t,a)=>{ce(!0),me(t)},[]),Ue=Object(p.useCallback)(()=>{ce(!1),me(null)},[]),Ke=Object(p.useCallback)(()=>{Be({},se,"selectOption"),Ue()},[Ue,Be,se]),Ve=Object(p.useCallback)(()=>{e.isMulti&&!e.embed||h&&ye.current&&h(Q(be,!!r)),e.isMulti||re("")},[e.isMulti,e.embed,h,be,r]),qe=Object(p.useCallback)(()=>{Ee(T),j&&j()},[T,j]),$e=Object(p.useCallback)(()=>{h&&ye.current&&(ye.current=!1,h(Q(be,!!r))),re("")},[r,h,be]),_e=()=>ke.current=null,ze=Object(p.useCallback)(()=>Ee(!0),[]),Ge=()=>ve.current=!0,We=Object(p.useCallback)((e,t,a)=>{"mouse"!==a&&(ke.current=t)},[]),Ye=Object(p.useMemo)(()=>function(e,t){const a=Object(z.a)(e,t);return e=>"object"==typeof e.value&&a?a(e.value):[].concat(e)[0].label}(k,y),[k,y]),Qe=Object(p.useMemo)(()=>W(Ne,Object(z.a)(k,y)),[Ne,k,y]),Xe=(e,t)=>e,Je=Object(i.a)({limit:m}),Ze=Object(p.useCallback)((e,t)=>{const a=(null!=U?U:Xe)(e,t),o=Object(X.a)(a,t.inputValue,Ye);return A&&o.sort((e,t)=>A(e).localeCompare(A(t))),Je(o,t)},[Je,U,A,Ye,Xe]),et=Object(p.useCallback)(e=>Ze(e,{inputValue:ae,getOptionLabel:Ye}),[Ye,Ze,ae]),tt=e=>g.a.createElement(c.a,Object.assign({},e,{sx:{minWidth:160}})),at=Object(p.useMemo)(()=>N&&ie&&g.a.createElement(ne.a,{reactKeyPrefix:f+"-warning-modal",open:ie,title:Le.warning,confirmBtnName:Le.ok,cancelBtnName:Le.cancel,onCloseModal:Ue,onConfirm:Ke},B),[Le.cancel,Le.ok,Le.warning,Ue,Ke,ie,f,N,B]);if(Object(p.useEffect)(()=>{""===ae&&function(e,t,a,o,n,r){if(a||null!=e)if(null===e&&r)t(null);else if(e&&(!a||r)){let a;const r=Object(z.a)(o,n);a=Array.isArray(e)?e.some(e=>null!=e)?W(e,r):null:G(e,r),t(a)}}(o,pe,Ce,k,y,P),Oe(!0)},[o,Ce,P,k,y]),r){const t=ge(e,be,ve.current);t.label=T?t.label:g.a.createElement(g.a.Fragment,null),t.onBlur=Ve;const a=T?fe:$,o=!T||[].concat(null!=be?be:[]).length>0||he;return g.a.createElement(g.a.Fragment,null,g.a.createElement(a,{reactKeyPrefix:f+"typeahead-popover",label:b,selectedOptions:null!=be?be:[],onClose:$e,textFieldProps:t,maxHeightEmbedded:w},g.a.createElement("div",{className:je.multiLayout},g.a.createElement(s.a,{id:f+"popover-select",options:Qe,filterOptions:Ze,getOptionLabel:Ye,onInputChange:Me,inputValue:ae,renderInput:e=>g.a.createElement(d.a,Object.assign({},e,t,{autoFocus:he})),disableClearable:!De,loading:!S&&Ae,onChange:N?He:Be,onBlur:Ve,disabled:D,noOptionsText:E(ae),onFocus:qe,open:!1,onOpen:ze,popupIcon:he?g.a.createElement(l.a,null):g.a.createElement(n.a,null),sx:te}),g.a.createElement(u.a,{in:o,className:je.multiSelectListCollapse},g.a.createElement(F,{reactKeyPrefix:f+"-multiselect-list",typeaheadOptions:Qe,selectedTypeaheadOptions:be,query:ae,getOptionLabel:Ye,onChange:N?He:Be,filterActive:!!ae,disableSorting:R,filterOptions:et})))),at)}{const t=t=>g.a.createElement("form",{noValidate:!0},g.a.createElement(d.a,Object.assign({},t,ge(e,be,ve.current),{onBlurCapture:Ge,autoFocus:K,onKeyDown:e=>{"Enter"===e.key?e.preventDefault():"Tab"===e.key&&ke.current&&O&&Be({},ke.current,"selectOption")}})));return g.a.createElement(g.a.Fragment,null,g.a.createElement(s.a,{PaperComponent:tt,id:f+"select",value:be,options:Qe,filterOptions:Ze,getOptionLabel:Ye,onBlur:Ve,onChange:N?He:Be,onFocus:j,onInputChange:Me,noOptionsText:E(ae),loading:!S&&(null!=V?V:Ae),disabled:D,disableClearable:!De,multiple:r,placeholder:x,groupBy:A,isOptionEqualToValue:(e,t)=>e.label===Ye(t),renderInput:t,renderOption:H,sx:te,open:q,onClose:_e,autoHighlight:!0,onHighlightChange:We}),at)}}const be=Object(re.a)(e=>({user:Object(ie.a)(e)}),Object(f.a)(me)),pe=Object(re.a)((e,t)=>{var a,o;const n=Object(v.a)(t)&&t.includeDisabledQuery?(t.query?"&":"")+"filter=isObjectActive(IN)(true,false)":"",r=Object(v.a)(t)?`${null!==(a=t.query)&&void 0!==a?a:""}${n}`:void 0;return{user:Object(ie.a)(e),queryProps:r,cacheItem:null!==(o=Object(ce.a)(e,!!t.shouldPreload,t.type,t.objectPaths,t.fields,r))&&void 0!==o?o:void 0}},Object(f.a)(me));function ge(e,t,a){const{formControlProps:o,formHelperText:n,disabled:r,label:l,onContextMenu:i,placeholder:c,variant:s,disableLabel:d}=e,[u]=Object(L.a)([C.a.IInternationalization]),{common:p}=u.getLanguageFile(),g=Object(m.a)(t)?!Object(b.a)(t):!!t,f=!!(null==o?void 0:o.required)&&a&&!g,v={"& .MuiInputLabel-root":{visibility:d?"hidden":"visible"}};return{InputLabelProps:{shrink:!0},variant:s,placeholder:null!=c?c:p.typeToSearch,disabled:r,error:f||!!(null==o?void 0:o.error),helperText:O(n,o,t),label:l,onContextMenu:i,required:!!(null==o?void 0:o.required),onMouseDownCapture:e=>{2===e.button&&(e.stopPropagation(),e.preventDefault())},sx:v}}function fe(e){const t=de(e);return g.a.createElement("div",{className:t.typeaheadEmbedded},e.children)}},105:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var o,n,r,l,i,c,s,d,u,m,b,p=a(40);!function(e){e.BILLOFLADING="BillOfLading",e.BUNKERORDER="BunkerOrder",e.BUNKERORDERLINE="BunkerOrderLine",e.CARGO="Cargo",e.COA="Coa",e.DOCUMENT="Document",e.LAYTIME_CALCULATION="LaytimeCalculation",e.SERVICEORDER="ServiceOrder",e.VOYAGE="Voyage",e.OFFHIRE="Offhire"}(o||(o={})),function(e){e.NOTRELEASED="Not released",e.RELEASED="Released"}(n||(n={})),function(e){e.REQUIREMENT="Requirement",e.ACTIVE="Active",e.STEMMED="Stemmed",e.DELIVERED="Delivered",e.CANCELLED="Cancelled"}(r||(r={})),function(e){e.POSSIBILITY="Possibility",e.TENTATIVE="Tentative",e.INDICATION="Indication",e.FIRMOFFER="Firm Offer",e.WORKING="Working",e.ONSUBJECT="On subject",e.CLEANFIX="Clean Fix"}(l||(l={})),function(e){e.OPEN="Open",e.DRAFT="Draft",e.CLOSED="Closed"}(i||(i={})),function(e){e.DRAFT="Draft",e.ESTIMATED="Estimated",e.ESTIMATE_APPROVED="Estimate Approved",e.ESTIMATE_REQUESTED="Estimate Requested",e.REVISED="Revised",e.FINAL="Final",e.FINAL_APPROVED="Final Approved",e.CANCELLED="Cancelled"}(c||(c={})),function(e){e.DRAFT="Draft",e.AWAITING_APPROVAL="Awaiting approval",e.SETTLED="Settled"}(s||(s={})),function(e){e.DRAFT="Draft",e.SETTLED="Settled"}(d||(d={})),function(e){e.ESTIMATE="Estimate",e.UNALLOCATED="Unallocated",e.ALLOCATED="Allocated",e.NOMINATED="Nominated",e.DEMURRAGECHECKED="Demurrage Checked",e.OPERATIONALLYCLOSED="Operationally Closed",e.INVOICED="Invoiced",e.CLOSED="Closed"}(u||(u={})),function(e){e.PENDING="Pending",e.VERIFICATION="Verification",e.ASSEMBLED="Assembled",e.UNDERAPPROVAL="Under approval",e.READYFORPOSTING="Ready for posting",e.POSTED="Posted"}(m||(m={})),function(e){e.NOT_DECLARED="Not declared",e.DECLARED="Declared",e.FORFEITED="Forfeited"}(b||(b={}));const g={getStatusPriority:function(e,t){switch(!0){case t.name===o.BILLOFLADING:return function(e){switch(!0){case e===n.NOTRELEASED:return p.c.Medium;case e===n.RELEASED:return p.c.MediumLow;default:return p.c.NoPriority}}(e);case t.name===o.BUNKERORDER||t.name===o.BUNKERORDERLINE:return function(e){switch(!0){case e===r.REQUIREMENT:return p.c.Medium;case e===r.ACTIVE:return p.c.High;case e===r.STEMMED:return p.c.ExtremelyLow;case e===r.DELIVERED:return p.c.MediumLow;case e===r.CANCELLED:return p.c.ExtremelyHigh;default:return p.c.NoPriority}}(e);case t.name===o.CARGO:return function(e){switch(!0){case e===l.POSSIBILITY:return p.c.NoPriority;case e===l.TENTATIVE:return p.c.Low;case e===l.CLEANFIX:return p.c.Medium;case e===l.FIRMOFFER:return p.c.MediumHigh;case e===l.INDICATION:return p.c.MediumLow;case e===l.ONSUBJECT:return p.c.High;case e===l.WORKING:return p.c.ExtremelyLow;default:return p.c.NoPriority}}(e);case t.name===o.COA:return function(e){switch(!0){case e===i.CLOSED:return p.c.MediumLow;case e===i.DRAFT:return p.c.Medium;case e===i.OPEN:return p.c.High;default:return p.c.NoPriority}}(e);case t.name===o.SERVICEORDER:return function(e){switch(!0){case e===c.DRAFT:return p.c.High;case e===c.ESTIMATE_REQUESTED:case e===c.ESTIMATE_APPROVED:case e===c.ESTIMATED:return p.c.Medium;case e===c.FINAL_APPROVED:case e===c.FINAL:return p.c.MediumLow;case e===c.REVISED:return p.c.ExtremelyLow;case e===c.CANCELLED:return p.c.ExtremelyHigh;default:return p.c.NoPriority}}(e);case t.name===o.VOYAGE:return function(e){switch(!0){case e===u.ESTIMATE:return p.c.Medium;case e===u.UNALLOCATED:return p.c.MediumLow;case e===u.ALLOCATED:return p.c.High;case e===u.NOMINATED:return p.c.ExtremelyLow;case e===u.DEMURRAGECHECKED:return p.c.MediumHigh;case e===u.OPERATIONALLYCLOSED:return p.c.New;case e===u.INVOICED:return p.c.Low;case e===u.CLOSED:return p.c.ExtremelyHigh;default:return p.c.NoPriority}}(e);case t.name===o.LAYTIME_CALCULATION:return function(e){switch(!0){case e===s.DRAFT:return p.c.High;case e===s.AWAITING_APPROVAL:return p.c.Medium;case e===s.SETTLED:return p.c.MediumLow;default:return p.c.NoPriority}}(e);case t.name===o.OFFHIRE:return function(e){switch(!0){case e===d.DRAFT:return p.c.High;case e===d.SETTLED:return p.c.MediumLow;default:return p.c.NoPriority}}(e);case t.name===o.DOCUMENT:return function(e){switch(!0){case e===m.ASSEMBLED||e===m.PENDING:return p.c.Medium;case e===m.READYFORPOSTING:return p.c.MediumLow;case e===m.POSTED:default:return p.c.NoPriority}}(e);default:return p.c.NoPriority}},getOptionalStatusPriority:function(e){switch(!0){case e===b.NOT_DECLARED:return p.c.Medium;case e===b.DECLARED:return p.c.MediumLow;case e===b.FORFEITED:default:return p.c.NoPriority}}}},1171:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(118);function o(e,t,a){const o=t.toLocaleLowerCase();return e.filter(e=>a(e).toLocaleLowerCase().includes(t.toLocaleLowerCase())).sort((e,t)=>{const n=a(e).toLocaleLowerCase(),r=a(t).toLocaleLowerCase();return n.startsWith(o)&&!r.startsWith(o)?-1:r.startsWith(o)&&!n.startsWith(o)||n>r?1:r>n?-1:0})}},1195:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(10),a(11);var o=a(0),n=a.n(o),r=a(6),l=a(3),i=a(130),c=a(218),s=a(716),d=a(40);const u=n.a.memo((function(e){var t,a,o;const{obj:u,hideNewIcon:m=!1}=e,[b]=Object(r.a)([l.a.IInternationalization]),{common:p}=b.getLanguageFile(),g=s.a;if(u){let e=n.a.createElement(i.a,{sx:g.top,variant:"subtitle2"},null===(t=u.port)||void 0===t?void 0:t.portName);return u.key<0&&(e=n.a.createElement("span",{style:g.new},e,u.key<0&&!m&&n.a.createElement(c.a,{title:p.addsNewPortCall},n.a.createElement("div",{style:g.newLabelContainer},n.a.createElement(d.a,{label:p.new,labelColour:d.b.Blue,sx:g.icon}))))),n.a.createElement(n.a.Fragment,null,e,u.terminal&&n.a.createElement(i.a,{variant:"subtitle2"},null===(a=u.terminal)||void 0===a?void 0:a.terminalName),n.a.createElement(i.a,{sx:g.bottom,color:"textSecondary"},null===(o=u.reasonForCall)||void 0===o?void 0:o.reasonForCallDesc))}return null}))},1210:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));a(10),a(11),a(118);var o=a(0),n=a.n(o),r=a(600),l=a(474),i=a(246),c=a(834),s=a(835),d=a(23),u=a(241),m=a(6),b=a(81),p=a(97),g=a(3),f=a(33),v=a(199),y=a(546),C=a(1272),O=a(7),h=a(43);const E=Object(o.memo)((function(){const e=Object(p.g)(),[t,a]=Object(o.useState)(null),[E,j]=Object(m.a)([O.a.ILogout,g.a.IInternationalization]),k=Object(d.a)(u.a.getUserData),{common:x}=j.getLanguageFile(),P=Object(o.useCallback)(e=>{a(e.currentTarget)},[]),L=Object(o.useCallback)(()=>{a(null)},[]),D=Object(o.useMemo)(()=>Object(b.a)(k,"userName",""),[k]),S=Object(o.useCallback)(()=>{L(),E.logOut(),e.push("/login")},[e,E,L]),T=Object(o.useCallback)(t=>{L(),e.push(t)},[e,L]),I=Object(o.useMemo)(()=>function(e,t){const[a]=Object(m.a)([g.a.IInternationalization]),{menuGroup:o,menu:r}=a.getLanguageFile(),i=Object.values(f.a),c=Object(v.b)(null!=t?t:new h.a({}),i).filter(e=>e.group===o.user&&e.name!==r.logout),s=[];for(const e of c){const t=new y.a({key:e.name+e.url+e.sequenceNo,name:e.name,parentMenuItem:null,sequenceNo:e.sequenceNo,url:e.url});s.push(t)}return s.sort(C.a.sortBySequenceNo).map(t=>{const{url:a}=t;return n.a.createElement(l.a,{id:"doc-common-components-user-menu-menu-item"+t.key,onClick:e.bind(null,a),key:t.key},t.name)})}(T,k),[k,T]);return n.a.createElement(c.a,null,n.a.createElement(i.a,{id:"doc-common-components-user-menu-icon-btn",onClick:P,style:{padding:0},color:"primary"},n.a.createElement(s.a,{reactKeyPrefix:"doc-common-components-user-menu-avatar",name:D})),n.a.createElement(r.a,{id:"doc-common-components-user-menu-mui-menu",anchorEl:t,open:Boolean(t),onClose:L,disablePortal:!0,className:"user-menu"},I,n.a.createElement(l.a,{id:"doc-common-components-user-menu-menu-item-logout",onClick:S},x.logOut)))}))},1228:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(10),a(11);var o=a(0),n=a.n(o),r=a(375),l=a(23),i=a(1),c=a(42),s=a(130),d=a(6),u=a(3),m=a(956),b=a(1195);const p={timelineSectionTitle:{lineHeight:.5,marginBottom:1},timelineSectionSubtitle:{marginBottom:2}},g=n.a.memo((function(e){const{cargo:t,RightContainerLayout:a,reactKeyPrefix:g,onDropped:f}=e,[v]=Object(d.a)([u.a.IInternationalization]),{model:y,common:C}=v.getLanguageFile(),O=Object(l.a)(c.a.getUserLocale),h=Object(o.useMemo)(()=>m.a.generateTimelineDataWithoutVoyage(t),[t]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(s.a,{sx:p.timelineSectionTitle},C.timeline),n.a.createElement(s.a,{variant:"body2",sx:p.timelineSectionSubtitle},y.cargoPort),n.a.createElement(r.a,{reactKeyPrefix:g+"timeline",data:h,userLocale:O,RightContainerLayout:a||b.a,type:i.a.cargoport,onDropped:f,disableBackground:!0,hideToolbar:!0}))}))},1285:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));a(10),a(11);var o=a(0),n=a.n(o),r=a(51),l=a(6),i=a(3),c=a(12),s=a(1),d=a(19);function u(e,t,a,o,n,r){var l;const i=(null!==(l=r.portTerminals)&&void 0!==l?l:[]).map(e=>{const{terminal:t,port:a,label:o}=e;return{port:a,terminal:t,label:o}}),c={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"port",formControlProps:{required:!0},label:n.getLanguageFile().model.port,typeaheadProps:{resolver:e=>e.label,options:i},onUpdateOverride:a.bind(null,"port")},{fieldName:"reasonForCall",disabled:!(null==t?void 0:t.port),formControlProps:{required:!0},typeaheadProps:{shouldPreload:!0,objectPaths:["reasonForCallDesc"]},onUpdateOverride:a.bind(null,"reasonForCall")}],object:t,type:s.a.portcall,userLocale:o};return Object(d.a)(c)}const m={isConfirmButtonDisabled:function(e){return!(e.reasonForCall&&e.port)},getCreatePortCallPostable:function(e,t,a){var o,n,r,l,i,c;return{port:null===(n=null===(o=t.port)||void 0===o?void 0:o.port)||void 0===n?void 0:n.key,terminal:null!==(i=null===(l=null===(r=t.port)||void 0===r?void 0:r.terminal)||void 0===l?void 0:l.key)&&void 0!==i?i:void 0,reasonForCall:null===(c=t.reasonForCall)||void 0===c?void 0:c.key,portCallSequence:e,voyage:a.key,eventLogs:[{event:"BRT",eventLogDate:new Date},{event:"DEP",eventLogDate:new Date},{event:"ARR",eventLogDate:new Date}]}}};var b=a(107);function p(e){const{closeDialog:t,showModal:a,voyage:d,tempPortCall:p,onCreatePortCall:g,reactKeyPrefix:f,newSequence:v,refreshFas:y,portTerminals:C}=e,[O]=Object(l.a)([i.a.IInternationalization]),{common:h,model:E}=O.getLanguageFile(),j=Object(o.useMemo)(()=>p?{portCalls:[p]}:void 0,[p]);return n.a.createElement(r.a,{propertiesToOverwrite:j,modalProps:{reactKeyPrefix:f+"modal",maxWidth:"xs",onCloseModal:t,open:a,title:`${h.create} ${E.portCall}`,confirmBtnName:h.create},getColSpec:u,contextData:{portTerminals:C},breakpoints:c.e,allowDelete:!1,enableCopy:!1,createProps:{type:s.a.portcall,fields:{voyage:b.n},callback:e=>{e||y()}},overrideGetData:e=>m.getCreatePortCallPostable(v,e,d),overrideOnConfirm:g,isConfirmDisabled:m.isConfirmButtonDisabled})}},1314:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(93);var o=a(117);function n(e,t){var a;return null!==(a=null!=t?t:"description"in e?e.description:e.statusTypeDesc)&&void 0!==a?a:""}function r(e,t){return t.some(t=>e&&e.statusTypeCode===t.statusTypeCode)}const l={getStatusDropdownLabels:function(e,t,a=[]){return t?e.filter(({toStatusType:e})=>!r(e,a)).map(e=>n(e)).concat(e.length?[]:n(new o.a({}),"")):[]},getCurrentStatusIndex:function(e,t,a,o){let n=0;return a&&(n=t.length>0?t.findIndex(e=>{var t;return e&&(null===(t=e.fromStatusType)||void 0===t?void 0:t.statusTypeCode)===(null==a?void 0:a.statusTypeCode)}):o?0:e.findIndex(e=>e&&e.statusTypeCode===(null==a?void 0:a.statusTypeCode))),n>=0?n:void 0},disableStatusTransition:function(e,t,a){return!e.find(e=>{var o,n;return(null===(o=e.fromStatusType)||void 0===o?void 0:o.statusTypeCode)===t.statusTypeCode&&(null===(n=e.toStatusType)||void 0===n?void 0:n.statusTypeCode)===a.statusTypeCode})},isStatusDisabled:r}},1598:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));a(10),a(11),a(59);var o,n,r=a(9),l=a(89),i=a(68),c=a(81),s=a(50),d=a(7),u=a(83),m=a(31),b=a(104),p=a(32),g=a(184),f=a(1),v=function(e,t,a,o){var n,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(r<3?n(l):r>3?n(t,a,l):n(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e,t){return function(a,o){t(a,o,e)}};let O=class{constructor(e,t){this.store=e,this.objectApi=t}getPostablePortCall(e,t){const a=[];if(e)for(const e of t.cargoPorts)a.push({key:e.key,port:Object(c.a)(t,"port.key",void 0),terminal:Object(c.a)(t,"terminal.key",null)});const o=Object(l.a)(new i.a({key:t.key,port:t.port,terminal:t.terminal,reasonForCall:t.reasonForCall,portCostCurrency:t.portCostCurrency,isPcFixed:t.isPcFixed,laytimeUsed:t.laytimeUsed,isLaytimeUsedFixed:t.isLaytimeUsedFixed,currency:t.currency,daysExtraInPort:t.daysExtraInPort,cargoPorts:t.cargoPorts,daysExtraAtSea:t.daysExtraAtSea,percentExtraAtSea:t.percentExtraAtSea}));return t.cargoPorts.length>0&&e?o.cargoPorts=a:t.cargoPorts.length>0&&(o.reasonForCall=Object(c.a)(t,"reasonForCall.key",void 0)),o}onChange(e,t,a,o){return"isPcFixed"===a?this.onChangeIsPcFixed(e,a,o):"isLaytimeUsedFixed"===a?this.onChangeIsLaytimeUsedFixed(e,a,o):"percentExtraAtSea"===a?Promise.resolve(s.a.calculateDaysExtraAtSea(e,o)):"daysExtraAtSea"===a?Promise.resolve(s.a.calculatePercentExtraAtSea(e,o)):"port"===a?Promise.resolve(new i.a(Object.assign(Object.assign({},e),{[a]:o.port,terminal:o.terminal}))):Promise.resolve(new i.a(Object.assign(Object.assign({},e),{[a]:o})))}onChangeIsPcFixed(e,t,a){const{authdata:o}=Object(p.a)(this.store.getState());return this.objectApi.put({authdata:o||"",data:{isPcFixed:a},fields:g.c,key:e.key,query:"doNotStore=true",type:f.a.portcall}).then(o=>new i.a(Object.assign(Object.assign({},e),{portCostCurrency:o.portCostCurrency,[t]:a}))).catch(t=>new i.a(e))}onChangeIsLaytimeUsedFixed(e,t,a){const{authdata:o}=Object(p.a)(this.store.getState());return this.objectApi.put({authdata:o||"",data:{isLaytimeUsedFixed:a},fields:g.c,key:e.key,query:"doNotStore=true",type:f.a.portcall}).then(o=>new i.a(Object.assign(Object.assign({},e),{laytimeUsed:o.laytimeUsed,[t]:a}))).catch(t=>new i.a(e))}};O=v([Object(r.injectable)(),C(0,Object(r.inject)(d.a.Store)),C(1,Object(r.inject)(u.a.ITSModelApi)),y("design:paramtypes",["function"==typeof(o=void 0!==m.Store&&m.Store)?o:Object,"function"==typeof(n=void 0!==b.ITSModelApi&&b.ITSModelApi)?n:Object])],O)},1601:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(59);var o,n=a(9),r=a(48),l=a(90),i=a(3),c=function(e,t,a,o){var n,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(r<3?n(l):r>3?n(t,a,l):n(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e,t){return function(a,o){t(a,o,e)}},u=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((o=o.apply(e,t||[])).next())}))};let m=class{constructor(e){this.http=e}getPreviousPortCallsCount(e,t){var a;return u(this,void 0,void 0,(function*(){const o=yield this.http.get(`${r.a.API_BASE_URL}/Voyage/getCountOfPreviousPortCalls/${e}`,{headers:new Headers({authorization:null!==(a=t.authdata)&&void 0!==a?a:""})});return Number(yield o.text())}))}getPartOfSchedule(e,t){var a;return u(this,void 0,void 0,(function*(){let o=[];return e&&(o=yield this.http.get(`${r.a.API_BASE_URL}/Voyage/getPartOfScheduleOnVoyage/${e}`,{headers:new Headers({authorization:null!==(a=t.authdata)&&void 0!==a?a:""})}).then(e=>e.json()).catch(e=>[])),o}))}};m=c([Object(n.injectable)(),d(0,Object(n.inject)(i.a.IHttp)),s("design:paramtypes",["function"==typeof(o=void 0!==l.IHttp&&l.IHttp)?o:Object])],m)},1652:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(10),a(11),a(109);var o=a(336),n=a(74),r=a(62),l=a(58),i=a(9),c=a(50),s=function(e,t,a,o){var n,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(r<3?n(l):r>3?n(t,a,l):n(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let u=class{constructor(){}onDragEnd(e,t,a){const o={updatedCargo:t,updatedVoyage:a};if(e.destination&&e.source){if("LEFT_ITEM"===e.type&&e.destination&&e.source)return this.onCargoPortDragEnd(e,t,a);{const n=this.onPortCallDragEnd(e,t,a);return n||o}}return o}onPortCallDragEnd(e,t,a){var i;const c=Array.from(a.partOfSchedule),s=o.a.reorderPortCallSequence(c,e,!1);if(s){const e=new n.a(t);for(const t of s)for(const a of e.cargoPorts)(null===(i=null==a?void 0:a.portCall)||void 0===i?void 0:i.key)===t.key&&(a.portCall.portCallSequence=t.portCallSequence,a.portCall.vesselPcSequence=t.vesselPcSequence);const o=new r.a(Object.assign(Object.assign({},a),{partOfSchedule:s})),c=l.a.updateCargoPortSequence(e.cargoPorts,o);return{updatedCargo:new n.a(Object.assign(Object.assign({},e),{cargoPorts:c})),updatedVoyage:o}}}onCargoPortDragEnd(e,t,a){var o,l,i,s;const{destination:d,draggableId:u}=e,m=null==d?void 0:d.droppableId.split("-")[1],b=a.partOfSchedule[Number(m)],p=t.cargoPorts.find(e=>e.key===Number(u)),g=t.cargoPorts;if(b)for(const e of g)e.key!==(null==p?void 0:p.key)||!b.port||(null===(o=e.port)||void 0===o?void 0:o.key)!==(null===(l=b.port)||void 0===l?void 0:l.key)||b.terminal&&e.terminal&&(null===(i=e.terminal)||void 0===i?void 0:i.key)!==(null===(s=b.terminal)||void 0===s?void 0:s.key)||!c.a.compareRFC(b.reasonForCall,e.reasonForCall)||(e.portCall=b);return{updatedCargo:new n.a(Object.assign(Object.assign({},t),{cargoPorts:g})),updatedVoyage:new r.a(a)}}};u=s([Object(i.injectable)(),d("design:paramtypes",[])],u)},1751:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a(126);const n=Object(o.a)((e,t,a,o)=>e.map(e=>{const n=t(e,a),r=o?o(e):void 0;return{content:n,id:e.key,customisation:r}}))},177:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));const o={1:"#eeeeee",2:e=>e.palette.grey[300],3:"#d6d6d6"},n={leftContainer:{textAlign:"right",position:"relative",display:"flex",justifyContent:"flex-end",padding:e=>e.spacing(.5)},leftContainerIcons:{textAlign:"right"},leftIconContainer:{position:"absolute"},rightContainer:{textAlign:"left",position:"relative",padding:e=>e.spacing(.5)},pointer:{cursor:"pointer"},hover:{background:"rgba(0, 0, 0, 0.04)"},hoverOnDisabled:{background:"rgba(0, 107, 248, 0.2)",cursor:"default"},borderRadius:{borderRadius:"4px"},disabledRow:{opacity:.5},defaultCursor:{cursor:"default"},iconContainer:{display:"flex",alignItems:"flex-start",justifyContent:"flex-end",cursor:"grab"},dragIcon:{cursor:"grab",position:"absolute",top:0,right:0,padding:"8px"},button:{padding:0},toolbar:{"& *:first-of-type button":{borderRadius:e=>e.spacing(.5,0,0,.5)},"& *:last-of-type button":{borderRadius:e=>e.spacing(0,.5,.5,0)},paddingLeft:e=>e.spacing(2),position:"absolute",top:e=>e.spacing(3/4),right:e=>e.spacing(3/4),display:"flex",flexFlow:"row"},toolbarButton:{width:"1.25em",height:"1.25em",background:o[2],borderRadius:0,"&:disabled":{background:o[2]},"&:hover":{background:o[3]}},container:{flex:1},row:{display:"flex",flexDirection:"row"},disableBackground:{backgroundColor:"transparent"},box:{display:"flex",flexDirection:"column",flex:5},bottomLeft:{display:"flex",flexDirection:"row",flex:4,justifyContent:"flex-end",p:.5},bottomRight:{display:"flex",flexDirection:"row",flex:4,justifyContent:"flex-start",p:.5}}},2008:function(e,t,a){"use strict";a.d(t,"a",(function(){return Z}));a(10),a(11),a(118);var o=a(100),n=a.n(o),r=a(149),l=a.n(r),i=a(1793),c=a.n(i),s=a(250),d=a.n(s),u=a(371),m=a.n(u),b=a(283),p=a.n(b),g=a(0),f=a.n(g),v=a(1792),y=a(107),C=a(1285),O=(a(59),a(51)),h=a(3),E=a(6),j=a(1),k=a(7),x=a(68),P=a(19),L=a(210),D=a(169),S=a(81),T=a(28),I=a(186);function w(e,t,a,o,n,{portTerminals:r}){var l,i;const{common:c,model:s}=n.getLanguageFile(),{getPortTerminalLabel:d}=I.a,u=Object(S.a)(t,"reasonForCall.reasonForCallDesc"),m=new x.a(t),b=r.map(e=>{const{terminal:t,port:a,label:o}=e;return{port:a,terminal:t,label:o}}),p={port:m.port,terminal:m.terminal,label:d(m.port,m.terminal),key:Number(null===(l=m.port)||void 0===l?void 0:l.key)},g=f.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},f.a.createElement("div",{style:{marginRight:"1em"}},f.a.createElement(L.a,{label:s.portCost,value:m.portCostCurrency,key:"number_input_masked_port_cost",userLocale:o,reactKeyPrefix:e+"portCostCurrency",onChange:a.bind(null,"portCostCurrency"),maskSettings:T.a.mask11,formControlProps:{disabled:m.isPcFixed}})),f.a.createElement(D.a,{reactKeyPrefix:e+"isPcFixed",checked:m.isPcFixed,onInputChange:a.bind(null,"isPcFixed"),label:s.aggregate})),v=f.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},f.a.createElement("div",{style:{marginRight:"1em"}},f.a.createElement(L.a,{label:`${c.days} ${u}`,value:m.laytimeUsed,key:"number_input_masked_laytime_used",userLocale:o,reactKeyPrefix:e+"laytimeUsed",onChange:a.bind(null,"laytimeUsed"),maskSettings:T.a.mask2,formControlProps:{disabled:!m.isLaytimeUsedFixed}})),f.a.createElement(D.a,{reactKeyPrefix:e+"isLaytimeUsedFixed",checked:m.isLaytimeUsedFixed,onInputChange:a.bind(null,"isLaytimeUsedFixed"),label:c.fix})),y=["L","D"].includes(null===(i=m.reasonForCall)||void 0===i?void 0:i.reasonForCall)?[{overrideComponent:v}]:[],C={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"port",disabled:m.arrivalFixed,label:n.getLanguageFile().model.port,formControlProps:{required:!0},overrideObject:m,overrideType:j.a.portcall,typeaheadProps:{defaultSelectedOptions:p,resolver:e=>e.label,options:b},onUpdateOverride:a.bind(null,"port")},{fieldName:"reasonForCall",label:s.reasonForCall,disabled:m.cargoPorts.length>0,formControlProps:{required:!0},overrideObject:m,overrideType:j.a.portcall,typeaheadProps:{defaultSelectedOptions:m.reasonForCall,shouldPreload:!0},onUpdateOverride:a.bind(null,"reasonForCall")},{overrideComponent:g},{fieldName:"currency",label:s.portCostCurrency,typeaheadProps:{objectPaths:["currencyCode"],shouldPreload:!0},onUpdateOverride:a.bind(null,"currency")},...y,{fieldName:"daysExtraInPort",disabled:m.berthedFixed,label:s.daysExtraInPort,onUpdateOverride:a.bind(null,"daysExtraInPort"),numberInputProps:{maskSettings:T.a.mask2}},{fieldName:"percentExtraAtSea",disabled:m.arrivalFixed,onUpdateOverride:a.bind(null,"percentExtraAtSea"),numberInputProps:{maskSettings:T.a.mask2},InputProps:{endAdornment:"%"}},{fieldName:"daysExtraAtSea",disabled:m.arrivalFixed,onUpdateOverride:a.bind(null,"daysExtraAtSea"),numberInputProps:{maskSettings:T.a.mask2}}],object:m,type:j.a.portcall,userLocale:o};return Object(P.a)(C)}var F=a(173),A=a(130),R=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((o=o.apply(e,t||[])).next())}))};function N(e){const{closeModal:t,showModal:a,portCall:o,reactKeyPrefix:n,portTerminals:r,refreshFas:l}=e,[i,c,s]=Object(E.a)([k.a.ITSModelActionsAsync,h.a.IInternationalization,F.a.IEditPortCallController]),{common:d,model:u,portCall:m}=c.getLanguageFile(),[b,p]=Object(g.useState)(!1),[v,C]=Object(g.useState)(new x.a(null!=o?o:{}));Object(g.useEffect)(()=>{C(new x.a(null!=o?o:{}))},[o]);const P=Object(g.useCallback)(e=>{var t,a,o,n;if(v){const r=(null===(t=v.port)||void 0===t?void 0:t.key)!==(null===(a=e.port)||void 0===a?void 0:a.key),l=(null===(o=v.terminal)||void 0===o?void 0:o.key)!==(null===(n=e.terminal)||void 0===n?void 0:n.key);p(r||l)}},[v]),L=Object(g.useCallback)(()=>{t()},[t]),D=Object(g.useCallback)((e,t,a)=>R(this,void 0,void 0,(function*(){return yield s.onChange(v,e,t,a).then(e=>(P(e),C(e),e)),v})),[s,P,v,C]),S=Object(g.useCallback)(e=>s.getPostablePortCall(b,new x.a(e)),[s,b]),T=Object(g.useMemo)(()=>({callback:()=>l,fields:{voyage:y.n},objToUpdate:v,objToUpdateType:j.a.portcall,type:j.a.portcall}),[v,l]),I=Object(g.useMemo)(()=>({reactKeyPrefix:n+"modal",maxWidth:"md",onCloseModal:L,open:a,title:`${d.edit} ${u.portCall}`,confirmBtnName:d.save}),[d.edit,d.save,u.portCall,L,n,a]);return f.a.createElement(O.a,{selectedObject:v,modalProps:I,overrideUpdateEntity:D,getColSpec:w,contextData:{portTerminals:r},allowDelete:!1,enableCopy:!1,updateProps:T,overrideGetData:S,childrenAtBottom:!0},v&&v.cargoPorts.length>0&&b?f.a.createElement(A.a,{variant:"body1",sx:{pt:1}},m.allCargoPortsChangedAutomatically):void 0)}const M=f.a.memo(N);var B=a(427),H=a(724),U=a(375),K=a(336),V=a(114),q=a(469),$=a(23),_=a(42),z=a(50),G=a(35),W=a(15),Y=a(27),Q=a(97),X=a(532);function J(e){var t,a,o,r,i,s,u,b,O;const{voyage:x,reactKeyPrefix:P,onClickRow:L,onClickRowTouchLabel:D,overlappingVoyageColourMap:S,onClickOverlappingChip:T,user:I,onClickPorts:w,refreshFas:A}=e,R=null!==(t=Object($.a)(_.a.getUserLocale))&&void 0!==t?t:G.f[0],[N,J]=Object(E.a)([h.a.IInternationalization,k.a.ITSModelActionsAsync]),Z=Object(Q.g)(),ee=Object(Q.h)(),te=Object(g.useRef)(null),[ae,oe]=Object(g.useState)(!1),[ne,re]=Object(g.useState)(!1),[le,ie]=Object(g.useState)(!1),[ce,se]=Object(g.useState)(-1),[de,ue]=Object(g.useState)(""),[me]=Object(E.a)([F.a.IPortCallTimelineController]),[be,pe]=Object(g.useState)(0),[ge,fe]=Object(g.useState)(-1),ve=Object(g.useMemo)(()=>function(e){const{partOfSchedule:t,portCallsFromVoyage:a}=e;let o=0;const n=a.length-t.length;t.sort(z.a.sortByPortCallSequence);for(const e of t)(e.arrivalFixed||e.berthedFixed||e.departureFixed)&&(o=e.portCallSequence-n);return o}(x),[x]),[ye,Ce]=Object(g.useState)([]),[Oe,he]=Object(g.useState)(null),Ee="desktop"===p.a.getParser(window.navigator.userAgent).getPlatformType(!0),je=Object(g.useMemo)(()=>H.a.getTransferQuery(x.cargos),[x.cargos]),ke=Object(X.a)(),xe=x.portCallsFromVoyage.map(e=>e.key).toString(),Pe=null===(o=null===(a=x.voyageHeader)||void 0===a?void 0:a.voyageStatus)||void 0===o?void 0:o.statusTypeCode;Object(g.useEffect)(()=>{x.isTc&&me.getPreviousPortCallsCount(x.key,I).then(e=>{e!==be&&pe(e)})},[xe,Pe]),Object(g.useEffect)(()=>{je&&J.loadMultipleAction({type:j.a.cargo,fields:v.a,query:je})},[je,J]);const Le=Object(g.useCallback)(e=>{var t;e&&(he(null!==(t=x.partOfSchedule.find(t=>t.key===e.key))&&void 0!==t?t:null),re(!0))},[x.partOfSchedule]),De=Object(g.useCallback)(e=>{var t;if(Ee)x&&x.ballastPort&&e!==x.ballastPort.key&&L(e);else{he(null!==(t=x.partOfSchedule.find(t=>t.key===e))&&void 0!==t?t:null);const a=x.partOfSchedule.findIndex(t=>t.key===e)+1;se(a)}},[Ee,L,x]),Se=Object(g.useCallback)(e=>{if(!e&&ce>0){let e=0;be>3&&(e=be-3);ue(e+ce),oe(!0),ie(!1),fe(-1)}},[be,ce]),Te=Object(g.useCallback)(e=>{if(!e){let e=0;be>3&&(e=be-3);ue(e+ce+1),oe(!0),ie(!1),fe(-1)}},[be,ce]),Ie=Object(g.useCallback)(()=>{he(null),oe(!1),re(!1),se(-1),ie(!1),fe(-1)},[]),we=Object(g.useCallback)(e=>{var t;if(void 0!==e){he(null!==(t=x.partOfSchedule.find(t=>t.key===e))&&void 0!==t?t:null);const a=x.partOfSchedule.findIndex(t=>t.key===e)+1;se(a),ie(!0),fe(a)}},[x.partOfSchedule]),Fe=Object(g.useCallback)(e=>{e instanceof Array||void 0===e?Ie():J.loadMultipleAction({query:"filter=portCall(EQ)"+e,type:j.a.cargoport,callback:(t,a)=>{!function(e,t,a,o,n,r){o&&0===o.length?Object(V.a)(e.lang().portCall.deletePortCall,e.lang().common.deleteItemConfirmation).then(e=>{e&&t.deleteAction({key:n,type:j.a.portcall,callback:(e,o)=>{e||(t.loadSingleAction({type:j.a.voyage,key:a.key,fields:y.n}),r())}})}):Object(V.a)(e.lang().portCall.deletePortCall,e.lang().portCall.portCallHasCargoPortWarning,"",e.lang().common.close,!0)}(N,J,x,a,e,A),Ie()}})},[N,Ie,A,J,x]),Ae=Object(g.useCallback)(e=>{null!=e&&Y.a.openDrawer(e,W.a.portCostHistoryDrawer,ee,Z)},[Z,ee]),Re=Object(g.useCallback)(e=>{if(e.destination&&e.source&&x){const t=Array.from(ye),a=K.a.reorder(ye,e.source.index,e.destination.index);Ce(a);if(!K.a.reorderPortCallSequence(x.partOfSchedule,e,!0))return void Ce(t);J.updateSingleAction({data:{portCallSequence:be&&be>3?be-3+e.destination.index:e.destination.index},key:e.draggableId,type:j.a.portcall,fields:{voyage:y.n},callback:e=>{e&&Ce(t)}})}},[ye,be,J,x]);return Object(g.useEffect)(()=>{x&&Ce(H.a.getVoyageData(x,ve,R,P,be,void 0,void 0,void 0,void 0,S,T,w))},[R,x,ve,be]),f.a.createElement(f.a.Fragment,null,f.a.createElement(U.a,{reactKeyPrefix:P+"timeline",data:ye,userLocale:R,LeftContainerLayout:B.a,RightContainerLayout:B.b,onClickRow:De,onCreate:we,type:j.a.portcall,onDelete:Fe,onEdit:Le,onDropped:Re,onClickPortCostHistory:Ae,disableDndFromIndex:ve,toolbarRef:te,hideAdd:!1,disableBackground:!0,showToolBarOnCreate:ge}),ae&&f.a.createElement(C.a,{reactKeyPrefix:P+"create-port-call",voyage:x,showModal:ae,closeDialog:Ie,newSequence:de,portTerminals:ke,refreshFas:A}),ne&&f.a.createElement(M,{reactKeyPrefix:P+"edit-port-call",portCall:Oe,showModal:ne,closeModal:Ie,portTerminals:ke,refreshFas:A}),f.a.createElement(q.a,{reactKeyPrefix:P+"-pc-action-menu",open:!Ee&&!!Oe||le,onClose:Ie,anchorEl:null!==(r=te.current)&&void 0!==r?r:void 0},f.a.createElement(q.b,{onClick:()=>{var e;return Se(ce<=0||(null===(e=ye[ce])||void 0===e?void 0:e.disableCreate))},hideIconsOnDesktop:!0,disabled:ce<=0||(null===(i=ye[ce])||void 0===i?void 0:i.disableCreate)},f.a.createElement(n.a,null),Ee?N.lang().common.before:N.lang().common.addANewPortBefore),f.a.createElement(q.b,{onClick:()=>{var e;return Te(null===(e=ye[ce])||void 0===e?void 0:e.disableCreateAfter)},hideIconsOnDesktop:!0,disabled:null===(s=ye[ce])||void 0===s?void 0:s.disableCreateAfter},f.a.createElement(n.a,null),Ee?N.lang().common.after:N.lang().common.addANewPortAfter),f.a.createElement(q.b,{hidden:Ee,onClick:()=>re(!0),disabled:null===(u=ye[ce])||void 0===u?void 0:u.disableEdit},f.a.createElement(d.a,null),N.lang().common.editPort),f.a.createElement(q.b,{hidden:Ee,onClick:()=>Oe&&Ae(Oe.key),disabled:null===(b=ye[ce])||void 0===b?void 0:b.disablePortCostHistory},f.a.createElement(c.a,null),N.lang().model.portCostHistory),f.a.createElement(q.b,{hidden:Ee,onClick:()=>Oe&&L(Oe.key)},f.a.createElement(m.a,null),D),f.a.createElement(q.b,{hidden:Ee,onClick:()=>Fe(null==Oe?void 0:Oe.key),disabled:null===(O=ye[ce])||void 0===O?void 0:O.disableDelete},f.a.createElement(l.a,null),N.lang().common.delete)))}const Z=f.a.memo(J)},336:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(10),a(11),a(118);var o=a(50);function n(e,t,a){const o=Array.from(e),[n]=o.splice(t,1);return o.splice(a,0,n),o}const r={reorder:n,reorderPortCallSequence:function(e,t,a){const r=Array.from(e);if(!t.destination||!t.source)return;let l,i;a?(l=t.destination.index-1,i=t.source.index-1):(l=t.destination.index,i=t.source.index);const c=r.sort(o.a.sortByVesselPcSequence)[0].vesselPcSequence,s=n(r,i,l);for(let e=0;e<s.length;e++)s[e].portCallSequence=e+1,s[e].vesselPcSequence=e+c;return o.a.isPortCallSequenceCorrect(s)?s:void 0}}},359:function(e,t,a){"use strict";function o(e){return e.type&&!e.options}function n(e){return e.options&&!e.type}a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}))},375:function(e,t,a){"use strict";a.d(t,"a",(function(){return $}));var o=a(0),n=a.n(o),r=a(340),l=(a(10),a(11),a(214)),i=a(323),c=a(6),s=a(3),d=a(947),u=a(177),m=a(100),b=a.n(m),p=a(149),g=a.n(p),f=a(250),v=a.n(f),y=a(1697),C=a.n(y),O=a(685);const h=e=>{const{editText:t,deleteText:a,onClickEdit:o,onClickDelete:r,onClickCreate:l,disableEdit:c=!1,disableDelete:s=!1,reactKeyPrefix:d,tooltip:m,toolbarRef:p,hideAdd:f,onClickCostHistory:y,historyText:h,hideCostHistory:E}=e;return n.a.createElement(i.a,{component:"div",sx:u.b.toolbar},!E&&n.a.createElement(O.a,{tooltip:null!=m?m:h,onClick:e=>{y&&y(e)},disabled:!1,reactKeyPrefix:d+"-history-btn"},n.a.createElement(C.a,null)),!f&&n.a.createElement(O.a,{tooltip:"",onClick:e=>{e.stopPropagation(),e.preventDefault(),l&&l(e)},disabled:!1,reactKeyPrefix:d+"-create-btn"},n.a.createElement(b.a,{ref:p})),n.a.createElement(O.a,{tooltip:null!=m?m:t,onClick:o,disabled:c,reactKeyPrefix:d+"-edit-btn"},n.a.createElement(v.a,null)),n.a.createElement(O.a,{tooltip:null!=m?m:a,onClick:r,disabled:s,reactKeyPrefix:d+"-delete-btn"},n.a.createElement(g.a,null)))};var E=a(283),j=a.n(E);const k=n.a.memo(e=>{const{RightContainerLayout:t,userLocale:a,row:{content:o}}=e;if(t&&o.rightContainer){if(o.rightContainer instanceof Array)return n.a.createElement(n.a.Fragment,null,o.rightContainer.map(e=>n.a.createElement(t,{obj:e.obj,nextObj:e.nextObj,key:e.id,userLocale:a,overlappingVoyageColourMap:e.overlappingVoyageColourMap,onClickOverlappingChip:e.onClickOverlappingChip})));if("object"==typeof o.rightContainer)return n.a.createElement(t,{obj:o.rightContainer.obj,nextObj:o.rightContainer.nextObj,userLocale:a,overlappingVoyageColourMap:o.rightContainer.overlappingVoyageColourMap,onClickOverlappingChip:o.rightContainer.onClickOverlappingChip,hideNewIcon:o.rightContainer.hideNewIcon})}return n.a.createElement(n.a.Fragment,null)});function x(e){const{editText:t,deleteText:a,hovered:r,index:i,onClickEdit:c,onClickDelete:s,onClickCreate:d,reactKeyPrefix:m,rightId:b,rightOnClick:p,row:{disableEdit:g,disableDelete:f,disableClick:v,disablePortCostHistory:y},toolbarRef:C,showToolBarOnCreate:O,sx:E,hideAdd:x,onClickCostHistory:P,hideCostHistory:L,historyText:D,hideToolbar:S}=e,T="desktop"===j.a.getParser(window.navigator.userAgent).getPlatformType(!0),I=Object(o.useCallback)(e=>{e.stopPropagation(),p&&p(null!=b?b:-1)},[b,p]);return n.a.createElement(l.a,{item:!0,xs:!0,key:"right_"+i,sx:E},n.a.createElement(l.a,{item:!0,container:!0,xs:!0},n.a.createElement(l.a,{item:!0,xs:!0,sx:Object.assign(Object.assign({},!v&&u.b.rightContainer),!v&&b&&p&&u.b.pointer),onClick:b&&p?I:void 0},n.a.createElement(k,Object.assign({},e)),(O===i||r)&&T&&!S&&n.a.createElement(h,Object.assign({},e,{toolbarRef:C,editText:t,deleteText:a,onClickEdit:c,onClickDelete:s,onClickCreate:d,disableEdit:g,disableDelete:f,reactKeyPrefix:m+"-toolbar",hideAdd:x,onClickCostHistory:P,historyText:D,hideCostHistory:null!=L?L:y})))))}var P=a(1269);const L=n.a.memo(e=>{var t,a;const{row:{content:o,capContent:r,capIconOverride:i,disableConnect:c,disableCreate:s,disableDelete:d,disableDeleteBoth:m,disableDeleteLeft:b,disableDeleteRight:p,showMidline:g,overrideLineColor:f},index:v,reactKeyPrefix:y,hovered:C,leftOnClick:O,leftId:h,rightId:E,rightOnClick:j,onDelete:k,onCreate:x,onConnect:L,data:S,type:T,onMouseLeave:I,fullLineHeight:w}=e;return n.a.createElement(l.a,{item:!0,xs:1,key:"middle_"+v,sx:Object.assign(Object.assign({},(h&&O||E&&j)&&u.b.defaultCursor),u.b.container)},n.a.createElement(P.a,{reactKeyPrefix:y+"cap-line",id:D(e.row),onDelete:k,onCreate:x,type:T,showLine:S.length>v+1,hovered:C,disableDelete:d,disableCreate:s,disableDeleteLeft:b,disableDeleteRight:p,disableDeleteBoth:m,connectLeft:!c&&!(null===(t=null==o?void 0:o.leftContainer)||void 0===t?void 0:t.obj),connectRight:!c&&!(null===(a=null==o?void 0:o.rightContainer)||void 0===a?void 0:a.obj),onConnect:L,capIconOverride:i,index:v,closeRowHovered:I,capContent:r,overrideCapColor:f,showMidline:g,overrideLineColor:f,fullHeight:w}))});function D(e){var t,a;const{id:o,content:n}=e,r=null===(t=null==n?void 0:n.leftContainer)||void 0===t?void 0:t.obj,l=null===(a=null==n?void 0:n.rightContainer)||void 0===a?void 0:a.obj;return void 0!==o?o:r||l?[null==r?void 0:r.key,null==l?void 0:l.key]:void 0}var S=a(2461),T=a(218),I=a(246),w=a(827),F=a.n(w);function A(e){const{title:t,dndEnabled:a,tooltip:o,reactKeyPrefix:r,disableDrag:l}=e,i=e=>{e.stopPropagation()};return a?n.a.createElement(T.a,{title:t,enterDelay:700,enterNextDelay:500,disableHoverListener:l&&!o,disableFocusListener:!0},n.a.createElement("div",null,n.a.createElement(I.a,{id:r+"drag-icon-btn",onClick:i,sx:u.b.button,disabled:l},n.a.createElement(F.a,{sx:[u.b.iconContainer]})))):null}function R(e){const{row:{content:t,dragIdLeft:a,dragOnLeftSideEnabled:o,tooltip:l},LeftContainerLayout:i,index:c,userLocale:s,reactKeyPrefix:d,title:m,dndEnabled:b}=e;if(i&&t.leftContainer&&!(t.leftContainer instanceof Array)){const{leftContainer:e}=t;return o&&void 0!==a?n.a.createElement(r.b,{key:e.id?""+e.id:""+c,draggableId:e.id?""+e.id:"L"+c,index:a},(t,a)=>n.a.createElement(S.a,Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{sx:M(a.isDragging,t.draggableProps.style),disableGutters:!0}),n.a.createElement("div",{key:"left_container_icons_"+c,style:u.b.leftIconContainer},n.a.createElement(A,{dndEnabled:b,reactKeyPrefix:d,title:m,disableDrag:!o,tooltip:l})),n.a.createElement("div",{style:{marginLeft:"auto",marginRight:0,top:0}},n.a.createElement(i,{obj:e.obj,nextObj:e.nextObj,userLocale:s,overlappingVoyageColourMap:e.overlappingVoyageColourMap})))):n.a.createElement(S.a,{key:e.id?""+e.id:""+c,disableGutters:!0},n.a.createElement(i,{obj:e.obj,nextObj:e.nextObj,userLocale:s,overlappingVoyageColourMap:e.overlappingVoyageColourMap}))}return null}function N(e){const{row:{content:t,dragIdLeft:a,dragOnLeftSideEnabled:o,tooltip:l},LeftContainerLayout:i,userLocale:c,dndEnabled:s,reactKeyPrefix:d,title:u}=e;return i&&t.leftContainer&&t.leftContainer instanceof Array?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},t.leftContainer&&t.leftContainer instanceof Array&&t.leftContainer.map((e,t)=>{const m=""+(e.id?e.id:t);return o&&a?n.a.createElement(r.b,{key:m,draggableId:m,index:a+t},(t,a)=>n.a.createElement(n.a.Fragment,null,t.placeholder,n.a.createElement(S.a,Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{sx:(M(a.isDragging,t.draggableProps.style),{top:0}),disableGutters:!0}),n.a.createElement(A,{dndEnabled:s,reactKeyPrefix:d,title:u,disableDrag:!o,tooltip:l}),n.a.createElement(i,{obj:e.obj,nextObj:e.nextObj,userLocale:c,overlappingVoyageColourMap:e.overlappingVoyageColourMap})),t.placeholder)):n.a.createElement(S.a,{key:m,disableGutters:!0},n.a.createElement(i,{obj:e.obj,nextObj:e.nextObj,userLocale:c,overlappingVoyageColourMap:e.overlappingVoyageColourMap}))})):null}function M(e,t){return Object.assign(Object.assign(Object.assign({},e&&{background:u.a[1],borderRadius:1}),{userSelect:"none",display:"flex",flexDirection:"column",width:"100%"}),t)}function B(e){const{row:{content:t},LeftContainerLayout:a}=e;return a&&t.leftContainer?t.leftContainer instanceof Array?n.a.createElement(N,Object.assign({},e)):n.a.createElement(R,Object.assign({},e)):null}function H(e){const{index:t,reactKeyPrefix:a,leftOnClick:i,leftId:c,sx:s}=e,d=Object(o.useCallback)(e=>{e.stopPropagation(),i&&i(null!=c?c:-1)},[c,i]);return n.a.createElement(l.a,{id:a+"grid-item",item:!0,xs:!0,key:"left_"+t,onClick:c&&i?d:void 0,sx:[u.b.leftContainer,Object.assign({},c&&i&&u.b.pointer),...Array.isArray(s)?s:[s],Object.assign({},!e.row.content.leftContainer&&{minHeight:"4rem"})]},n.a.createElement(r.c,{droppableId:"droppable_timeline_left_side-"+t,type:"LEFT_ITEM"},a=>n.a.createElement(l.a,Object.assign({item:!0,xs:!0,key:"left_container_content_"+t,ref:a.innerRef},a.droppableProps),n.a.createElement(B,Object.assign({},e)),a.placeholder)))}const U=n.a.memo((function(e){var t,a,r,m,b,p;const{row:g,onClickRow:f,onEdit:v,onDelete:y,onCreate:C,index:O,type:h,reactKeyPrefix:E,fullLineHeight:j,disableBackground:k,hideAdd:P,showToolBarOnCreate:D,onClickPortCostHistory:S,hidePortCostHistory:T,dndEnabled:I,hideToolbar:w}=e,{content:F,id:A,tooltip:R,disableClick:N,belowRowRight:M,belowRowLeft:B,disableHover:U}=g,[K]=Object(c.a)([s.a.IInternationalization]),{common:V,model:q}=K.lang(),[$,_]=Object(o.useState)(!1),z=Object(o.useCallback)(()=>{U||setTimeout(()=>_(!0),100)},[U]),G=Object(o.useCallback)(()=>{setTimeout(()=>_(!1),100)},[]),W=Array.isArray(F.leftContainer)||null===(t=F.leftContainer)||void 0===t?void 0:t.id,Y=Array.isArray(F.leftContainer)||null===(a=F.leftContainer)||void 0===a?void 0:a.onClickContent,Q=Array.isArray(F.rightContainer)||null===(r=F.rightContainer)||void 0===r?void 0:r.id,X=Array.isArray(F.rightContainer)||null===(m=F.rightContainer)||void 0===m?void 0:m.onClickContent,J=Object(o.useCallback)(e=>{e.stopPropagation(),F&&F.rightContainer&&v&&v(F.rightContainer.obj)},[F,v]),Z=Object(o.useCallback)(e=>{e.stopPropagation(),A&&(null==F?void 0:F.rightContainer)&&y&&y(Number(A),O,h)},[F,A,O,y,h]),ee=Object(o.useCallback)(e=>{e.stopPropagation(),A&&(null==F?void 0:F.rightContainer)&&C&&C(Number(A),O,h)},[null==F?void 0:F.rightContainer,A,O,C,h]),te=Object(o.useCallback)(e=>{e.stopPropagation(),A&&(null==F?void 0:F.rightContainer)&&S&&S(Number(A),O,h)},[F.rightContainer,A,O,S,h]),ae=Object(o.useMemo)(()=>{let e=V.edit;return h instanceof Array||(e+=" "+Object(d.a)(h.name)),e},[V.edit,h]),oe=Object(o.useMemo)(()=>{let e=V.delete;return h instanceof Array||(e+=" "+Object(d.a)(h.name)),e},[V.delete,h]),ne=Object(o.useCallback)(e=>e.stopPropagation(),[]),re=Object(o.useMemo)(()=>{let e=q.portCostHistory;return h instanceof Array||(e+=""),e},[q.portCostHistory,h]),le=R||"";if(!F)return null;const ie=I?{cursor:"move"}:{cursor:"pointer"};return n.a.createElement(l.a,{id:E+"grid-container",item:!0,container:!0,xs:12,key:"row_"+O,onClick:A&&f?f.bind(null,A):void 0,onMouseEnter:z,onMouseLeave:G,sx:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},N&&u.b.disabledRow),A&&f&&ie),!N&&u.b.hover),!N&&u.b.borderRadius),u.b.row),k&&u.b.disableBackground),(B||M)&&{marginBottom:.5})},!F.hideLeftContainer&&n.a.createElement(l.a,{sx:u.b.box},n.a.createElement("span",{onMouseEnter:z,onMouseLeave:G},n.a.createElement(H,Object.assign({},e,{editText:ae,hovered:$,onClickEdit:J,title:le,leftId:null!=W?W:-1,leftOnClick:Y,sx:Object.assign(Object.assign(Object.assign(Object.assign({},U&&u.b.hoverOnDisabled),!U&&$&&u.b.hover),u.b.borderRadius),A&&f&&ie)}))),B&&n.a.createElement(i.a,{alignContent:"center",sx:Object.assign(Object.assign({},u.b.bottomLeft),{alignItems:"end"}),onClick:ne,key:E+"-below-row-left-chip-"+O,component:"span"},B)),n.a.createElement(L,Object.assign({},e,{hovered:$,leftId:null!=W?W:-1,leftOnClick:Y,rightId:null!=Q?Q:-1,rightOnClick:X,onMouseLeave:G,fullLineHeight:j})),n.a.createElement(l.a,{sx:u.b.box},n.a.createElement("span",{onMouseEnter:z,onMouseLeave:G},n.a.createElement(x,Object.assign({},e,{hovered:$,onClickRow:$?void 0:f,showToolBar:(!!v||!!C||!!y||!!S)&&(null===(b=!U)||void 0===b||b)&&(null===(p=!N)||void 0===p||p),editText:ae,deleteText:oe,onClickEdit:J,onClickDelete:Z,onClickCreate:ee,title:le,rightId:null!=Q?Q:-1,rightOnClick:X,sx:Object.assign(Object.assign(Object.assign(Object.assign({},U&&u.b.hoverOnDisabled),!U&&$&&u.b.hover),u.b.borderRadius),A&&f&&ie),hideAdd:P,showToolBarOnCreate:D,onClickCostHistory:te,hideCostHistory:T,historyText:re,hideToolbar:w}))),M&&n.a.createElement(i.a,{alignContent:"center",sx:Object.assign(Object.assign({},u.b.bottomRight),{alignItems:"end"}),onClick:ne,key:E+"-below-row-right-chips",component:"span"},M)))}));var K=a(892),V=a(138);const q={width:"100%","& > div:last-child":{"& timeline-cap:hover ":{marginBottom:0}},pb:1.75},$=n.a.memo((function(e){const{data:t,LeftContainerLayout:a,onClickRow:i,RightContainerLayout:c,userLocale:s,onDelete:d,onCreate:m,type:b,onEdit:p,onDropped:g,disableDndFromIndex:f,onConnect:v,reactKeyPrefix:y,toolbarRef:C,hideAdd:O,fullLineHeight:h,disableBackground:E=!1,showToolBarOnCreate:j,onClickPortCostHistory:k,hidePortCostHistory:x,hideToolbar:P}=e,L=Object(o.useCallback)(e=>{if(g){const{destination:t,source:a}=e;if(!t)return;if(t.index===a.index)return;if(void 0!==f&&t.index<=f)return;g(e)}},[f,g]),D=Object(o.useMemo)(()=>function(e){const{data:t,reactKeyPrefix:a,onCreate:o,userLocale:r,type:l,onClickRow:i,LeftContainerLayout:c,RightContainerLayout:s,onConnect:d,onEdit:u,onDelete:m,hideAdd:b,fullLineHeight:p,showToolBarOnCreate:g,onClickPortCostHistory:f,hidePortCostHistory:v,hideToolbar:y}=e;if(Object(K.a)(t)&&o){const e={content:{leftContainer:{id:0,obj:{}},rightContainer:{id:0,obj:{}}}},i={content:{leftContainer:null,rightContainer:null},id:0};return n.a.createElement(U,{reactKeyPrefix:a+"timeline-row",key:0,row:Object(V.a)(l)?e:i,userLocale:r,onCreate:o,data:t,index:0,type:l,dndEnabled:!1,hideAdd:b,fullLineHeight:p,disableBackground:!0,showToolBarOnCreate:g,hideToolbar:y})}return t.map((e,C)=>n.a.createElement(U,{reactKeyPrefix:a+"timeline-row"+C,key:C,row:e,LeftContainerLayout:c,onClickRow:e.disableClick?void 0:i,RightContainerLayout:s,userLocale:r,onDelete:m,onCreate:o,onEdit:u,data:t,index:C,type:l,dndEnabled:!1,onConnect:d,hideAdd:b,fullLineHeight:p,disableBackground:!0,showToolBarOnCreate:g,onClickPortCostHistory:f,hidePortCostHistory:v,hideToolbar:y}))}(e),[e]);return g?n.a.createElement(r.a,{onDragEnd:L},n.a.createElement(r.c,{droppableId:"droppable_timeline",type:"ROW",isCombineEnabled:!0},e=>n.a.createElement(l.a,Object.assign({container:!0,spacing:0,direction:"column",sx:Object.assign({},q),ref:e.innerRef},e.droppableProps),t.map((e,o)=>void 0!==f&&(o<=f||e.disableDrag)?n.a.createElement(S.a,{key:e.id?""+e.id:""+o,disableGutters:!0},n.a.createElement(U,{reactKeyPrefix:y+"droppable"+o,key:o,row:e,LeftContainerLayout:a,onClickRow:e.disableClick?void 0:i,RightContainerLayout:c,userLocale:s,onDelete:d,onCreate:m,onEdit:p,data:t,index:o,type:b,dndEnabled:!1,onConnect:v,toolbarRef:C,hideAdd:O,fullLineHeight:h,disableBackground:E,showToolBarOnCreate:j,onClickPortCostHistory:k,hidePortCostHistory:x,hideToolbar:P})):n.a.createElement(r.b,{key:e.id?""+e.id:""+o,draggableId:e.id?""+e.id:""+o,index:o,isDragDisabled:e.disableDrag},(r,l)=>{return n.a.createElement(S.a,Object.assign({ref:r.innerRef},r.draggableProps,r.dragHandleProps,{style:(f=l.isDragging,E=r.draggableProps.style,Object.assign(Object.assign({},E),f&&{background:u.a[1],borderRadius:1})),disableGutters:!0}),n.a.createElement(U,{reactKeyPrefix:`${y}draggable${o}`,key:o,row:e,LeftContainerLayout:a,onClickRow:e.disableClick?void 0:i,RightContainerLayout:c,userLocale:s,onDelete:d,onCreate:m,onEdit:p,data:t,index:o,type:b,dndEnabled:!0,dragOnLeftSideEnabled:e.dragOnLeftSideEnabled,onConnect:v,onDropped:g,dragHandleProps:r.dragHandleProps,toolbarRef:C,hideAdd:O,fullLineHeight:h,disableBackground:!0,showToolBarOnCreate:j,onClickPortCostHistory:k,hidePortCostHistory:x,hideToolbar:P}));var f,E})),e.placeholder))):n.a.createElement(r.a,{onDragEnd:L},n.a.createElement(l.a,{container:!0,spacing:0,direction:"column",sx:Object.assign({},q)},D))}))},427:function(e,t,a){"use strict";a.d(t,"c",(function(){return $})),a.d(t,"a",(function(){return z})),a.d(t,"b",(function(){return G}));a(10),a(11);var o=a(130),n=a(323),r=a(2104),l=a(0),i=a.n(l),c=a(218),s=a(2480),d=a(2481),u=a(977),m=a(1323),b=a(1330),p=a(1432),g=a(2010),f=a(2502),v=a(2358),y=a(2482),C=a(50);const O=e=>e/864e5,h=(e,t,a,o)=>{var n;if(!e||!t)return 0;const r=O(t.getTime()-e.getTime());return r>=0?0===r?0:-r:O(e.getTime()+o-(null!==(n=null==a?void 0:a.getTime())&&void 0!==n?n:0))},E=(e,t)=>{var a;return Object(b.a)(null===(a=e.voyage)||void 0===a?void 0:a.portCallsFromVoyage.filter(e=>{var a;return(null===(a=e.reasonForCall)||void 0===a?void 0:a.reasonForCallDesc)===t}),Object(p.a)(Object(g.a)("cargoPorts"),Object(f.a)(v.a,{cargo:{key:e.key}})))},j=(e,t)=>{var a;return null!==(a=Object(y.a)(e.map(t)))&&void 0!==a?a:0},k=(e,t)=>j(e,e=>{return h(t,(a=e,C.a.getEventLogDate(null!==(r=null===(n=null===(o=a.tsOfCargoPort)||void 0===o?void 0:o.portCall)||void 0===n?void 0:n.eventLogs)&&void 0!==r?r:[],"BRT")),(e=>{var t,a,o;return C.a.getEventLogDate(null!==(o=null===(a=null===(t=e.tsOfCargoPort)||void 0===t?void 0:t.portCall)||void 0===a?void 0:a.eventLogs)&&void 0!==o?o:[],"DEP")})(e),e.laytimeUsed);var a,o,n,r}),x=(e,t)=>j(e,e=>h(t,(e=>{var t,a;const o=null!==(a=null===(t=E(e,"Loading"))||void 0===t?void 0:t.eventLogs)&&void 0!==a?a:[];return C.a.getEventLogDate(o,"BRT")})(e),(e=>{var t,a;const o=null!==(a=null===(t=E(e,"Loading"))||void 0===t?void 0:t.eventLogs)&&void 0!==a?a:[];return C.a.getEventLogDate(o,"DEP")})(e),e.laytimeUsed));var P=a(6),L=a(23),D=a(42),S=a(137),T=a(159),I=a(58),w=a(35),F=a(3);function A({classes:e,daysDiff:t,isLoading:a,vesselName:o="",voyageRef:n=""}){var r;const[l]=Object(P.a)([F.a.IInternationalization]),b=null!==(r=Object(L.a)(D.a.getUserLocale))&&void 0!==r?r:w.f[0],p=l.formatNumber(t,{minDecimals:2,maxDecimals:2,locale:b.isoCode}),{early:g,late:f,daysLowercase:v}=l.lang().common;let y,C=(a?l.lang().common.transferFrom:l.lang().common.transferTo)+l.lang().common.voyageOnVessel(n,o);return t<0?(y=i.a.createElement(s.a,{color:"primary",className:e.statusIcon}),C+=`, ${g}: ${p} ${v}`):t>0?(y=i.a.createElement(s.a,{color:"error",className:e.statusIcon}),C+=`, ${f}: +${p} ${v}`):y=i.a.createElement(d.a,{className:e.statusIcon}),i.a.createElement(u.a,{injectFirst:!0},i.a.createElement(m.a,{theme:S.a},i.a.createElement(c.a,{title:C},y)))}var R=a(1790),N=a(97),M=a(38),B=a(598),H=a(213),U=a(187),K=a(315),V=a(33),q=a(724);const $=Object(H.a)(e=>Object(U.a)({leftColumn:{fontSize:".85rem",whiteSpace:"nowrap"},portCallChips:{backgroundColor:e.palette.background.paper,borderRadius:100,color:e.palette.grey[800],padding:2},reasonForCall:{fontSize:"0.85rem",marginBottom:"4px"},ballast:{lineHeight:1.57,marginBottom:e.spacing(1/4),fontSize:"0.85rem"},statusIcon:{fontSize:"1.3rem",verticalAlign:"middle",marginRight:e.spacing(3/4),marginLeft:e.spacing(3/4)},portCost:{lineHeight:1.43},portName:{fontSize:"0.85rem"}})),_={day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"},z=i.a.memo(({obj:e,userLocale:t})=>{var a,r;const[c]=Object(P.a)([F.a.IInternationalization]),{common:s}=c.getLanguageFile(),d=$({}),{eventLogs:u,reasonForCall:m,cargoPorts:b=[],voyage:p,laytimeUsed:g=0,daysExtraInPort:f=0,daysInPort:v=0,ownedByVoyage:y=0,previousPortCallCount:O,arrivalFixed:h,departureFixed:E,berthedFixed:j}=e,L="Ballast"===(null==m?void 0:m.reasonForCallDesc),D=!Object(K.isUndefined)(O),S=Object(l.useMemo)(()=>C.a.getEventLogDate(u,"ARR"),[u]),w=Object(l.useMemo)(()=>C.a.getEventLogDate(u,"DEP"),[u]),M=Object(l.useMemo)(()=>{const e=null==S?void 0:S.toLocaleDateString(t.isoCode,_),a=h?s.ata:s.eta;return L?e:a+" "+e},[S,h,s.ata,s.eta,L,t.isoCode]),B=Object(l.useMemo)(()=>{const e=null==w?void 0:w.toLocaleDateString(t.isoCode,_),a=E?s.atd:s.etd;return L?e:a+" "+e},[s.atd,s.etd,E,w,L,t]);if(!(D||(null==e?void 0:e.eventLogs)&&(null===(a=null==e?void 0:e.reasonForCall)||void 0===a?void 0:a.reasonForCallDesc)))return null;const H={maxDecimals:2,minDecimals:2,locale:t.isoCode},U=c.formatNumber(g,H),V=c.formatNumber(f,H),q=c.formatNumber(v-g-f,H),z=`${U} ${s.daysLowercaseShort}`,G=`+ ${q} ${s.daysLowercaseShort} ${s.waiting}`,W=`${V} ${s.daysLowercaseShort} ${s.extra}`,Y=C.a.getArrivalWindowMissedBy(e),{transfers:Q,daysDiff:X}=function(e,t,a){let o=[],n=0;return"Loading"===a?(o=e.filter(e=>{var t;return(null===(t=null==e?void 0:e.cargoType)||void 0===t?void 0:t.cargoTypeCode)===T.a.TRANSFER}),n=k(o,t)):"Discharging"===a&&(o=I.a.getAllTsOfCargo(e).filter(e=>{var t;return(null===(t=null==e?void 0:e.cargoType)||void 0===t?void 0:t.cargoTypeCode)===T.a.TRANSFER}),n=x(o,t)),{transfers:o,daysDiff:n}}(b.map(e=>e.cargo),S,m?m.reasonForCallDesc:""),J=I.a.getVesselNameForTransferConnectedCargoes(Q,m?m.reasonForCallDesc:""),Z=I.a.getVoyageReferenceForTransferConnectedCargoes(Q,m?m.reasonForCallDesc:""),{drawerId:ee,tabId:te}=Object(N.i)(),ae=null!==y&&ee&&+ee!==(null==p?void 0:p.key)&&+ee!==(null==y?void 0:y.key);return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{variant:"subtitle2",className:ae?"":d.leftColumn,sx:{mb:.5}},!L&&void 0!==Y&&i.a.createElement(R.a,{userLocale:t,arrivalWindowMissedBy:Y,classes:d}),i.a.createElement(n.a,{sx:{whiteSpace:"nowrap"}},M),i.a.createElement(n.a,{sx:{whiteSpace:"nowrap"}},L?"":B)),!L&&!O&&i.a.createElement(o.a,{variant:"body2",color:"textSecondary"},!!Q.length&&i.a.createElement(A,{classes:d,daysDiff:X,isLoading:"Loading"===m.reasonForCallDesc,vesselName:J,voyageRef:Z}),["L","D"].includes(null!==(r=null==m?void 0:m.reasonForCall)&&void 0!==r?r:"")?z+" + "+W:W,i.a.createElement(n.a,{component:"span",display:"block"},G)))}),G=i.a.memo(e=>{var t,a,l,c,s,d,u,m,b,p,g,f,v,y,C,O,h;const E=$({}),[j]=Object(P.a)([F.a.IInternationalization]),{model:k,common:x,voyages:L}=j.getLanguageFile();if(null===(a=null===(t=e.obj)||void 0===t?void 0:t.reasonForCall)||void 0===a?void 0:a.reasonForCallDesc){const{obj:{terminal:t,port:a,reasonForCall:{reasonForCallDesc:r},ownedByVoyage:P,arrivalFixed:L,departureFixed:D,daysInPort:S=0,berthedFixed:T},userLocale:I}=e,w=j.formatNumber(S,{maxDecimals:2,locale:I.isoCode}),F=`${k.totalDays}: ${w} ${x.daysLowercaseShort}`,A="Ballast"===r,R=null!==(l=null==a?void 0:a.portName)&&void 0!==l?l:"",H=null!==(c=null==t?void 0:t.terminalName)&&void 0!==c?c:"",U=A?E.ballast:E.reasonForCall,K=null!==(d=null===(s=e.obj.currency)||void 0===s?void 0:s.currencyCode)&&void 0!==d?d:"",V=j.formatNumber(null!==(u=e.obj.portCostCurrency)&&void 0!==u?u:0,{maxDecimals:0,locale:I.isoCode}),{drawerId:q,tabId:$}=Object(N.i)(),_=null!==P&&(null==P?void 0:P.key)!==(null===(b=null===(m=e.obj)||void 0===m?void 0:m.voyage)||void 0===b?void 0:b.key)&&q&&+q===(null===(g=null===(p=e.obj)||void 0===p?void 0:p.voyage)||void 0===g?void 0:g.key),z=null!==P&&q&&+q!==(null===(v=null===(f=e.obj)||void 0===f?void 0:f.voyage)||void 0===v?void 0:v.key)&&+q!==(null==P?void 0:P.key),G=A||L||D||T||z?{cursor:"pointer"}:{cursor:"move"};return i.a.createElement(n.a,{sx:{pointer:G}},i.a.createElement(o.a,{variant:"subtitle2",className:E.portName},R),i.a.createElement(o.a,{variant:"subtitle2"},H),i.a.createElement(o.a,{color:"body",className:U},r),!A&&i.a.createElement(o.a,{variant:"body2",color:"textSecondary",className:E.portCost},`${k.portCost}: ${V} ${K}`," ",i.a.createElement("br",null),F),_&&i.a.createElement(B.a,{className:E.textCss,key:null==P?void 0:P.key,voyageId:null==P?void 0:P.key,label:null===(y=null==P?void 0:P.voyageHeader)||void 0===y?void 0:y.referenceNo,chipColour:null!==(O=null===(C=e.overlappingVoyageColourMap)||void 0===C?void 0:C.get(P.key))&&void 0!==O?O:M.b.bergenRain.primary,onClickChip:e.onClickOverlappingChip}),z&&i.a.createElement(B.a,{className:E.textCss,key:null==P?void 0:P.key,voyageId:null==P?void 0:P.key,label:null===(h=null==P?void 0:P.voyageHeader)||void 0===h?void 0:h.referenceNo,chipColour:M.b.bergenRain.primary,onClickChip:void 0,disableHover:!0}))}if(!Object(K.isUndefined)(e.obj.previousPortCallCount)){const{previousPortCallCount:t,voyage:a}=e.obj,n=`${t} ${L.previousPorts}`,l=e=>({onClick:e,onAuxClick:e,rel:"noopener noreferrer"}),c=()=>{if(e.obj.onClickLink){const t=q.a.getPortCallListVoyageFilter(a);e.obj.onClickLink([t])}},s=e=>{e.stopPropagation(),c()};return i.a.createElement("div",{className:E.pointer},i.a.createElement(o.a,{variant:"subtitle2",className:E.portName},n),i.a.createElement(o.a,{color:"textSecondary",className:E.reasonForCall},i.a.createElement(r.a,Object.assign({},l(s),{href:"#"+V.a.portCalls.url}),L.seeAllPorts)))}return null})},577:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a(168);function n(e,t){return t||(e&&e.length>0?t=>Object(o.a)(t,e,", "):e=>e.toString())}},660:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));a(10),a(11);var o=a(0),n=a.n(o),r=a(715),l=a(375),i=a(23),c=a(1),s=a(42),d=a(1195),u=a(81),m=a(130),b=a(323),p=a(716);const g=n.a.memo((function(e){var t,a;const{obj:o}=e,r=p.a;if(o){const e=Object(u.a)(o,"reasonForCall.reasonForCallDesc");return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{sx:r.top,variant:"subtitle2",color:o.key<1?"primary":void 0},null===(t=o.port)||void 0===t?void 0:t.portName),o.terminal&&n.a.createElement(m.a,{variant:"subtitle2"},null===(a=o.terminal)||void 0===a?void 0:a.terminalName),n.a.createElement(b.a,{sx:r.textContainerLeftCard},n.a.createElement(m.a,{color:"textSecondary"},e)))}return null}));var f=a(6),v=a(3);const y={timelineSectionTitle:{lineHeight:.5,marginBottom:1},timelineSectionSubtitle:{marginBottom:2}},C=n.a.memo((function(e){const{voyage:t,selectedCargo:a,onDropped:u,onDelete:b,LeftContainerLayout:p,RightContainerLayout:C,displayMatches:O,reactKeyPrefix:h,selectedCargoPort:E,hasTemplateCargo:j,enableDragOnLeftSide:k,hideToolbar:x}=e,[P]=Object(f.a)([v.a.IInternationalization]),{model:L,common:D}=P.getLanguageFile(),S=Object(i.a)(s.a.getUserLocale),T=Object(o.useMemo)(()=>r.a.generateTimelineData(t,S,a,O,E,j,k),[t,S,a,O,E,j,k]),I=r.a.getDisableDndIndex(t);return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{sx:y.timelineSectionTitle},D.timeline),n.a.createElement(m.a,{variant:"body2",sx:y.timelineSectionSubtitle},L.cargoPort," / ",L.portCall),n.a.createElement(l.a,{reactKeyPrefix:h+"timeline",data:T,userLocale:S,LeftContainerLayout:p||g,RightContainerLayout:C||d.a,onDelete:b,type:[c.a.cargoport,c.a.portcall],onDropped:u,fullLineHeight:!0,disableDndFromIndex:I,disableBackground:!0,hideToolbar:x}))}))},685:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(218),n=a(246),r=a(0),l=a.n(r),i=a(177);const c=l.a.memo(e=>l.a.createElement(o.a,{title:e.tooltip,enterDelay:700,enterNextDelay:500,disableFocusListener:!0},l.a.createElement("span",null,l.a.createElement(n.a,{onClick:e.onClick,disabled:e.disabled,color:"default",sx:i.b.toolbarButton,id:e.reactKeyPrefix},e.children))))},715:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return h}));a(10),a(11),a(158),a(118);var o=a(308),n=a.n(o),r=a(147),l=a(50),i=a(60),c=a(64),s=a(178),d=a(138),u=a(81),m=a(351),b=a(156);const p=(e,t)=>{const a=Array.from(e),o=[],n=[...t],r=[],l=a.reduce((e,t)=>{var a,o,r,l,i,c;let s=0;for(const e of n)(null===(a=null==t?void 0:t.port)||void 0===a?void 0:a.key)===(null===(o=null==e?void 0:e.port)||void 0===o?void 0:o.key)&&(null===(r=t.reasonForCall)||void 0===r?void 0:r.reasonForCall)===(null===(l=null==e?void 0:e.reasonForCall)||void 0===l?void 0:l.reasonForCall)&&(null!==t.terminal&&null===(null==e?void 0:e.terminal)||(null===(i=t.terminal)||void 0===i?void 0:i.key)===(null===(c=null==e?void 0:e.terminal)||void 0===c?void 0:c.key))&&s++;return s>1&&e.push(t),e},[]);l.length>0&&(l.forEach(e=>{if(r.push(e),null===e.portCall){const t=a.findIndex(t=>t.key===e.key);-1!==t&&a.splice(t,1)}}),a.forEach(e=>{const t=l.findIndex(t=>null!==t.portCall&&t.key===e.key);-1!==t&&l.splice(t,1)}));for(const e of n){const t=a.filter(t=>{var o,r,l,i,c,s,d;if(t.portCall){const a=n.find(e=>{var a,o,n,r,l,i,c;return(null===(a=t.port)||void 0===a?void 0:a.key)===(null===(o=null==e?void 0:e.port)||void 0===o?void 0:o.key)&&(null===(n=t.terminal)||void 0===n?void 0:n.key)===(null===(r=null==e?void 0:e.terminal)||void 0===r?void 0:r.key)&&(null===(l=t.reasonForCall)||void 0===l?void 0:l.reasonForCall)===(null===(i=null==e?void 0:e.reasonForCall)||void 0===i?void 0:i.reasonForCall)&&(null===(c=t.portCall)||void 0===c?void 0:c.key)===(null==e?void 0:e.key)});return!(!a||a.key!==(null==e?void 0:e.key))||!a&&(null===(o=t.port)||void 0===o?void 0:o.key)===(null===(r=null==e?void 0:e.port)||void 0===r?void 0:r.key)&&(null===(l=t.portCall)||void 0===l?void 0:l.key)===(null==e?void 0:e.key)}if(e&&e.port&&t.port){for(const o of a){let a=0;for(const e of n)o.reasonForCall&&e&&e.port&&e.reasonForCall&&o.port&&o.port.key===e.port.key&&(null===(i=o.terminal)||void 0===i?void 0:i.key)===(null===(c=e.terminal)||void 0===c?void 0:c.key)&&o.reasonForCall.reasonForCall===e.reasonForCall.reasonForCall&&a++;if(1===a&&t.reasonForCall&&e.reasonForCall)return t.port.key===e.port.key&&(null===(s=o.terminal)||void 0===s?void 0:s.key)===(null===(d=e.terminal)||void 0===d?void 0:d.key)&&t.reasonForCall.reasonForCall===e.reasonForCall.reasonForCall}return!1}return!1});if(1===t.length){o.push(t[0]);const e=a.findIndex(e=>e.key===t[0].key);a.splice(e,1)}else t.length>1?(o.push(t),t.forEach(e=>{const t=a.findIndex(t=>t.key===e.key);a.splice(t,1)})):o.push(null)}return(a.length>0||l.length>0)&&(a.forEach(e=>{o.push(e),n.push(null)}),l.forEach(e=>{o.push(e),n.push(null)})),{pcList:n,cpList:o,draggable:r}};function g(e,t){let a=!0,o=!1,n=!0;return t instanceof Array||!(null==t?void 0:t.id)||e instanceof Array||!(null==e?void 0:e.id)||(((null==e?void 0:e.id)<0||(null==t?void 0:t.id)<0)&&(a=!1),(null==e?void 0:e.id)<0&&(o=!0,n=!1)),{disableDelete:a,disableDeleteLeft:o,disableDeleteBoth:n}}function f(e,t,a){return e.map(e=>({obj:new c.a(Object.assign(Object.assign({},e),{cargoMeasurement:{measurementCode:(null==a?void 0:a.cargoMeasurement)&&a.cargoMeasurement.measurementCode?a.cargoMeasurement.measurementCode:"MT"}})),userLocale:t,id:e.key}))}function v(e,t){return{obj:new c.a(Object.assign(Object.assign({},e),{cargoMeasurement:{measurementCode:(null==t?void 0:t.cargoMeasurement)&&t.cargoMeasurement.measurementCode?t.cargoMeasurement.measurementCode:"MT"}})),id:null==e?void 0:e.key}}function y(e,t,a){const o=1===Object(u.a)(e,"portCall.cargoPorts",[]).length||t&&t.key<1;return!(e&&(null==e?void 0:e.key)===(null==a?void 0:a.key)&&o)}function C(e,t,a){let o=void 0;return null!==e&&null===t&&a?o={icon:n.a,props:{color:"error"}}:null!==e&&null!==t&&a&&(o={icon:m.a,props:{color:"secondary"}}),o}function O(e,t){return e instanceof Array?e instanceof Array&&e.every(e=>!!t.find(t=>t.key===e.key)):t.some(t=>t.key===(null==e?void 0:e.key))}const h={generateTimelineData:function(e,t,a,o=!0,n,c,u){var m,h;const E=[];if(e){const{partOfSchedule:j}=e;j.sort(l.a.sortByVesselPcSequence);const k=r.a.sortByCargoPortSequence((null==a?void 0:a.cargoPorts)?a.cargoPorts:i.a.getAllCargoPorts(e)),{pcList:x,cpList:P,draggable:L}=p(k,j);let D=1,S=x.length+1;for(let r=0;r<x.length;r++){const l=P[r],i=x[r];let p=null,j=!0;l instanceof Array?(p=f(l,t,a),i&&i.key<1&&(j=!1)):null!==l&&Object(b.b)(l)&&(p=v(l,a),(l&&l.key<1||i&&i.key<1||c)&&(j=!1),n&&(j=y(n,i,l)));const k=Object(s.a)(i)?{obj:i,id:null==i?void 0:i.key}:null,T=C(l,i,o),{disableDelete:I,disableDeleteLeft:w,disableDeleteBoth:F}=g(k,p),A=u||O(l,L),R={content:{rightContainer:k,leftContainer:p},capIconOverride:T,disableDelete:I,disableDeleteRight:!0,disableDeleteLeft:w,disableDeleteBoth:F,dragOnLeftSideEnabled:A,disableDrag:j||e.key!==(null===(h=null===(m=x[r])||void 0===m?void 0:m.voyage)||void 0===h?void 0:h.key),dragId:D,dragIdLeft:l?S:void 0};if(E.push(R),D+=1,A&&l){S+=Object(d.a)(l)?l.length:1}}}return E},pairCargoPortsAndPortCalls:p,generateCargoPorts:f,generateTimelineCargoPort:v,disableDragOnEditedCargoPortRow:y,overrideCapCheckmark:C,isDragOnLeftSideEnabled:O,getDisableDndIndex:function(e){const{partOfSchedule:t}=e;let a=void 0;t.sort(l.a.sortByVesselPcSequence);for(let e=0;e<t.length;e++){t[e].arrivalFixed&&(a=e)}return a}}},716:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));const o={bookedQuantity:{fontWeight:"bold",lineHeight:.7},bottom:{marginBottom:2},new:{display:"flex",alignItems:"center"},newLabelContainer:{display:"contents"},top:{lineHeight:.8},textContainerLeftCard:{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBottom:2},icon:{marginLeft:2,marginTop:-1.5,marginBottom:-1}}},724:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));a(10),a(11),a(118);var o=a(472),n=a(81),r=a(0),l=a.n(r),i=a(130),c=a(214),s=a(218),d=a(6),u=a(258),m=a.n(u),b=a(3),p=a(40),g=a(427),f=a(68),v=a(107),y=a(51),C=a(12),O=a(1),h=a(50),E=a(19),j=a(28),k=a(63);function x(e,t,a,o,r,l){const{model:i,vessel:c}=r.getLanguageFile(),s=Object(n.a)(l,"voyage.vessel.speeds",[]),d=Object(n.a)(l,"voyage.speeds",[]),u=s.concat(d);let m=[],b=[];u&&(m=u.filter(e=>t.isBallast===e.isBallast).sort((function(e,t){return e.speed-t.speed})),b=u.filter(e=>!t.isBallast===e.isLoaded).sort((function(e,t){return e.speed-t.speed})));const p={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"speedRef",label:i.speedOrder,typeaheadProps:{defaultSelectedOptions:t.speedRef,options:(m.length>0||b.length>0)&&t.isBallast?m:b,resolver:e=>e.speed+" "+k.a.Knot+", "+e.foConsumption+" "+k.a.Weight,noOptionsMessage:()=>c.noSpeedOption},onUpdateOverride:a.bind(null,"speedRef")},{disabled:!0,fieldName:"speed",InputProps:{endAdornment:k.a.Knot},numberInputProps:{maskSettings:j.a.mask2},onUpdateOverride:a.bind(null,"speed")},{disabled:!0,fieldName:"distance",InputProps:{endAdornment:k.a.NauticalMile},numberInputProps:{maskSettings:j.a.mask2},onUpdateOverride:a.bind(null,"distance")},{fieldName:"distanceActual",InputProps:{endAdornment:k.a.NauticalMile},numberInputProps:{maskSettings:j.a.mask2},onUpdateOverride:a.bind(null,"distanceActual")},{fieldName:"percentExtraAtSea",disabled:t.arrivalFixed,onUpdateOverride:a.bind(null,"percentExtraAtSea"),numberInputProps:{maskSettings:j.a.mask2},InputProps:{endAdornment:"%"}},{fieldName:"daysExtraAtSea",disabled:t.arrivalFixed,onUpdateOverride:a.bind(null,"daysExtraAtSea"),numberInputProps:{maskSettings:j.a.mask2}}],object:t,type:O.a.portcall,userLocale:o,smartResponse:!0};return Object(E.a)(p)}var P=a(7),L=a(89),D=a(142),S=a(23),T=a(331);const I={header:{pb:1},icon:{verticalAlign:"middle"}},w=l.a.memo(e=>{var t,a,o,n;const{reactKeyPrefix:c,open:s,onClose:u,portCall:p,previousPortCall:g,voyage:E}=e,[j,k,w,F]=Object(d.a)([b.a.IInternationalization,P.a.IVoyageController,P.a.IFasFleetPlanVoyageApi,P.a.IScenarioActions]),{isOpenedFromFas:A}=Object(T.b)(),{common:R}=j.getLanguageFile(),N=Object(S.a)(D.a.get,O.a.scenario),M=Object(r.useCallback)(()=>{var e;E.key&&(k.refreshVoyage(E),A&&N&&E.vessel&&w.loadFleetPlanVoyages(N,F.getFleetPlanVoyageFields(),[null===(e=E.vessel)||void 0===e?void 0:e.key]))},[w,A,F,N,E,k]),B=Object(r.useMemo)(()=>({reactKeyPrefix:c,open:s,title:R.editSeaPassage,onCloseModal:u,confirmBtnName:R.save}),[R.editSeaPassage,R.save,u,s,c]),H=Object(r.useMemo)(()=>({fields:v.e,objToUpdate:p,objToUpdateType:O.a.portcall,type:O.a.portcall,smartResponse:!0,callback:M}),[M,p]),U=Object(r.useCallback)((e,t,a)=>"percentExtraAtSea"===t?h.a.calculateDaysExtraAtSea(new f.a(e),a):"daysExtraAtSea"===t?h.a.calculatePercentExtraAtSea(new f.a(e),a):new f.a(Object.assign(Object.assign({},e),{[t]:a})),[]),K=Object(r.useMemo)(()=>({voyage:E}),[E]),V=Object(r.useCallback)(e=>Object(L.a)(new f.a({key:e.key,speedRef:e.speedRef,distanceActual:e.distanceActual,daysExtraAtSea:e.daysExtraAtSea,percentExtraAtSea:e.percentExtraAtSea})),[]);return l.a.createElement(y.a,{breakpoints:C.h,modalProps:B,getColSpec:x,selectedObject:p,updateProps:H,overrideUpdateEntity:U,contextData:K,overrideGetData:V},l.a.createElement(i.a,{variant:"h2",sx:I.header},null!==(a=null===(t=null==g?void 0:g.port)||void 0===t?void 0:t.portName)&&void 0!==a?a:""," ",l.a.createElement(m.a,{sx:I.icon})," ",null!==(n=null===(o=null==p?void 0:p.port)||void 0===o?void 0:o.portName)&&void 0!==n?n:""))});var F=a(345);const A=l.a.forwardRef((e,t)=>{const{label:a,reactKeyPrefix:o,onClick:n}=e,r=Object(g.c)({});return l.a.createElement("span",Object.assign({},Object(F.a)(e,"reactKeyPrefix"),{ref:t}),l.a.createElement(p.a,{label:a,key:o+"days-at-sea-chip",className:r.portCallChips,size:"small",clickable:!0,onClick:n,variant:"outlined"}))}),R=l.a.memo(e=>{var t,a,o,n,u;const{obj:p,nextObj:g,userLocale:v,reactKeyPrefix:y,voyage:C}=e,[O]=Object(d.a)([b.a.IInternationalization]),{common:h,model:E}=O.lang(),[j,k]=Object(r.useState)(!1),x=Object(r.useCallback)(()=>{k(!j)},[j]);if(void 0===g||void 0===(null==g?void 0:g.speed))return l.a.createElement(r.Fragment,null);const{daysAtSea:P,daysExtraAtSea:L}=g,D=O.formatNumber(null!==(t=P-L)&&void 0!==t?t:0,{minDecimals:0,maxDecimals:2,locale:v.isoCode}),S=O.formatNumber(null!=L?L:0,{minDecimals:0,maxDecimals:2,locale:v.isoCode}),T=0===Number(L)?`${D} ${h.daysLowercaseShort}`:`${D} ${h.daysLowercaseShort} + ${S} ${h.daysLowercaseShort} ${h.extra}`,I=l.a.createElement(r.Fragment,null,l.a.createElement(i.a,{noWrap:!0},`${E.daysAtSea} + ${E.extraDays}`),l.a.createElement(c.a,{container:!0,spacing:.5},l.a.createElement(c.a,{item:!0,alignItems:"center"},l.a.createElement(i.a,{noWrap:!0},null!==(o=null===(a=null==p?void 0:p.port)||void 0===a?void 0:a.portName)&&void 0!==o?o:"")),l.a.createElement(c.a,{item:!0},l.a.createElement(m.a,{fontSize:"inherit",sx:{width:"85%"}})),l.a.createElement(c.a,{item:!0},l.a.createElement(i.a,{noWrap:!0},null!==(u=null===(n=null==g?void 0:g.port)||void 0===n?void 0:n.portName)&&void 0!==u?u:"")))),F=new f.a(g),R=new f.a(p);return l.a.createElement(r.Fragment,null,l.a.createElement(s.a,{title:I},l.a.createElement(A,{label:T,reactKeyPrefix:y,onClick:x})),j&&l.a.createElement(w,{voyage:C,portCall:F,previousPortCall:R,open:j,onClose:x,reactKeyPrefix:y+"-edit-sea-passage-modal"}))});var N=a(323);const M=l.a.forwardRef((e,t)=>{const{label:a,reactKeyPrefix:o,onClick:n}=e,r=Object(g.c)({});return l.a.createElement("span",Object.assign({},Object(F.a)(e,"reactKeyPrefix"),{ref:t}),l.a.createElement(p.a,{label:a,key:o+"-port-call-speed-chip",className:r.portCallChips,size:"small",clickable:!0,onClick:n,variant:"outlined"}))}),B=l.a.memo(e=>{var t,a,o,n;const{obj:u,nextObj:p,userLocale:g,reactKeyPrefix:v,voyage:y}=e,[C]=Object(d.a)([b.a.IInternationalization]),{model:O,common:h}=C.getLanguageFile(),[E,j]=Object(r.useState)(!1),x=Object(r.useCallback)(()=>{j(!E)},[E]);if(void 0===p||void 0===(null==p?void 0:p.speed))return l.a.createElement(r.Fragment,null);const{speed:P,distance:L}=p,D=C.formatNumber(null!=P?P:0,{minDecimals:2,maxDecimals:2,locale:g.isoCode}),S=C.formatNumber(null!=L?L:0,{maxDecimals:0,locale:g.isoCode}),T=l.a.createElement(l.a.Fragment,null,D+" "+k.a.Knot,l.a.createElement(N.a,{component:"span",sx:{pl:.5,ml:.5,borderImage:e=>`linear-gradient(transparent 5%, ${e.palette.grey[400]} 5% 95%, transparent 95%) 0 0 0 1 / 1px`,textAlign:"right"}},S+" "+h.nm)),I=l.a.createElement(r.Fragment,null,l.a.createElement(i.a,{noWrap:!0},O.speed," ",h.and," ",O.distance),l.a.createElement(c.a,{container:!0,spacing:.5,padding:0,mt:.5},l.a.createElement(c.a,{item:!0,alignItems:"center"},l.a.createElement(i.a,{noWrap:!0},null!==(a=null===(t=null==u?void 0:u.port)||void 0===t?void 0:t.portName)&&void 0!==a?a:"")),l.a.createElement(c.a,{item:!0},l.a.createElement(m.a,{fontSize:"inherit",sx:{width:"85%"}})),l.a.createElement(c.a,{item:!0},l.a.createElement(i.a,{noWrap:!0},null!==(n=null===(o=null==p?void 0:p.port)||void 0===o?void 0:o.portName)&&void 0!==n?n:"")))),F=new f.a(p),A=new f.a(u);return l.a.createElement(r.Fragment,null,l.a.createElement(s.a,{title:I},l.a.createElement(M,{label:T,reactKeyPrefix:v+"-port-call-speed-chip-component",onClick:x})),E&&l.a.createElement(w,{voyage:y,portCall:F,previousPortCall:A,open:E,onClose:x,reactKeyPrefix:v+"-edit-sea-passage-modal"}))});var H=a(137),U=a(159),K=a(423);function V(e,t){if(t>0){const{portCallsFromVoyage:a}=e;if(a){const e=a.find(e=>1===e.portCallSequence),o=a.find(e=>e.portCallSequence===t);if(e&&o){const{eventLogs:t}=e,{eventLogs:a}=o,n=t?t.find(e=>{var t;return"ARR"===(null===(t=e.event)||void 0===t?void 0:t.eventCode)}):null,r=a?a.find(e=>{var t;return"DEP"===(null===(t=e.event)||void 0===t?void 0:t.eventCode)}):null;return r&&n?[r,n]:[]}}}return[]}const q={getTransferQuery:e=>{const t=e.filter(e=>{var t;return(null===(t=e.cargoType)||void 0===t?void 0:t.cargoTypeCode)===U.a.TRANSFER}).map(e=>e.key),a=e.filter(e=>{var t;return(null===(t=e.cargoType)||void 0===t?void 0:t.cargoTypeCode)===U.a.HAS_TRANSFER}).map(e=>e.key);let o="";return t.length&&(o=`filter=key(IN)(${t})`),t.length&&a.length&&(o+="&filter=(OR)&"),a.length&&(o+=`filter=tsOfCargoPort.cargo(IN)(${a})`),o},getVoyageData:function(e,t,a,i,c,s,u,m,p,g,f,v){var y,C;const[O]=Object(d.a)([b.a.IInternationalization]),{portCall:E}=O.lang(),{portCallsFromVoyage:j,ballastPort:k,voyageHeader:x,partOfSchedule:P}=e,L=[],D={obj:h.a.createBallastPortCall(e),nextObj:Object(o.a)(P)},S=l.a.createElement(R,{obj:D.obj,nextObj:D.nextObj,userLocale:a,voyage:e,reactKeyPrefix:i}),T=l.a.createElement(B,{obj:D.obj,nextObj:D.nextObj,userLocale:a,voyage:e,reactKeyPrefix:i}),I=l.a.createElement(r.Fragment,null,T),w=(null!==(y=null==x?void 0:x.voyageStartDate)&&void 0!==y?y:new Date)<new Date,F=function(e,t,a,n){const r={obj:{voyage:e,eventLogs:V(e,t),previousPortCallCount:null!=t?t:0,onClickLink:n},nextObj:Object(o.a)(a)};return{id:0,disableBackground:!0,disableCreate:!0,disableCreateAfter:!0,disableDelete:!0,disableEdit:!0,disableDrag:!0,capContent:" ",content:{leftContainer:r,rightContainer:r},overrideLineColor:{color:H.a.palette.common.white,backgroundColor:H.a.palette.primary.main},disableHover:!0}}(e,c>3?c-3:0,j,v);P.sort(h.a.sortByVesselPcSequence);const A=null===(C=Object(o.a)(P))||void 0===C?void 0:C.arrivalFixed,N={id:null==k?void 0:k.key,disableCreate:s||void 0!==t&&t>0,disableCreateAfter:A,disableDelete:!0,disableEdit:!0,disableDrag:!0,disablePortCostHistory:!0,content:{leftContainer:D,rightContainer:D},tooltip:E.ballastEditFields,capContent:"B",belowRowLeft:S,belowRowRight:I,overrideLineColor:w?{color:H.a.palette.common.white,backgroundColor:H.a.palette.primary.main}:void 0,showMidline:0===c&&w&&A};return P.sort(h.a.sortByVesselPcSequence),c>3&&L.push(F),P.forEach((o,c)=>{var d,b,p,v,y;const C=Object(n.a)(P,c+1),O=(Object(n.a)(P,c-1),{obj:o,nextObj:C,overlappingVoyageColourMap:g,onClickOverlappingChip:f}),h=void 0!==t&&o.portCallSequence<=t,j=e.key!==(null===(d=o.voyage)||void 0===d?void 0:d.key)&&e.key!==(null===(b=o.ownedByVoyage)||void 0===b?void 0:b.key),k=l.a.createElement(R,{obj:o,nextObj:C,userLocale:a,voyage:e,reactKeyPrefix:i}),x=l.a.createElement(B,{obj:o,nextObj:C,userLocale:a,voyage:e,reactKeyPrefix:i}),D=l.a.createElement(r.Fragment,null,x),S={id:o.key,disableCreate:s||void 0!==t&&o.portCallSequence<t||o.arrivalFixed||o.departureFixed||o.berthedFixed,disableCreateAfter:s&&C&&C.arrivalFixed,disableDelete:u||"Ballast"===(null===(p=o.reasonForCall)||void 0===p?void 0:p.reasonForCallDesc),disableEdit:m,disableClick:j,disableDrag:e.key!==(null===(v=o.voyage)||void 0===v?void 0:v.key),content:{leftContainer:O,rightContainer:O},tooltip:h?E.portCallFixedDates:void 0,capContent:o.portCallSequence,belowRowLeft:k,belowRowRight:D,overrideLineColor:o.arrivalFixed?{color:H.a.palette.common.white,backgroundColor:H.a.palette.primary.main}:void 0,showMidline:o.departureFixed&&C&&!C.arrivalFixed,disablePortCostHistory:null===o.key};(null===(y=o.voyage)||void 0===y?void 0:y.key)===e.key&&1===o.portCallSequence&&L.push(N),L.push(S)}),L},getPortCallListVoyageFilter:function(e){var t,a,o,n,r,l;return Object.assign(Object.assign({},K.f),{value:[null!==(a=null===(t=e.voyageHeader)||void 0===t?void 0:t.referenceNo)&&void 0!==a?a:0],selectedObj:[{key:null!==(n=null===(o=e.voyageHeader)||void 0===o?void 0:o.key)&&void 0!==n?n:0,referenceNo:null!==(l=null===(r=e.voyageHeader)||void 0===r?void 0:r.referenceNo)&&void 0!==l?l:""}]})}}},850:function(e,t,a){"use strict";a.d(t,"a",(function(){return V}));var o=a(0),n=a.n(o),r=(a(10),a(11),a(118),a(158),a(100)),l=a.n(r),i=a(3),c=a(51),s=a(1),d=a(227),u=a(615),m=(a(93),a(28)),b=a(16),p=a(19),g=a(287),f=a(383),v=a(86),y=a(12),C=a(156);function O(e,t,a,o,n,r){var l,i,c;const d=n.lang(),{model:u,common:O}=d,h=null!==(c=null!==(l=t.hasCommission)&&void 0!==l?l:null===(i=t.variousText)||void 0===i?void 0:i.hasCommission)&&void 0!==c&&c,E=!!r.parentObject&&Object(C.g)(r.parentObject),j=[{field:u.variousText,groupCode:"VARIOUS_SORT_GROUP_CODE",operator:b.b.ASC,queryParamName:"variousText"}],k=r.parentObject?Object(C.g)(r.parentObject)?"VOY":Object(C.a)(r.parentObject)?"CGO":"OFF":"",x={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"variousText",formControlProps:{required:!0},label:u.variousText,typeaheadProps:{query:"filter=variousType.variousTypeCode(EQ)"+r.typeCode+"&filter=tables.tableCode(IN)("+k+")&"+Object(g.b)(j),resolver:e=>e.variousText,shouldPreload:!0,fields:f.a.variousText,objectPaths:["variousText"]},onUpdateOverride:e=>{a("variousText",e),a("variousRule",e.variousRule),a("hasCommission",e.hasCommission)}},{fieldName:"currency",formControlProps:{required:!0},label:u.currency,typeaheadProps:{objectPaths:["currencyCode"],shouldPreload:!0},onUpdateOverride:a.bind(null,"currency")},{fieldName:"variousRule",formControlProps:{required:!0},label:u.rule,typeaheadProps:{shouldPreload:!0,objectPaths:["variousRuleDesc"]},onUpdateOverride:a.bind(null,"variousRule")},{fieldName:"variousValue",label:u.rate,numberInputProps:{maskSettings:m.a.mask2,onChange:a.bind(null,"variousValue")}},{fieldName:"payee",label:d.common.invoiceParty,typeaheadProps:{shouldPreload:!0,objectPaths:v.b.businessPartner,formatGroupLabel:E?e=>{var t,a,o,n,l,i,c,s;const d=r.parentObject;return e.value.key===(null===(a=null===(t=d.tcIn)||void 0===t?void 0:t.charterer)||void 0===a?void 0:a.key)||e.value.key===(null===(n=null===(o=d.tcs[0])||void 0===o?void 0:o.charterer)||void 0===n?void 0:n.key)?" ".concat(u.charterer):e.value.key===(null===(i=null===(l=d.tcIn)||void 0===l?void 0:l.owner)||void 0===i?void 0:i.key)||e.value.key===(null===(s=null===(c=d.tcs[0])||void 0===c?void 0:c.owner)||void 0===s?void 0:s.key)?" ".concat(u.owner):O.other}:void 0},secondaryFieldOption:{fieldName:"hasCommission",label:u.commission,formControlLabelProps:{classes:r.classes,labelPlacement:"top",checked:h},onUpdateOverride:a.bind(null,"hasCommission")},onUpdateOverride:a.bind(null,"payee")},{fieldName:"documentLineText",label:d.common.description,textInputProps:{onInputChange:a.bind(null,"documentLineText")}},...E?[{fieldName:"fromDate",breakpoints:y.i,dateInputProps:{error:r.isValidDateRange,showTime:!0},onUpdateOverride:a.bind(null,"fromDate"),formControlProps:{required:!!t.toDate}},{fieldName:"toDate",breakpoints:y.i,dateInputProps:{error:r.isValidDateRange,showTime:!0},onUpdateOverride:a.bind(null,"toDate"),formControlProps:{required:!!t.fromDate}}]:[]],object:t,type:s.a.various,userLocale:o};return Object(p.a)(x)}var h=a(6),E=a(315),j=a(44);function k({rootObject:e,typeCode:t,selectedVarious:a,setPreSelectedVariousKey:r,reactKeyPrefix:l,onCloseModal:m,onDelete:b,showModal:p,fields:g,defaults:v,tsModelType:k,smartResponse:x,classes:P}){if(!("variouses"in e))throw new Error('rootObject should contain a "variouses" property');const[L]=Object(h.a)([i.a.IInternationalization]),D=L.getLanguageFile(),[S,T]=Object(o.useState)(!1),[I,w]=Object(o.useState)(!1),F=Object(o.useMemo)(()=>{const e=new u.a({variousTypeCode:t});return new d.a(Object.assign({variousType:e},v))},[v,t]),A=Object(o.useCallback)(t=>{const{fromDate:a,toDate:o}=t;Object(C.g)(e)&&T(Object(C.g)(e)&&!!a&&!!o&&a>o||!!a!=!!o);const{variousText:n,currency:r,variousRule:l}=t;return!n||!r||!l||S},[S,e]),R=Object(o.useMemo)(()=>`${""+(a?D.common.edit:D.common.create)} ${{C:D.model.variousCost,R:D.common.variousRevenue}[t]}`,[D.common.create,D.common.edit,D.common.variousRevenue,D.model.variousCost,a,t]),N=Object(o.useCallback)((e,t)=>{var a,o,n;r&&t&&r(null!==(n=null===(o=new d.a(null!==(a=Object(E.last)(t.variouses))&&void 0!==a?a:{}))||void 0===o?void 0:o.key)&&void 0!==n?n:-1)},[r]),M=Object(o.useCallback)(()=>{if(a){const t=e.variouses.filter(({key:e})=>a.key!==e);b(t),w(!1),m()}},[a,e.variouses,b,w,m]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{modalProps:{reactKeyPrefix:l,confirmBtnName:a?D.common.save:D.common.create,onCloseModal:m,open:p,title:R},updateProps:{fields:{variouses:null!=g?g:f.a},objPropToUpdate:"variouses",objToUpdate:e,objToUpdateType:k,shouldUseArray:!0,type:s.a.various,callback:N,smartResponse:x},contextData:{parentObject:e,typeCode:t,classes:P,isInvalidDateRange:S},propertiesToSet:F,selectedObject:a,allowDelete:!!a,breakpoints:y.h,isConfirmDisabled:A,getColSpec:O,overrideOnDelete:()=>w(!0)}),n.a.createElement(j.a,{reactKeyPrefix:l+"-delete-various-modal",open:I,onCloseModal:()=>w(!1),onConfirm:M,title:D.common.delete,maxWidth:"xs",fullWidth:!0,confirmBtnName:D.common.delete},D.common.deleteItemConfirmation))}var x=a(149),P=a.n(x),L=a(92),D=a(67),S=a(5),T=a(14);const I={getHeaders:function(e){const t=T.a.get(i.a.IInternationalization),{common:a,model:o}=t.getLanguageFile();return[...e?[{content:a.type,contentType:S.a.TEXT}]:[],{content:o.variousText,contentType:S.a.TEXT,textLengthFactor:2},{content:a.description,contentType:S.a.TEXT,textLengthFactor:4,wrap:!0},{content:o.currency,contentType:S.a.TEXT},{content:o.rate,contentType:S.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:o.rule,contentType:S.a.TEXT},{content:o.amountLC,contentType:S.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:o.amountVoyCurr,contentType:S.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:a.created,contentType:S.a.DATE,hiddenByDefault:!0},{content:a.invoiceParty,contentType:S.a.TEXT,hiddenByDefault:!0}]},getRowContentProperties:function(){return["variousText.variousText","documentLineText","currency.currencyCode","variousValue","variousRule.variousRuleDesc","variousAmountCurrency","variousAmount","createdDate","payee.businessPartnerName"]}};var w=a(539),F=a(2471),A=a(38),R=a(213),N=a(187),M=a(136);const B=Object(R.a)(e=>Object(N.a)({label:{fontSize:".786rem",color:A.b.bergenRain.secondary[7]},labelPlacementTop:{marginLeft:0,marginRight:0,transform:"translate(0, -1.5px)"}}));function H({reactKeyPrefix:e,rootObject:t,userLocale:a,typeCode:r,readOnly:c=!1,fields:s,tsModelType:d,defaults:u,smartResponse:m,subObjects:b=[],disableRoot:p=!1}){if(!("variouses"in t))throw new Error('rootObject should contain a "variouses" property');const[g]=Object(h.a)([i.a.IInternationalization]),f=g.getLanguageFile(),v=B({}),[y,C]=Object(o.useState)([]),[O,E]=Object(o.useState)(null),[x,S]=Object(o.useState)(-1),[T,A]=Object(o.useState)(!1),[R,N]=Object(o.useState)(!1),[H,V]=Object(o.useState)([]),[q,$]=Object(o.useState)(!0),_=Object(o.useCallback)(()=>N(e=>!e),[]),z=Object(o.useCallback)(()=>A(e=>!e),[]),G=Object(o.useMemo)(()=>t.variouses.filter(K.bind(null,r)).sort(U),[t,r]),W=Object(o.useMemo)(()=>0===H.length?[]:[...p?[]:[{type:t.$tsmodelClassName,variouses:G}],...b.filter(e=>H.includes(e.$tsmodelClassName)).map(e=>({type:e.$tsmodelClassName,variouses:e.variouses.filter(K.bind(null,r)).sort(U)}))],[p,t.$tsmodelClassName,G,b,H,r]),Y=Object(o.useCallback)(e=>L.a.getUpdateFieldFunction({fieldToSet:"variouses",fields:{variouses:"*"},key:t.key,type:d})(e),[t.key,d]),Q=Object(o.useCallback)(()=>{const e=t.variouses.filter(e=>!y.includes(e.key));Y(e),_(),C([])},[Y,t.variouses,y,_]),X=Object(o.useCallback)(e=>{E(e),z()},[z]),J=Object(o.useCallback)(()=>{z(),E(null)},[z]),Z=Object(o.useCallback)(e=>{const t=G.find(t=>t.key===e);t&&X(t)},[X,G]),ee=Object(o.useMemo)(()=>[{disabled:!1,icon:l.a,iconButtonProps:{color:"primary","aria-label":f.common.create},label:f.common.create,onClick:z,reactKeyPrefix:e+"-primary-actions"}],[f.common.create,z,e]),te=Object(o.useMemo)(()=>[{disabled:!1,icon:P.a,iconButtonProps:{"aria-label":f.common.delete},label:f.common.delete,onClick:e=>{C(e),_()},reactKeyPrefix:e+"-selected-actions"}],[f.common.delete,e,_]),ae=Object(o.useMemo)(()=>W.reduce((e,a)=>{let o=Object(M.b)(a.variouses,I.getRowContentProperties());return b.length&&(o=((e,t,a)=>t.map(t=>{const o=e.charAt(0).toUpperCase()+e.slice(1);return Object.assign(Object.assign({},t),{content:[o,...t.content],disableOnClickForRow:e!==a,disableSelectable:e!==a})}))(a.type,o,t.$tsmodelClassName)),e.concat(o)},[]),[W,b.length,t.$tsmodelClassName]),oe=Object(o.useMemo)(()=>"C"===r?f.model.variousCost:f.common.variousRevenue,[f.common.variousRevenue,f.model.variousCost,r]),ne=Object(o.useCallback)(e=>{V(e)},[]),re=Object(o.useMemo)(()=>((e,t)=>[...new Set(e.filter(e=>e.variouses.filter(e=>{var a;return(null===(a=e.variousType)||void 0===a?void 0:a.variousTypeCode)===t}).length>0).map(e=>e.$tsmodelClassName))].map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e})))(b,r),[b,r]);return Object(o.useEffect)(()=>{if(q){let e=[];if(p){const a=re.map(e=>e.value);e=a.includes(t.$tsmodelClassName)?a:[...a,t.$tsmodelClassName]}else e=[t.$tsmodelClassName];V(e),$(!1)}},[re,p,t.$tsmodelClassName]),n.a.createElement(n.a.Fragment,null,re.length>0&&n.a.createElement(F.a,{display:"flex",justifyContent:"flex-end"},n.a.createElement(w.a,{label:"C"===r?f.common.variousCostType:f.common.variousRevenueType,items:re,reactKeyPrefix:e+"-filters",onItemSelected:ne,selectedItems:H})),n.a.createElement(D.a,{headers:I.getHeaders(b.length>0),userLocale:a,reactKeyPrefix:e+"-various-table",title:oe,data:ae,onRowClick:Z,selectable:!c,selectedActions:te,preSelectedRow:x,primaryActions:ee,customisation:{disableSorting:!0,responsive:!0}}),T&&n.a.createElement(k,{reactKeyPrefix:e+"-create-various-item",typeCode:r,showModal:T,userLocale:a,onCloseModal:J,rootObject:t,selectedVarious:O,setPreSelectedVariousKey:S,defaults:u,tsModelType:d,fields:s,smartResponse:m,classes:v,onDelete:Y}),n.a.createElement(j.a,{reactKeyPrefix:e+"-delete-variouses-modal",open:R,onCloseModal:_,onConfirm:Q,title:f.common.delete,maxWidth:"xs",fullWidth:!0,confirmBtnName:f.common.delete},f.common.deleteItemsConfirmation))}function U(e,t){return e.key<t.key?1:e.key===t.key?0:-1}function K(e,t){var a;return(null===(a=t.variousType)||void 0===a?void 0:a.variousTypeCode)===e}function V(e){const t=Object(o.useMemo)(()=>e.variousTables.map((e,t)=>n.a.createElement(H,Object.assign({key:t},e))),[e.variousTables]);return n.a.createElement(n.a.Fragment,null,t)}},956:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var o=a(64),n=a(336),r=a(147),l=a(1330),i=a(2092);function c(e,t){return{obj:new o.a(Object.assign(Object.assign({},e),{cargoMeasurement:{measurementCode:(null==t?void 0:t.cargoMeasurement)&&t.cargoMeasurement.measurementCode?t.cargoMeasurement.measurementCode:"MT"}})),id:null==e?void 0:e.key,hideNewIcon:!0}}const s={generateTimelineDataWithoutVoyage:function(e){return e.cargoPorts.map((t,a)=>({content:{leftContainer:null,rightContainer:c(t,e),hideLeftContainer:!0},dragId:a}))},generateTimelineCargoPort:c,onDragEnd:function(e,t){const a=Array.from(e);if(!t.destination||!t.source)return;const o=t.destination.index,l=t.source.index,i=n.a.reorder(a,l,o);return r.a.updateCargoPortSequence(r.a.getCargoPortsByRFC(i,"L")),r.a.updateCargoPortSequence(r.a.getCargoPortsByRFC(i,"D")),i},updateTimelineCargoPorts:function(e,t,a,o,n){const c=Array.from(t);if(n.length>0)n.forEach(e=>{const t=c.findIndex(t=>t.key===e.key);t>=0&&c.splice(t,1)});else{const t=Object(l.a)(e,e=>!Object(l.a)(c,["key",e.key]));if(t){let e=o&&"L"===a?o:c.length;if(e>0&&"L"===a){const t=Object(i.a)(c,e=>{var t;return"L"===(null===(t=e.reasonForCall)||void 0===t?void 0:t.reasonForCall)});e=t>=0?t+1:0}c.splice(e,0,t)}}return r.a.updateCargoPortSequence(r.a.getCargoPortsByRFC(c,"L")),r.a.updateCargoPortSequence(r.a.getCargoPortsByRFC(c,"D")),c}}}}]);