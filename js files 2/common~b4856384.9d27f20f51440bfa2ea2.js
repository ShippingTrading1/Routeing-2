(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1206:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);const o=n.n(a).a.createContext([])},1219:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(10),n(11);function a(e){let t=0;for(const n of e)t+=n.percent;return t}},1235:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n(10),n(11);var a=n(149),o=n.n(a),r=n(126),i=n(0),c=n.n(i),s=n(83),l=n(839),u=n(196),d=n(67),m=n(6),p=n(47),b=n(1),f=n(32),h=n(7),g=n(42),y=n(434),k=n(3),j=n(1236),C=n(271);class v extends c.a.PureComponent{constructor(e){super(e),this.keyGen=new C.a,this.state=Object.assign(Object.assign({},e.state),{attachments:[]}),this.onUploadFiles=this.onUploadFiles.bind(this),this.getAttachmentRows=Object(r.a)(this.getAttachmentRows),this.onClickDeleteAttachments=this.onClickDeleteAttachments.bind(this),this.onClickLoadAttachment=this.onClickLoadAttachment.bind(this),this.loadAttachments=this.loadAttachments.bind(this),this.loadAttachments()}UNSAFE_componentWillReceiveProps(e){this.props.state!==e.state&&this.setState(Object.assign({},e.state))}getSelectedActions(){const{deps:[e],reactKeyPrefix:t}=this.props;return[{disabled:!1,icon:o.a,iconButtonProps:{"aria-label":e.lang().common.remove},label:e.lang().common.remove,onClick:this.onClickDeleteAttachments,reactKeyPrefix:t}]}onClickDeleteAttachments(e){var t,n;const{deps:[,a,o]}=this.props,{authdata:r}=Object(f.a)(a.getState());if(this.props.onAttachCallback){const a=null!==(n=null===(t=this.state.attachments)||void 0===t?void 0:t.filter(t=>!e.includes(t.key)))&&void 0!==n?n:[];this.props.onAttachCallback(a),this.setState({attachments:a})}else for(const t of e)o.delete({authdata:r||"",key:t,type:b.a.attachment}).then(()=>{if(e.length>0){const t=this.state.attachments.filter(t=>-1===e.indexOf(t.key));this.setState({attachments:t})}}).catch(e=>{u.a.next({type:"snackbar",notification:{id:666,message:e.toString(),type:"error"}})})}loadAttachments(){const{deps:[,e,t],sourceId:n}=this.props,{authdata:a}=Object(f.a)(e.getState());this.props.onAttachCallback||t.getMultiple({authdata:a||"",fields:j.a,overrideUrl:`${b.a.attachment.name}/detailed/${n}`,type:b.a.attachment}).then(e=>{this.setState({attachments:e})}).catch(()=>{this.setState({attachments:[]})})}onClickLoadAttachment(e){const{deps:[,t,n]}=this.props,{authdata:a}=Object(f.a)(t.getState());e&&e>0&&n.getSingle({authdata:a||"",fields:{file:"*",fileName:"*"},key:e,type:b.a.attachment}).then(e=>{y.e(null,e)}).catch(e=>{u.a.next({type:"snackbar",notification:{id:666,message:e.toString(),type:"error"}})})}onUploadFiles(e){const{deps:[t,n,a],sourceId:o}=this.props,{authdata:r}=Object(f.a)(n.getState());y.a(e).then(e=>{if(y.c(e,8388608))y.d();else if(this.props.onAttachCallback){const t=e.map(e=>Object.assign(Object.assign({},e),{key:this.keyGen.getNextKey()})),n=this.state.attachments.concat(t);this.props.onAttachCallback(n),this.setState({attachments:n})}else a.post({authdata:r||"",data:{source:o,attachments:e,remark:"Attachment uploaded via vmsweb",remarkTitle:"Web Attachment"},type:b.a.remark}).then(e=>{this.loadAttachments()})}).catch(e=>{u.a.next({type:"snackbar",notification:{id:666,message:e.toString(),type:"error"}})})}getAttachmentRows(e){const[t]=this.props.deps;return e.map(e=>({content:[e.fileName,t.formatNumber(e.filesize/1024,{maxDecimals:2})+" kB"],id:e.key}))}render(){const{attachments:e,userLocale:t}=this.state,{deps:[n],sourceId:a,reactKeyPrefix:o}=this.props;return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{onUploadFiles:this.onUploadFiles}),c.a.createElement(d.a,{data:this.getAttachmentRows(e),selectable:!0,onRowClick:this.onClickLoadAttachment,title:n.lang().model.attachments,headers:v.tableHeaders,reactKeyPrefix:`${o}-attachments-${a}`,selectedActions:this.getSelectedActions(),userLocale:t}))}}v.tableHeaders=[{content:"File Name"},{content:"File Size"}];const O=Object(m.b)([k.a.IInternationalization,h.a.Store,s.a.ITSModelApi],Object(p.a)(e=>({userLocale:g.a.getUserLocale(e)}),v))},1266:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n(2461),o=n(0),r=n.n(o),i=n(2471),c=n(38);const s=(e,t,n)=>({root:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"stretch",alignContent:"stretch",marginLeft:0},column:{display:"flex",flexDirection:"column",flexGrow:1,borderLeft:t=>0!==e?"1px solid "+t.palette.grey[300]:void 0,borderBottom:e=>t?"1px solid "+c.b.bergenRain.secondary[7]:"1px solid "+e.palette.grey[300],borderTop:t=>0!==e?"1px solid "+t.palette.grey[300]:0,borderTopLeftRadius:t=>1===e?t.shape.borderRadius:void 0,borderBottomLeftRadius:t=>0===e?t.shape.borderRadius:void 0,backgroundColor:0!==e?"#0000000A":void 0,"&:last-child":{borderTopRightRadius:e=>e.shape.borderRadius,borderBottomRightRadius:e=>e.shape.borderRadius,borderRight:e=>"1px solid "+e.palette.grey[300]},flex:"1 1 0px"},leftHeader:{backgroundColor:"#ffffff",height:"37px",border:0},header:{display:"flex",height:"37px",borderBottom:"1px solid #666666"},emptyHeader:{borderLeft:e=>"1px solid "+e.palette.grey[300]},content:{backgroundColor:()=>0===e?"#E6E8EB":void 0,borderLeft:()=>0===e?"1px solid "+c.b.bergenRain.secondary[7]:void 0,borderTopLeftRadius:t=>0===e?t.shape.borderRadius:void 0,borderBottomLeftRadius:t=>0===e?t.shape.borderRadius:void 0,borderTop:()=>0===e&&t?"1px solid "+c.b.bergenRain.secondary[7]:0,flexGrow:1,borderRight:()=>n?"1px solid "+c.b.bergenRain.secondary[7]:void 0}});function l({index:e,data:t}){const n=s(e,!!t);return 0===e?r.a.createElement(i.a,{sx:n.leftHeader}):(null==t?void 0:t.header)?r.a.createElement(i.a,{sx:n.header},t.header):r.a.createElement(i.a,{sx:n.emptyHeader})}var u=n(130),d=n(323),m=n(305),p=n(123);function b({content:e,userLocale:t,index:n}){const a=(e=>({section:{textAlign:"end",width:"100%",borderBottom:t=>0!==e?"1px solid "+t.palette.grey[300]:"1px solid #E6E8EB","&:last-child":{borderBottom:0},whiteSpace:"nowrap"},content:{marginRight:.5,overflowX:"hidden"}}))(n),i=Object(o.useMemo)(()=>e.contentType===m.a.TEXT?r.a.createElement(u.a,{sx:Object.assign(Object.assign({},a.content),null==e?void 0:e.sx)},e.value):e.contentType===m.a.NUMBER&&void 0!==e.value?r.a.createElement(u.a,{sx:Object.assign(Object.assign({},a.content),null==e?void 0:e.sx)},p.a.formatNumberLocalized(e.value,t.isoCode,e.numberFormatOptions)):r.a.createElement(u.a,null,"Missing column setup"),[e,a.content,t.isoCode]);return r.a.createElement(d.a,{key:e.id,sx:a.section},i)}const f={title:{float:"left",marginLeft:1,fontWeight:"500"}};function h(e){const{section:t,userLocale:n,index:a}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{variant:"h5",sx:f.title},t.title),t.content.map(e=>r.a.createElement(b,{content:e,key:e.id,userLocale:n,index:a})))}function g(e){const{index:t,column:n,isLastContentColumn:a,userLocale:o}=e,c=s(t,!!n,a);return r.a.createElement(i.a,{sx:c.column},r.a.createElement(l,{data:n,index:t}),r.a.createElement(i.a,{sx:c.content},(null==n?void 0:n.sections)&&n.sections.map(e=>r.a.createElement(h,{section:e,key:e.id,userLocale:o,index:t}))))}var y=n(47),k=n(42);function j(e){const{columns:t,state:{userLocale:n}}=e,i=s(),c=Object(o.useMemo)(()=>{const e=[];if(t){e.push(r.a.createElement(g,{index:0,column:t[0],userLocale:n}));for(let a=1;a<7;a++)e.push(r.a.createElement(g,{index:a,column:t[a],isLastContentColumn:!!t[a]&&!t[a+1],userLocale:n}))}return e},[t,n]);return r.a.createElement(a.a,{maxWidth:"xl",disableGutters:!0,sx:i.root},c)}const C=Object(y.a)(e=>({userLocale:k.a.getUserLocale(e)}),r.a.memo(j))},1269:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));n(10),n(11);var a=n(26),o=n(0),r=n.n(o),i=n(246),c=n(218),s=n(948),l=n.n(s),u=n(138),d=n(213),m=n(187);const p=Object(d.a)(e=>Object(m.a)({button:{padding:0},createLine:{height:25,width:1,backgroundColor:e.palette.grey[400]},createLineTop:{height:10},createText:{position:"absolute",top:0,left:32,lineHeight:1.2},createWrapper:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:14},connect:{position:"absolute",top:0,width:"50px",display:"flex",alignItems:"center"},connectLine:{flex:1,border:"none",borderTop:"1px dashed "+e.palette.grey[400]},connectLeft:{right:"50%",transform:"translateX(-8px)"},connectRight:{left:"50%",transform:"translateX(8px)"},connectOverrideIcon:{top:5}})),b=Object(d.a)(e=>Object(m.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",minHeight:"fit-content",height:e=>e.isGrid?"calc(100% + 8px) !important":"100%"},checkMark:{color:e.palette.success.main},redXwarning:{color:e.palette.error.main},line:{width:1,backgroundColor:e.palette.grey[400],height:e=>{if(e.isGrid)return"calc(100% + 8px) !important";if(e.fullHeight)return"100%";const{initialHeight:t}=e;return t?t-16:"100%"},marginLeft:t=>t.capContent&&!t.isGrid?-e.spacing(1)/2:void 0},secondaryLine:{width:1,backgroundColor:t=>t.overrideLineColor?t.overrideLineColor.backgroundColor:e.palette.grey[400],height:e=>{if(e.isGrid)return"calc(100% + 8px) !important";const{initialHeight:t,showMidline:n}=e,a=t?t-1:void 0;return a?n?a/2:a:"100%"}}}));var f=n(6),h=n(3),g=n(947);function y(e){const[t]=Object(f.a)([h.a.IInternationalization]),{common:n}=t.lang(),{connectLeft:s,connectRight:d,hovered:m,type:b,id:y,onConnect:k,capIconOverride:j,reactKeyPrefix:C}=e,v=Object(o.useRef)(null),O=p({}),x=e=>{let t=n.connect;return b instanceof Array&&(t+=" "+Object(g.a)(b[e].name)),t},A=Object(o.useCallback)(e=>{e.stopPropagation(),k&&Object(u.a)(b)&&Object(u.a)(y)&&k(y[1],b[1])},[y,k,b]),E=Object(o.useCallback)(e=>{e.stopPropagation(),k&&Object(u.a)(b)&&Object(u.a)(y)&&k(y[0],b[0])},[y,k,b]);return r.a.createElement(r.a.Fragment,null,k&&s&&m&&r.a.createElement("div",{className:Object(a.default)(O.connect,O.connectLeft,{[O.connectOverrideIcon]:j})},r.a.createElement(c.a,{title:x(0),enterDelay:700,enterNextDelay:500,disableFocusListener:!0},r.a.createElement(i.a,{id:C+"icon-button",className:O.button,ref:v,onClick:A},r.a.createElement(l.a,{className:O.icon}))),r.a.createElement("div",{className:O.connectLine})),e.children,k&&d&&m&&r.a.createElement("div",{className:Object(a.default)(O.connect,O.connectRight,{[O.connectOverrideIcon]:j})},r.a.createElement("div",{className:O.connectLine}),r.a.createElement(c.a,{title:x(1),enterDelay:700,enterNextDelay:500,disableFocusListener:!0},r.a.createElement(i.a,{id:C+"icon-button-cap-right",className:O.button,ref:v,onClick:E},r.a.createElement(l.a,{className:O.icon})))))}const k=Object(d.a)(e=>Object(m.a)({cap:t=>{const n="small"===t.iconSize?8:t.content?16:11;return{minWidth:n,minHeight:n,maxWidth:16,maxHeight:16,borderRadius:"500px",position:t.center?"absolute":"relative",top:t.center?"calc(50% + 8px)":void 0,color:t.overrideCapColor?t.overrideCapColor.color:t.fill?e.palette.common.white:e.palette.grey[400],textAlign:"center",fontSize:"0.875rem",backgroundColor:t.overrideCapColor?t.overrideCapColor.backgroundColor:t.fill?e.palette.grey[400]:e.palette.common.white,marginLeft:t.content&&!t.isInsideGrid?-e.spacing(1)/2:void 0}},content:{justifyContent:"center"},noFill:{borderColor:e.palette.grey[400],borderStyle:"solid",borderWidth:"thin"}}));function j(e){const{content:t,fill:n}=e,i=k(e),c=Object(o.useMemo)(()=>t?r.a.createElement("span",{className:i.content},t):null,[i.content,t]);return r.a.createElement("div",{className:Object(a.default)(i.cap,{[i.noFill]:!n})},c)}const C=r.a.memo((function(e){const{hovered:t,id:n,type:i,showLine:c,capIconOverride:s,connectLeft:l,connectRight:u,onConnect:d,reactKeyPrefix:m}=e,p=Object(o.useRef)(null),[f,h]=Object(o.useState)(p.current?p.current.clientHeight:null),g=b(Object.assign(Object.assign({},e),{initialHeight:f}));Object(o.useEffect)(()=>{null===f&&h(p.current?p.current.clientHeight:null)},[]);const k=Object(o.useMemo)(()=>{const{capContent:t,iconSize:n,overrideCapColor:a,fillCap:o=!0}=e;return r.a.createElement(r.a.Fragment,null,s?r.a.createElement(s.icon,Object.assign({},s.props)):r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{reactKeyPrefix:m+"default-cap",content:t,iconSize:n,fill:o,overrideCapColor:a,isInsideGrid:e.isGrid}),e.showMidline?r.a.createElement(j,{reactKeyPrefix:m+"center-cap",content:"",iconSize:"small",fill:o,overrideCapColor:a,isInsideGrid:e.isGrid,center:e.showMidline}):r.a.createElement(r.a.Fragment,null)))},[s,e,m]),C=r.a.createElement("div",{className:g.secondaryLine}),v=r.a.createElement("div",{className:g.line}," ",C);return r.a.createElement("div",{className:Object(a.default)("timeline-cap",g.root),ref:p},r.a.createElement(y,{reactKeyPrefix:m+"cap-line-connect",id:n,type:i,onConnect:d,hovered:t,connectLeft:l,connectRight:u},k),c&&v)}))},1281:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));n(10),n(11),n(118),n(268),n(269);var a=n(0),o=n.n(a),r=n(67),i=n(5),c=n(81),s=n(149),l=n.n(s),u=n(40),d=n(100),m=n.n(d),p=n(640),b=n(19),f=n(1),h=n(70);function g(e,t,n,a,o,r){const{model:i,common:c}=o.getLanguageFile(),s=[{fieldName:"bankAccountNo",label:i.bankAccountNo,formControlProps:{required:!0},onUpdateOverride:n.bind(null,"bankAccountNo"),textInputProps:{validation:h.b.BankAccountNo,onInputChange:(e,t)=>r.onChangeBankAccountNo(t)}},{fieldName:"bank",label:i.bank,formControlProps:{required:!0},typeaheadProps:{objectPaths:["bankName","countryCode","swiftAddress"],shouldPreload:!0},onUpdateOverride:n.bind(null,"bank")},{fieldName:"currency",label:i.currency,typeaheadProps:{objectPaths:["currencyCode"],shouldPreload:!0},formControlProps:{required:!0},onUpdateOverride:n.bind(null,"currency")},{fieldName:"corrBankAccount",label:i.corrBankAccount,formControlProps:{required:!1},onUpdateOverride:n.bind(null,"corrBankAccount")},{fieldName:"favouringCompany",label:i.favouringCompany,formControlProps:{required:!1},onUpdateOverride:n.bind(null,"favouringCompany")},{fieldName:"iban",label:i.iban,formControlProps:{required:!1},onUpdateOverride:n.bind(null,"iban")}];t.key&&s.push({fieldName:"isObjectActive",label:c.enabled,formControlProps:{required:!1},onUpdateOverride:n.bind(null,"isObjectActive")});const l={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:s,object:t,type:f.a.bankaccount,userLocale:a};return Object(b.a)(l)}var y=n(51),k=n(12),j=n(6),C=n(3);function v(e){const[t]=Object(j.a)([C.a.IInternationalization]),{common:n}=t.getLanguageFile(),{reactKeyPrefix:r,closeModal:i,showModal:c,parentObject:s,parentObjectType:l,selectedBankAccount:u,onDeleteBankAccount:d,onUpdate:m}=e,[b,h]=Object(a.useState)(!1),v=Object(a.useCallback)(e=>!(e&&e.bankAccountNo&&b),[b]);return o.a.createElement(y.a,{modalProps:{reactKeyPrefix:r+"-create-modal",maxWidth:"xs",onCloseModal:i,open:c,title:(null==u?void 0:u.key)?n.updateBankAccount:n.createBankAccount,confirmBtnName:(null==u?void 0:u.key)?n.save:n.create},getColSpec:g,breakpoints:k.e,contextData:{onChangeBankAccountNo:h},isConfirmDisabled:v,updateProps:{objPropToUpdate:"bankAccounts",objToUpdate:s,fields:{bankAccounts:p.a},objToUpdateType:l,shouldUseArray:!0,type:f.a.bankaccount,overwriteKeysOnLoad:!0,callback:m},selectedObject:u,allowDelete:!!(null==u?void 0:u.key)&&!(null==u?void 0:u.isObjectActive),overrideOnDelete:d})}var O=n(278),x=n(173),A=n(44),E=n(114);const w=e=>{const{i:t,reactKeyPrefix:n,userLocale:s,parentObject:d,parentObjectType:p,createEditDisabled:b,bankAccounts:f,onClickAdd:h,onUpdate:g}=e,{model:y,common:k,businessPartner:C}=t.getLanguageFile(),[w,S]=Object(a.useState)(!1),P=Object(a.useCallback)(()=>{S(!w)},[w]),[I]=Object(j.a)([x.a.IBankAccountTableController]),[N,T]=Object(a.useState)([]),[L,D]=Object(a.useState)(!1),[R,M]=Object(a.useState)(),B=Object(a.useCallback)(()=>{M(void 0),P()},[P]),U=[{content:y.bankName,contentType:i.a.TEXT},{content:y.bankAccountNo,contentType:i.a.TEXT},{content:y.currency,contentType:i.a.TEXT},{content:k.status,contentType:i.a.ELEMENT}],K=[];K.push({disabled:b,icon:h?void 0:m.a,iconButtonProps:{color:"primary","aria-label":k.create},label:k.create,onClick:()=>{const e=new O.a({});M(e),P()},reactKeyPrefix:n+"-create-button-action"}),h&&K.push({disabled:b,icon:m.a,iconButtonProps:{color:"primary","aria-label":k.add},label:k.add,onClick:()=>{h()},reactKeyPrefix:n+"-add-button"});const F=Object(a.useCallback)(e=>({content:[Object(c.a)(e,"bank.bankName",""),Object(c.a)(e,"bankAccountNo"),Object(c.a)(e,"currency.currencyCode"),!e.isObjectActive&&o.a.createElement(u.a,{label:k.disabled,labelColour:u.b.Grey})],id:e.key}),[k.disabled]),_=Object(a.useCallback)(()=>{D(e=>!e)},[]),H=Object(a.useCallback)(e=>{T(e),_()},[_]),z=Object(a.useMemo)(()=>{var e;return null!==(e=f.sort((e,t)=>e.bankAccountNo.localeCompare(t.bankAccountNo)).map(e=>F(e)))&&void 0!==e?e:[]},[f,F]),W=Object(a.useCallback)(e=>{e.isObjectActive?I.disableBankAccount(e.key,d.key,p):Object(E.a)(k.deleteObjectTitle(C.bankAccount),k.deleteConfirmationBankAccount,k.delete).then(t=>{t&&I.deleteBankAccount(e.key,d.key,p)}),B()},[C.bankAccount,k,I,B,d.key,p]),$=Object(a.useCallback)(()=>{const e=f.filter(e=>-1===N.indexOf(e.key)).flatMap(e=>({key:e.key}));I.removeBankAccounts(e,d.key,p),_()},[f,I,d.key,p,N,_]),G=Object(a.useMemo)(()=>[{disabled:!1,icon:l.a,iconButtonProps:{"aria-label":k.remove},label:k.remove,onClick:H,reactKeyPrefix:n+"-selected-actions"}],[k.remove,H,n]);return o.a.createElement(o.a.Fragment,null,w&&o.a.createElement(v,{reactKeyPrefix:n+"-create-bank-account",showModal:w,closeModal:B,parentObject:{key:d.key,bankAccounts:f},parentObjectType:p,selectedBankAccount:null!=R?R:new O.a({}),onDeleteBankAccount:W,onUpdate:g}),o.a.createElement(A.a,{reactKeyPrefix:n+"remove-bank-accounts-modal",open:L,onCloseModal:_,onConfirm:$,title:k.remove,confirmBtnName:k.remove,maxWidth:"xs",fullWidth:!0},k.removeBankAcountsConfirmation),o.a.createElement(r.a,{headers:U,data:z,selectedActions:G,selectable:!0,reactKeyPrefix:n+"-bank-account-list",userLocale:s,title:y.bankAccounts,customisation:{responsive:!0,disableSorting:!0},primaryActions:K,onRowClick:e=>{const t=f.find(t=>t.key===e);t&&(M(t),P())}}))}},1282:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));n(59),n(10),n(11);var a=n(100),o=n.n(a),r=n(149),i=n.n(r),c=n(0),s=n.n(c),l=n(51),u=n(12),d=n(44),m=n(67),p=n(136),b=n(92),f=n(6),h=n(1),g=n(3),y=n(28),k=n(63),j=n(284),C=n(19),v=n(85),O=n(86);function x(e,t,n,a,o,r){const{model:i,tc:c}=o.getLanguageFile(),s={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"broker",formControlProps:{required:!0},label:i.broker,typeaheadProps:{shouldPreload:!0,objectPaths:O.b.businessPartner},onUpdateOverride:n.bind(null,"broker")},{InputProps:{endAdornment:k.a.Percent},fieldName:"commissionPercent",label:i.percent,numberInputProps:{validation:[{type:v.a.RANGE,max:100}],maskSettings:y.a.mask7,onChange:n.bind(null,"commissionPercent")}},{fieldName:"commissionRate",label:i.rate,numberInputProps:{maskSettings:y.a.mask2,onChange:n.bind(null,"commissionRate")}},{fieldName:"commissionLumpsum",label:i.lumpsum,numberInputProps:{maskSettings:y.a.mask2,onChange:n.bind(null,"commissionLumpsum")}},{fieldName:"creditCharterer",label:r.creditOwner?c.creditOwner:i.creditCharterer,onUpdateOverride:n.bind(null,"creditCharterer")},{fieldName:"isInvoiceAddress",label:i.co,onUpdateOverride:n.bind(null,"isInvoiceAddress")}],object:new j.a(t),type:h.a.commission,userLocale:a};return Object(C.a)(s)}var A=n(5);const E={getHeaders:function(e){const{model:t}=e.getLanguageFile();return[{content:t.broker,contentType:A.a.TEXT},{content:t.percent,contentType:A.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:t.rate,contentType:A.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:t.lumpsum,contentType:A.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:t.commission,contentType:A.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}}]},getRowContentProperties:function(){return["broker.businessPartnerName","commissionPercent","commissionRate","commissionLumpsum","commission"]}};var w=n(81),S=n(914),P=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))};function I(e){const[t]=Object(f.a)([g.a.IInternationalization]),{common:n,model:a}=t.getLanguageFile(),{userLocale:r,commissions:y,tsModelObj:k,tsModelObjType:j,readOnly:C,title:v=a.commissions,reactKeyPrefix:O,creditOwner:A,onDelete:I}=e,[T,L]=Object(c.useState)(null),[D,R]=Object(c.useState)([]),[M,B]=Object(c.useState)(!1),[U,K]=Object(c.useState)(!1),[F,_]=Object(c.useState)(),H=Object(c.useCallback)(()=>{K(!1),L(null)},[]),z=Object(c.useCallback)(()=>K(!0),[]),W=Object(c.useCallback)(e=>{var t;L(null!==(t=y.find(t=>t.key===e))&&void 0!==t?t:null),z()},[y,z]),$=Object(c.useCallback)(()=>B(e=>!e),[]),G=Object(c.useCallback)(e=>{R(e),$()},[$]),q=Object(c.useCallback)((e,t)=>{t&&!T&&_(Object(w.a)(Object(S.a)(Object(w.a)(new j.class(t),"commissions")),"key"))},[T,j.class]),X=Object(c.useCallback)(()=>P(this,void 0,void 0,(function*(){if(k&&j){const e=y.filter(e=>-1===D.indexOf(e.key));b.a.getUpdateFieldFunction({fieldToSet:"commissions",fields:{},key:k.key,type:j,smartResponse:!0,callback:()=>{I&&I()}})(e)}$(),R([]),_(void 0)})),[y,I,D,$,k,j]),V=Object(c.useCallback)(()=>H(),[H]),Q=Object(c.useMemo)(()=>[{disabled:!1,icon:o.a,iconButtonProps:{color:"primary","aria-label":n.create},label:n.create,onClick:z,reactKeyPrefix:O+"primary-actions"}],[n.create,z,O]),Y=Object(c.useMemo)(()=>[{disabled:!1,icon:i.a,iconButtonProps:{"aria-label":n.remove},label:n.remove,onClick:G,reactKeyPrefix:O+"selectedActions"}],[n.remove,G,O]),J=Object(c.useMemo)(()=>(T?n.edit:n.create)+" "+a.commission,[n.create,n.edit,a.commission,T]),Z=Object(c.useMemo)(()=>Object(p.b)(y,E.getRowContentProperties()),[y]),ee=Object(c.useMemo)(()=>E.getHeaders(t),[t]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{headers:ee,userLocale:r,reactKeyPrefix:O+"commission-table",title:v,data:Z,selectable:!C,primaryActions:Q,selectedActions:Y,onRowClick:W,customisation:{responsive:!0},preSelectedRow:F}),s.a.createElement(l.a,{modalProps:{reactKeyPrefix:O+"create-edit-commission-modal",confirmBtnName:T?n.save:n.create,onCloseModal:H,onDelete:T?V:void 0,open:U,title:J},breakpoints:u.h,getColSpec:x,isConfirmDisabled:N,selectedObject:T,allowDelete:!!T,enableCopy:!1,contextData:{creditOwner:A},updateProps:{objPropToUpdate:"commissions",objToUpdate:k,objToUpdateType:j,shouldUseArray:!0,type:h.a.commission,smartResponse:!0,callback:q}}),s.a.createElement(d.a,{reactKeyPrefix:O+"delete-commission-modal",open:M,onCloseModal:$,onConfirm:X,title:n.delete,maxWidth:"xs",fullWidth:!0},n.deleteItemsConfirmation))}function N(e){return!e.broker}},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var a=n(2329),o=n(1429),r=n(0),i=n.n(r),c=(n(10),n(11),n(246)),s=n(984),l=n(2086),u=n(2343),d=n(213),m=n(187),p=n(650),b=n.n(p),f=n(413),h=n.n(f);const g=Object(d.a)(e=>Object(m.a)({listItem:Object.assign(Object.assign({},e.typography.subtitle1),{minHeight:48}),listItemText:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));function y({menuItems:e,onClose:t,reactKeyPrefix:n}){const[a,o]=Object(r.useState)(!1),[d,m]=Object(r.useState)([e]),p=g({});if(d.length){const e=[];return a&&e.push(i.a.createElement(c.a,{id:n+"icon-btn",key:"menu-back",onClick:()=>{const e=d.slice(1,d.length);o(e.length>1),m(e)}},i.a.createElement(b.a,null))),d[0].forEach((a,r)=>{if(a.subMenuItems)e.push(i.a.createElement(s.a,{id:n+"list-item",key:`${a.label}_${r}`,onClick:()=>{var e;return(e=>{const t=[e,...d];o(!0),m(t)})(null!==(e=a.subMenuItems)&&void 0!==e?e:[])},className:p.listItem},i.a.createElement(l.a,{className:p.listItemText,disableTypography:!0},a.label),i.a.createElement(u.a,null,i.a.createElement(h.a,null))));else if(a.key){const o=()=>{a.action&&a.key&&a.action(a.key),t()};e.push(i.a.createElement(s.a,{id:n+"list-item",key:a.key+a.label,onClick:o,className:p.listItem},i.a.createElement(l.a,{className:p.listItemText,disableTypography:!0},a.label)))}}),i.a.createElement(i.a.Fragment,null,e)}return null}const k=e=>{const{open:t,onClose:n,menuItems:r,reactKeyPrefix:c}=e;return i.a.createElement(a.a,{open:t,fullWidth:!0,maxWidth:"xs",onClose:n},i.a.createElement(o.a,null,i.a.createElement(y,{reactKeyPrefix:c+"nested-menu",menuItems:r,onClose:n})))}},1318:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(130),o=n(0),r=n(73);function i(){return o.createElement(r.a,{reactKeyPrefix:"doc-common-components-coming-soon-page"},o.createElement("div",{style:{margin:"auto"}},o.createElement(a.a,null,"Coming soon.")))}},1595:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(59);var a,o,r=n(9),i=n(31),c=n(83),s=n(1394),l=n(32),u=n(7),d=n(89),m=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e,t){return function(n,a){t(n,a,e)}},f=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))};let h=class{constructor(e,t){this.store=e,this.fieldApi=t}bulkUpdate(e,t,n,a){var o;return f(this,void 0,void 0,(function*(){const r=Object(d.a)(t),i=null!==(o=Object(l.a)(this.store.getState()).authdata)&&void 0!==o?o:"";return this.fieldApi.updateFields(i,e,n,r,a)}))}};h=m([Object(r.injectable)(),b(0,Object(r.inject)(u.a.Store)),b(1,Object(r.inject)(c.a.IFieldApi)),p("design:paramtypes",["function"==typeof(a=void 0!==i.Store&&i.Store)?a:Object,"function"==typeof(o=void 0!==s.IFieldApi&&s.IFieldApi)?o:Object])],h)},1596:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a,o,r=n(9),i=n(31),c=n(1),s=n(29),l=n(7),u=n(309),d=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e,t){return function(n,a){t(n,a,e)}};let b=class{constructor(e,t){this.store=e,this.tsmodelActions=t}loadBankAccounts(e,t,n,a){this.tsmodelActions.loadSingleAction({fields:null!=n?n:{bankAccounts:u.a},type:t,key:e,callback:e=>{!e&&a&&a()}})}disableBankAccount(e,t,n,a){this.tsmodelActions.updateSingleAction({data:{isObjectActive:!1},type:c.a.bankaccount,key:e,callback:e=>{e||this.loadBankAccounts(t,n,a)}})}enableBankAccount(e,t,n,a){this.tsmodelActions.updateSingleAction({data:{isObjectActive:!0},type:c.a.bankaccount,key:e,callback:e=>{e||this.loadBankAccounts(t,n,a)}})}deleteBankAccount(e,t,n,a){this.tsmodelActions.deleteAction({type:c.a.bankaccount,key:e,callback:e=>{e||this.loadBankAccounts(t,n,a)}})}removeBankAccounts(e,t,n){this.tsmodelActions.updateSingleAction({key:t,type:n,data:{bankAccounts:e},fields:{bankAccounts:"*"},callback:e=>{e||this.loadBankAccounts(t,n)}})}};b=d([Object(r.injectable)(),p(0,Object(r.inject)(l.a.Store)),p(1,Object(r.inject)(l.a.ITSModelActionsAsync)),m("design:paramtypes",["function"==typeof(a=void 0!==i.Store&&i.Store)?a:Object,"function"==typeof(o=void 0!==s.ITSModelActionsAsync&&s.ITSModelActionsAsync)?o:Object])],b)},1600:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(59);var a,o,r=n(9),i=n(420),c=n(29),s=n(7),l=n(48),u=n(90),d=n(3),m=n(809),p=n(810),b=n(1),f=n(459),h=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t){return function(n,a){t(n,a,e)}},k=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))};let j=class{constructor(e,t){this.http=e,this.tsmodelActions=t}getApiDataModel(){return k(this,void 0,void 0,(function*(){try{const e=yield this.http.get(l.a.API_BASE_URL+"/util/getAPIDataModel");return yield e.json()}catch(e){if(e instanceof Error)throw new Error(e.message);throw new Error("API call to get API data model failed")}}))}onEditExpression(e,t,n,a,o){const r=a||o;if(r){const o=Object(m.a)(r.expression);if(e!==o){let c;c=""===e?{expression:null}:{expression:Object(p.a)(e,t[r.objectType])};const s=a?b.a.webhooksubscription:b.a.webhooktemplate;this.tsmodelActions.updateSingleAction({type:s,key:r.key,data:c,callback:(e,t)=>{e?n(o):t&&this.tsmodelActions.loadSingleAction({fields:a?i.a:f.d,key:t.key,type:s})}})}}}};j=h([Object(r.injectable)(),y(0,Object(r.inject)(d.a.IHttp)),y(1,Object(r.inject)(s.a.ITSModelActionsAsync)),g("design:paramtypes",["function"==typeof(a=void 0!==u.IHttp&&u.IHttp)?a:Object,"function"==typeof(o=void 0!==c.ITSModelActionsAsync&&c.ITSModelActionsAsync)?o:Object])],j)},1711:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(59);var a,o,r,i=n(9),c=n(31),s=n(83),l=n(104),u=n(1),d=n(32),m=n(7),p=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t){return function(n,a){t(n,a,e)}},h=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))};let g=class{constructor(e,t,n){this.store=e,this.objectApi=t,this.dbUpdateApi=n}pushChanges(e){return h(this,void 0,void 0,(function*(){try{const{authdata:t}=Object(d.a)(this.store.getState());return this.objectApi.put({authdata:null!=t?t:"",data:"",key:e.key,type:u.a.entityrelease}),Promise.resolve()}catch(e){return Promise.reject()}}))}createEntityReleaseDbUpdate(e){return h(this,void 0,void 0,(function*(){try{const{authdata:t}=Object(d.a)(this.store.getState()),n=yield this.objectApi.post({authdata:null!=t?t:"",data:e,type:u.a.entityrelease});return yield n}catch(e){return Promise.reject()}}))}checkIfReleaseHasDbUpdate(e){return h(this,void 0,void 0,(function*(){const{authdata:t}=Object(d.a)(this.store.getState());return yield this.objectApi.getMultiple({authdata:null!=t?t:"",type:u.a.entityrelease,query:"filter=entity(EQ)DbUpdate&filter=releaseNumber(EQ)"+e}).then(e=>e)}))}createDbUpdate(e,t,n){return h(this,void 0,void 0,(function*(){try{const{authdata:a}=Object(d.a)(this.store.getState());return yield this.dbUpdateApi.post({authdata:null!=a?a:"",data:{dbUpdate:btoa(e),entityRelease:null!=t?t:{entity:"DbUpdate",releaseNumber:n,transactionNumber:0}},type:u.a.dbupdate})}catch(e){return Promise.reject()}}))}};g=p([Object(i.injectable)(),f(0,Object(i.inject)(m.a.Store)),f(1,Object(i.inject)(s.a.ITSModelApi)),f(2,Object(i.inject)(s.a.ITSModelApi)),b("design:paramtypes",["function"==typeof(a=void 0!==c.Store&&c.Store)?a:Object,"function"==typeof(o=void 0!==l.ITSModelApi&&l.ITSModelApi)?o:Object,"function"==typeof(r=void 0!==l.ITSModelApi&&l.ITSModelApi)?r:Object])],g)},1726:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(59);var a,o,r,i=n(9),c=n(31),s=n(541),l=n(1),u=n(32),d=n(29),m=n(7),p=n(48),b=n(90),f=n(3),h=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t){return function(n,a){t(n,a,e)}},k=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))};let j=class{constructor(e,t,n){this.tsmodelActions=e,this.store=t,this.http=n}loadDbUpdate(e){this.tsmodelActions.loadSingleAction({fields:s.a,key:e,type:l.a.dbupdate})}moveDbUpdate(e,t){return k(this,void 0,void 0,(function*(){return this.tsmodelActions.updateSingleAction({data:{key:e.key,sequence:t},key:e.key,type:l.a.dbupdate,fields:s.a})}))}deleteDbUpdate(e){this.tsmodelActions.deleteAction({key:e,type:l.a.dbupdate})}runDbUpdates(){return k(this,void 0,void 0,(function*(){try{const{authdata:e}=Object(u.a)(this.store.getState());return yield this.http.post(p.a.API_BASE_URL+"/DataRepo/runDbUpdate","{}",{headers:new Headers({authorization:null!=e?e:"","content-type":"application/json"})})}catch(e){throw e instanceof Error?new Error(e.message):new Error("API call failed")}}))}};j=h([Object(i.injectable)(),y(0,Object(i.inject)(m.a.ITSModelActionsAsync)),y(1,Object(i.inject)(m.a.Store)),y(2,Object(i.inject)(f.a.IHttp)),g("design:paramtypes",["function"==typeof(a=void 0!==d.ITSModelActionsAsync&&d.ITSModelActionsAsync)?a:Object,"function"==typeof(o=void 0!==c.Store&&c.Store)?o:Object,"function"==typeof(r=void 0!==b.IHttp&&b.IHttp)?r:Object])],j)},1727:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a,o,r,i=n(9),c=n(31),s=n(1),l=n(29),u=n(7),d=n(90),m=n(3),p=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t){return function(n,a){t(n,a,e)}};let h=class{constructor(e,t,n){this.tsmodelActions=e,this.store=t,this.http=n}deleteEntityRelease(e){this.tsmodelActions.deleteAction({key:e,type:s.a.entityrelease})}};h=p([Object(i.injectable)(),f(0,Object(i.inject)(u.a.ITSModelActionsAsync)),f(1,Object(i.inject)(u.a.Store)),f(2,Object(i.inject)(m.a.IHttp)),b("design:paramtypes",["function"==typeof(a=void 0!==l.ITSModelActionsAsync&&l.ITSModelActionsAsync)?a:Object,"function"==typeof(o=void 0!==c.Store&&c.Store)?o:Object,"function"==typeof(r=void 0!==d.IHttp&&d.IHttp)?r:Object])],h)},1739:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(10),n(11),n(109),n(163);var a=n(473),o=n(1740),r=n.n(o),i=n(0),c=n.n(i),s=n(6),l=n(807),u=n(3),d=n(47),m=(n(2284),n(7));class p extends c.a.PureComponent{constructor(e){super(e),this.hasHandled=!1,this.state=Object.assign({},this.props.state),this.auth0=this.props.deps[0],this.i=this.props.deps[1],this.onClickLogin=this.onClickLogin.bind(this)}componentDidMount(){this.callHandleAuthentication()}callHandleAuthentication(){this.state.identityProviderConfiguration&&!this.hasHandled&&(this.auth0.handleAuthentication(),this.hasHandled=!0)}UNSAFE_componentWillReceiveProps(e){this.setState(Object.assign({},e.state),()=>{this.callHandleAuthentication()})}onClickLogin(){const[e]=this.props.deps;e.login()}getErrorMessage(){let e;if(window.location.hash&&window.location.hash.indexOf("error=")>=0){const t=r.a.parse(window.location.hash.replace("#/login-callback",""));e=t.error.charAt(0).toUpperCase()+t.error.slice(1)+". "+t.error_description.charAt(0).toUpperCase()+t.error_description.slice(1)+"."}return e}render(){const e=this.getErrorMessage();return c.a.createElement("div",{className:"auth0-logout-callback"},!!e&&c.a.createElement("div",null,c.a.createElement("div",null,this.i.lang().common.loginFailed+" "+this.i.lang().common.contactSuperuser),c.a.createElement("div",null,this.i.lang().common.reason+": "+e)," ",c.a.createElement(a.a,{onClick:this.onClickLogin,variant:"contained",color:"primary"},"Login")))}}const b=Object(d.a)(e=>({identityProviderConfiguration:Object(l.a)(e)}),Object(s.b)([m.a.IAuth0,u.a.IInternationalization],p))},1741:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(10),n(11);var a=n(473),o=n(0),r=n.n(o),i=n(6),c=n(3),s=(n(2285),n(7));class l extends r.a.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){const[e]=this.props.deps;e.login()}render(){const[e,t]=this.props.deps;return r.a.createElement("div",{className:"auth0-logout-callback"},r.a.createElement("p",null,t.getLanguageFile().common.logoutSuccess),r.a.createElement(a.a,{variant:"outlined",color:"primary",onClick:this.onClick},"Login"))}}const u=Object(i.b)([s.a.IAuth0,c.a.IInternationalization],l)},1889:function(e,t,n){"use strict";n.d(t,"a",(function(){return ee}));n(10),n(11);var a=n(1429),o=n(0),r=n.n(o),i=n(81),c=n(216),s=n(35),l=n(635),u=n(835),d=n(130),m=n(213),p=n(187),b=n(78);const f=Object(m.a)(Object(p.a)(e=>({commentHeader:{display:"flex",width:"100%",alignItems:"center",position:"relative"},userName:{fontWeight:500,[e.breakpoints.up("md")]:{fontSize:"1rem"}},[e.breakpoints.up("md")]:{date:{textAlign:"right"}},date:{display:"block",marginLeft:"auto",color:e.palette.grey[500],fontSize:".85rem",paddingRight:e.spacing(2.5)},avatar:{marginRight:e.spacing(1),[e.breakpoints.up("md")]:{marginRight:e.spacing(2)}},menuButton:{padding:4,position:"absolute",right:e.spacing(-1.5),[e.breakpoints.up("md")]:{right:e.spacing(-1.5)}},menuIcon:{fontSize:"1.5rem"}})));function h({userDisplayName:e,remark:t,secondaryActions:n,userLocale:a,reactKeyPrefix:o}){const m=f({});return r.a.createElement("div",{className:m.commentHeader},r.a.createElement(u.a,{reactKeyPrefix:o+"comment-avatar",className:m.avatar,name:Object(i.a)(t,"createdBy.userName")}),r.a.createElement(d.a,{className:m.userName},e),r.a.createElement(c.a,{className:m.date,userLocale:a,value:b.a.convertUTCToLocalTime(t.createdDate),dateFormat:s.a.longLocalizedDate}),r.a.createElement(l.a,{reactKeyPrefix:o+"sec-action-menu",buttonClassName:m.menuButton,iconClassName:m.menuIcon,actions:n||[]}))}var g=n(984),y=n(6),k=n(7),j=n(3),C=n(1);const v={remark:"*",createdById:"*",createdDate:"*",modifiedDate:"*",source:"*"};var O=n(473),x=n(690),A=n(962);const E={control:{backgroundColor:"#fff",fontSize:14,fontWeight:"normal",outline:0,minHeight:"4rem"},"&multiLine":{control:{outline:0,minHeight:"4rem",borderRadius:"4px",padding:3,overflow:"hidden",maxWidth:"95%"},highlighter:{outline:0,padding:3,border:"1px solid transparent",overflow:"hidden",minHeight:"4rem",maxWidth:"95%"},input:{outline:0,padding:3,border:"1px solid transparent",position:"absolute",minHeight:"4rem",overflow:"hidden",maxWidth:"95%"}},suggestions:{zIndex:9999,list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14,maxHeight:180,minWidth:180,position:"inherit",bottom:16,overflow:"auto",borderRadius:"4px",zIndex:2},item:{padding:"5px 15px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#E8E8E8"}}}};function w(e){const{reactKeyPrefix:t,value:n,onChange:a,onKeyDown:i,onKeyUp:c,onAdd:s,placeholder:l,users:u}=e,d=Object(o.useCallback)(e=>{return t=e,(u||[]).filter(e=>e.isObjectActive).filter(e=>e.userCode.toLowerCase()===t.toLowerCase()||Object(A.a)(e.userName).toLowerCase().includes(Object(A.a)(t).toLowerCase())).map(e=>({id:e.key,display:e.userName}));var t},[u]);return r.a.createElement(x.b,{id:t,value:n,onChange:a,onKeyDown:i,onKeyUp:c,style:E,placeholder:l},r.a.createElement(x.a,{trigger:"@",data:d,markup:"@{__id__}",onAdd:s,displayTransform:e=>{var t,n;return"@"+(null!==(n=null===(t=(null!=u?u:[]).find(t=>t.key===Number(e)))||void 0===t?void 0:t.userName)&&void 0!==n?n:"")},appendSpaceOnAdd:!0}))}const S=Object(m.a)(Object(p.a)(e=>({container:{padding:e.spacing(1,0,0,5.5),[e.breakpoints.up("md")]:{padding:e.spacing(1,0,0,6.5)},width:"100%"},actionButtons:{margin:e.spacing(1,1,0,0)},textArea:{"&:hover":{border:"1px solid rgba(0,0,0,0.87)"},"&:focus-within":{border:"2px solid blue"},border:"1px solid rgba(0,0,0,0.23)",minHeight:"5rem",width:"100%",borderRadius:"4px",position:"relative"}})));function P({remark:e,onToggleEditMode:t,reactKeyPrefix:n,users:a}){const[i,c]=Object(o.useState)(e.remark),s=S({}),l=Object(o.useRef)(null),u=Object(o.useCallback)(e=>{c(e.target.value)},[]),[d]=Object(y.a)([j.a.IInternationalization]),{common:m}=d.getLanguageFile(),p=Object(o.useCallback)(()=>{i!==e.remark&&function(e,t){const[n]=Object(y.a)([k.a.ITSModelActionsAsync]);n.updateSingleAction({key:e,type:C.a.remark,data:{remark:t},fields:v})}(e.key,i),t()},[i,t,e.key,e.remark]);return Object(o.useEffect)(()=>{l.current&&l.current.scrollIntoView({block:"center",behavior:"smooth"})},[l,i]),r.a.createElement("div",{ref:l,className:s.container},r.a.createElement("div",{className:s.textArea},r.a.createElement(w,{reactKeyPrefix:n+"text-field",value:i,onChange:u,users:a})),r.a.createElement(O.a,{id:n+"cancel-btn",className:s.actionButtons,name:"Cancel",color:"primary",onClick:t},m.cancel),r.a.createElement(O.a,{id:n+"update-btn",className:s.actionButtons,name:"Update",variant:"contained",color:"primary",onClick:p},m.update))}const I=Object(m.a)(Object(p.a)(e=>({commentBody:{whiteSpace:"pre-wrap",wordBreak:"break-all",fontSize:"0.975rem",fontWeight:300,marginRight:e.spacing(2),marginLeft:e.spacing(5.5),[e.breakpoints.up("md")]:{marginRight:e.spacing(15),marginLeft:e.spacing(6.5)}}})));function N({body:e}){const t=I({});return r.a.createElement("div",{className:t.commentBody},e)}var T=n(114);n(109),n(163);const L=Object(m.a)(Object(p.a)(e=>({comment:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:e.spacing(2)}})));function D(e){const t=L({}),{remark:n,childRef:a,user:c,userLocale:s,reactKeyPrefix:l,users:u}=e,[d,m]=Object(o.useState)(!1),[p]=Object(y.a)([j.a.IInternationalization]),{common:b}=p.getLanguageFile(),f=Object(o.useMemo)(()=>{var e;return function(e,t){return e.replace(/\@\{([0-9]+)\}/gm,(e,n)=>{const a=t.filter(e=>e.key.toString()===n),o=Object(i.a)(a[0],"userName");return o||e})}(null!==(e=n.remark)&&void 0!==e?e:"",null!=u?u:[])},[n.remark,u]),v=Object(o.useCallback)(()=>m(!d),[d]),O=Object(o.useCallback)(()=>function(e){const[t,n]=Object(y.a)([k.a.ITSModelActions,j.a.IInternationalization]),{common:a,model:o}=n.getLanguageFile(),r=`${a.delete} ${o.comment}`,i=`${a.deleteConfirmation} ${o.comment.toLowerCase()}?`;Object(T.a)(r,i).then(n=>{n&&t.deleteAction({key:e,type:C.a.remark})})}(n.key),[n.key]),x=c&&c.key===n.createdById,A=Object(o.useMemo)(()=>x?[{text:b.edit,onClick:v,disabled:!1},{text:b.delete,onClick:O,disabled:!1}]:[],[b.delete,b.edit,x,O,v]);return r.a.createElement(g.a,{disableGutters:!0,className:t.comment,ref:a},r.a.createElement(h,{reactKeyPrefix:l+"comment-header",user:c,remark:n,userDisplayName:x?b.you:Object(i.a)(n,"createdBy.userName"),secondaryActions:A,userLocale:s,users:u}),d?r.a.createElement(P,{reactKeyPrefix:l+"edit-comment",user:c,userLocale:s,onToggleEditMode:v,remark:n,users:u}):r.a.createElement(N,{body:f}))}var R=n(214),M=n(218),B=n(246),U=n(1757),K=n.n(U),F=n(283),_=n.n(F),H=n(2463),z=n(32);const W=Object(m.a)(Object(p.a)(e=>({button:{cursor:"pointer","&:hover  svg":{fill:e.palette.primary.main},"&:focus  svg":{fill:e.palette.primary.main},right:e.spacing(1),top:"50%",position:"absolute",transform:"translateY(-50%)"},area:{"&:hover":{border:"1px solid rgba(0, 0, 0, 0.87)"},"&:focus-within":{border:"2px solid blue"},width:"100%",minHeight:"6rem",float:"inherit",borderRadius:"4px",bottom:"10px",overflow:"visible",padding:9,border:"1px solid rgba(0, 0, 0, 0.23)",backgroundColor:"#fff"}}))),$="desktop"===_.a.getParser(window.navigator.userAgent).getPlatformType(!0);function G(e){const{source:t,reactKeyPrefix:n,users:a}=e,i=W(e),[c,s]=Object(o.useState)(""),[l,u]=Object(o.useState)(!1),d=Object(o.useRef)(null),[m,p]=Object(o.useState)(!1),b=Object(o.useRef)(!1),[f,h,g]=Object(y.a)([k.a.ITSModelActionsAsync,j.a.IInternationalization,k.a.Store]),O=Object(o.useCallback)(()=>{if(c&&!l){const e={remark:c,info:window.location.href,source:t,createdById:Object(z.a)(g.getState()).key};f.createAction({type:C.a.remark,data:e,fields:v,callback:e=>{null===e&&(s(""),u(!1))}}),u(!0)}},[c,l,t,g,f]),x=Object(o.useCallback)(e=>{s(e.target.value)},[]),A=Object(o.useCallback)(Object(H.a)(e=>{"Shift"===e.key?p(!0):$&&!m&&"Enter"===e.key&&e.preventDefault()},25,{trailing:!1}),[m]),E=Object(o.useCallback)(e=>{$&&!m?"Enter"===e.key&&(b.current?setTimeout(()=>{b.current=!1},200):(b.current=!1,e.preventDefault(),d.current&&(d.current.focus(),d.current.click(),setTimeout(()=>{d.current&&d.current.blur()},50)))):"Shift"===e.key&&p(!1)},[m]);return r.a.createElement(R.a,{container:!0},r.a.createElement(M.a,{disableFocusListener:!0,disableTouchListener:!0,disableHoverListener:!$,title:h.lang().common.holdShiftToGetNewLine},r.a.createElement("div",{className:i.area},r.a.createElement(w,{reactKeyPrefix:n+"text-field",value:c,onChange:x,onKeyDown:A,onKeyUp:E,placeholder:h.lang().model.comment,users:a,onAdd:()=>b.current=!0}),r.a.createElement(B.a,{id:n+"icon-btn",className:i.button,onClick:O,ref:d},r.a.createElement(K.a,null)))))}var q=n(23),X=n(1212),V=n(241),Q=n(21),Y=n(42);const J=Object(m.a)(Object(p.a)(e=>({root:{flex:1,display:"flex",flexDirection:"column"},list:{flex:"1 0 auto"},create:{position:"sticky",bottom:0,backgroundColor:"white",paddingBottom:e.spacing(2)}}))),Z={userName:"*",userCode:"*",key:"*",isObjectActive:"*"};function ee(e){const{sourceKey:t,reactKeyPrefix:n}=e,i=J({}),c=Object(o.useRef)(),l=Object(q.a)(Q.a.getAllTSModelsBuilt,C.a.remark,v),u=Object(q.a)(Q.a.getAllTSModelsBuilt,C.a.user,Z),d=Object(q.a)(V.a.getUserData),m=Object(q.a)(Y.a.getUserLocale)||s.f[0],p=Object(o.useMemo)(()=>function(e,t,n,a,o,i,c){const s=e.filter(e=>e.source===n);return X.a.joinTSModelWithUsers(s,t).map((n,s)=>{const l=s===e.length-1;return r.a.createElement(D,{reactKeyPrefix:c+"comment",user:o,userLocale:i,childRef:l?a:void 0,key:n.key,remark:n,users:t})})}(l||[],u||[],t,c,d,m,n),[l,u,t,d,m,n]);return Object(o.useEffect)(()=>{t&&function(e){const[t]=Object(y.a)([k.a.ITSModelActions]);t.loadMultipleAction({fields:v,query:`filter=source(EQ)${e}&sort=createdDate(AS)`,type:C.a.remark})}(t)},[t]),Object(o.useEffect)(()=>{c.current&&c.current.scrollIntoView()},[p,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.root},r.a.createElement(a.a,{className:i.list},p),r.a.createElement("div",{className:i.create},r.a.createElement(G,{reactKeyPrefix:n+"create-comment",source:t,users:u}))),r.a.createElement("span",{className:i.spaceFix}))}},1962:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n(59),n(10),n(11);var a=n(0),o=n.n(a),r=n(6),i=(n(109),n(163),n(3));const[c]=Object(r.a)([i.a.IInternationalization]);const s=c.lang().menu,l=[{tsModelName:"Tc",tsListName:s.timeCharterContracts},{tsModelName:"Coa",tsListName:s.coa},{tsModelName:"Cargo",tsListName:s.cargoes}];function u(e){return`${c.lang().common.bulkUpdate} ${function(e){const t=l.find(t=>t.tsModelName===e);return t?t.tsListName:e.replace(/([A-Z])/g," $1").trim().concat(function(e){return"s"===e.substring(e.length-1)?"es":"s"}(e))}(e)}`}var d=n(1),m=n(7),p=n(23),b=n(21),f=n(19),h=n(430);var g=n(173),y=n(37),k=n(12),j=n(44);const C=o.a.memo((function(e){const{showModal:t,onClose:n,onConfirm:a,title:r,reactKeyPrefix:i,colSpec:c,disableButton:s}=e;return o.a.createElement(j.a,{reactKeyPrefix:i,open:t,maxWidth:"md",fullWidth:!0,onCloseModal:n,onConfirm:()=>{a()},title:r,disableConfirmBtn:s},c&&o.a.createElement(y.a,{reactKeyPrefix:i+"h-list",items:c(),breakpoints:k.d}))})),v=Object(r.b)([i.a.IInternationalization],C);var O=n(168),x=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))};const A={fieldName:"*",attributeName:"*",isBulkUpdate:"*",table:{objectName:"*"}};function E(e){const{reactKeyPrefix:t,closeDialog:n,showDialog:i,tsModelType:c,selectedKeys:s,userLocale:l,onKeepCheckbox:y}=e,k=Object(p.a)(b.a.getAllTSModelsBuilt,d.a.field,A),j=Object(p.a)(b.a.getTSModelBuilt,c,s[0],k),[C,E]=Object(a.useState)(j),[w,S]=Object(a.useState)(!1),[P,I]=Object(a.useState)(!0),N=Object(a.useRef)(w),[T]=Object(r.a)([g.a.IBulkUpdateController]);Object(a.useEffect)(()=>function(e){const[t]=Object(r.a)([m.a.ITSModelActions]);e&&t.loadMultipleAction({fields:A,query:`filter=table.objectName(EQ)${e}&filter=isBulkUpdate(EQ)true`,type:d.a.field})}(c.name),[c]),Object(a.useEffect)(()=>E(j),[j]),Object(a.useEffect)(()=>{N.current=w},[w]);const L=Object(a.useCallback)((e,t)=>{t&&P&&I(!1),C&&E(new c.class(Object(O.e)(C,e.attributeName,t)))},[C,c.class,P]),D=Object(a.useCallback)(e=>{S(e)},[]),R=Object(a.useCallback)(()=>x(this,void 0,void 0,(function*(){I(!0),T.bulkUpdate(s,C,c,D).then(()=>{y(),n(!0)})})),[n,T,C,D,y,s,c]),M=Object(a.useCallback)(()=>{n(!1)},[n]);return o.a.createElement(v,{reactKeyPrefix:t,onClose:M,onConfirm:R,showModal:i,colSpec:()=>{if(C){const e=null==k?void 0:k.filter(e=>{var t;return(null===(t=e.table)||void 0===t?void 0:t.objectName)===c.name});return function(e,t,n,a,o,r){const i={fieldOptions:(e=>{const t=[];return e?(e.forEach(e=>{const n=Object(h.a)(e.attributeName);t.push({fieldName:e.attributeName,label:n,onUpdateOverride:t=>{r(e,t)}})}),t):[]})(t),type:o,reactKeyPrefix:e+"bulk-update-field",object:a,userLocale:n};return Object(f.a)(i)}(t,null!=e?e:[],l,C,c,L)}return[]},title:u(c.name),disableButton:P})}},2006:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n(118),n(10),n(11);var a=n(100),o=n.n(a),r=n(0),i=n.n(r),c=n(5),s=n(67),l=n(6),u=n(701),d=n(3),m=n(2472),p=n(473),b=n(214),f=n(695),h=n(210),g=n(63),y=n(44),k=n(1),j=n(102),C=n(85);class v extends i.a.PureComponent{constructor(e){super(e),this.i=this.props.deps[0],this.state={contributor:this.props.contributor,percentage:this.props.contributor?this.props.contributor.percent:0,showDialog:this.props.showDialog,userId:this.props.contributor&&this.props.contributor.user?this.props.contributor.user.key:void 0},this.onChangeUser=this.onChangeUser.bind(this),this.onChangePercentage=this.onChangePercentage.bind(this),this.onClickCancel=this.onClickCancel.bind(this),this.onClickDelete=this.onClickDelete.bind(this),this.onClickConfirm=this.onClickConfirm.bind(this)}UNSAFE_componentWillReceiveProps(e){this.setState({contributor:e.contributor,percentage:e.contributor?e.contributor.percent:0,userId:e.contributor&&e.contributor.user?e.contributor.user.key:void 0})}onChangeUser(e){e&&this.setState({userId:e.key})}onChangePercentage(e){this.setState({percentage:e})}onClickCancel(){this.setState({contributor:void 0,percentage:0,showDialog:!1,userId:void 0}),this.props.onClose()}onClickDelete(){this.props.contributor&&this.props.contributor.user&&this.props.onDelete()}onClickConfirm(){this.state.userId&&this.props.onConfirm(this.state.userId,this.state.percentage)}isRequiredFieldsOK(){const{userId:e}=this.state;return!!e}render(){const{showDialog:e,userLocale:t,contributor:n,reactKeyPrefix:a}=this.props,o=!this.isRequiredFieldsOK(),r=[n?i.a.createElement(p.a,{id:a+"delete-btn",key:"delete-button",onClick:this.onClickDelete,color:"primary"},this.i.lang().common.delete):null,i.a.createElement(p.a,{id:a+"cancel-btn",key:"cancel-button",onClick:this.onClickCancel,color:"primary"},this.i.lang().common.cancel),i.a.createElement(p.a,{id:a+"confirm-btn",key:"confirm-button",disabled:o,onClick:this.onClickConfirm,color:"primary"},this.i.lang().common.confirm)],c=this.state.contributor&&this.state.contributor.user?this.state.contributor.user:void 0;return i.a.createElement(y.a,{reactKeyPrefix:a,maxWidth:"xs",fullWidth:!0,open:e,onCloseModal:this.onClickCancel,title:"Commission Contributor",actionButtons:r,fullscreenOnMobile:!0},i.a.createElement(b.a,{container:!0,spacing:2},i.a.createElement(b.a,{item:!0,xs:12},i.a.createElement(j.b,{reactKeyPrefix:a+"typeahead",label:this.i.lang().model.broker,objectPaths:["userName"],defaultSelectedOptions:c,type:k.a.user,onChange:this.onChangeUser,formControlProps:{required:!0},shouldPreload:!0})),i.a.createElement(b.a,{item:!0,xs:12},i.a.createElement(h.a,{reactKeyPrefix:a+"number-input",label:this.i.lang().model.percent,value:this.state.percentage,userLocale:t,maskSettings:{allowNegative:!1,decimalScale:2,fixedDecimalScale:!0},InputProps:{endAdornment:g.a.Percent},validation:[{type:C.a.RANGE,max:100}],onChange:this.onChangePercentage}))))}}const O=Object(l.b)([d.a.IInternationalization],Object(f.a)(()=>Object(m.a)({}))(v));var x=n(2517),A=n(130),E=n(187),w=n(123),S=n(1219);const P=Object(l.b)([d.a.IInternationalization],Object(f.a)(e=>Object(E.a)({}))(e=>{const{deps:[t],classes:n,commissionContributorList:a,userLocale:o,headers:r}=e,c=t.getLanguageFile(),s=Object(S.a)(a),l=w.a.formatNumberLocalized(s,o.isoCode,{maxDecimals:2,minDecimals:2}),u=a.length>0&&100!==s?r.length/2:r.length;return i.a.createElement(i.a.Fragment,null,a.length>0&&100!==s&&i.a.createElement(x.a,{colSpan:u},i.a.createElement(A.a,{variant:"subtitle2",color:"error"},c.common.cantSaveChanges," ",c.bc.totalMustEqual," 100%")),i.a.createElement(x.a,{colSpan:u,align:"right"},c.common.total,": ",l,"%"))}));function I(e,t){if(e.user&&t.user){if(e.user.userName>t.user.userName)return 1;if(e.user.userName<t.user.userName)return-1}return 0}class N extends r.PureComponent{constructor(e){super(e),this.i=this.props.deps[0],this.state={commissionContributorList:[],headers:[{content:this.i.lang().model.broker,contentType:c.a.TEXT},{content:this.i.lang().model.percent,contentType:c.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}}],selectedContributorIndex:null,showDialog:!1,users:e.users},this.onClickContributor=this.onClickContributor.bind(this),this.onAddContributor=this.onAddContributor.bind(this),this.onCloseDialog=this.onCloseDialog.bind(this),this.onDeleteContributor=this.onDeleteContributor.bind(this),this.onConfirmDialog=this.onConfirmDialog.bind(this)}UNSAFE_componentWillReceiveProps(e){!e.commissionContributors||e.isDirty||this.state.showDialog||this.setState({commissionContributorList:e.commissionContributors})}generateTableRows(){const{commissionContributorList:e}=this.state;let t=[];return e&&e.length>0&&(e.sort(I),t=e.map((e,t)=>({content:[e.user?e.user.userName:"",e.percent],id:e.key}))),t}onAddContributor(){this.setState({selectedContributorIndex:null,showDialog:!0})}onClickContributor(e){const{commissionContributorList:t}=this.state,n=t.findIndex(t=>t.key===e);n>-1&&this.setState({selectedContributorIndex:n,showDialog:!0})}onCloseDialog(){this.setState({selectedContributorIndex:null,showDialog:!1})}onConfirmDialog(e,t){const{selectedContributorIndex:n,commissionContributorList:a}=this.state;let o=[...a];if(null!==n){o[n]&&(o=o.map((a,o)=>{if(n===o){const n=this.props.users.find(t=>t.key===e);return new u.a({key:a.key,user:n,percent:t})}return a}))}else{const n=this.props.users.find(t=>t.key===e),a=new u.a({user:n,percent:t});o.push(a)}this.setState({commissionContributorList:o,selectedContributorIndex:null,showDialog:!1}),this.props.onChange(o)}onDeleteContributor(){const{commissionContributorList:e,selectedContributorIndex:t}=this.state;null!==t&&(e.splice(t,1),this.setState({commissionContributorList:e,selectedContributorIndex:null,showDialog:!1}),this.props.onChange(e))}render(){const{headers:e,commissionContributorList:t,selectedContributorIndex:n}=this.state,{userLocale:a,reactKeyPrefix:i}=this.props,c=this.i.getLanguageFile(),l=null!==n?t[n]:void 0,u=[{disabled:!1,icon:o.a,iconButtonProps:{color:"primary","aria-label":c.bo.createBunkerOrderLine},label:c.common.create,onClick:this.onAddContributor,reactKeyPrefix:i}],d=r.createElement(P,{headers:e,commissionContributorList:t,userLocale:a});return r.createElement(r.Fragment,null,r.createElement(O,{reactKeyPrefix:i+"contributor-dialog",showDialog:this.state.showDialog,contributor:l,onClose:this.onCloseDialog,onConfirm:this.onConfirmDialog,onDelete:this.onDeleteContributor,userLocale:this.props.userLocale}),r.createElement(s.a,{headers:e,userLocale:a,reactKeyPrefix:i+"contributor-dialog",title:c.bc.commissionContributors,data:this.generateTableRows(),primaryActions:u,onRowClick:this.onClickContributor,footer:d,customisation:{responsive:!0}}))}}const T=Object(l.b)([d.a.IInternationalization,d.a.IKeyGen],N)},2009:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n(10),n(11);var a=n(283),o=n.n(a),r=n(981),i=n(0),c=n.n(i),s=n(187),l=n(695),u=n(413),d=n.n(u),m=n(474),p=n(2343),b=n(600);class f extends c.a.PureComponent{constructor(e){super(e),this.state={menuItems:this.props.menuItems},this.onClickSubmenuItem=this.onClickSubmenuItem.bind(this)}onClickSubmenuItem(e){this.setState({menuItems:e})}render(){const{anchorEl:e,onClose:t,anchorPosition:n,classes:a,reactKeyPrefix:o}=this.props,{menuItems:r}=this.state,i=[];return r.map((e,n)=>{if(e.hasOwnProperty("subMenuItems")&&e.subMenuItems&&e.subMenuItems.length>0){const t=()=>{e.subMenuItems&&this.onClickSubmenuItem(e.subMenuItems)};i.push(c.a.createElement(m.a,{id:o+"menu-item",key:n,onClick:t},e.label,c.a.createElement(p.a,{className:a.icon},c.a.createElement(d.a,null))))}else if(e.action&&e.key){const a=()=>{e.action&&e.key&&e.action(e.key),t()};i.push(c.a.createElement(m.a,{id:o+"menu-item",key:n,onClick:a},e.label))}}),c.a.createElement(b.a,{id:o+"menu",open:Boolean(e),onClose:t,anchorPosition:n,anchorReference:"anchorPosition",disableRestoreFocus:!0},i)}}const h=Object(l.a)(e=>Object(s.a)({icon:{marginLeft:"20%"}}))(f);var g=n(1287),y=n(1206),k=n(6),j=n(47),C=n(7),v=n(1256);class O extends c.a.PureComponent{constructor(e){super(e),this.state=Object.assign({},e.state),this.onClose=this.onClose.bind(this)}UNSAFE_componentWillReceiveProps(e){Object(r.a)(e.state.contextMenu,this.state.contextMenu)||this.setState(Object.assign({},e.state))}onClose(){const{deps:[e,t]}=this.props;t.dispatch(e.setAction(null))}render(){const{contextMenu:e}=this.state;if(e&&e.contextMenuData){const t="desktop"===o.a.getParser(window.navigator.userAgent).getPlatformType(!0),n=this.context;return t?c.a.createElement(h,{reactKeyPrefix:"doc-common-components-context-menu-context-menu-renderer-desktop",anchorEl:e.anchorEl,anchorPosition:e.anchorPosition,menuItems:n,onClose:this.onClose}):c.a.createElement(g.a,{reactKeyPrefix:"doc-common-components-context-menu-context-menu-renderer-mobile",menuItems:n,open:e.anchorEl,onClose:this.onClose})}return null}}O.contextType=y.a;const x=Object(k.b)([C.a.IContextMenuActions,C.a.Store],Object(j.a)(e=>({contextMenu:v.a.get(e)}),O))},2284:function(e,t,n){},2285:function(e,t,n){},234:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var a=n(0);const o={createVoyageCharterer:()=>{},createVoyageTC:()=>{},createVoyageFromTemplate:()=>{},createVoyageWithoutCargo:()=>{},createCargo:()=>{},createCargoCoaTemplate:()=>{},selectedCard:-1,setSelectedCard:()=>{}},r=n.n(a).a.createContext(o)},305:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.NUMBER=0]="NUMBER",e[e.TEXT=1]="TEXT"}(a||(a={}))},351:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(977),o=n(1323),r=n(1605),i=n.n(r),c=n(0),s=n.n(c),l=n(137);const u=s.a.memo(({checked:e,color:t="action"})=>void 0===e||!0===e?s.a.createElement(a.a,{injectFirst:!0},s.a.createElement(o.a,{theme:l.a},s.a.createElement(i.a,{color:t,"data-cell-value":null==e||e}))):null)},410:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(10),n(11);var a=n(0),o=n.n(a),r=n(6),i=n(7),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};function s(e){class t extends o.a.Component{constructor(){super(...arguments),this.openContextMenu=e=>{const{contextMenuData:t}=this.props,[n,a]=Object(r.a)([i.a.IContextMenuActions,i.a.Store]);t&&(e.preventDefault(),a.dispatch(n.setAction({anchorEl:!!e.currentTarget,anchorPosition:{top:e.clientY,left:e.clientX},contextMenuData:t})))}}render(){const t=this.props,{contextMenuData:n}=t,a=c(t,["contextMenuData"]);return o.a.createElement(e,Object.assign({},a,{onContextMenu:this.openContextMenu}))}}return t}},420:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));const a={objectType:"*",eventType:"*",channelInfo:{channelType:{channelTypeDesc:"*"},url:"*"},user:{userName:"*"},createdDate:"*",unsubscriptionDate:"*",unsubscribed:"*",dlpAlertScript:{scriptName:"*",scriptCode:"*"}},o={objectType:"*",eventType:"*",dataloyObject:"*",channelInfo:{channelType:{channelTypeDesc:"*",channelTypeCode:"*"},url:"*",userName:"*",password:"*"},user:{userName:"*"},createdDate:"*",unsubscribed:"*",unsubscriptionDate:"*",dlpAlertScript:{scriptName:"*",scriptCode:"*"},accessToken:"*",accessTokenRequestUrl:"*",accessTokenRequestBody:"*",json:"*",expression:"*",onlyMainObject:"*",rawObject:"*",staticMsg:"*",templateMsg:"*",doNotUnsubscribe:"*"},r={key:"*",webhookSub:{key:"*",user:{userName:"*"}},objectType:"*",attempts:"*",deliveredDate:"*",object:"*",json:"*",errorMsg:"*",failed:"*"}},455:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(473),o=n(213),r=n(187),i=n(0),c=n.n(i);const s=Object(o.a)(Object(r.a)(e=>({button:{whiteSpace:"nowrap"}}))),l=c.a.memo(({reactKeyPrefix:e,action:t,i:n,disabled:o})=>{const{model:r}=n.getLanguageFile(),i=s({});return c.a.createElement(c.a.Fragment,null,c.a.createElement(a.a,{key:e+"-reload-action",variant:"outlined",color:"primary",onClick:t,className:i.button,disabled:o},r.pushChanges))})},459:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(87);const o={webhookTemplateCode:"*",objectType:"*",eventType:"*",dlpAlertScript:{scriptCode:"*"}},r=Object(a.a)(["channelInfo.channelType.channelTypeCode","unsubscribed"]),i=Object(a.a)(["webhookTemplateCode","webhookTemplateName","webhookTemplateDescription","objectType","eventType","dlpAlertScript.scriptName","json","expression","templateMsg","onlyMainObject"]),c=Object(a.a)(["webhookTemplateCode","webhookTemplateName","webhookTemplateDescription","objectType","eventType","dlpAlertScript.scriptCode","json","expression","templateMsg","onlyMainObject","webhookSubscriptions.user","webhookSubscriptions.channelInfo.channelType.channelTypeCode","webhookSubscriptions.unsubscribed"])},487:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(10),n(11);var a=n(0),o=n.n(a),r=n(40),i=n(6),c=n(159),s=n(58),l=n(3);const{isPreshipment:u,isTransshipment:d}=s.a,m=(e,t)=>o.a.createElement(r.a,{label:e,labelColour:t,"data-cell-value":e});function p(e){var t;const{cargo:n}=e,[a]=Object(i.a)([l.a.IInternationalization]),o=a.lang(),s=null===(t=n.cargoType)||void 0===t?void 0:t.cargoTypeCode;return s===c.a.TRANSFER?m(o.common.transfer,r.b.LightBlue):u(n)?m(o.model.preshipment,r.b.PurpleBlue):d(n)?m(o.model.transshipment,r.b.DeepPurple):s===c.a.HAS_TRANSFER?m(o.common.hasTransfer,r.b.DarkYellow):n.reletOfCargo?m(o.model.relet,r.b.Purple):n.coaLine?m(o.model.coa,r.b.DarkGreen):m(o.cargoes.spot,r.b.Grey)}},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(109),n(163);const a=[{id:"&&",value:"AND"},{id:"||",value:"OR"},{id:">",value:">"},{id:"<",value:"<"},{id:"<=",value:"<="},{id:">=",value:">="},{id:"==",value:"="},{id:"!=",value:"!="}],o=/^\[|\]$/g;function r(e){return a.some(({value:t})=>t===e.replace(o,""))}},656:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(10),n(11);var a=n(0),o=n.n(a),r=n(690),i=(n(59),n(118),function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{s(a.next(e))}catch(e){r(e)}}function c(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((a=a.apply(e,t||[])).next())}))});var c=n(213),s=n(187);const l=Object(c.a)(Object(s.a)(e=>({root:{width:"100%",minHeight:"6rem",overflow:"visible",backgroundColor:"#fafafa","&:hover:not(:disabled):not(:focus-within)":{backgroundColor:e.palette.grey[100]},"&:focus-within":{backgroundColor:e.palette.background.paper},"& .expressions_input__control":{outline:0,minHeight:"6rem",overflow:"hidden",width:"100%",fontSize:"1rem"},"& .expressions_input__highlighter":{outline:0,border:"1px solid transparent",overflow:"hidden",minHeight:"6rem",width:"100%"},"& .expressions_input__input":{outline:0,position:"absolute",minHeight:"6rem",overflow:"hidden",width:"100%",borderRadius:"4px",border:"1px solid #B8B8B8",padding:7,"&:focus":{border:"1px solid #1976d2"}},"& .expressions_input__suggestions":{backgroundColor:e.palette.background.paper,marginTop:"6 !important",border:"1px solid "+e.palette.action.disabledBackground,boxShadow:"0 0 8px "+e.palette.action.disabled,width:"max-content",maxHeight:300,overflow:"auto"},"& .expressions_input__suggestions__item":{padding:" 5px 10px 5px",alignItems:"center",height:28},"& .expressions_input__suggestions__item--focused":{backgroundColor:e.palette.action.selected}}})));n(109);var u=n(574);var d=n(6),m=n(173);function p(e){const{reactKeyPrefix:t,value:n,onChange:c,objectType:s,onEmptyTextArea:p,onAdd:b,objectTypeInDb:f,onEdit:h,webhookSub:g,webhookTemplate:y,onErrorCallback:k}=e,j=l(e),[C,v]=Object(a.useState)(null),[O,x]=Object(a.useState)(s),[A]=Object(d.a)([m.a.IWebhookSubscriptionExpressionController]);Object(a.useEffect)(()=>{A.getApiDataModel().then(e=>{const t={};Object.keys(e).forEach(n=>{t[e[n].resourceName]=e[n]}),v(t)})},[A]),Object(a.useEffect)(()=>{x(O)},[O]),Object(a.useEffect)(()=>{O===s||h||(x(s),p())},[s,p]);const E=Object(a.useCallback)(e=>{" "===e.key&&x(h&&f?f:s),"."!==e.key&&","!==e.key||function(e){const t=e.trim().split(" "),n=u.a.map(e=>`[${e.value}]`);let a=t[t.length-1];return"."!==a&&","!==a||(a=t[t.length-2]),n.includes(a)}(n)&&x(h&&f?f:s)},[s,f,h,n]);Object(a.useEffect)(()=>{let e=s;""===n&&(h&&f&&(e=f,b&&b(e)),x(e))},[n]);const w=Object(a.useCallback)(e=>{b&&b(e),x(e)},[b]),S=Object(a.useCallback)((e,t)=>function(e,t,n){return i(this,void 0,void 0,(function*(){return n[t]?n[t].attributes.filter(e=>!e.isArray).filter(t=>t.attributeName.toLowerCase().includes(e.toLowerCase())).map(e=>({id:e.attributeType,display:e.attributeName})).sort((e,t)=>{const n=e.display.toLowerCase(),a=t.display.toLowerCase();return n<a?-1:n>a?1:0}):[]}))}(e,O,C||[]).then(t),[O,C]),P=Object(a.useCallback)(e=>{return t=e,(u.a||[]).filter(e=>e.value.toLowerCase().includes(t.toLowerCase())).map(e=>({id:e.id,display:e.value}));var t},[]),I=Object(a.useCallback)(e=>{k&&k(e)},[k]);return o.a.createElement("div",{className:j.root,onBlur:()=>{h&&C&&(g||y)&&A.onEditExpression(n,C,I,g,y)}},o.a.createElement(r.b,{className:"expressions_input",id:t,value:n,onChange:c,onKeyDown:E,allowSuggestionsAboveCursor:!0,onBlur:(e,t)=>{t&&h&&e.stopPropagation()}},o.a.createElement(r.a,{markup:".{__id__}(__display__)",trigger:/(?:^|)(\.([^\s$]*))$/,data:S,displayTransform:(e,t)=>"."+t,onAdd:w}),o.a.createElement(r.a,{markup:",{__id__}(__display__)",trigger:/(?:^|)(\,([^\s$]*))$/,data:S,displayTransform:(e,t)=>"old."+t,onAdd:w}),o.a.createElement(r.a,{trigger:"$",markup:"[__display__]",data:P,onAdd:()=>{b&&b(f),x(s)},appendSpaceOnAdd:!0})))}},809:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(109),n(10),n(11);var a=n(2350),o=n(574);function r(e){const t=/get([A-Z].*)(?=\(\)$)/g;let n="";return(null!==e?e.split(/[\.\s]/g):[]).forEach(e=>{var r;const i="dlpObject"===e,c="oldDlpObject"===e,s=o.a.find(t=>t.id===e),[l]=[...e.matchAll(t)].map(e=>e[1]),u=null!==(r=e.match(/^.*/g))&&void 0!==r?r:void 0;i?n+=".":c?n+="old.":s?n+=" "+s.value+" ":e.startsWith("equals")?n+=" = "+e.split(/"*"/)[1]:l?(n.endsWith(".")||(n+="."),n+=Object(a.a)(l)):u&&(n+=u)}),n.trim()}},810:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));n(109),n(163);var a=n(574);const o=/\(([^)]+)\)/,r=/\{([^)]+)\}/,i=/\[([^)]+)\]/,c=/{([^\)]+)}\(([^\)]+)\)/,s=/\".+[^\"]/,l=/[^"].+\"/;function u(e){if(e.includes("dlpObject")||e.includes("oldDlpObject"))return e;return f(e.split(" ")).join("")}function d(e,t){let n=e.split(" ");return n=n.map(e=>{if(e.includes(".")){const n=e.split(".");e=n.map(e=>{if("("===e)return e;if(!e.match(c)&&""!==e){return`.{${function(e,t){var n,a;let o="";e.attributes&&(o=null!==(a=null===(n=e.attributes.find(e=>e.attributeName.toLowerCase()===t.toLowerCase()))||void 0===n?void 0:n.attributeType)&&void 0!==a?a:"");return o}(t,e)}}(${e}) `}return e.match(c)?"."+e:e}).join("")}return e}),f(n).join("")}let m=!1,p=!1,b=!1;function f(e){return e.map((t,n,u)=>{if(0===(t=t.replace(/\s/g,"")).trim().length)return t.trim();if(Object(a.b)(t)){const o=e[n+1];p=!!o&&"null"===o;const r=g(t)?" ":m?p?" ":"":" ";return function(e,t,n){e=h(e,i);const o=t&&g(e);if(t&&!n&&!o)return".equals(";const r=a.a.find(t=>t.value===e);return r?r.id:""}(t,m,p).concat(r)}let d=t;d.includes(",")&&(d=d.replace(",","old."));const f=d.split(".");let k="",j="",C=!1;c.test(t)&&(k=u[n+1],j=u[n+2],C=g(k));const v=f.map((e,t,a)=>{let o=!1;const i=a[a.length-1];if(i){const e=h(i,r);n<u.length&&k&&"[!=]"===k&&!y(e)&&"null"!==j&&(o=!0)}if(r.test(e)){const o=e.match(c),r=o?o[2]:"",i=".";let s="";if(t===a.length-1){const e=o?o[1]:"";m=!y(e),n===u.length-1&&!p&&m?s=")":!m&&n<u.length-1||m&&"null"===j?s=" ":C&&(s=") ")}return function(e,t,n){return e.concat("get".concat((a=t,a.charAt(0).toUpperCase()+a.slice(1)).concat("()").concat(n)));var a}(i,r,s)}return function(e,t,n){if(t&&!n)return"!".concat(e);if(t&&n){return"(!"+e.replace("(","")}if(n)return"("+e;return e}("old"===e?"oldDlpObject":"dlpObject",o,"("===e[0])});if(!r.test(t)&&!o.test(t)){m&&!p&&(s.test(t)&&(b=!0),l.test(t)?(b=!1,t+=")"):")"===t[t.length-1]?t=`"${t.substring(0,t.length-1)}"))`:s.test(t)||b||(t=`"${t}")`));const e=n===u.length-1?"":" ";return t.concat(e)}return v.join("")})}function h(e,t){const n=e.match(t);return n?n[1]:e}function g(e){return["OR","AND","[OR]","[AND]"].includes(e)}function y(e){return["Long","Double","Integer"].includes(e)}},957:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),o=n.n(a),r=n(40);function i(e){const{cargo:t,userLocale:n,hideLabel:a=!1,missedBy:i,i:c,isValid:s=!0}=e;if(t&&n&&!a&&s){const e=c.formatNumber(i,{maxDecimals:1});return i>0?o.a.createElement(r.a,{label:c.lang().common.late+" +"+e,labelColour:r.b.SunsetRed}):i<0?o.a.createElement(r.a,{label:c.lang().common.early+" "+e,labelColour:r.b.LightBlue}):o.a.createElement(r.a,{label:c.lang().common.onTime,labelColour:r.b.Grey})}return null}}}]);