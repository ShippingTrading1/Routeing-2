(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1286:function(e,t,a){"use strict";a.d(t,"a",(function(){return le})),a.d(t,"b",(function(){return re}));a(93);var n,o,c,s,i,r,l,d,u,m,p,h=a(9),y=(a(59),a(10),a(11),a(170)),b=a(31),f=a(35),g=a(281),E=a(1),A=a(419),O=a(929),v=a(32),j=a(7),k=a(29),S=a(931),I=a(930),T=a(482),C=a(873),L=a(66),w=a(30),N=a(48),x=a(934),M=a(1731),P=a(90),R=a(3),D=a(531),F=a(356),U=a(648),W=a(1203),_=a(83),B=a(104),z=a(84),V=a(135),H=a(2463),G=a(1168),K=a(253),q=a(1732),$=a(164),Q=a(196),X=a(737),Z=a(831),J=a(1192),Y=a(1205),ee=a(153),te=a(1730),ae=a(222),ne=function(e,t,a,n){var o,c=arguments.length,s=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(c<3?o(s):c>3?o(t,a,s):o(t,a))||s);return c>3&&s&&Object.defineProperty(t,a,s),s},oe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ce=function(e,t){return function(a,n){t(a,n,e)}},se=function(e,t,a,n){return new(a||(a=Promise))((function(o,c){function s(e){try{r(n.next(e))}catch(e){c(e)}}function i(e){try{r(n.throw(e))}catch(e){c(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}r((n=n.apply(e,t||[])).next())}))};let ie=class{constructor(e,t,a,n,o,c,s,i,r,l,d,u){this.tsmodelActions=e,this.tsmodelApi=t,this.store=a,this.persistor=n,this.http=o,this.auth0=c,this.dateSanitisation=s,this.identityProviderConfigurationActions=i,this.settingsActions=r,this.hasAknowlegedSafariSupportMessageActions=l,this.websocketUtils=d,this.typeAheadCacheController=u,this.initiallyLoaded=!1,this.handleBrowserCheck=this.handleBrowserCheck.bind(this),this.setup=Object(H.a)(this._setup,1e4)}storeHasRehydrated(){return!!this.store.getState()&&!!this.store.getState().common.global._persist&&this.store.getState().common.global._persist.rehydrated}_setup(){this.http.addBeforeHook((e,t)=>(this.store.dispatch(Object(y.showLoading)()),t)),this.http.addBeforeHook((e,t)=>t&&t.method&&("POST"===t.method||"PUT"===t.method)&&e.includes("/ws/rest")&&t.body?Object.assign(Object.assign({},t),{body:JSON.stringify(this.dateSanitisation.sanitiseDates(t.body))}):t),this.http.addBeforeHook((e,t)=>Object(te.a)(e,t,this.typeAheadCacheController)),this.http.addMiddleware(()=>this.store.dispatch(Object(y.hideLoading)())),this.http.addMiddleware(M.a),this.http.addMiddleware(e=>{const{authdata:t}=Object(v.a)(this.store.getState());t&&Object(q.a)(e,this.tsmodelActions,t)});const e=this.store.subscribe(()=>{if(this.storeHasRehydrated()&&Object(A.c)(this.store.getState())&&!this.initiallyLoaded){this.initiallyLoaded=!0;const t=Object(v.a)(this.store.getState());this.initializeSettings(),this.loadWebhookSubscriptions(t),this.setUpAlerts(),Object(W.a)(),this.setupTotango(t),this.loadAllStatuses(t),this.loadAllStatusTransitions(t),this.loadMasterScenario(t),this.loadAllReasonForCalls(t),this.loadSystem(t),this.loadAllVariousTypes(t),this.loadUsers(),this.loadAllPrefs(),this.loadAllEcaBorders(t),this.loadRoutingPointsPositions(t),this.loadDataloyProperties(t),e()}});this.identityProviderConfigurationActions.getIdentityProviderConfigurationAction(),this.timerID=setInterval(()=>this.checkAuth0AccessToken(),N.a.AUTH0_SESSION_TIMER_INTERVAL)}setUpAlerts(){return se(this,void 0,void 0,(function*(){yield this.setupWebHookSubscriptionForMentions(),yield this.setupWebSockets()}))}setupWebSockets(){return se(this,void 0,void 0,(function*(){const e=this.websocketUtils.getBaseUrlForSocket(),t=Object(v.a)(this.store.getState());if(t&&t.authdata)try{const a=`filter=user.key(EQ)${t.key}\n                                &filter=channelInfo.channelType.channelTypeCode(EQ)WSOC\n                                &filter=unsubscriptionDate(NULL)`,n=yield this.tsmodelApi.getMultiple({type:E.a.webhooksubscription,fields:X.b,authdata:t.authdata,query:Object(V.d)(a)});z.a.debug("Using WebSocket url: ",e),n.forEach(t=>{var a;const n=null!==t.dataloyObject?"/"+t.dataloyObject:"",o=null!==t.dlpAlertScript?`${e}/${this.websocketUtils.WebsocketEndpoint.alertScript}/${null===(a=t.dlpAlertScript)||void 0===a?void 0:a.scriptCode}`:`${e}/${this.websocketUtils.WebsocketEndpoint.objectSubscription}/${t.objectType}/${t.eventType}${n}`;this.websocketUtils.createWebsocketSubscription(o,[U.a])})}catch(e){z.a.error(e)}}))}setupWebHookSubscriptionForMentions(){var e;return se(this,void 0,void 0,(function*(){const t=Object(v.a)(this.store.getState());if(t&&t.authdata)try{const a=`filter=user.key(EQ)${t.key}\n                                &filter=dlpAlertScript.scriptCode(EQ)RMM`,n=yield this.tsmodelApi.getMultiple({type:E.a.webhooksubscription,fields:X.b,authdata:t.authdata,query:Object(V.d)(a)}),o=new Set;n.forEach(e=>{var t,a;return o.add(null===(a=null===(t=e.channelInfo)||void 0===t?void 0:t.channelType)||void 0===a?void 0:a.channelTypeCode)});const c="filter=dlpAlertScript.scriptCode(EQ)RMM",s=yield this.tsmodelApi.getMultiple({type:E.a.webhooktemplate,fields:X.b,authdata:t.authdata,query:Object(V.d)(c)}),i=["WSOC","DB","EMAIL"];for(const a of i)if(!o.has(a)){const n={channelInfo:{channelType:a},dlpAlertScript:"RMM",user:t.key,webhookTemplate:(null===(e=s[0])||void 0===e?void 0:e.key)?s[0].key:void 0};yield this.tsmodelApi.post({data:n,type:E.a.webhooksubscription,authdata:t.authdata||""}).catch(e=>{Q.a.next({type:"snackbar",notification:{id:666,message:e.toString(),type:"error"}})})}}catch(e){z.a.error(e)}}))}teardown(){clearInterval(this.timerID)}checkAuth0AccessToken(){this.auth0.checkAccessToken()}loadWebhookSubscriptions(e){if(Object(L.a)([w.a.WebhookSubscriptionGET],e)&&e&&e.authdata){const t=["filter=user.key(EQ)"+e.key,"filter=unsubscriptionDate(NULL)","filter=channelInfo.channelType.channelTypeCode(EQ)"+ee.a.DB].join("&");this.tsmodelActions.loadMultipleAction({query:t,fields:X.b,type:E.a.webhooksubscription,identifier:$.g})}}loadDataloyProperties(e){Object(L.a)([w.a.DataloyPropertyGET],e)&&this.tsmodelActions.loadMultipleAction({fields:D.a,type:E.a.dataloyproperty})}loadMasterScenario(e){if(Object(L.a)([w.a.ScenarioGET],e)){const e="filter=scenarioCode(EQ)MASTER";this.tsmodelActions.loadMultipleAction({fields:{scenarioName:"*",scenarioCode:"*",fleetPlan:{fleetPlanCode:"*"}},query:e,identifier:$.e,type:E.a.scenario})}}loadAllReasonForCalls(e){Object(L.a)([w.a.ReasonForCallGET],e)&&this.tsmodelActions.loadMultipleAction({fields:{reasonForCall:"*",reasonForCallDesc:"*"},type:E.a.reasonforcall})}loadAllVariousTypes(e){Object(L.a)([w.a.VariousTypeGET],e)&&this.tsmodelActions.loadMultipleAction({fields:{variousTypeCode:"*",variousTypeDesc:"*"},type:E.a.varioustype})}loadSystem(e){Object(L.a)([w.a.SystemGET],e)&&this.tsmodelActions.loadMultipleAction({fields:J.a,type:E.a.system})}loadAllEcaBorders(e){Object(L.a)([w.a.RestrictedAreaGET],e)&&this.tsmodelActions.loadMultipleAction({fields:Z.a,type:E.a.restrictedarea})}loadRoutingPointsPositions(e){Object(L.a)([w.a.PortGET],e)&&this.tsmodelActions.loadMultipleAction({type:E.a.port,query:"filter=rpCode(NOTNULL)",identifier:$.f,fields:Y.a})}loadUsers(){const e={userName:"*",userCode:"*",isObjectActive:"*"},t=E.a.user,a={disableMaxLimit:"YES"};this.tsmodelActions.loadMultipleAction({fields:e,headers:a,query:"filter=isObjectActive(EQ)true&filter=auth0User(LK)auth0",type:t,identifier:$.a}),this.tsmodelActions.loadMultipleAction({fields:e,headers:a,query:"filter=isObjectActive(EQ)true&filter=auth0User(LK)waad",type:t,identifier:$.h}),this.tsmodelActions.loadMultipleAction({fields:e,headers:a,query:"filter=isObjectActive(EQ)false",type:t})}getPersistor(){return this.persistor}loadAllPrefs(){this.tsmodelActions.loadMultipleAction({fields:{prefName:"*",prefDefault:"*"},type:E.a.pref})}loadAllStatuses(e){Object(L.a)([w.a.StatusTypeGET],e)&&this.tsmodelActions.loadMultipleAction({fields:K.a,query:"sort=statusTypeCode(AS)&sort=statusTypeSequence(AS)",type:E.a.statustype})}loadAllStatusTransitions(e){Object(L.a)([w.a.StatusTypeTransitionGET],e)&&this.tsmodelActions.loadMultipleAction({fields:G.a,type:E.a.statustypetransition})}initializeSettings(){const e=[{moduleCode:"Workspace Settings",settingName:"Active Area Report",subModuleCode:"Area Settings",tsModelType:E.a.areareport.name.toLowerCase(),type:g.a.DROPDOWN_LIST,value:null},{clientSideOptionNameField:"displayName",clientSideOptions:f.f,moduleCode:"Workspace Settings",settingName:"Date Format Settings",subModuleCode:"General",type:g.a.DROPDOWN_LIST,value:null}];0===T.a.getSettingsState(this.store.getState()).length&&this.store.dispatch(this.settingsActions.setSettingsAction(e))}handleBrowserCheck(){this.store.dispatch(this.hasAknowlegedSafariSupportMessageActions.set(!0))}loadDataloyInfo(e){return se(this,void 0,void 0,(function*(){try{const t=yield this.http.get(N.a.API_BASE_URL+"/dataloy/info",{headers:new Headers({authorization:e})});return yield t.json()}catch(e){e instanceof Error&&console.error(e)}}))}setupTotango({authdata:e="",email:t=""}){return se(this,void 0,void 0,(function*(){window.totango_options&&this.loadDataloyInfo(e).then(({environment:e,totangoCustomerCode:a})=>{const n=null==e?void 0:e.toLowerCase().includes("production"),o=t.toLowerCase().endsWith("@dataloy.com");null!==a&&n&&!o&&(window.totango_options={account:{id:a,vmsProductionVersion:N.a.VERSION},user:{id:t}})})}))}};ie=ne([Object(h.injectable)(),ce(0,Object(h.inject)(j.a.ITSModelActionsAsync)),ce(1,Object(h.inject)(_.a.ITSModelApi)),ce(2,Object(h.inject)(j.a.Store)),ce(3,Object(h.inject)(j.a.Persistor)),ce(4,Object(h.inject)(R.a.IHttp)),ce(5,Object(h.inject)(j.a.IAuth0)),ce(6,Object(h.inject)(R.a.IDateSanitation)),ce(7,Object(h.inject)(j.a.IIdentityProviderConfigurationActions)),ce(8,Object(h.inject)(j.a.ISettingActions)),ce(9,Object(h.inject)(j.a.IHasAknowlegedSafariSupportMessageActions)),ce(10,Object(h.inject)(R.a.IWebsocketUtils)),ce(11,Object(h.inject)(j.a.ITypeaheadCacheController)),oe("design:paramtypes",["function"==typeof(n=void 0!==k.ITSModelActionsAsync&&k.ITSModelActionsAsync)?n:Object,"function"==typeof(o=void 0!==B.ITSModelApi&&B.ITSModelApi)?o:Object,"function"==typeof(c=void 0!==b.Store&&b.Store)?c:Object,Object,"function"==typeof(s=void 0!==P.IHttp&&P.IHttp)?s:Object,"function"==typeof(i=void 0!==C.IAuth0&&C.IAuth0)?i:Object,"function"==typeof(r=void 0!==x.IDateSanitation&&x.IDateSanitation)?r:Object,"function"==typeof(l=void 0!==O.IIdentityProviderConfigurationActions&&O.IIdentityProviderConfigurationActions)?l:Object,"function"==typeof(d=void 0!==I.ISettingsActions&&I.ISettingsActions)?d:Object,"function"==typeof(u=void 0!==S.IHasAcknowlegedSafariSupportMessageActions&&S.IHasAcknowlegedSafariSupportMessageActions)?u:Object,"function"==typeof(m=void 0!==F.IWebsocketUtils&&F.IWebsocketUtils)?m:Object,"function"==typeof(p=void 0!==ae.ITypeaheadCacheController&&ae.ITypeaheadCacheController)?p:Object])],ie);const re={IAppSetup:Symbol("IAppSetup"),ISettingsController:Symbol("ISettingsController")},le=new h.ContainerModule((e,t,a,n)=>{e(re.IAppSetup).to(ie)})},1476:function(e,t,a){"use strict";a.r(t),a.d(t,"storeCreator",(function(){return b}));var n=a(31),o=a(1526),c=a(489),s=a(1415),i=a(48),r=a(536),l=a(1568),d=a(1420);const u=Object(r.a)("root",[]),m={common:s.b,fas:d.a},p=Object(l.a)([]),h="production"===i.a.NODE_ENV||"1"!==i.a.REDUX_DEV_TOOLS?n.compose:Object(o.composeWithDevTools)({actionSanitizer:p}),y=Object(c.a)(u,{common:s.a,fas:d.b}),b=()=>{const e=Object(n.createStore)(y,m,h());return{store:e,persistor:Object(c.c)(e)}}},1569:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n,o,c,s,i=a(9),r=a(31),l=a(29),d=a(7),u=a(88),m=a(882),p=a(795),h=a(1),y=a(237),b=a(668),f=function(e,t,a,n){var o,c=arguments.length,s=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(c<3?o(s):c>3?o(t,a,s):o(t,a))||s);return c>3&&s&&Object.defineProperty(t,a,s),s},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(e,t){return function(a,n){t(a,n,e)}};let A=class{constructor(e,t,a,n){this.store=e,this.tsModelActions=t,this.keySetActions=a,this.selectedAuditLogActions=n,this.internationalization=new u.a}loadAuditLogs(e,t,a){this.tsModelActions.loadMultipleAction({fields:p.a,headers:{},overrideUrl:"AuditLog/detailed/"+e,type:h.a.auditlog,identifier:m.a,overwriteKeysOnLoad:!0}).then(({entities:e})=>{(t||a)&&this.store.dispatch(this.keySetActions.setKeysAction({identifier:m.a,keys:e.filter(({actionTime:e})=>e&&e>=(null!=t?t:new Date(0))&&e<=(null!=a?a:new Date)).map(({key:e})=>e)}))})}deselectAuditLog(){this.store.dispatch(this.selectedAuditLogActions.setAction({key:null,tsModelType:null,fieldName:void 0})),this.store.dispatch(this.keySetActions.setKeysAction({identifier:m.a,keys:[]}))}};A=f([Object(i.injectable)(),E(0,Object(i.inject)(d.a.Store)),E(1,Object(i.inject)(d.a.ITSModelActionsAsync)),E(2,Object(i.inject)(d.a.KeySetActions)),E(3,Object(i.inject)(d.a.ISelectedAuditLogActions)),g("design:paramtypes",["function"==typeof(n=void 0!==r.Store&&r.Store)?n:Object,"function"==typeof(o=void 0!==l.ITSModelActionsAsync&&l.ITSModelActionsAsync)?o:Object,"function"==typeof(c=void 0!==y.IKeySetActions&&y.IKeySetActions)?c:Object,"function"==typeof(s=void 0!==b.ISelectedAuditLogActions&&b.ISelectedAuditLogActions)?s:Object])],A)},1884:function(e,t,a){"use strict";a.d(t,"a",(function(){return $t}));a(10),a(11);var n,o=a(213),c=a(187),s=a(283),i=a.n(s),r=a(26),l=a(0),d=a.n(l),u=a(53),m=a(97),p=a(1514),h=a(882),y=(a(268),a(269),a(14)),b=a(7),f=a(3);function g(e,t){return e&&e.contextMenuData?t.flatMap(t=>function(e,t){switch(t){case n.AuditLog:return function(e){const t=y.a.get(b.a.Store),a=y.a.get(b.a.ISelectedAuditLogActions),n=y.a.get(f.a.IInternationalization),o=[],c=e.parent.key,s=e.parent.type;if(e.field){const i={action:n=>t.dispatch(a.setAction({fieldName:e.field?e.field.fieldName:"",key:n,tsModelType:s})),key:c,label:n.lang().common.fieldAuditLog};o.push(i)}const i={action:e=>t.dispatch(a.setAction({key:e,tsModelType:s})),key:c,label:n.lang().common.rowAuditLog};return o.push(i),o}(e)}}(e.contextMenuData,t)):[]}!function(e){e[e.AuditLog=0]="AuditLog"}(n||(n={}));var E=a(130),A=a(73),O=a(6);const v=Object(o.a)(e=>Object(c.a)({logo:{fill:e.palette.grey[200]},logoWrapper:{width:"20%",maxWidth:"150px",margin:"0 auto "+e.spacing(2)},page:{display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},contentWrapper:{width:"100%"},text:{color:e.palette.grey[400],padding:e.spacing(0,2),userSelect:"none"}})),j=Object(l.memo)((function(){const[e,t,a]=Object(O.a)([f.a.IInternationalization,b.a.Store,b.a.ISideNavActions]),n=v({}),{common:o}=e.lang();return Object(l.useEffect)(()=>{t.dispatch(a.setAction(!0))},[]),d.a.createElement(A.a,{reactKeyPrefix:"doc-home"},d.a.createElement("div",{className:n.page},d.a.createElement("div",{className:n.contentWrapper},d.a.createElement("div",{className:n.logoWrapper},d.a.createElement("svg",{id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 510 510"},d.a.createElement("g",{id:"_Group_"},d.a.createElement("path",{className:n.logo,d:"M255 0c140.8 0 255 114 255 255 0 140.8-114 255-255 255C114.2 510 .2 395.8 0 255 .2 114 114.2 0 255 0zm154.9 255c0-85.6-69.3-154.7-154.9-155.1-85.6.4-154.9 69.5-154.9 155.1S169.4 409.7 255 409.9c85.6-.2 154.9-69.3 154.9-154.9z"}),d.a.createElement("path",{className:n.logo,d:"M255.1 320h-.2c-35.9-.1-65-29.2-64.9-65.1s29.2-65 65.1-64.9c35.9.1 65 29.2 64.9 65.1-.1 35.8-29.1 64.8-64.9 64.9zm34.9-65.1c0-19.3-15.7-35-35-35s-35 15.7-35 35 15.7 35 35 35c19.4 0 35-15.7 35-35z"})))),d.a.createElement(E.a,{variant:"h6",className:n.text},o.welcome))))}));var k=a(1286),S=a(47),I=a(1743),T=a(1968),C=a(419);const L=y.a.get(b.a.IAuthenticateActions);let w=Object(m.k)(Object(S.a)(e=>({authenticated:Object(C.c)(e),error:Object(C.a)(e)}),e=>{const t=T.a;return d.a.createElement(t,{history:e.history,location:e.location,login:(e,t)=>{L.loginAction(e,t)},authenticated:e.state.authenticated,error:e.state.error,password:e.state.password,username:e.state.username})}));w=I.a;var N=a(833),x=a.n(N),M=a(2372),P=a(2104),R=a(1327),D=a(246),F=a(473),U=a(214),W=a(48);const _=[".amazonaws.com","dev.dataloy.com","localhost"].some(e=>window.location.hostname.endsWith(e)),B=()=>localStorage.removeItem("BASE_URL"),z=e=>localStorage.setItem("BASE_URL",e.target.value),V=e=>{var t,a;const n=y.a.get(f.a.IInternationalization),{common:o}=n.lang(),c=null!==(t=W.a.VERSION)&&void 0!==t?t:o.na,s=null!==(a=localStorage.getItem("BASE_URL"))&&void 0!==a?a:"",i=d.a.createElement(d.a.Fragment,null,d.a.createElement(U.a,{item:!0,xs:3},d.a.createElement(E.a,{color:"textSecondary"},"Rest Base URL:")),d.a.createElement(U.a,{item:!0,xs:9},d.a.createElement(E.a,{variant:"body1"},d.a.createElement("input",{type:"text",onChange:z,id:"baseurl",placeholder:s}),d.a.createElement("button",{onClick:B},"Clear"))));if(e&&W.a.GIT_INFO){const e=W.a.GIT_INFO.abbreviatedSha,{committer:t}=W.a.GIT_INFO,{committerDate:a}=W.a.GIT_INFO;return d.a.createElement(U.a,{container:!0,alignItems:"center",spacing:1},d.a.createElement(U.a,{item:!0,xs:3},d.a.createElement(E.a,{color:"textSecondary"},o.version+": ")),d.a.createElement(U.a,{item:!0,xs:9},d.a.createElement(E.a,{variant:"body1"},c)),d.a.createElement(U.a,{item:!0,xs:3},d.a.createElement(E.a,{color:"textSecondary"},o.commit+": ")),d.a.createElement(U.a,{item:!0,xs:9},d.a.createElement(E.a,{variant:"body1"},e||o.na)),d.a.createElement(U.a,{item:!0,xs:3},d.a.createElement(E.a,{color:"textSecondary"},o.author+": ")),d.a.createElement(U.a,{item:!0,xs:9},d.a.createElement(E.a,{variant:"body1"},t||o.na)),d.a.createElement(U.a,{item:!0,xs:3},d.a.createElement(E.a,{color:"textSecondary"},o.date+": ")),d.a.createElement(U.a,{item:!0,xs:9},d.a.createElement(E.a,{variant:"body1"},a?new Date(Date.parse(a)).toLocaleString():o.na)),_&&i)}return c};var H=a(354),G=a(44),K=a(1209),q=a(546),$=a(33),Q=a(32),X=a(702),Z=a(649),J=a(832),Y=a(199),ee=a(271);const te=Object(o.a)(Object(c.a)(e=>({paper:{display:"flex",flexDirection:"column",width:H.b},drawerHeader:Object.assign({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(2,6,1)},e.mixins.toolbar),drawer:{width:H.b},content:{flex:1,overflowY:"auto",paddingRight:e.spacing(2)},iconButton:{margin:e.spacing(1)},footer:{display:"flex",justifyContent:"flex-end",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},versionInfo:{marginTop:e.spacing(2),cursor:"pointer"}})));function ae(e){var t,a,n,o,c;const{isDesktop:s,reactKeyPrefix:i,state:{open:u,user:p}}=e,[h,y,g,E]=Object(O.a)([b.a.Store,b.a.ISideNavActions,b.a.ISimpleReducerActions,f.a.IInternationalization]),A=te({}),v=Object(m.g)(),j=Object(C.c)(h.getState()),{common:k,menu:S}=E.getLanguageFile(),[I,T]=Object(l.useState)(!1),[L,w]=Object(l.useState)([]),[N,U]=Object(l.useState)(!1),W=Object(l.useCallback)(()=>{g.setAction(X.a,!0),v.push("/home")},[g,v]),_=Object(l.useCallback)(()=>{U(!N)},[N]),B=Object(l.useCallback)(()=>{h.dispatch(y.setAction(!1))},[y,h]);if(j&&!I){const e=Object.values($.a),s=Object(Y.b)(p,e),i=new ee.a,r=[],l=new Map,d=new q.a({key:i.getNextKey(),name:S.menu,parentMenuItem:null,sequenceNo:1,url:"/home"});r.push(d);let u=1;for(const e of s){const s=null!==(t=e.group)&&void 0!==t?t:J.a;if(!l.get(null!==(a=e.group)&&void 0!==a?a:s)){const t=new q.a({key:i.getNextKey(),name:null!==(n=e.group)&&void 0!==n?n:s,parentMenuItem:d,sequenceNo:u,url:e.url});r.push(t),u++,l.set(null!==(o=e.group)&&void 0!==o?o:s,t)}const m=new q.a({key:i.getNextKey(),name:e.name,parentMenuItem:l.get(null!==(c=e.group)&&void 0!==c?c:s),sequenceNo:e.sequenceNo,url:e.url});r.push(m)}w(r),T(!0)}return d.a.createElement(d.a.Fragment,null,d.a.createElement(M.a,Object.assign({className:A.drawer,variant:s?"persistent":"temporary",anchor:"left",open:u,classes:{paper:A.paper}},!s&&{onBackdropClick:B}),d.a.createElement("div",{className:A.drawerHeader},d.a.createElement(K.a,{url:"./images/logo/dataloy-logo.svg",onClick:W}),d.a.createElement(P.a,{color:"textSecondary",onClick:_,className:A.versionInfo,variant:"subtitle2",display:"block",component:"button",id:i+"-version-info-link"},"V"+V(!1))),d.a.createElement(R.a,null),d.a.createElement("div",{className:A.content},j&&d.a.createElement(H.a,{reactKeyPrefix:i+"-menu",menuItems:L,onClickMenuItem:s?void 0:B})),d.a.createElement("div",{className:A.footer},d.a.createElement(D.a,{id:i+"-close-btn",onClick:B,className:Object(r.default)(A.iconButton,"close-btn")},d.a.createElement(x.a,null)))),N&&d.a.createElement(G.a,{open:N,onCloseModal:_,title:k.vmsVersion,actionButtons:d.a.createElement(F.a,{id:i+"-version-info-modal-close-btn",color:"primary",onClick:_},k.close),maxWidth:"xs",fullWidth:!0,reactKeyPrefix:i+"-version-info-modal"},V(!0)))}const ne=Object(S.a)(e=>({user:Object(Q.a)(e),open:Z.a.get(e)}),d.a.memo(ae));var oe=a(531),ce=a(76),se=a(65),ie=a(836),re=a(41);const le={flex:1},de={authorizationType:re.a.PERMISSION,authorizedPermissions:$.a.ddt.authorizedPermissions,behaviorOnAuthorizationFail:se.a.REDIRECT_NO_AUTHORIZATION},ue=Object(ce.a)(de,Object(S.a)(e=>{const t={dataloyPropertyName:"com.dataloy.ddt.url",fields:oe.a},a=ie.a.getDataloyProperty(t)(e);return{authdata:Object(Q.a)(e).authdata,dataloyProperties:a}},e=>{let t="";return e.state.dataloyProperties&&e.state.dataloyProperties.length>0&&(t=e.state.dataloyProperties[0].dataloyPropertyValue),d.a.createElement(A.a,{reactKeyPrefix:"doc-iframes-ddt-iframe"},d.a.createElement("iframe",{src:t,frameBorder:0,style:le}))}));a(109),a(2307);const me={flex:1},pe=d.a.memo(e=>{const t=(W.a.BASE_URL?W.a.BASE_URL:"production"===W.a.NODE_ENV?"":"http://platform-dev.dataloy.com")+"/dashboard",{userdata:a}=e.state,n=a&&a.authdata||"",o=a?a.userCode:"";let c;try{{c=o;const e={currentUser:{authdata:n.split(" ")[1],username:c}};localStorage.setItem("dataloyVms.globals",JSON.stringify(e))}}catch(e){}return d.a.createElement(A.a,{reactKeyPrefix:"doc-app-pages-iframes-voyage-analysis-dashboard-iframe-page"},d.a.createElement("iframe",{src:t,frameBorder:0,style:me}))}),he={authorizationType:re.a.PERMISSION,authorizedPermissions:$.a.voyageAnalysisDashboard.authorizedPermissions,behaviorOnAuthorizationFail:se.a.REDIRECT_NO_AUTHORIZATION},ye=Object(ce.a)(he,Object(S.a)(e=>({userdata:Object(Q.a)(e)}),pe));class be extends d.a.Component{constructor(e){super(e),this.props.deps[0].logOut(),this.props.history.push("/login")}render(){return d.a.createElement("div",null)}}const fe=Object(O.b)([b.a.ILogout],Object(m.k)(be));var ge=a(1318),Ee=a(1255),Ae=a(72),Oe=a(1893),ve=a(1924),je=a(1969),ke=a(1416),Se=a(1904),Ie=a(1886),Te=a(1878),Ce=a(1896),Le=a(1868),we=a(1922),Ne=a(1907),xe=a(1942),Me=a(1869),Pe=a(1897),Re=a(1909),De=a(1885),Fe=a(1903),Ue=a(1911),We=a(1941),_e=a(1908),Be=a(1923),ze=a(1891),Ve=a(1925),He=a(1890),Ge=a(1974),Ke=a(1876),qe=a(1872),$e=a(1975),Qe=a(1959),Xe=a(1973),Ze=a(1939),Je=a(1929),Ye=a(1928),et=a(1933),tt=a(1927),at=a(1934),nt=a(1931),ot=a(1936),ct=a(1970),st=a(1937),it=a(1938),rt=a(1935),lt=a(1958),dt=a(1960),ut=a(1910),mt=a(1961),pt=a(1957),ht=a(1892),yt=a(1932),bt=a(1930),ft=a(1971),gt=a(1972),Et=a(1976),At=a(1926),Ot=a(1264),vt=a(1977),jt=a(1940),kt=a(1955),St=a(1953),It=a(1887),Tt=a(1954),Ct=a(1956),Lt=a(1820);const wt=e=>{var t;return`auth-route-${null!==(t=e.group)&&void 0!==t?t:""}-${e.sequenceNo}`},Nt=e=>[e+"/tab/:id",e],xt=()=>d.a.createElement(l.Fragment,null,d.a.createElement(m.d,null,d.a.createElement(Ae.a,{path:Nt($.a.vessels.url),component:De.a,key:wt($.a.vessels)}),d.a.createElement(Ae.a,{path:$.a.voyages.url+"/comparison/:voyageId",component:Lt.a,key:wt($.a.voyages)+"-comparison"}),d.a.createElement(Ae.a,{path:Nt($.a.voyages.url),component:Fe.a,key:wt($.a.voyages)}),d.a.createElement(Ae.a,{path:Nt($.a.cargoes.url),component:Te.a,key:wt($.a.cargoes)}),d.a.createElement(Ae.a,{path:$.a.portCalls.url,component:Ne.a,key:wt($.a.portCalls)}),d.a.createElement(Ae.a,{path:$.a.ddt.url,component:ue,key:wt($.a.ddt)}),d.a.createElement(Ae.a,{path:$.a.capacityPlans.url,component:Ie.a,key:wt($.a.capacityPlans)}),d.a.createElement(Ae.a,{path:$.a.fleetPlans.url,component:Le.f,key:wt($.a.fleetPlans)}),d.a.createElement(Ae.a,{path:$.a.scenarios.url,component:we.a,key:wt($.a.scenarios)}),d.a.createElement(Ae.a,{path:Nt($.a.budgets.url),component:Ke.a,key:wt($.a.budgets)}),d.a.createElement(Ae.a,{path:$.a.coa.url,component:Ce.a,key:wt($.a.coa)}),d.a.createElement(Ae.a,{path:Nt($.a.timeCharterContracts.url),component:He.a,key:wt($.a.timeCharterContracts)}),d.a.createElement(Ae.a,{path:$.a.bc.url,component:je.a,key:wt($.a.bc)}),d.a.createElement(Ae.a,{path:$.a.marketIndices.url,component:ge.a,key:wt($.a.marketIndices)}),d.a.createElement(Ae.a,{path:Nt($.a.bunkerOrders.url),component:ke.a,key:wt($.a.bunkerOrders)}),d.a.createElement(Ae.a,{exact:!0,path:$.a.bunkerOrders.url+"/create-bunker-order/:pcId?",component:ke.a,key:wt($.a.bunkerOrders)+"-create-edit"}),d.a.createElement(Ae.a,{path:$.a.serviceOrders.url,component:Be.a,key:wt($.a.serviceOrders)}),d.a.createElement(Ae.a,{path:$.a.laytimeCalculations.url,component:_e.a,key:wt($.a.laytimeCalculations)}),d.a.createElement(Ae.a,{path:$.a.billsOfLading.url,component:ve.a,key:wt($.a.billsOfLading)}),d.a.createElement(Ae.a,{path:$.a.offhire.url,component:Ve.a,key:wt($.a.offhire)}),d.a.createElement(Ae.a,{path:$.a.vesselReports.url,component:Re.a,key:wt($.a.vesselReports)}),d.a.createElement(Ae.a,{path:$.a.voyageAnalysisDashboard.url,component:ye,key:wt($.a.voyageAnalysisDashboard)}),d.a.createElement(Ae.a,{path:Nt($.a.invoices.url),component:ze.a,key:wt($.a.invoices)}),d.a.createElement(Ae.a,{path:Nt($.a.bunkerTransactions.url),component:ht.a,key:wt($.a.bunkerTransactions)}),d.a.createElement(Ae.a,{path:Nt($.a.accruals.url),component:qe.a,key:wt($.a.accruals)}),d.a.createElement(Ae.a,{path:$.a.ports.url,component:St.a,key:wt($.a.ports)}),d.a.createElement(Ae.a,{path:$.a.terminals.url,component:Tt.a,key:wt($.a.terminals)}),d.a.createElement(Ae.a,{path:$.a.accounts.url,component:At.a,key:wt($.a.accounts)}),d.a.createElement(Ae.a,{path:$.a.businessPartners.url,component:Se.a,key:wt($.a.businessPartners)}),d.a.createElement(Ae.a,{path:$.a.contacts.url,component:ge.a,key:wt($.a.contacts)}),d.a.createElement(Ae.a,{path:$.a.banks.url,component:tt.a,key:wt($.a.banks)}),d.a.createElement(Ae.a,{path:$.a.baselineTerms.url,component:Ye.a,key:wt($.a.baselineTerms)}),d.a.createElement(Ae.a,{path:$.a.businessUnits.url,component:Je.a,key:wt($.a.businessUnits)}),d.a.createElement(Ae.a,{path:$.a.commodities.url,component:ct.a,key:wt($.a.commodities)}),d.a.createElement(Ae.a,{path:$.a.commodityGroups.url,component:ft.a,key:wt($.a.commodityGroups)}),d.a.createElement(Ae.a,{path:$.a.commodityClasses.url,component:gt.a,key:wt($.a.commodityClasses)}),d.a.createElement(Ae.a,{path:$.a.companies.url,component:Xe.a,key:wt($.a.companies)}),d.a.createElement(Ae.a,{path:$.a.events.url,component:Ge.a,key:wt($.a.events)}),d.a.createElement(Ae.a,{path:$.a.exchangeRates.url,component:bt.a,key:wt($.a.exchangeRates)}),d.a.createElement(Ae.a,{path:$.a.laytimeTerms.url,component:nt.a,key:wt($.a.laytimeTerms)}),d.a.createElement(Ae.a,{path:$.a.measurementUnits.url,component:yt.a,key:wt($.a.measurementUnits)}),d.a.createElement(Ae.a,{path:$.a.paymentTerms.url,component:et.a,key:wt($.a.paymentTerms)}),d.a.createElement(Ae.a,{path:$.a.reasonsForOffhire.url,component:at.a,key:wt($.a.reasonsForOffhire)}),d.a.createElement(Ae.a,{path:$.a.reasonsForStoppage.url,component:$e.a,key:wt($.a.reasonsForStoppage)}),d.a.createElement(Ae.a,{path:$.a.routes.url,component:rt.a,key:wt($.a.routes)}),d.a.createElement(Ae.a,{path:$.a.services.url,component:ot.a,key:wt($.a.services)}),d.a.createElement(Ae.a,{path:$.a.taxes.url,component:Et.a,key:wt($.a.taxes)}),d.a.createElement(Ae.a,{path:$.a.tcTypes.url,component:vt.a,key:wt($.a.tcTypes)}),d.a.createElement(Ae.a,{path:$.a.trades.url,component:st.a,key:wt($.a.trades)}),d.a.createElement(Ae.a,{path:$.a.variousCostsAndRevenues.url,component:it.a,key:wt($.a.variousCostsAndRevenues)}),d.a.createElement(Ae.a,{path:$.a.vesselTypes.url,component:Ze.a,key:wt($.a.vesselTypes)}),d.a.createElement(Ae.a,{path:$.a.timezone.url,component:kt.a,key:wt($.a.timezone)}),d.a.createElement(Ae.a,{path:$.a.euEtsCompliance.url,component:Ct.a,key:wt($.a.euEtsCompliance)}),d.a.createElement(Ae.a,{path:$.a.claimsAndIncidents.url,component:ge.a,key:wt($.a.claimsAndIncidents)}),d.a.createElement(Ae.a,{path:$.a.subscriptionTemplates.url,component:jt.a,key:wt($.a.subscriptionTemplates)}),d.a.createElement(Ae.a,{path:$.a.webhooks.url,component:We.a,key:wt($.a.webhooks)}),d.a.createElement(Ae.a,{path:$.a.notifications.url,component:Ot.a,key:wt($.a.notifications)}),d.a.createElement(Ae.a,{path:$.a.users.url,component:Pe.a,key:wt($.a.users)}),d.a.createElement(Ae.a,{path:$.a.M2MUsers.url,component:pt.a,key:wt($.a.M2MUsers)}),d.a.createElement(Ae.a,{path:$.a.entityRelease.url,component:ut.a,key:wt($.a.entityRelease)}),d.a.createElement(Ae.a,{path:$.a.groups.url,component:lt.a,key:wt($.a.groups)}),d.a.createElement(Ae.a,{path:$.a.roles.url,component:xe.a,key:wt($.a.roles)}),d.a.createElement(Ae.a,{path:$.a.securityPermissions.url,component:Ue.a,key:wt($.a.securityPermissions)}),d.a.createElement(Ae.a,{path:$.a.blGraph.url,component:Qe.a,key:wt($.a.blGraph)}),d.a.createElement(Ae.a,{path:$.a.blClass.url,component:dt.a,key:wt($.a.blClass)}),d.a.createElement(Ae.a,{path:$.a.blSkipGraph.url,component:mt.a,key:wt($.a.blSkipGraph)}),d.a.createElement(Ae.a,{path:$.a.dbUpdate.url,component:It.a,key:wt($.a.dbUpdate)}),d.a.createElement(Ae.a,{path:Nt($.a.account.url),component:Oe.a,key:wt($.a.account)}),d.a.createElement(Ae.a,{path:$.a.logout.url,component:fe,key:wt($.a.logout)}),d.a.createElement(Ae.a,{path:$.a.showcase.url,component:Me.a,key:wt($.a.showcase)}),d.a.createElement(Ae.a,{path:"*",component:Ee.a,key:"auth-route-page-not-found"}))),Mt=d.a.memo(xt);var Pt=a(1739),Rt=a(1741),Dt=a(2009),Ft=a(1206),Ut=a(1865),Wt=a(1736),_t=a(1742),Bt=a(1207),zt=a(1737),Vt=a(1738),Ht=a(1256),Gt=a(1867);const Kt=Object(o.a)(e=>Object(c.a)({content:{display:"flex",flexDirection:"column",height:"100%",overflowY:"auto",transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},contentDesktop:{marginLeft:H.b},contentShift:{marginLeft:0}}));function qt(e){var t,a;const{state:{contextMenu:o,showSafariSupportMessageModal:c,isSideNavOpen:s}}=e,[y]=Object(O.a)([k.b.IAppSetup]),b=null!==(a=null===(t=i.a.getParser(window.navigator.userAgent))||void 0===t?void 0:t.getBrowserName())&&void 0!==a?a:"",f="desktop"===i.a.getParser(window.navigator.userAgent).getPlatformType(!0),E=Kt({});return Object(l.useEffect)(()=>(y.setup(),()=>y.teardown()),[]),d.a.createElement(Wt.a,null,d.a.createElement(p.a,{persistor:y.getPersistor()},d.a.createElement(Ft.a.Provider,{value:g(o,[n.AuditLog])},d.a.createElement(u.a,null,d.a.createElement(l.Fragment,null,"Safari"===b&&d.a.createElement(zt.a,{onClose:y.handleBrowserCheck,showDialog:c}),d.a.createElement(Bt.a,null),s&&d.a.createElement(ne,{isDesktop:f,reactKeyPrefix:"doc-side-nav"}),d.a.createElement("div",{className:Object(r.default)(E.content,{[E.contentDesktop]:f},{[E.contentShift]:!s})},d.a.createElement(Vt.a,{id:666,reactKeyPrefix:"doc-snackbar-notification-displayer"}),d.a.createElement(m.d,null,d.a.createElement(m.b,{exact:!0,path:"/login-callback",component:Pt.a}),d.a.createElement(m.b,{exact:!0,path:"/logout-callback",component:Rt.a}),d.a.createElement(m.b,{exact:!0,path:"/no-authorization",component:_t.a}),d.a.createElement(m.a,{exact:!0,from:"/",to:"/home"}),d.a.createElement(m.b,{exact:!0,path:"/login",component:w}),d.a.createElement(Ae.a,{exact:!0,path:"/home",component:j}),d.a.createElement(Mt,null),d.a.createElement(m.b,{path:"*",component:Ee.a})),d.a.createElement(Dt.a,null),d.a.createElement(h.b,null),d.a.createElement(Ut.a,null)))))))}const $t=Object(S.a)(e=>({contextMenu:Ht.a.get(e),showSafariSupportMessageModal:!Gt.a.get(e),isSideNavOpen:Z.a.get(e)}),d.a.memo(qt))},2148:function(e,t,a){},2170:function(e,t,a){"use strict";a.r(t),a.d(t,"container",(function(){return m})),a.d(t,"lazyInject",(function(){return h}));a(988);var n=a(9),o=a(1525),c=a.n(o),s=a(1286),i=a(1898),r=a(1874),l=a(1593),d=a(1603),u=a(2040);const m=new n.Container,p=c()(m),{lazyInject:h}=p;m.load(r.a),m.load(i.a),m.load(l.a),m.load(u.a),m.load(d.a),m.load(s.a)},2247:function(e,t){},2448:function(e,t,a){"use strict";a.r(t),function(e){var t=a(977),n=a(1323),o=a(2322),c=(a(2141),a(0)),s=a.n(c),i=a(203),r=a.n(i),l=(a(988),a(1884)),d=(a(2148),a(137)),u=(a(2149),a(2324)),m=a(1879);let p=(e,t)=>{r.a.render(s.a.createElement(e,null),t)};const h=()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(t.a,{injectFirst:!0},s.a.createElement(n.a,{theme:d.a},s.a.createElement(o.a,null),s.a.createElement(u.a,{backend:m.a},s.a.createElement(l.a,null)))));p(h,document.getElementById("app")),e.hot&&e.hot.accept("src/app/pages/app",()=>{p(h,document.getElementById("app"))})}.call(this,a(987)(e))},531:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n={dataloyPropertyName:"*",dataloyPropertyValue:"*"}},882:function(e,t,a){"use strict";a.d(t,"a",(function(){return Y})),a.d(t,"b",(function(){return ne}));a(10),a(11);var n=a(893),o=a(2329),c=a(2341),s=a(213),i=a(187),r=a(2080),l=a(283),d=a.n(l),u=a(0),m=a.n(u),p=a(1125),h=a.n(p),y=a(795),b=a(130),f=a(695),g=a(6),E=a(501),A=a(3);const O=Object(g.b)([A.a.IInternationalization],Object(f.a)(e=>Object(i.a)({static:{color:e.palette.text.secondary},wrapper:{padding:e.spacing(0,3,3)}}))(e=>{const{auditLogs:t,sourceId:a,userLocale:n,classes:o}=e,c=e.deps[0].getLanguageFile().common,s=E.a.getAuditLogObjectInfo(t);return s?m.a.createElement(b.a,{variant:"subtitle2",className:o.wrapper},m.a.createElement("span",{className:o.static},c.record," "),m.a.createElement("span",null,a," "),m.a.createElement("span",{className:o.static},c.created.toLowerCase()," "),m.a.createElement("span",null,s.objectCreationDate," "),m.a.createElement("span",{className:o.static},c.by.toLowerCase()," "),m.a.createElement("span",null,s.objectCreator," ")):null}));var v,j=a(40);function k(e){switch(!0){case e===v.REMOVE:return j.c.ExtremelyHigh;case e===v.FINALIZE||e===v.UNFINALIZE:return j.c.High;case e===v.CALCULATE||e===v.EXECUTE:return j.c.MediumHigh;case e===v.EDIT:return j.c.Medium;case e===v.EXPORT:return j.c.Low;case e===v.VIEW:return j.c.ExtremelyLow;case e===v.NEW:return j.c.New;default:return j.c.NoPriority}}!function(e){e.ALL="ALL",e.VIEW="VIEW",e.EDIT="EDIT",e.REMOVE="REMOVE",e.CALCULATE="CALCULATE",e.FINALIZE="FINALIZE",e.UNFINALIZE="UNFINALIZE",e.EXPORT="EXPORT",e.NEW="NEW",e.EXECUTE="EXECUTE"}(v||(v={}));const S=e=>{const{action:t}=e;return t?m.a.createElement(j.a,{label:t.actionName,priority:k(t.actionName)}):null};var I=a(214),T=a(1154),C=a.n(T),L=a(1419);function w(e){return"string"!=typeof e&&(e=String(e)),m.a.createElement("span",null,e)}const N=Object(f.a)(e=>Object(i.a)({actionChip:{textAlign:"right"},objectFieldInfo:{},valuesWrapper:{alignItems:"center",display:"inline-flex",flexWrap:"wrap"}}))(e=>{const{classes:t,data:a,userLocale:n}=e,o=Object(L.a)(a.content[0],new Date,{addSuffix:!0,includeSeconds:!0,locale:n.localeConfig}),c=a.content[1],s=a.content[2],i=`${a.content[3]?a.content[3]+" - ":""} ${a.content[4]}`,r=w(a.content[5]),l=w(a.content[6]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(I.a,{item:!0,xs:9},m.a.createElement(b.a,{variant:"subtitle2",color:"textSecondary"},o)),m.a.createElement(I.a,{item:!0,xs:3,className:t.actionChip},s),m.a.createElement(I.a,{item:!0,xs:12},m.a.createElement(b.a,{variant:"h6",className:t.objectFieldInfo},i)),m.a.createElement(I.a,{item:!0,xs:12},m.a.createElement(b.a,{variant:"subtitle1",color:"textSecondary"},"By ",c)),a.content[5]||a.content[6]?m.a.createElement(I.a,{item:!0,xs:12},m.a.createElement("div",{className:t.valuesWrapper},m.a.createElement(b.a,{color:"textSecondary",variant:"subtitle2"},r),m.a.createElement(C.a,{color:"action"}),m.a.createElement(b.a,{variant:"subtitle2"},l))):null)});var x=a(5),M=a(67),P=a(78),R=a(430);const D=Object(f.a)(e=>Object(i.a)({valueCell:{overflowWrap:"anywhere"}}))(e=>{const{auditLogs:t,userLocale:a,selectedFields:n,selectedAuditLog:o,classes:c,selectedObjects:s}=e,i=[{content:"Action Time",contentType:x.a.DATE},{content:"User",contentType:x.a.TEXT},{content:"Action",contentType:x.a.ELEMENT},{content:"Object",contentType:x.a.TEXT},{content:"Field",contentType:x.a.TEXT},{content:"Old Value",contentType:x.a.TEXT,className:c.valueCell},{content:"New Value",contentType:x.a.TEXT}],r=t.filter(e=>{if((n.indexOf(e.attributeName)>-1||0===n.length)&&(s.indexOf(e.objectName)>-1||0===s.length))return e}).map(e=>{var t;return{content:[P.a.convertUTCToLocalTime(e.actionTime),e.user?e.user.userName:"",{content:m.a.createElement(S,{key:e.key,action:e.action,"data-cell-value":[e.action?e.action.actionName:null]}),rawValue:null===(t=e.action)||void 0===t?void 0:t.actionName},E.a.getAuditLogObjectColumnValue(o,e.objectName),e.attributeName?Object(R.a)(e.attributeName):"",E.a.formatAuditLogValue(e,e.oldValue),E.a.formatAuditLogValue(e,e.newValue)],id:e.key}});return m.a.createElement(M.a,{customisation:{cardList:{CardLayout:N},disableCardWrapper:!0,disableToolbar:!0,responsive:!0},data:r,defaultComparator:(e,t)=>e[0]>t[0]?x.b.LESS_THAN:e[0]<t[0]?x.b.GREATER_THAN:x.b.EQUAL,headers:i,onRowClick:void 0,pagination:{enabled:!0,rowsPerPage:[15]},primaryActions:void 0,selectedActions:void 0,reactKeyPrefix:"audit-log-table",userLocale:a})});var F=a(539);const U=e=>{const{onFieldSelected:t,selectedFields:a,fields:n}=e;return m.a.createElement(F.a,{label:"Fields",items:n,reactKeyPrefix:"doc-audio-log-toolbar-fields-menu",selectedItems:a,onItemSelected:t,insideDraggableDialog:!0})};var W=a(2335),_=a(2505),B=a(218),z=a(246),V=a(308),H=a.n(V);const G=e=>{const{auditLogs:t,onObjectSelected:a,selectedObjects:n,objects:o}=e;return m.a.createElement(F.a,{label:"Objects",items:o,reactKeyPrefix:"doc-audit-log-toolbar-objects-menu",selectedItems:n,onItemSelected:a,insideDraggableDialog:!0})},K=Object(g.b)([A.a.IInternationalization],Object(f.a)(e=>Object(i.a)({closeButton:{marginLeft:e.spacing(1)},fieldsMenu:{"& > *:first-child":{marginRight:e.spacing(1)}},title:{marginRight:"auto",cursor:"move"},toolbar:{alignItems:"center",display:"flex",paddingRight:e.spacing(3)}}))(e=>{const{title:t,onCloseModal:a,classes:n,auditLogs:o,onFieldSelected:c,selectedFields:s,fields:i,onObjectSelected:r,objects:l,selectedObjects:d}=e,u=e.deps[0].getLanguageFile();return m.a.createElement("div",{className:n.toolbar},m.a.createElement(W.a,{className:n.title},m.a.createElement(b.a,{variant:"h2"},t)),m.a.createElement(_.a,{smDown:!0},m.a.createElement("div",{className:n.fieldsMenu},m.a.createElement(G,{auditLogs:o,onObjectSelected:r,selectedObjects:d,objects:l}),m.a.createElement(U,{auditLogs:o,onFieldSelected:c,selectedFields:s,fields:i}))),m.a.createElement(B.a,{title:u.common.close},m.a.createElement(z.a,{"aria-label":"Close",onClick:a,className:n.closeButton},m.a.createElement(H.a,null))))}));var q=a(1),$=a(7),Q=a(21),X=a(1584),Z=a(42),J=a(47);const Y="AUDIT_LOG_IDENTIFIER",ee=Object(s.a)(e=>Object(i.a)({content:{maxHeight:645,[e.breakpoints.down("sm")]:{maxHeight:"none"},padding:0},fieldsMenu:{marginLeft:e.spacing(2),"& > *:first-child":{marginRight:e.spacing(1)}},modal:{userSelect:"none"}})),te=e=>m.a.createElement(h.a,null,m.a.createElement(n.a,Object.assign({},e)));function ae(e){const{state:{userLocale:t,selectedAuditLog:a,auditLogs:n}}=e,[s,i]=Object(g.a)([A.a.IInternationalization,$.a.IAuditLogController]),[l,p]=Object(u.useState)([]),[h,y]=Object(u.useState)([]),[b,f]=Object(u.useState)([]),[v,j]=Object(u.useState)([]),k="desktop"===d.a.getParser(window.navigator.userAgent).getPlatformType(!0),S=ee({}),{common:I}=s.getLanguageFile();Object(u.useEffect)(()=>{if(null==a?void 0:a.key){const e=Number(a.key);i.loadAuditLogs(e,a.fromDate,a.toDate)}},[null==a?void 0:a.key]);const T=Object(u.useCallback)((e,t)=>{const a=[],n=E.a.generateOptions(t,"attributeName"),o=E.a.generateOptions(t,"objectName");e.fieldName&&E.a.isFieldNameSelectable(e.fieldName,n)&&a.push(e.fieldName),p(n),y(o),f(a)},[]);Object(u.useEffect)(()=>{a&&n.length>0&&T(a,n)},[n,T,a]);const C=Object(u.useCallback)(()=>{f([]),j([]),i.deselectAuditLog()},[i]),L=Object(r.a)(e=>e.breakpoints.up("sm"));if(null==a?void 0:a.key){const e=E.a.getAuditLogTitle(a);return m.a.createElement(m.a.Fragment,null,m.a.createElement(o.a,{PaperComponent:k?te:void 0,PaperProps:{className:S.modal},open:!0,onClose:C,maxWidth:"lg",fullWidth:!0,fullScreen:!L,key:"audit-log-"+a.key,scroll:"paper"},m.a.createElement(K,{auditLogs:n,onCloseModal:C,onFieldSelected:f,selectedFields:b,fields:l,title:`${e} ${I.auditLog}`,onObjectSelected:j,selectedObjects:v,objects:h}),m.a.createElement(O,{auditLogs:n,sourceId:a.key,userLocale:t}),L?null:m.a.createElement("div",{className:S.fieldsMenu},m.a.createElement(G,{auditLogs:n,onObjectSelected:j,selectedObjects:v,objects:h}),m.a.createElement(U,{auditLogs:n,onFieldSelected:f,selectedFields:b,fields:l})),m.a.createElement(c.a,{"data-dividers":!0,className:S.content},m.a.createElement(D,{auditLogs:n,userLocale:t,selectedFields:b,selectedAuditLog:a,selectedObjects:v}))))}return null}const ne=Object(J.a)(e=>({userLocale:Z.a.getUserLocale(e),selectedAuditLog:X.a.get(e),auditLogs:Q.a.getTSModelsBuilt(e,q.a.auditlog,y.a,Y)}),m.a.memo(ae))}}]);