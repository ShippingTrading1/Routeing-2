(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1274:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(102),i=a(37),c=a(12),s=a(6),d=a(1),u=a(3),m=a(285),p=a(89);const b=e=>!!e.offhireStartDate&&!!e.offhireEndDate&&e.offhireStartDate>e.offhireEndDate,f=(e,t,a)=>!t||!a||!e.port||!e.reasonForOffhire||b(e),y=(e,t)=>{const a=new m.a(Object.assign(Object.assign({},e),{voyageHeader:t?t.key:void 0}));return Object(p.a)(a)},g=e=>`sort=referenceNo(ASI)&filter=voyageStatus.statusTypeCode(IN)(OPR,NOM)&filter=isTemplate(EQ)false&filter=isEstimate(EQ)false&filter=isUnallocated(EQ)false&filter=voyage.fleetPlanVoyages.fleetPlan.fleetPlanCode(EQ)MASTER&${"filter=voyage.vessel.key(EQ)"+e}&filter=referenceNo(NOTNULL)`,C=b;var v=a(323),h=a(19),O=a(96);function P(e,t,a,n,r){const l=()=>{var e,a;return"at sea"===(null===(a=null===(e=t.port)||void 0===e?void 0:e.portName)||void 0===a?void 0:a.toLowerCase())},i={reactKeyPrefix:e,fieldOptions:[{fieldName:"offhireStartDate",dateInputProps:{showTime:!0},formControlProps:{required:!0},onUpdateOverride:a.bind(null,"offhireStartDate")},{fieldName:"offhireEndDate",dateInputProps:{error:C(t),showTime:!0},formControlProps:{required:!0},formHelperText:C(t)?r.lang().validation.notValidDateRange:void 0,onUpdateOverride:a.bind(null,"offhireEndDate")},{fieldName:"port",label:r.lang().model.port,formControlProps:{required:!0},typeaheadProps:{query:O.d},onUpdateOverride:e=>{a("port",e),l()||a("timezoneOffset",0)}},l()?{fieldName:"timezoneOffset",label:r.lang().model.timezoneOffset,numberInputProps:{maskSettings:{decimalScale:2,disableThousandSeparator:!0}},onUpdateOverride:a.bind(null,"timezoneOffset")}:{overrideComponent:o.a.createElement(v.a,null)},{fieldName:"reasonForOffhire",label:r.lang().model.reasonForOffhire,typeaheadProps:{type:d.a.reasonforoffhire,objectPaths:["reasonForOffhireDesc"],shouldPreload:!0},formControlProps:{required:!0},onUpdateOverride:a.bind(null,"reasonForOffhire"),breakpoints:c.e}],userLocale:n,object:t,type:d.a.offhire};return Object(h.a)(i)}const j=({reactKeyPrefix:e,open:t,onCloseModal:a,onCreate:m,voyageHeader:p,vessel:b})=>{const[C]=Object(s.a)([u.a.IInternationalization]),[v,h]=Object(n.useState)(null!=b?b:null),[O,j]=Object(n.useState)(null!=p?p:null),x=Object(n.useCallback)(e=>{h(e),j(null)},[]),E=Object(n.useCallback)(e=>{j(e)},[]),N=Object(n.useCallback)(e=>f(e,v,O),[v,O]),k=Object(n.useCallback)(e=>y(e,O),[O]),S=Object(n.useMemo)(()=>[o.a.createElement(l.b,{key:"vessel-filter",reactKeyPrefix:e+"vessels",label:C.lang().model.vessel,type:d.a.vessel,objectPaths:["vesselName"],onChange:x,formControlProps:{required:!0},shouldPreload:!0}),o.a.createElement(l.b,{key:"voyage-filter",reactKeyPrefix:e+"voyages",label:C.lang().model.voyage,type:d.a.voyageheader,objectPaths:["referenceNo"],onChange:E,formControlProps:{required:!0},disabled:!v,shouldPreload:!!v,query:v?g(v.key):""})].map(e=>({value:e})),[C,x,E,e,v]);return o.a.createElement(r.a,{modalProps:{confirmBtnName:C.lang().common.create,fullscreenOnMobile:!0,fullWidth:!0,maxWidth:"xs",onCloseModal:a,open:t,reactKeyPrefix:e,title:C.lang().offhire.createOffhire},getColSpec:P,createProps:{type:d.a.offhire,callback:m},isConfirmDisabled:N,breakpoints:c.h,overrideGetData:k},p||b?o.a.createElement(o.a.Fragment,null):o.a.createElement(i.a,{items:S,reactKeyPrefix:e+"filters",breakpoints:c.h}))}},1712:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));a(59);var n,o,r=a(9),l=a(31),i=a(32),c=a(7),s=a(48),d=a(90),u=a(3),m=function(e,t,a,n){var o,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,a,l):o(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e,t){return function(a,n){t(a,n,e)}},f=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function i(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))};let y=class{constructor(e,t){var a;this.store=e,this.http=t,this.authorization=null!==(a=Object(i.a)(this.store.getState()).authdata)&&void 0!==a?a:""}getBasicHeader(){return{headers:new Headers({authorization:this.authorization,"content-type":"application/json"})}}post(e){return f(this,void 0,void 0,(function*(){try{const t=yield this.http.post(s.a.API_BASE_URL+"/M2M",e,this.getBasicHeader());return yield t.json()}catch(e){throw e instanceof Error?new Error(e.message):new Error("API call failed")}}))}};y=m([Object(r.injectable)(),b(0,Object(r.inject)(c.a.Store)),b(1,Object(r.inject)(u.a.IHttp)),p("design:paramtypes",["function"==typeof(n=void 0!==l.Store&&l.Store)?n:Object,"function"==typeof(o=void 0!==d.IHttp&&d.IHttp)?o:Object])],y)},1846:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=a(878);function u(e){const{closeModal:t,showModal:a,reactKeyPrefix:u,onCreate:m}=e,[p,b]=Object(n.useState)(!1),[f]=Object(i.a)([s.a.IInternationalization]),{common:y}=f.getLanguageFile(),g=Object(n.useCallback)(e=>!(e&&e.eventCode&&p&&e.eventDesc&&e.eventNo&&e.eventType),[p]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:u+"modal",maxWidth:"xs",onCloseModal:t,open:a,title:y.createEvent,confirmBtnName:y.create},getColSpec:d.a,breakpoints:l.e,createProps:{callback:m,type:c.a.event},contextData:{onChangeEventCode:b},propertiesToSet:{eventType:"CP"},isConfirmDisabled:g})}},1967:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));a(59),a(10),a(11);var n=a(982),o=a(2096),r=a(0),l=a.n(r),i=a(44),c=a(6),s=a(47),d=a(42),u=a(3),m=a(215),p=a(214),b=a(2094),f=a(2345),y=a(2375);const g=e=>{const{reactKeyPrefix:t,value:a,label:n,handleSliderChange:o,handleInputChange:r,disabled:i}=e;return l.a.createElement("div",{id:t+"-stepper"},l.a.createElement(y.a,{shrink:!0,sx:{paddingTop:"10px"}},n),l.a.createElement(p.a,{container:!0,spacing:2,alignItems:"center",sx:{paddingLeft:1}},l.a.createElement(p.a,{item:!0,xs:!0},l.a.createElement(b.a,{value:a,onChange:o,marks:!0,min:0,max:60,disabled:i})),l.a.createElement(p.a,{item:!0},l.a.createElement(f.a,{disabled:i,value:a,size:"small",onChange:r,inputProps:{min:0,max:60,type:"number"}}))))};function C(e){const{entity:t,onChange:a,reactKeyPrefix:n,disabled:o,internationalization:i,userLocale:c}=e,{common:s,voyages:d}=i.getLanguageFile(),u=Object(r.useCallback)((e,t,n)=>{a(e,n)},[a]),p=Object(r.useCallback)(e=>{a("endpointsNumberOfVoyages",""===e.target.value?2:Number(e.target.value))},[a]),b=Object(r.useCallback)((e,t)=>{a(e,Number(t.target.value))},[a]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{reactKeyPrefix:n+"-endpoints-from-date",label:s.fromDate,locale:c,value:t.endpointsFromDate,required:!0,key:"endpoints_date_input_from_date",disabled:o,onBlur:a.bind(null,"endpointsFromDate")}),l.a.createElement("div",{style:{paddingTop:"10px"}},l.a.createElement(m.a,{reactKeyPrefix:n+"-endpoints-to-date",label:s.toDate,locale:c,value:t.endpointsToDate,required:!0,key:"endpoints_date_input_to_date",disabled:o,onBlur:a.bind(null,"endpointsToDate")})),l.a.createElement(g,{reactKeyPrefix:n+"-endpoints-number-of-voyages",value:t.endpointsNumberOfVoyages,label:d.numberOfVoyages,handleSliderChange:u.bind(null,"endpointsNumberOfVoyages"),handleInputChange:p,disabled:o}),l.a.createElement(g,{reactKeyPrefix:n+"-endpoints-laycan-spread",value:t.endpointsLayCanSpread,label:"Lay/Can Spread (days)",handleSliderChange:u.bind(null,"endpointsLayCanSpread"),handleInputChange:b.bind(null,"endpointsLayCanSpread"),disabled:o}))}function v(e){const{entity:t,reactKeyPrefix:a,onChange:n,disabled:o,internationalization:i,userLocale:c}=e,{common:s,voyages:d}=i.getLanguageFile(),u=Object(r.useCallback)((e,t,a)=>{n(e,a)},[n]),b=Object(r.useCallback)(e=>{n("intervalsNumberOfVoyages",""===e.target.value?2:Number(e.target.value))},[n]),C=Object(r.useCallback)((e,t)=>{n(e,Number(t.target.value))},[n]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{reactKeyPrefix:a+"-intervals-from-date",label:s.fromDate,locale:c,value:t.intervalsFromDate,required:!0,key:"intervals_date_input_from_date",disabled:o,onBlur:n.bind(null,"intervalsFromDate")}),l.a.createElement(y.a,{shrink:!0,sx:{paddingTop:"10px"}},d.interval),l.a.createElement(p.a,{container:!0,spacing:2,alignItems:"center",sx:{pb:1}},l.a.createElement(p.a,{item:!0},l.a.createElement(f.a,{disabled:o,value:t.intervalsMonths,size:"small",onChange:C.bind(null,"intervalsMonths"),inputProps:{min:0===t.intervalsDays?1:0,type:"number"}})," ",s.months.toLowerCase()),l.a.createElement(p.a,{item:!0},l.a.createElement(f.a,{disabled:o,value:t.intervalsDays,size:"small",onChange:C.bind(null,"intervalsDays"),inputProps:{min:0===t.intervalsMonths?1:0,type:"number"}})," ",s.days.toLowerCase())),l.a.createElement(g,{reactKeyPrefix:a+"-intervals-number-of-voyages",value:t.intervalsNumberOfVoyages,label:d.numberOfVoyages,handleSliderChange:u.bind(null,"intervalsNumberOfVoyages"),handleInputChange:b,disabled:o}),l.a.createElement(g,{reactKeyPrefix:a+"-intervals-laycan-spread",value:t.intervalsLayCanSpread,label:d.laycanSpreadDays,handleSliderChange:u.bind(null,"intervalsLayCanSpread"),handleInputChange:C.bind(null,"intervalsLayCanSpread"),disabled:o}))}var h=a(20),O=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function i(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))};const P={endpointsFromDate:null,endpointsToDate:null,endpointsNumberOfVoyages:2,endpointsLayCanSpread:0,intervalsFromDate:null,intervalsNumberOfVoyages:2,intervalsLayCanSpread:0,intervalsMonths:0,intervalsDays:1};function j(e){const{open:t,onClose:a,onConfirm:c,onSuccess:s,voyage:d,reactKeyPrefix:u,state:{userLocale:m},deps:[p,b]}=e,{voyages:f}=p.getLanguageFile(),[y,g]=Object(r.useState)("endpoints"),[h,j]=Object(r.useState)(P),x=Object(r.useCallback)(e=>{g(e.target.value)},[]),E=Object(r.useCallback)((e,t)=>{j(Object.assign(Object.assign({},h),{[e]:t}))},[h]),N="intervals"===y,k="endpoints"===y,S=Object(r.useCallback)(()=>{if("intervals"===y){const e=h.intervalsMonths?h.intervalsMonths:h.intervalsDays;return!(h.intervalsFromDate&&h.intervalsNumberOfVoyages&&h.intervalsLayCanSpread&&e)}return!(h.endpointsFromDate&&h.endpointsToDate&&h.endpointsNumberOfVoyages&&h.endpointsLayCanSpread)},[h.endpointsFromDate,h.endpointsToDate,h.endpointsLayCanSpread,h.endpointsNumberOfVoyages,h.intervalsDays,h.intervalsFromDate,h.intervalsLayCanSpread,h.intervalsMonths,h.intervalsNumberOfVoyages,y]),D=Object(r.useCallback)(()=>O(this,void 0,void 0,(function*(){c(),yield b.copyTemplateMultipleVoyages(d,h,y),s()})),[b,h,c,s,y,d]);return l.a.createElement(i.a,{open:t,onCloseModal:a,onConfirm:D,title:f.createMultipleVoyages,reactKeyPrefix:u,fullWidth:!0,disableConfirmBtn:S()},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start"}},l.a.createElement(n.a,{value:"endpoints",control:l.a.createElement(o.a,{checked:"endpoints"===y,onChange:x,value:"endpoints"}),label:f.scheduleWithFixedEndpoints}),l.a.createElement(C,{entity:h,onChange:E,reactKeyPrefix:u+"-endpoints",disabled:N,internationalization:p,userLocale:m}),l.a.createElement(n.a,{value:"intervals",control:l.a.createElement(o.a,{checked:"intervals"===y,onChange:x,value:"intervals"}),label:f.scheduleWithFixedIntervals}),l.a.createElement(v,{entity:h,onChange:E,reactKeyPrefix:u+"-intervals",disabled:k,internationalization:p,userLocale:m})))}const x=Object(s.a)(e=>({userLocale:d.a.getUserLocale(e)}),Object(c.b)([u.a.IInternationalization,h.a.IVoyageDrawerController],Object(r.memo)(j)))},1979:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));a(10),a(11);var n=a(429),o=a(0),r=a.n(o),l=a(51),i=a(12),c=a(6),s=a(1),d=a(260),u=a(3),m=a(28),p=a(19),b=a(85),f=(a(59),a(83)),y=a(14),g=a(4),C=a(32),v=a(7),h=a(176),O=a(78),P=a(408),j=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function i(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))};function x(e){return j(this,void 0,void 0,(function*(){return e.currency&&e.exchangeRateDate?function(e){const t=y.a.get(f.a.ITSModelApi),a=y.a.get(v.a.Store),n=y.a.get(u.a.IInternationalization).getLanguageFile(),o=e.map(({objectPath:e,value:t,operator:a=g.c.EQUALS})=>`filter=${e}${a}${null!==t?encodeURIComponent(t):t}`).join("&"),{authdata:r=""}=Object(C.a)(a.getState()),l=o+"&filter=isObjectActive(IN)(true,false)";return t.getMultiple({authdata:r,type:s.a.exchangerate,query:l,headers:{fetchLimit:1}}).then(e=>{const t=n.validation.alreadyExists(Object(P.a)(n.model.exchangeRate,!0));return Object(h.a)(!e.length,t)}).catch(()=>Object(h.a)(!1,n.validation.loadingError))}([{objectPath:"currency.currencyCode",value:e.currency.currencyCode},{objectPath:"exchangeRateDate",value:O.a.getDateStringWithoutUTC(e.exchangeRateDate)},{objectPath:e.budgetVersion?"budgetVersion.budgetVersionName":"budgetVersion",value:e.budgetVersion?e.budgetVersion.budgetVersionName:"",operator:e.budgetVersion?g.c.EQUALS:g.c.NULL}]):Promise.resolve({valid:!0})}))}var E=a(663);function N(e,t,a,n,o,{setValid:r,error:l,setError:i}){const{common:c,model:d}=o.getLanguageFile(),u=e=>n=>{r(!1),a(e,n),x(new E.a(Object.assign(Object.assign({},t),{[e]:n}))).then(t=>{var a;t.valid?(i(null),r(!0)):i({propertyName:e,msg:null!==(a=t.helperText)&&void 0!==a?a:"Unknown error"})})},f=e=>(null==l?void 0:l.propertyName)===e?null==l?void 0:l.msg:"",y={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"currency",label:d.currency,formControlProps:{required:!0,error:!!f("currency")},formHelperText:f("currency"),onUpdateOverride:u("currency"),typeaheadProps:{objectPaths:["currencyCode"],shouldPreload:!0}},{fieldName:"exchangeRate",label:d.exchangeRate,formControlProps:{required:!0},numberInputProps:{maskSettings:m.a.mask13},onUpdateOverride:a.bind(null,"exchangeRate")},{fieldName:"exchangeRateDate",label:c.validFromDate,formControlProps:{required:!0,error:!!f("exchangeRateDate")},onUpdateOverride:u("exchangeRateDate"),dateInputProps:{validation:[{type:b.a.DATE}],showTime:!0,error:!!f("exchangeRateDate")},formHelperText:f("exchangeRateDate")},{fieldName:"budgetVersion",label:d.budgetVersion,formControlProps:{error:!!f("budgetVersion")},formHelperText:f("budgetVersion"),onUpdateOverride:u("budgetVersion"),typeaheadProps:{objectPaths:["budgetVersionName"],shouldPreload:!0,isClearable:!0}}],object:t,type:s.a.exchangerate,userLocale:n};return Object(p.a)(y)}function k({reactKeyPrefix:e,closeModal:t,showModal:a,onCreate:m}){const[p]=Object(c.a)([u.a.IInternationalization]),{common:b}=p.getLanguageFile(),[f,y]=Object(o.useState)(null),[g,C]=Object(o.useState)(!0),v=Object(o.useCallback)(e=>!(g&&e&&e.currency&&e.exchangeRate&&e.exchangeRateDate),[g]),h=Object(o.useCallback)(e=>{const{currency:t,exchangeRate:a,exchangeRateDate:n,budgetVersion:o}=e;return{fromCurrency:null==t?void 0:t.key,currency:d.a.getCurrencyCode(),exchangeRate:a,exchangeRateDate:n,budgetVersion:null==o?void 0:o.key}},[]);return r.a.createElement(l.a,{modalProps:{reactKeyPrefix:e+"-create-modal",maxWidth:"xs",onCloseModal:t,open:a,title:b.createExchangeRate,confirmBtnName:b.create},contextData:{setValid:C,error:f,setError:y},getColSpec:N,breakpoints:i.e,propertiesToSet:{exchangeRateDate:Object(n.a)(new Date)},createProps:{callback:m,type:s.a.exchangerate},isConfirmDisabled:v,overrideGetData:h})}},1980:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(1),i=a(43),c=a(19),s=a(70);function d(e,t,a,n,o){const{model:r}=o.getLanguageFile(),i={reactKeyPrefix:e,fieldOptions:[{fieldName:"userName",label:`${r.m2m} ${r.name}`,formControlProps:{required:!0},textInputProps:{validation:s.b.M2MUserName,autoFocus:!0},onUpdateOverride:a.bind(null,"userName")},{fieldName:"securityGroups",typeaheadProps:{isMulti:!0,shouldPreload:!0,objectPaths:["securityGroupName"]},formControlProps:{required:!0},onUpdateOverride:a.bind(null,"securityGroups")}],object:t,type:l.a.user,userLocale:n};return Object(c.a)(i)}var u=a(126);const m=Object(u.a)(e=>{const{userName:t,securityGroups:a}=e;return{name:t,securityGroups:a.map(e=>({securityGroup:e.key}))}}),p=new i.a({});function b({reactKeyPrefix:e,closeModal:t,showModal:a,i:i,onCreateM2MUser:c}){const{common:s,model:u}=i.getLanguageFile(),[b,f]=Object(n.useState)(p),y=Object(n.useCallback)(()=>{const e=m(b);c(e)},[b,c]),g=Object(n.useCallback)((e,t,a)=>(f(new l.a.user.class(Object.assign(Object.assign({},e),{[t]:a}))),new l.a.user.class(Object.assign(Object.assign({},e),{[t]:a}))),[]),C=Object(n.useCallback)(()=>""===b.userName&&0===b.securityGroups.length,[b.securityGroups.length,b.userName]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:e+"-create-modal",maxWidth:"md",onCloseModal:t,open:a,title:`${s.create} ${u.m2m} ${u.user}`},getColSpec:d,isConfirmDisabled:C,selectedObject:p,overrideUpdateEntity:g,overrideOnConfirm:y})}},1981:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));a(59),a(10),a(11);var n=a(130),o=a(213),r=a(187),l=a(0),i=a.n(l),c=a(51),s=a(12),d=a(6),u=a(1),m=a(3),p=a(19),b=a(193),f=a(154);function y(e,t,a,n){const o={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"releaseNumber",formControlProps:{required:!0},textInputProps:{characterRequirements:{maxLength:f.a.entityrelease.releaseNumber.limit},onInputChange:a.bind(null,"releaseNumber")}},{fieldName:"releaseDate",formControlProps:{required:!0},onUpdateOverride:a.bind(null,"releaseDate")}],object:new b.a(t),type:u.a.entityrelease,userLocale:n};return Object(p.a)(o)}var g=a(83),C=a(7),v=a(14),h=a(32),O=a(176),P=a(70);var j=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function i(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))};const x=Object(o.a)(e=>Object(r.a)({helperText:{color:e.palette.error.main}}));function E(e){const[t]=Object(d.a)([m.a.IInternationalization]),{reactKeyPrefix:a,showModal:o,closeModal:r,callback:p}=e,b=x({}),[f,E]=Object(l.useState)(),{common:N,model:k}=t.getLanguageFile(),S=Object(l.useCallback)(()=>{E(void 0),r()},[r]),D=Object(l.useCallback)(e=>j(this,void 0,void 0,(function*(){const t=yield function(e){const t=v.a.get(g.a.ITSModelApi),a=v.a.get(C.a.Store),n=v.a.get(m.a.IInternationalization),{validation:o,model:r}=n.getLanguageFile(),{authdata:l=""}=Object(h.a)(a.getState()),i=["filter=releaseNumber(EQ)"+encodeURIComponent(e),"filter=isObjectActive(IN)(true,false)","limit=1","pageNumber=1"].join("&");return t.getMultiple({authdata:l,type:u.a.entityrelease,query:i}).then(e=>{const t=o.alreadyExists(r.releaseNumber.toLocaleLowerCase());return Object(O.a)(!e.length,t)}).catch(()=>Object(O.a)(!1,o.loadingError))}(e),a=function(e){const t=v.a.get(m.a.IInternationalization),{validation:a}=t.getLanguageFile(),n=P.a.RELEASE_NUMBER.test(String(e));return Object(O.a)(n,a.releaseNumberIncorrect)}(e),n=Object.assign(Object.assign({},f),{releaseNumberValidationResult:t&&a});E(n)})),[f]),L=Object(l.useCallback)((e,t,a)=>("releaseNumber"===t&&""!==a&&D(a),new u.a.entityrelease.class(Object.assign(Object.assign({},e),{[t]:a}))),[D]),I=Object(l.useMemo)(()=>({contextData:f}),[f]);return i.a.createElement(c.a,{modalProps:{reactKeyPrefix:a+"create-release-modal",confirmBtnName:N.create,maxWidth:"xs",onCloseModal:S,open:o,title:k.createRelease},breakpoints:s.e,getColSpec:y,createProps:{callback:p,type:u.a.entityrelease},childrenAtBottom:!0,overrideUpdateEntity:L,contextData:f,isConfirmDisabled:e=>function(e,t){const{contextData:a}=e,{releaseNumber:n}=t;return!a||!(a.releaseNumberValidationResult.valid&&n)}(I,e)},i.a.createElement(n.a,{className:b.helperText},f&&f.releaseNumberValidationResult.helperText))}},2019:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=a(19),u=a(57),m=a(70);function p(e,t,a,n,o,r){const{model:l,common:i}=o.getLanguageFile(),s={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"commodityName",label:l.name,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"commodityName")},{fieldName:"commodityCode",label:i.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"commodityCode"),textInputProps:{letterCase:u.a.UPPERCASE,validation:m.b.CommodityCode,onInputChange:(e,t)=>r.onChangeCommodityCode(t)}}],object:t,type:c.a.commodity,userLocale:n};return Object(d.a)(s)}function b(e){const[t]=Object(i.a)([s.a.IInternationalization]),{common:a}=t.getLanguageFile(),{reactKeyPrefix:d,closeModal:u,showModal:m,onCreate:b}=e,[f,y]=Object(n.useState)(!1),g=Object(n.useCallback)(e=>!(e&&e.commodityCode&&f),[f]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:d+"-create-modal",maxWidth:"xs",onCloseModal:u,open:m,title:a.createCommodity,confirmBtnName:a.create},getColSpec:p,breakpoints:l.e,createProps:{callback:b,type:c.a.commodity},contextData:{onChangeCommodityCode:y},isConfirmDisabled:g,propertiesToSet:{weightUnit:{measurementCode:"MT"},stowageUnit:{measurementCode:"MT"}}})}},2020:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=(a(93),a(19)),u=a(57),m=a(70);function p(e,t,a,n,o,r){const{common:l}=o.getLanguageFile(),i={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"commodityGroupDesc",label:l.description,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"commodityGroupDesc")},{fieldName:"commodityGroupCode",label:l.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"commodityGroupCode"),textInputProps:{letterCase:u.a.UPPERCASE,validation:m.b.CommodityGroupCode,onInputChange:(e,t)=>r.onChangeCommodityGroupCode(t)}}],object:t,type:c.a.commoditygroup,userLocale:n};return Object(d.a)(i)}function b(e){const[t]=Object(i.a)([s.a.IInternationalization]),{common:a}=t.getLanguageFile(),{reactKeyPrefix:d,closeModal:u,showModal:m,onCreate:b}=e,[f,y]=Object(n.useState)(!1),g=Object(n.useCallback)(e=>!(e&&e.commodityGroupCode&&f&&e.commodityGroupDesc),[f]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:d+"-create-modal",maxWidth:"xs",onCloseModal:u,open:m,title:a.createCommodityGroup,confirmBtnName:a.create},getColSpec:p,breakpoints:l.e,createProps:{callback:b,type:c.a.commoditygroup},contextData:{onChangeCommodityGroupCode:y},isConfirmDisabled:g})}},2021:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=(a(93),a(19)),u=a(57),m=a(70);function p(e,t,a,n,o,r){const{common:l}=o.getLanguageFile(),i={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"commodityClassDesc",label:l.description,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"commodityClassDesc")},{fieldName:"commodityClassCode",label:l.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"commodityClassCode"),textInputProps:{letterCase:u.a.UPPERCASE,validation:m.b.CommodityClassCode,onInputChange:(e,t)=>r.onChangeCommodityClassCode(t)}}],object:t,type:c.a.commodityclass,userLocale:n};return Object(d.a)(i)}function b(e){const[t]=Object(i.a)([s.a.IInternationalization]),{common:a}=t.getLanguageFile(),{reactKeyPrefix:d,closeModal:u,showModal:m,onCreate:b}=e,[f,y]=Object(n.useState)(!1),g=Object(n.useCallback)(e=>!(e&&e.commodityClassCode&&f&&e.commodityClassDesc),[f]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:d+"-create-modal",maxWidth:"xs",onCloseModal:u,open:m,title:a.createCommodityClass,confirmBtnName:a.create},getColSpec:p,breakpoints:l.e,createProps:{callback:b,type:c.a.commodityclass},contextData:{onChangeCommodityClassCode:y},isConfirmDisabled:g})}},2022:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=a(19),u=a(57),m=a(70);function p(e,t,a,n,o,r){const{model:l,common:i}=o.getLanguageFile(),s={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"companyName",label:l.name,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"companyName")},{fieldName:"companyCode",label:i.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"companyCode"),textInputProps:{letterCase:u.a.UPPERCASE,validation:m.b.CompanyCode,onInputChange:(e,t)=>r.onChangeCompanyCode(t)}}],object:t,type:c.a.company,userLocale:n};return Object(d.a)(s)}function b(e){const[t]=Object(i.a)([s.a.IInternationalization]),{common:a}=t.getLanguageFile(),{reactKeyPrefix:d,closeModal:u,showModal:m,onCreate:b}=e,[f,y]=Object(n.useState)(!1),g=Object(n.useCallback)(e=>!(e&&e.companyCode&&f),[f]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:d+"-create-modal",maxWidth:"xs",onCloseModal:u,open:m,title:a.createCompany,confirmBtnName:a.create},getColSpec:p,breakpoints:l.e,createProps:{callback:b,type:c.a.company},contextData:{onChangeCompanyCode:y},isConfirmDisabled:g,propertiesToSet:{addresses:[{}],contactInfo:[{}]}})}},2023:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=(a(93),a(19)),u=a(28),m=a(57),p=a(70);function b(e,t,a,n,o,r){const{common:l,model:i}=o.getLanguageFile(),s={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"laytimeTerms",label:l.description,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"laytimeTerms")},{fieldName:"laytimeTermsCode",label:l.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"laytimeTermsCode"),textInputProps:{letterCase:m.a.UPPERCASE,validation:p.b.LaytimeTermsCode,onInputChange:(e,t)=>r.onChangeLaytimeTermsCode(t)}},{fieldName:"daysCorrectionFactor",label:i.daysCorrectionFactor,numberInputProps:{maskSettings:u.a.mask7},onUpdateOverride:a.bind(null,"daysCorrectionFactor")}],object:t,type:c.a.laytimeterms,userLocale:n};return Object(d.a)(s)}function f(e){const[t]=Object(i.a)([s.a.IInternationalization]),{common:a}=t.getLanguageFile(),[d,u]=Object(n.useState)(!1),{reactKeyPrefix:m,closeModal:p,showModal:f,onCreate:y}=e,g=Object(n.useCallback)(e=>!(e&&e.laytimeTermsCode&&e.laytimeTerms&&d),[d]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:m+"-create-modal",maxWidth:"xs",onCloseModal:p,open:f,title:a.createLaytimeTerms,confirmBtnName:a.create},getColSpec:b,breakpoints:l.e,createProps:{callback:y,type:c.a.laytimeterms},contextData:{onChangeLaytimeTermsCode:u},propertiesToSet:{daysCorrectionFactor:0},isConfirmDisabled:g})}},2024:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(547),d=a(3),u=(a(93),a(2108)),m=a(57),p=a(19),b=a(70);function f(e,t,a,n,o,r){const{common:l}=o.getLanguageFile(),i={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"measurementDesc",label:l.description,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"measurementDesc")},{fieldName:"measurementCode",label:l.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"measurementCode"),textInputProps:{letterCase:m.a.UPPERCASE,validation:b.b.MeasurementUnitCode,onInputChange:(e,t)=>r.onChangeMeasurementCode(t)}},{fieldName:"measurementType",label:l.type,formControlProps:{required:!0},overrideFieldType:"object",typeaheadProps:{options:Object.values(s.b.getMeasurementTypeOptions(o)),defaultSelectedOptions:s.b.getMeasurementTypeOptions(o)[s.a.VOLUME],overrideDefaultSelectedOptions:!0},onUpdateOverride:e=>{a("measurementType",Object(u.a)(s.b.getMeasurementTypeOptions(o),t=>t===e))}}],object:t,type:c.a.measurement,userLocale:n};return Object(p.a)(i)}function y({reactKeyPrefix:e,closeModal:t,showModal:a,onCreate:u}){const[m]=Object(i.a)([d.a.IInternationalization]),[p,b]=Object(n.useState)(!1),{common:y}=m.getLanguageFile(),g=Object(n.useCallback)(e=>!(e&&e.measurementCode&&e.measurementDesc&&e.measurementType&&p),[p]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:e+"-create-modal",maxWidth:"xs",onCloseModal:t,open:a,title:y.createMeasurementUnit,confirmBtnName:y.create},getColSpec:f,breakpoints:l.e,createProps:{callback:u,type:c.a.measurement},propertiesToSet:{measurementType:s.a.VOLUME},contextData:{onChangeMeasurementCode:b},isConfirmDisabled:g})}},2025:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=(a(93),a(19)),u=a(28),m=a(57),p=a(70);function b(e,t,a,n,o,r){const{common:l}=o.getLanguageFile(),i={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"paymentTermsDesc",label:l.description,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"paymentTermsDesc")},{fieldName:"paymentTermsCode",label:l.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"paymentTermsCode"),textInputProps:{letterCase:m.a.UPPERCASE,validation:p.b.PaymentTermsCode,onInputChange:(e,t)=>r.onChangePaymentTermsCode(t)}},{fieldName:"numberOfDays",label:l.numberOfDays,numberInputProps:{maskSettings:u.a.mask3},onUpdateOverride:a.bind(null,"numberOfDays")}],object:t,type:c.a.paymentterms,userLocale:n};return Object(d.a)(i)}function f(e){const[t]=Object(i.a)([s.a.IInternationalization]),{common:a}=t.getLanguageFile(),[d,u]=Object(n.useState)(!1),{reactKeyPrefix:m,closeModal:p,showModal:f,onCreate:y}=e,g=Object(n.useCallback)(e=>!(e&&e.paymentTermsCode&&e.paymentTermsDesc&&d),[d]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:m+"-create-modal",maxWidth:"xs",onCloseModal:p,open:f,title:a.createPaymentTerms,confirmBtnName:a.create},getColSpec:b,breakpoints:l.e,createProps:{callback:y,type:c.a.paymentterms},contextData:{onChangePaymentTermsCode:u},propertiesToSet:{numberOfDays:0},isConfirmDisabled:g})}},2035:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(89),d=a(3),u=a(19),m=a(38),p=a(85);function b(e,t,a,n,o,r){const{common:i,model:s}=o.getLanguageFile(),d={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"fromDate",label:i.fromDate,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"fromDate"),dateInputProps:{showTime:!1,showShortDate:!1}},{fieldName:"percentage",label:s.percentage,onUpdateOverride:a.bind(null,"percentage"),formControlProps:{defaultValue:0},numberInputProps:{maskSettings:{disableThousandSeparator:!0,fixedDecimalScale:!1},validation:[{type:p.a.RANGE,min:0,max:100}],onChange:(e,t)=>r.setIsPercentageValid(t)},breakpoints:l.h},{fieldName:"isInsideEu",label:s.withinEUEEA,formControlProps:{required:!0},formControlLabelProps:{labelPlacement:"top",checked:t.isInsideEu,componentsProps:{typography:{fontSize:".786rem",color:m.b.bergenRain.secondary[7]}}},onUpdateOverride:a.bind(null,"isInsideEu"),breakpoints:l.h}],object:t,type:c.a.compliancepercentage,userLocale:n};return Object(u.a)(d)}function f(e){const[t]=Object(i.a)([d.a.IInternationalization]),{common:a}=t.getLanguageFile(),{reactKeyPrefix:u,closeModal:m,showModal:p,onCreate:f}=e,[y,g]=Object(n.useState)(!0),C=Object(n.useCallback)(e=>!e.fromDate||!y,[y]),v=Object(n.useCallback)(e=>{var t,a;return null===(t=e.fromDate)||void 0===t||t.setMinutes(0),null===(a=e.fromDate)||void 0===a||a.setHours(0),Object(s.a)(e)},[]);return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:u+"-create-compliance-percentage-modal",maxWidth:"xs",onCloseModal:m,open:p,title:a.createCompliancePercentage,confirmBtnName:a.create},getColSpec:b,breakpoints:l.e,createProps:{callback:f,type:c.a.compliancepercentage},contextData:{setIsPercentageValid:g},isConfirmDisabled:C,overrideGetData:v})}},2068:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));a(10),a(11);var n=a(0),o=a.n(n),r=a(257),l=a(1),i=a(19);const c=new(a(88).a),{common:s}=c.getLanguageFile(),{model:d}=c.getLanguageFile(),{coa:u}=c.getLanguageFile();function m(e,t,a,n){const o={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"terminationDate",label:d.terminationDate,formControlProps:{required:!0},onUpdateOverride:e=>a("terminationDate",e)},{fieldName:"cargoQuantity",label:u.totalCoaQty,formControlProps:{required:!0},numberInputProps:{onChange:e=>a("cargoQuantity",e)}},{fieldName:"isOption",label:s.option,onUpdateOverride:e=>a("isOption",e)}],object:new r.a(t),type:l.a.coaline,userLocale:n};return Object(i.a)(o)}var p=a(51),b=a(6),f=a(334),y=a(7),g=a(3),C=a(353),v=a(12);const h=Object(b.b)([y.a.ISelectedCoaLineActions,y.a.Store,g.a.IInternationalization,y.a.ITSModelActionsAsync],(function(e){const{showDialog:t,closeDialog:a,coa:r,closeAndCreate:i,reactKeyPrefix:c,setPreSelectedCoA:s}=e,[d,u,b,f]=e.deps,{common:y,model:g}=b.getLanguageFile(),h=Object(n.useCallback)((e,t)=>{t&&(u.dispatch(d.setAction(t.key)),t.coa&&t.coa._key&&(s(t.key),f.loadSingleAction({fields:C.a,key:t.coa._key,type:l.a.coa})),i(t))},[i,d,s,u,f]);return o.a.createElement(p.a,{modalProps:{reactKeyPrefix:c+"modal",maxWidth:"xs",onCloseModal:a,open:t,title:`${y.create} ${g.coaLine}`},breakpoints:v.e,getColSpec:m,propertiesToSet:P(r),isConfirmDisabled:O,createProps:{callback:h,fields:{coa:"*"},type:l.a.coaline},enableCopy:!1})}));function O(e){const{terminationDate:t,cargoQuantity:a}=e;return!(t&&a)}function P(e){const t=new f.a({key:e.key});return new r.a({coa:t})}},2069:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(10),a(11);var n=a(0),o=a.n(n),r=a(51),l=a(6),i=a(1),c=a(3),s=a(28),d=a(19);const u=(e,t,a,n,o)=>{const{model:r,common:l}=o.getLanguageFile(),c={reactKeyPrefix:e,fieldOptions:[{fieldName:"quantity",label:l.fromQuantity,numberInputProps:{maskSettings:s.a.mask6},onUpdateOverride:a.bind(null,"quantity")},{fieldName:"value",label:r.freightRate,numberInputProps:{maskSettings:s.a.mask19},onUpdateOverride:a.bind(null,"value")},{fieldName:"lumpsum",onUpdateOverride:a.bind(null,"lumpsum")}],object:t,type:i.a.freightrate,userLocale:n};return Object(d.a)(c)},m=({showModal:e,cargo:t,reactKeyPrefix:a,selectedFreightRate:n,onCloseModal:s,onCreateCallback:d})=>{const[m]=Object(l.a)([c.a.IInternationalization]),{common:p}=m.getLanguageFile();return o.a.createElement(r.a,{modalProps:{reactKeyPrefix:a,confirmBtnName:(null==n?void 0:n.key)?p.save:p.create,onCloseModal:s,open:e,title:(null==n?void 0:n.key)?p.updateFreightRate:p.createFreightRate},updateProps:{shouldKeepValues:!0,objPropToUpdate:"freightRates",objToUpdate:t,objToUpdateType:i.a.cargo,shouldUseArray:!0,type:i.a.freightrate,smartResponse:!0,overwriteKeysOnLoad:!0,callback:d},selectedObject:n,getColSpec:u})}},2070:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),o=a.n(n),r=a(1),l=a(14),i=a(3),c=a(51),s=a(19),d=a(28),u=a(85);function m(e,t,a,n,o,l){const{common:i}=o.getLanguageFile(),c={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"quantity",numberInputProps:{maskSettings:d.a.mask1,validation:[{type:u.a.RANGE,min:0}]},InputProps:{endAdornment:i.mt},onUpdateOverride:a.bind(null,"quantity")},{fieldName:"price",numberInputProps:{maskSettings:d.a.mask2,validation:[{type:u.a.RANGE,min:0}]},InputProps:{endAdornment:l.bunkerCurrency},onUpdateOverride:a.bind(null,"price")}],object:t,type:r.a.bunkerstock,userLocale:n};return Object(s.a)(c)}const p=l.a.get(i.a.IInternationalization),{model:b}=p.getLanguageFile(),f=e=>{const{selectedBunkerCategory:t,voyageHeaderKey:a,bunkerCurrency:n,reactKeyPrefix:l,onOpen:i,onClose:s,onConfirm:d}=e,u={reactKeyPrefix:l+"create-opening-balance-modal",open:i,title:b.addopeningbalance,onCloseModal:s,onConfirm:d};return o.a.createElement(c.a,{modalProps:u,getColSpec:m,propertiesToSet:{bunkerCategory:t,description:b.openingBalance,voyageHeader:a},contextData:{bunkerCurrency:n},createProps:{callback:d,type:r.a.bunkerstock},isConfirmDisabled:e=>0===e.quantity&&0===e.price})}},596:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return d}));var n=a(364),o=a(117),r=a(766),l=a(262),i=a(858),c=a(101);function s(e){return e.map(e=>{var t,a;return Object.assign(Object.assign({key:e.key},0===e.demurrageRate&&{demurrageRate:null===(t=e.cargo)||void 0===t?void 0:t.demurrageRate}),0===e.despatchRate&&{despatchRate:null===(a=e.cargo)||void 0===a?void 0:a.despatchRate})})}const d={getUpdatedLaytimeCalculation:function(e,t,a,l){var i,d,u,m,p,b,f;const y=a.every(e=>{var t;return null===(t=e.cargo)||void 0===t?void 0:t.isReversible});if(e&&t&&l)return new n.a(Object.assign(Object.assign({status:new o.a({statusTypeCode:"DFT"}),responsible:l,voyage:e,charterer:t,laytimeAggregation:new r.a({laytimeAggregationCode:y?"R":"N"}),currency:new c.a({currencyCode:null===(u=null===(d=null===(i=a[0])||void 0===i?void 0:i.cargo)||void 0===d?void 0:d.freightCurrency)||void 0===u?void 0:u.currencyCode}),cargoPorts:s(a)},y&&{demurrageRate:null===(p=null===(m=a[0])||void 0===m?void 0:m.cargo)||void 0===p?void 0:p.demurrageRate}),y&&{despatchRate:null===(f=null===(b=a[0])||void 0===b?void 0:b.cargo)||void 0===f?void 0:f.despatchRate}));throw new Error("Failed to generate new LaytimeCalculation object.")},resetCargoPorts:function(e){e.length&&Object(l.a)(i.a)},getCargoPortsForPost:s,getSelectedCargoPorts:function(e,t){return t.filter(t=>e.some(e=>t.key===e))},getVoyageChartererLabel:(e,t)=>{var a;return e?`${null===(a=null==e?void 0:e.voyageHeader)||void 0===a?void 0:a.referenceNo}${t?` - ${t.businessPartnerName} - ${t.businessPartnerCode}`:""}`:""}}},858:function(e,t,a){"use strict";a.d(t,"a",(function(){return A})),a.d(t,"b",(function(){return $}));a(59),a(10),a(11),a(268),a(269);var n=a(0),o=a.n(n),r=a(51),l=a(12),i=a(6),c=a(1),s=a(3),d=a(102),u=a(7),m=a(23),p=a(21),b=a(87),f=a(37),y=a(136),g=a(241),C=a(5);const[v]=Object(i.a)([s.a.IInternationalization]),{model:h,common:O}=v.lang(),P=[{content:h.reasonForCall,contentType:C.a.TEXT},{content:h.port,contentType:C.a.TEXT},{content:h.terminalName,contentType:C.a.TEXT},{content:`${h.quantity} (${O.mt})`,contentType:C.a.NUMBER,numberFormatOptions:{minDecimals:3,maxDecimals:3}},{content:h.commodity,contentType:C.a.TEXT}],j=["reasonForCall.reasonForCallDesc","port.portName","terminal.terminalName","cargoQuantity","cargo.commodity.commodityName"];var x=a(596),E=a(89),N=a(67),k=a(35),S=a(42),D=a(2517),L=a(2377),I=a(213),T=a(187),M=a(1329),U=a(503),R=a(86),F=a(202),w=a(71),K=a(99),q=a(46),V=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function i(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}c((n=n.apply(e,t||[])).next())}))};const A="CREATE_LC_CARGO_PORT_LIST_ID",z=Object(b.a)(["key","reasonForCall.reasonForCallDesc","port.portName","terminal.terminalName","cargoQuantity","cargo.commodity.commodityName","cargo.isReversible","cargo.demurrageRate","cargo.despatchRate","cargo.freightCurrency.currencyCode","demurrageRate","despatchRate","portCall.portCallSequence","laytimeTermsMeasurement.laytimeTermsMeasurementCode","laytimeTermsMeasurement.laytimeTermsMeasurementName"]),B=Object(b.a)(R.b.voyage),_=Object(b.a)(R.b.user),G=Object(I.a)(Object(T.a)(e=>({divider:{margin:e.spacing(2,0,2,0)}})));function $({reactKeyPrefix:e,open:t,onCloseModal:a,onCreate:b,voyage:C=null}){var v,h,O;const[I,T]=Object(i.a)([s.a.IInternationalization,u.a.ITSModelActions]),{model:$,common:Q,laytimeCalculations:H}=I.lang(),W=G({}),X=Object(m.a)(g.a.getUserData),J=Object(m.a)(S.a.getUserLocale)||k.f[0],[Y,Z]=Object(n.useState)(null),[ee,te]=Object(n.useState)(null!=C?C:null),[ae,ne]=Object(n.useState)(null),[oe,re]=Object(n.useState)([]),[le,ie]=Object(n.useState)(X),ce=Object(n.useRef)(!1),se=null!==(v=Object(m.a)(p.a.getTSModelsBuilt,c.a.voyage,B,"CREATE_LC_VOYAGE_LIST_ID"))&&void 0!==v?v:[],de=Object(n.useMemo)(()=>Object(M.a)(se,"voyageHeader.referenceNo").filter(e=>!e.isTc),[se]),ue=null!==(h=Object(m.a)(p.a.getTSModelsBuilt,c.a.cargoport,z,A))&&void 0!==h?h:[],me=Object(n.useMemo)(()=>Object(M.a)(ue,"portCall.portCallSequence"),[ue]),pe=null!==(O=Object(m.a)(p.a.getAllTSModelsBuilt,c.a.user,_))&&void 0!==O?O:[],be=Object(n.useMemo)(()=>Object(M.a)(pe,"userName"),[pe]);Object(n.useEffect)(()=>{if(Y){const e="filter=voyageHeader.voyageStatus.statusTypeCode(IN)(OPR,NOM,OPC,INV)",t="filter=voyageHeader.isBudget(EQ)false",a="filter=voyageHeader.isTemplate(EQ)false",n="filter=voyageHeader.isEstimate(EQ)false",o="filter=voyageHeader.isUnallocated(EQ)false",r="filter=fleetPlanVoyages.fleetPlan.fleetPlanCode(EQ)MASTER",l="filter=vessel.key(EQ)"+(null==Y?void 0:Y.key);T.loadMultipleAction({fields:B,identifier:"CREATE_LC_VOYAGE_LIST_ID",type:c.a.voyage,overwriteKeysOnLoad:!0,query:`${e}&${t}&${a}&${n}&${o}&${r}&${l}`})}},[Y]),Object(n.useEffect)(()=>{if(C&&ae||Y&&ae&&ee){const e="filter=cargo.voyage.key(EQ)"+(null==ee?void 0:ee.key),t="filter=cargo.charterer.key(EQ)"+ae.key,a="filter=laytimeCalculation(NULL)";T.loadMultipleAction({fields:z,identifier:A,type:c.a.cargoport,overwriteKeysOnLoad:!0,query:`${e}&${t}&${a}`})}},[ae,Y,ee]);const fe=Object(n.useCallback)(e=>V(this,void 0,void 0,(function*(){x.a.resetCargoPorts(me),re([]),ce.current=!1,Z(e),te(null),ne(null),q.a.next()})),[me]),ye=Object(n.useCallback)(e=>{re([]),te(e.voyage),ne(e.charterer)},[]),ge=Object(n.useCallback)(e=>{ie(e)},[]),Ce=Object(n.useMemo)(()=>C?C.cargos.filter(e=>e.charterer).map(e=>{var t;return{voyage:C,charterer:null!==(t=e.charterer)&&void 0!==t?t:new K.a({})}}):de.flatMap(e=>e.cargos.filter(e=>e.charterer).map(t=>{var a;return{voyage:e,charterer:null!==(a=t.charterer)&&void 0!==a?a:new K.a({})}})),[de,C]),ve=Object(n.useMemo)(()=>{const e=Object(U.a)(Ce.map(e=>({voyage:e.voyage,charterer:e.charterer,label:x.a.getVoyageChartererLabel(e.voyage,e.charterer)})),"label");return ce.current||(te(1===e.length?e[0].voyage:null),ne(1===e.length?e[0].charterer:null)),ce.current=!0,e},[Ce]),he=Object(n.useCallback)(()=>{const e=x.a.getUpdatedLaytimeCalculation(null==ee?void 0:ee.key,null==ae?void 0:ae.key,oe,null==le?void 0:le.key);return Object(E.a)(e,!0)},[oe,ae,le,ee]),Oe=Object(n.useCallback)(e=>{re(x.a.getSelectedCargoPorts(e,me))},[me]),Pe=Object(n.useCallback)(()=>{Z(null),te(null),ne(null),a(),x.a.resetCargoPorts(me),re([]),ie(X)},[a,me,X]),je=Object(n.useCallback)(()=>!(oe.length&&ee&&le),[oe.length,le,ee]),xe=Object(n.useMemo)(()=>{const t=[];return C||t.push(o.a.createElement(d.b,{reactKeyPrefix:e+"-vessels",label:$.vessel,type:c.a.vessel,onChange:fe,objectPaths:["vesselName"],formControlProps:{required:!0},shouldPreload:!0})),t.push(o.a.createElement(d.a,{label:Q.voyageCharterer,reactKeyPrefix:e+"-voyages-and-charterers",options:ve,disabled:!Y&&!(null==C?void 0:C.vessel),defaultSelectedOptions:Y||C?1===ve.length?ve[0]:ee?void 0:null:void 0,objectPaths:["label"],overrideDefaultSelectedOptions:!0,formControlProps:{required:!0},onChange:ye,noOptionsMessage:()=>Q.noOptionsFound}),o.a.createElement(d.a,{label:$.responsible,options:be,disabled:!X,objectPaths:[R.b.user[0]],defaultSelectedOptions:le,overrideDefaultSelectedOptions:!0,reactKeyPrefix:e+"-responsible",formControlProps:{required:!0},onChange:ge,noOptionsMessage:()=>Q.responsibleNotFound})),t},[C,Q.voyageCharterer,Q.noOptionsFound,Q.responsibleNotFound,e,ve,Y,ee,ye,$.responsible,$.vessel,be,X,le,ge,fe]),Ee=Object(n.useMemo)(()=>xe.map(e=>({value:e})),[xe]),Ne=Object(n.useMemo)(()=>Object(y.b)(me,j),[me]),ke=Object(n.useMemo)(()=>{if((C||Y)&&ee&&ae&&!me.length&&le)return o.a.createElement(D.a,{colSpan:me.length},o.a.createElement(L.a,null,H.noCargoPortsAvailable))},[H.noCargoPortsAvailable,ae,le,Y,ee,me.length,C]);return o.a.createElement(r.a,{modalProps:{confirmBtnName:Q.create,maxWidth:"md",onCloseModal:Pe,open:t,reactKeyPrefix:e,title:H.createLaytimeCalculation,fullscreenOnMobile:!0,fullWidth:!0},createProps:{type:c.a.laytimecalculation,callback:b},isConfirmDisabled:je,overrideGetData:he},o.a.createElement(w.a,null,o.a.createElement(f.a,{items:Ee,reactKeyPrefix:e+"filters",breakpoints:l.d})),o.a.createElement(F.a,{className:W.divider}),o.a.createElement(N.a,{title:$.cargoPorts,userLocale:J,data:Ne,headers:P,reactKeyPrefix:e+"cargo-ports-table",onRowSelect:Oe,selectable:!0,customisation:{disableSorting:!0},footer:ke}))}},878:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return s}));a(93);var n=a(19),o=a(1),r=a(2108),l=a(70),i=a(57);const c=e=>({CP:e.lang().model.cargoPort,PC:e.lang().model.portCall});function s(e,t,a,s,d,u){const{model:m,common:p}=d.getLanguageFile(),b={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"eventDesc",label:p.description,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"eventDesc")},{fieldName:"eventCode",label:p.code,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"eventCode"),textInputProps:{letterCase:i.a.UPPERCASE,validation:l.b.EventCode,onInputChange:(e,t)=>u.onChangeEventCode(t)}},{fieldName:"eventType",label:p.type,formControlProps:{required:!0},overrideFieldType:"object",typeaheadProps:{options:Object.values(c(d)),defaultSelectedOptions:c(d)[t.eventType]},onUpdateOverride:e=>a("eventType",Object(r.a)(c(d),t=>t===e))},{fieldName:"eventNo",label:m.sortOrder,formControlProps:{required:!0},numberInputProps:{maskSettings:{decimalScale:0}},onUpdateOverride:a.bind(null,"eventNo")},{fieldName:"isLaytimeEvent",label:m.useInLaytimeCalculations,overrideType:o.a.event,overrideObject:t,onUpdateOverride:a.bind(null,"isLaytimeEvent"),formControlLabelProps:{checked:t.isLaytimeEvent}}],object:t,type:o.a.event,userLocale:s};return Object(n.a)(b)}}}]);