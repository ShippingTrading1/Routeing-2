(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1313:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));var o=a(20),r=a(14),l=a(9),n=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n};function i(e){return o.a.IFleetPlanDropZoneHandlerFactory.toString()+e}let c=class{get(e){const t=i(e),a=r.a.get(t);if(!a)throw new Error(`There is no handler registered for drag type ${t}. Please register one with the inversify container.`);return a}};c=n([Object(l.injectable)()],c)},1400:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var o,r,l=a(9),n=a(115),i=a(3),c=a(673),s=a(7),d=a(31),u=a(21),g=a(1),m=a(164),p=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e,t){return function(a,o){t(a,o,e)}};let b=class{constructor(e,t){this.voyageUtilStatusChecks=e,this.store=t}canDrag(e){var t,a;const o=e.getItem().data;if(null===o||Object(n.e)(o))return!1;if(Object(n.a)(o)){const e=(null!==(t=u.a.getTSModelsBuilt(this.store.getState(),g.a.fleetplanvoyage,{voyage:{isTc:"*"}},m.b))&&void 0!==t?t:[]).find(e=>{var t,a;return(null===(t=null==e?void 0:e.voyage)||void 0===t?void 0:t.key)===(null===(a=o.voyage)||void 0===a?void 0:a.key)});return!(null===(a=null==e?void 0:e.voyage)||void 0===a?void 0:a.isTc)}const r=Object(n.b)(o)?o.voyage:o;return!!r&&(this.voyageUtilStatusChecks.canAllocate(r)||this.voyageUtilStatusChecks.canUnallocate(r))}};b=p([Object(l.injectable)(),v(0,Object(l.inject)(i.a.IVoyageUtilStatusChecks)),v(1,Object(l.inject)(s.a.Store)),y("design:paramtypes",["function"==typeof(o=void 0!==c.IVoyageUtilStatusChecks&&c.IVoyageUtilStatusChecks)?o:Object,"function"==typeof(r=void 0!==d.Store&&d.Store)?r:Object])],b)},1675:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var o,r,l,n,i,c,s,d=a(9),u=a(14),g=a(20),m=a(808),p=a(494),y=a(7),v=a(31),b=a(388),f=a(460),E=a(83),O=a(497),C=a(29),R=a(206),S=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(e,t){return function(a,o){t(a,o,e)}};let T=class extends m.a{constructor(e,t,a,o,r,l,n){super(e,t,a,o,r,l,n),this.store=e,this.selectedVoyageActions=t,this.selectedVesselActions=a,this.voyageApi=o,this.voyageHeaderApi=r,this.tsmodelActions=l,this.scenarioActions=n}onDrop(e,t){const{dropTargetItem:a,dropZoneType:o,monitor:r}=t;u.a.get(g.a.IFleetPlanDropZoneHandlerFactory).get(o).onDrop(e,a,r)}canDrop(e){const{dropTargetItem:t,dropZoneType:a,item:o,monitor:r}=e;return u.a.get(g.a.IFleetPlanDropZoneHandlerFactory).get(a).canDrop(t,o,r)}canDrag(e,t){return u.a.get(g.a.IFleetPlanDragHandlerFactory).get(e).canDrag(t)}};T=S([Object(d.injectable)(),_(0,Object(d.inject)(y.a.Store)),_(1,Object(d.inject)(y.a.ISelectedVoyageActions)),_(2,Object(d.inject)(y.a.ISelectedVesselActions)),_(3,Object(d.inject)(E.a.IVoyageApi)),_(4,Object(d.inject)(E.a.IVoyageHeaderApi)),_(5,Object(d.inject)(y.a.ITSModelActionsAsync)),_(6,Object(d.inject)(y.a.IScenarioActions)),h("design:paramtypes",["function"==typeof(o=void 0!==v.Store&&v.Store)?o:Object,"function"==typeof(r=void 0!==p.ISelectedVoyageActions&&p.ISelectedVoyageActions)?r:Object,"function"==typeof(l=void 0!==b.ISelectedVesselActions&&b.ISelectedVesselActions)?l:Object,"function"==typeof(n=void 0!==f.IVoyageApi&&f.IVoyageApi)?n:Object,"function"==typeof(i=void 0!==O.IVoyageHeaderApi&&O.IVoyageHeaderApi)?i:Object,"function"==typeof(c=void 0!==C.ITSModelActionsAsync&&C.ITSModelActionsAsync)?c:Object,"function"==typeof(s=void 0!==R.IScenarioActions&&R.IScenarioActions)?s:Object])],T)},1676:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a(9),r=a(198),l=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n};let n=class{getMondayOfWeek(e){const t=e.getDay();return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(0===t?-6:1)-t)}getFirstDayOfMonth(e){return new Date(e.getFullYear(),e.getMonth(),1)}changeDate(e,t,a){const o=new Date(e);switch(t){case r.a.WEEK:o.setDate(o.getDate()+7*a);break;case r.a.MONTH:o.setMonth(o.getMonth()+1*a)}return o}increaseDate(e,t){return this.changeDate(e,t,1)}decreaseDate(e,t){return this.changeDate(e,t,-1)}getNewDatesWhenTimeunitChanged(e,t){let a=new Date,o=new Date;switch(e.timeUnit){case r.a.WEEK:a=new Date(this.getMondayOfWeek(t)),o=new Date(a),o.setDate(o.getDate()+7*e.unitValue);break;case r.a.MONTH:a=new Date(this.getFirstDayOfMonth(t)),o=new Date(a),o.setMonth(o.getMonth()+1*e.unitValue)}return{start:a,end:o}}getSchedulersHeight(e,t,a){const o=e.current,r=t.current;let l=0;if(o){if(l=o.clientHeight,l-=8,r&&(l-=r.clientHeight),a)return l-12;l/=2}return l}getSecondSchedulerHeight(e,t){const a=t.current;let o=0;return a&&e&&(o=e+(e-a.clientHeight)),o}};n=l([Object(o.injectable)()],n)},1694:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(9),r=a(115),l=a(826),n=a(156),i=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n};let c=class extends l.a{canDrop(e,t,a){const o=a.getItem().data;if(null===e||o.key===(null==e?void 0:e.key)||Object(r.e)(e)||Object(r.e)(o)||Object(r.d)(e)||Object(r.a)(o))return!1;const l=Object(n.c)(o)?o.voyage:o;return!(l&&Object(n.g)(l)&&!this.voyageUtilStatusChecks.canAllocate(l)&&!this.voyageUtilStatusChecks.canUnallocate(l))&&(!!e.voyage&&(this.voyageUtilStatusChecks.canAllocate(e.voyage)||this.voyageUtilStatusChecks.canUnallocate(e.voyage)))}getSequence(e){return e}};c=i([Object(o.injectable)()],c)},1695:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(9),r=a(826),l=a(115),n=a(156),i=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n};let c=class extends r.a{canDrop(e,t,a){const o=a.getItem().data;if(null===e||o.key===(null==e?void 0:e.key)||Object(l.e)(e)||Object(l.e)(o)||Object(l.d)(e)||Object(l.a)(o))return!1;const r=Object(n.c)(o)?o.voyage:o;return!!r&&Object(n.g)(r)&&(this.voyageUtilStatusChecks.canAllocate(r)||this.voyageUtilStatusChecks.canUnallocate(r))}getSequence(e){return e+1}};c=i([Object(o.injectable)()],c)},1696:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(59);var o=a(9),r=a(115),l=a(645),n=a(84),i=a(1194),c=a(21),s=a(1),d=a(164),u=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},g=function(e,t,a,o){return new(a||(a=Promise))((function(r,l){function n(e){try{c(o.next(e))}catch(e){l(e)}}function i(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}c((o=o.apply(e,t||[])).next())}))};let m=class extends l.a{onDrop(e,t,a){var o,l;return g(this,void 0,void 0,(function*(){const e=a.getItem().data;if(!t||!Object(r.b)(t)||!t.voyage)return void n.a.debug("Wrong data sent to CargoOntoZone.onDrop");const c=null!==(l=null===(o=e.voyage)||void 0===o?void 0:o.cargos[0])&&void 0!==l?l:a.getItem().data;if(!Object(r.a)(c))return;yield Object(i.a)(c,t.voyage,t.voyage.vessel,!0,!0)}))}canDrop(e,t,a){var o,l,n,i,u,g;if(!e||!Object(r.b)(e)||!e.voyage)return!1;const m=null!==(n=null===(l=null===(o=a.getItem().data)||void 0===o?void 0:o.voyage)||void 0===l?void 0:l.cargos[0])&&void 0!==n?n:a.getItem().data,p=e&&t.data&&e.key===t.data.key,y=m&&Object(r.a)(m)&&e&&e.voyage.key===(null===(i=m.voyage)||void 0===i?void 0:i.key),v=(null!==(u=c.a.getTSModelsBuilt(this.store.getState(),s.a.fleetplanvoyage,{voyage:{isTc:"*"}},d.b))&&void 0!==u?u:[]).find(t=>{var a,o;return(null===(a=null==t?void 0:t.voyage)||void 0===a?void 0:a.key)===(null===(o=null==e?void 0:e.voyage)||void 0===o?void 0:o.key)});return!(!m||!Object(r.a)(m)||p||y||(null===(g=null==v?void 0:v.voyage)||void 0===g?void 0:g.isTc))}};m=u([Object(o.injectable)()],m)},1700:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(59);var o=a(9),r=a(115),l=a(645),n=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},i=function(e,t,a,o){return new(a||(a=Promise))((function(r,l){function n(e){try{c(o.next(e))}catch(e){l(e)}}function i(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}c((o=o.apply(e,t||[])).next())}))};let c=class extends l.a{canDrop(e,t,a){var o,l;const n=a.getItem().data;if(n&&Object(r.a)(n)&&(null===(o=n.voyage)||void 0===o?void 0:o.key)!==(null==e?void 0:e.key)&&!(null===(l=n.voyage)||void 0===l?void 0:l.isTc))return!0;if(!n||!Object(r.b)(n)||n.key===(null==e?void 0:e.key))return!1;const i=n.voyage;return!(i&&!this.voyageUtilStatusChecks.canUnallocate(i))}onDrop(e,t,a){var o;return i(this,void 0,void 0,(function*(){const l=a.getItem().data;if(!Object(r.b)(l)&&!Object(r.a)(l)||l.key===(null==t?void 0:t.key))return;const n=this.scenarioApi.getSelected();if(!(null==n?void 0:n.fleetPlan))throw new Error("Selected scenario is null or missing fleet plan");if(l&&l.voyage&&Object(r.a)(l)&&(yield this.cargoController.unallocateCargo(l),yield this.scenarioActions.reloadColumnData(e,l.voyage,null)),!Object(r.a)(l)&&l.voyage&&l.vessel){const t={refreshFleetPlan:!1,ballastPort:null===(o=l.voyage)||void 0===o?void 0:o.ballastPort};yield this.voyageController.unallocateVoyage(l.voyage,l.vessel,t),yield this.scenarioActions.reloadColumnData(e,l,null)}}))}};c=n([Object(o.injectable)()],c)},1701:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(59);var o=a(9),r=a(115),l=a(156),n=a(645),i=a(117),c=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},s=function(e,t,a,o){return new(a||(a=Promise))((function(r,l){function n(e){try{c(o.next(e))}catch(e){l(e)}}function i(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}c((o=o.apply(e,t||[])).next())}))};let d=class extends n.a{onDrop(e,t,a){return s(this,void 0,void 0,(function*(){const o=a.getItem().data;if(Object(r.a)(o)||o.key===(null==t?void 0:t.key)||!t)return;const n=this.scenarioApi.getSelected();if(!(null==n?void 0:n.fleetPlan))throw new Error("Selected scenario is null or missing fleet plan");const c=yield this.fleetPlanVoyageApi.getLastFleetPlanVoyage(t.vessel,n.key),s=c.length>0?c[0].sequence+1:1;if(Object(r.e)(t)&&t.vessel)if(Object(l.c)(o)&&o.voyage)yield this.voyageController.moveVoyage(o.voyage,t.vessel,o,s,!1),yield this.scenarioActions.reloadColumnData(e,o,t);else if(Object(r.f)(o)){const a={refreshFleetPlan:!1,status:new i.a({statusTypeCode:"SCH"})};yield this.voyageController.allocateVoyage(o,t.vessel,s,!1,n.fleetPlan.key,a),yield this.scenarioActions.reloadColumnData(e,null,t)}}))}canDrop(e,t,a){const o=a.getItem().data;if(null===e||o.key===(null==e?void 0:e.key)||Object(r.e)(o)||Object(r.a)(o))return!1;const n=Object(l.c)(o)?o.voyage:o;return!(n&&Object(l.g)(n)&&!this.voyageUtilStatusChecks.canAllocate(n)&&!this.voyageUtilStatusChecks.canUnallocate(n))}};d=c([Object(o.injectable)()],d)},1702:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(59);var o=a(9),r=a(826),l=a(156),n=a(115),i=a(117),c=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},s=function(e,t,a,o){return new(a||(a=Promise))((function(r,l){function n(e){try{c(o.next(e))}catch(e){l(e)}}function i(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}c((o=o.apply(e,t||[])).next())}))};let d=class extends r.a{canDrop(e,t,a){const o=a.getItem().data,r=Object(l.c)(o)?o.voyage:o;return!(r&&Object(l.g)(r)&&!this.voyageUtilStatusChecks.canAllocate(r)&&!this.voyageUtilStatusChecks.canUnallocate(r))}onDrop(e,t,a){return s(this,void 0,void 0,(function*(){const o=a.getItem().data;if(!o||!t||!Object(n.d)(t))return;const r=this.scenarioApi.getSelected();if(!(null==r?void 0:r.fleetPlan))throw new Error("Selected scenario is null or missing fleet plan");const l=yield this.fleetPlanVoyageApi.getLastFleetPlanVoyage(t,r.key),c=l.length>0?l[0].sequence+1:1;if(Object(n.b)(o)&&o.voyage&&c)yield this.voyageController.moveVoyage(o.voyage,t,o,c,!1,void 0,!0);else if(Object(n.f)(o)&&(null==r?void 0:r.fleetPlan)&&c){const e={refreshFleetPlan:!1,status:new i.a({statusTypeCode:"SCH"})};yield this.voyageController.allocateVoyage(o,t,c,!0,r.fleetPlan.key,e)}yield this.scenarioActions.reloadColumnData(e,Object(n.f)(o)?null:o,t)}))}getSequence(e){return e}};d=c([Object(o.injectable)()],d)},1868:function(e,t,a){"use strict";a.d(t,"g",(function(){return mo})),a.d(t,"i",(function(){return po})),a.d(t,"e",(function(){return yo})),a.d(t,"b",(function(){return vo})),a.d(t,"c",(function(){return bo})),a.d(t,"d",(function(){return fo})),a.d(t,"a",(function(){return Eo})),a.d(t,"h",(function(){return Ro})),a.d(t,"f",(function(){return ho}));a(10),a(11);var o=a(2539),r=a(0),l=a.n(r),n=a(97),i=a(234),c=a(1265),s=a(1288),d=a(1210),u=a(76),g=a(65),m=a(6),p=a(47),y=a(33),v=a(185),b=a(570),f=a(703),E=a(706),O=a(707),C=a(917),R=a(704),S=a(705),h=a(94),_=a(7),T=a(30),A=a(41),P=a(819),j=a(3),I=a(15),D=a(80),F=a(27),L=a(1259),V=a(1267),G=a(197),N=a(214),k=a(2532),x=a(213),w=a(187),U=a(129),H=a(473);const M=(e,t,a,o,r,n)=>l.a.createElement(H.a,{id:e,className:r.button,disableElevation:!0,onClick:()=>n(o),variant:a===o?"contained":"outlined"},t);var Y=a(243),B=a(218),K=a(246),z=a(1823),q=a.n(z);const W=Object(x.a)(e=>Object(w.a)({button:{padding:e.spacing(.5)}}));function X({title:e,children:t,reactKeyPrefix:a}){const[o,n]=Object(r.useState)(null),i=W({}),[c]=Object(m.a)([j.a.IInternationalization]),{common:s}=c.getLanguageFile(),d=Object(r.useCallback)(e=>{n(e.currentTarget)},[n]),u=Object(r.useCallback)(()=>{n(null)},[n]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{title:s.settings},l.a.createElement(K.a,{id:a+"icon-button",className:i.button,onClick:d},l.a.createElement(q.a,null))),l.a.createElement(Y.a,{reactKeyPrefix:a,anchorEl:o,open:!!o,title:e,onCloseActionMenu:u},t))}var Q=a(2094),$=a(2345),Z=a(2536);function J({limit:e,min:t,reactKeyPrefix:a,setVisibleColumns:o,visibleColumns:r}){const n=t=>Object(Z.a)(t,1,e);return l.a.createElement(N.a,{container:!0,spacing:2,justifyContent:"space-between"},l.a.createElement(N.a,{item:!0,xs:9.5},l.a.createElement(Q.a,{value:r,valueLabelDisplay:"auto",step:1,min:t,max:e,marks:!0,onChange:(e,t)=>o(t),id:a+"-slider"})),l.a.createElement(N.a,{item:!0,xs:2.5},l.a.createElement($.a,{id:a+"-input",value:r,fullWidth:!0,onChange:e=>o(n(Number(e.target.value))),onBlur:()=>o(n(r)),inputProps:{step:1,min:t,max:e,type:"number","aria-labelledby":"input-slider"}})))}const ee=l.a.memo(J);function te({limit:e,min:t,reactKeyPrefix:a,setVisiblePorts:o,visiblePorts:r}){const n=t=>Object(Z.a)(t,1,e);return l.a.createElement(N.a,{container:!0,spacing:2,justifyContent:"space-between"},l.a.createElement(N.a,{item:!0,xs:9.5},l.a.createElement(Q.a,{value:r,valueLabelDisplay:"auto",step:1,min:t,max:e,marks:!0,onChange:(e,t)=>o(t),id:a+"-slider"})),l.a.createElement(N.a,{item:!0,xs:2.5},l.a.createElement($.a,{id:a+"-input",value:r,fullWidth:!0,onChange:e=>o(n(Number(e.target.value))),onBlur:()=>o(n(r)),inputProps:{step:1,min:t,max:e,type:"number","aria-labelledby":"input-slider"}})))}const ae=l.a.memo(te),oe=Object(x.a)(()=>Object(w.a)({buttonGroup:{display:"flex",flexWrap:"wrap"},button:{whiteSpace:"pre",flex:"0 0 33.333333%"}}));function re({reactKeyPrefix:e,onChangeVisibleColumns:t,visibleColumns:a,columnGrouping:o,onChangeColumnGrouping:n,rowGrouping:i,onChangeRowGrouping:c,onChangeVisiblePorts:s,visiblePorts:d,visibleColumnsLimit:u}){const[g]=Object(m.a)([j.a.IInternationalization]),{common:p,fas:y,model:v}=g.getLanguageFile(),b=oe({}),f=Object(r.useMemo)(()=>M(e+"-column-grouping-vessel",v.vessel,o,U.a.VESSEL,b,n),[o,v.vessel,n,e,b]),E=Object(r.useMemo)(()=>M(e+"-column-grouping-load-area",v.loadArea,o,U.a.LOAD_AREA,b,n),[o,v.loadArea,n,e,b]),O=Object(r.useMemo)(()=>M(e+"-column-grouping-discharge-area",v.dischargeArea,o,U.a.DISCHARGE_AREA,b,n),[o,v.dischargeArea,n,e,b]),C=Object(r.useMemo)(()=>M(e+"-row-grouping-week",p.week,i,U.a.WEEK,b,c),[p.week,c,e,i,b]),R=Object(r.useMemo)(()=>M(e+"-row-grouping-month",p.month,i,U.a.MONTH,b,c),[p.month,c,e,i,b]),S=Object(r.useMemo)(()=>M(e+"-row-grouping-none",p.none,i,U.a.NONE,b,c),[p.none,c,e,i,b]);return l.a.createElement(X,{title:p.view,reactKeyPrefix:e+"right-menu"},l.a.createElement("div",null,l.a.createElement(N.a,null,l.a.createElement("p",null,p.columns),l.a.createElement(ee,{setVisibleColumns:t,reactKeyPrefix:e+"-visible-columns",limit:Math.min(u,Ro),min:1,visibleColumns:a}),l.a.createElement("p",null,y.noOfDisplayedPorts),l.a.createElement(ae,{reactKeyPrefix:e+"-visible-ports",limit:20,min:3,visiblePorts:d,setVisiblePorts:s})),l.a.createElement(N.a,null,l.a.createElement("p",null,p.columnGrouping),l.a.createElement(k.a,{className:b.buttonGroup,color:"primary","aria-label":"outlined primary button group"},f,E,O)),l.a.createElement(N.a,null,l.a.createElement("p",null,p.rowGrouping),l.a.createElement(k.a,{className:b.buttonGroup,color:"primary","aria-label":"outlined primary button group"},C,R,S))))}const le=l.a.memo(re);var ne=a(1),ie=a(21),ce=a(132),se=a(164),de=a(573),ue=a(485),ge=a(372),me=a(142),pe=a(431),ye=a(637),ve=a(179);var be=a(24),fe=a(14),Ee=a(4),Oe=a(64),Ce=a(91),Re=a(58),Se=a(186),he=a(391);function _e(e,t,a){!function(e){const t=fe.a.get(j.a.FilterResolver);t.addFilterResolver("LOAD_AREA_FILTER_RESOLVER_CARGO",t=>{var a,o;const r=null!==(a=Re.a.getFirstLoadCargoPort(t.cargoPorts))&&void 0!==a?a:new Oe.a({});return Se.a.getArea(null!==(o=null==r?void 0:r.port)&&void 0!==o?o:new Ce.a({}),null!=e?e:-1)}),t.addFilterResolver("DISCHARGE_AREA_FILTER_RESOLVER_CARGO",t=>{var a,o;const r=null!==(a=Re.a.getLastDischargeCargoPort(t.cargoPorts))&&void 0!==a?a:new Oe.a({});return Se.a.getArea(null!==(o=null==r?void 0:r.port)&&void 0!==o?o:new Ce.a({}),null!=e?e:-1)})}(a);const o=fe.a.get(j.a.IInternationalization),r={field:"cargo.cargoPorts.port.portAreas.area.areaDescription",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"loadAreaFilter",resolveField:"LOAD_AREA_FILTER_RESOLVER_CARGO"},l={field:"cargo.cargoPorts.port.portAreas.area.areaDescription",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"dischargeAreaFilter",resolveField:"DISCHARGE_AREA_FILTER_RESOLVER_CARGO"};return[{label:o.lang().model.loading,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.loading,options:Object(he.a)(t,null!=a?a:-1),objectPaths:["areaDescription"]},filters:[r]},{label:o.lang().model.discharging,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.discharging,options:Object(he.a)(t,null!=a?a:-1),objectPaths:["areaDescription"]},filters:[l]}]}var Te=a(86),Ae=a(96);function Pe(e,t){fe.a.get(j.a.FilterResolver).addFilterResolver("CHARTERER_FILTER_RESOLVER_CARGO",e=>{var t,a;return null!==(a=null===(t=e.charterer)||void 0===t?void 0:t.key)&&void 0!==a?a:-1});const a=Object(he.c)(t),o=fe.a.get(j.a.IInternationalization),r={field:"cargos.charterer.key",resolveField:"CHARTERER_FILTER_RESOLVER_CARGO",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"chartererFilter"};return[{label:o.lang().model.charterer,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.charterer,options:a,query:Ae.b,resolver:e=>Object(Te.c)(e,Te.b.businessPartner)},filters:[r]}]}function je(e,t){!function(){const e=fe.a.get(j.a.FilterResolver);e.addFilterResolver("COMMODITY_FILTER_RESOLVER_CARGO",e=>{var t,a;return null!==(a=null===(t=e.commodity)||void 0===t?void 0:t.key)&&void 0!==a?a:-1}),e.addFilterResolver("COMMODITY_CLASS_FILTER_RESOLVER_CARGO",e=>{var t,a,o,r;return null!==(r=null===(o=null===(a=null===(t=e.commodity)||void 0===t?void 0:t.commodityGroup)||void 0===a?void 0:a.commodityClass)||void 0===o?void 0:o.key)&&void 0!==r?r:-1}),e.addFilterResolver("CARGO_TYPE_FILTER_RESOLVER_CARGO",e=>{var t,a;return null!==(a=null===(t=e.cargoType)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}();const a=Object(he.d)(t),o=Object(he.e)(t),r=Object(he.b)(t),l=fe.a.get(j.a.IInternationalization),n={field:"cargo.commodity.key",resolveField:"COMMODITY_FILTER_RESOLVER_CARGO",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityFilter"},i={field:"cargo.cargoGroup.commodityClass.key",resolveField:"COMMODITY_CLASS_FILTER_RESOLVER_CARGO",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityClassFilter"},c={field:"cargo.cargoType.key",resolveField:"CARGO_TYPE_FILTER_RESOLVER_CARGO",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"cargoTypeFilter"};return[{label:l.lang().model.commodity,filterObjectValuePath:"key",typeaheadProps:{label:l.lang().model.commodity,options:a,resolver:e=>e.commodityName},filters:[n]},{label:l.lang().model.commodityClass,filterObjectValuePath:"key",typeaheadProps:{label:l.lang().model.commodityClass,options:o,resolver:e=>e.commodityClassDesc},filters:[i]},{label:l.lang().model.cargoType,filterObjectValuePath:"key",typeaheadProps:{label:l.lang().model.cargoType,options:r,resolver:e=>e.cargoTypeName},filters:[c]}]}function Ie(e,t){fe.a.get(j.a.FilterResolver).addFilterResolver("TRADE_FILTER_RESOLVER_CARGO",e=>{var t,a;return null!==(a=null===(t=e.leg)||void 0===t?void 0:t.key)&&void 0!==a?a:-1});const a=Object(he.f)(t),o=fe.a.get(j.a.IInternationalization),r={field:"cargo.leg.key",resolveField:"TRADE_FILTER_RESOLVER_CARGO",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"tradeFilter"};return[{label:o.lang().model.trade,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.trade,options:a,resolver:e=>e.legDesc},filters:[r]}]}const De=l.a.memo(e=>{const t=fe.a.get(j.a.IInternationalization);return l.a.createElement(l.a.Fragment,null,l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:Pe(e.groupCode,e.unallocatedCargos),type:Ee.b.TYPEAHEAD,label:t.lang().model.charterer,filterCode:e.groupCode+"charterer",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:je(e.groupCode,e.unallocatedCargos),type:Ee.b.TYPEAHEAD,label:t.lang().model.cargo,filterCode:e.groupCode+"cargo",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:Ie(e.groupCode,e.unallocatedCargos),type:Ee.b.TYPEAHEAD,label:t.lang().model.trade,filterCode:e.groupCode+"trade",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:_e(e.groupCode,e.unallocatedCargos,e.areaReportKey),type:Ee.b.TYPEAHEAD,label:t.lang().model.areaDescription,filterCode:e.groupCode+"area",clearOnMount:!1}))});var Fe=a(115),Le=a(119),Ve=a(60);function Ge(e,t,a,o){!function(e){const t=fe.a.get(j.a.FilterResolver);t.addFilterResolver("LOAD_AREA_FILTER_RESOLVER_VOYAGE",t=>Se.a.getArea(Ve.a.getFirstLoadPort(t.portCallsFromVoyage),null!=e?e:-1)),t.addFilterResolver("LOAD_AREA_FILTER_RESOLVER_FPV",t=>{var a,o,r;return Object(Fe.e)(t)?Se.a.getArea(null!==(a=t.openPositionPort)&&void 0!==a?a:new Ce.a({}),null!=e?e:-1):Se.a.getArea(Ve.a.getFirstLoadPort(null!==(r=null===(o=t.voyage)||void 0===o?void 0:o.portCallsFromVoyage)&&void 0!==r?r:[]),null!=e?e:-1)}),t.addFilterResolver("DISCHARGE_AREA_FILTER_RESOLVER_VOYAGE",t=>Se.a.getArea(Ve.a.getLastDischargePort(t.portCallsFromVoyage),null!=e?e:-1)),t.addFilterResolver("DISCHARGE_AREA_FILTER_RESOLVER_FPV",t=>{var a,o,r;return Object(Fe.e)(t)?Se.a.getArea(null!==(a=t.openPositionPort)&&void 0!==a?a:new Ce.a({}),null!=e?e:-1):Se.a.getArea(Ve.a.getLastDischargePort(null!==(r=null===(o=t.voyage)||void 0===o?void 0:o.portCallsFromVoyage)&&void 0!==r?r:[]),null!=e?e:-1)})}(o);const r=fe.a.get(j.a.IInternationalization),l=t?"":"voyage.",n={field:l+"portCallsFromVoyage.port.portAreas.area.areaDescription",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"loadAreaFilter",resolveField:t?"LOAD_AREA_FILTER_RESOLVER_VOYAGE":"LOAD_AREA_FILTER_RESOLVER_FPV"},i={field:l+"portCallsFromVoyage.port.portAreas.area.areaDescription",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"dischargeAreaFilter",resolveField:t?"DISCHARGE_AREA_FILTER_RESOLVER_VOYAGE":"DISCHARGE_AREA_FILTER_RESOLVER_FPV"};return[{label:r.lang().model.loading,filterObjectValuePath:"key",typeaheadProps:{label:r.lang().model.loading,options:Object(Le.a)(a,null!=o?o:-1),resolver:e=>`${e.areaDescription} ${e.areaCode}`},filters:[n]},{label:r.lang().model.discharging,filterObjectValuePath:"key",typeaheadProps:{label:r.lang().model.discharging,options:Object(Le.a)(a,null!=o?o:-1),resolver:e=>`${e.areaDescription} ${e.areaCode}`},filters:[i]}]}function Ne(e,t){const a=fe.a.get(j.a.IInternationalization),o={field:"vessel.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselNameFilter"},r={field:"vessel.vesselType.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselTypeFilter"};return[{label:a.lang().model.name,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.name,options:t,resolver:e=>{var t;return null!==(t=e.vesselName)&&void 0!==t?t:" "}},filters:[o]},{label:a.lang().common.type,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().common.type,options:Object(Le.l)(t),resolver:e=>{var t;return null!==(t=e.vesselTypeDesc)&&void 0!==t?t:" "}},filters:[r]}]}function ke(e,t,a){const o=fe.a.get(j.a.IInternationalization),r=t?"":"voyage.",l={field:r+"voyageHeader.referenceNo",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"referenceNoFilter"},n={field:r+"voyageHeader.voyageStatus.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.NUMBER,optionCode:"statusTypeFilter"};return[{label:o.lang().model.referenceNumber,filterObjectValuePath:"referenceNo",typeaheadProps:{label:o.lang().model.referenceNumber,options:Object(Le.n)(a).filter(e=>{var t,a;return(null!==(a=null===(t=e.referenceNo)||void 0===t?void 0:t.length)&&void 0!==a?a:-1)>0}),resolver:e=>{var t;return null!==(t=e.referenceNo)&&void 0!==t?t:" "}},filters:[l]},{label:o.lang().model.voyageStatus,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.voyageStatus,options:Object(Le.j)(a),resolver:e=>{var t;return null!==(t=e.statusTypeDesc)&&void 0!==t?t:" "}},filters:[n]}]}function xe(e,t,a){!function(){const e=fe.a.get(j.a.FilterResolver);e.addFilterResolver("COMMODITY_FILTER_RESOLVER_VOYAGE",e=>{var t;return null===(t=e.cargos)||void 0===t?void 0:t.map(e=>{var t,a;return null!==(a=null===(t=e.commodity)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}),e.addFilterResolver("COMMODITY_FILTER_RESOLVER_FPV",e=>{var t,a;return null===(a=null===(t=e.voyage)||void 0===t?void 0:t.cargos)||void 0===a?void 0:a.map(e=>{var t,a;return null!==(a=null===(t=e.commodity)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}),e.addFilterResolver("CHARTERER_FILTER_RESOLVER_VOYAGE",e=>{var t;return null===(t=e.cargos)||void 0===t?void 0:t.map(e=>{var t,a;return null!==(a=null===(t=e.charterer)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}),e.addFilterResolver("CHARTERER_FILTER_RESOLVER_FPV",e=>{var t,a;return null===(a=null===(t=e.voyage)||void 0===t?void 0:t.cargos)||void 0===a?void 0:a.map(e=>{var t,a;return null!==(a=null===(t=e.charterer)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}),e.addFilterResolver("CARGO_TYPE_FILTER_RESOLVER_VOYAGE",e=>{var t;return null===(t=e.cargos)||void 0===t?void 0:t.map(e=>{var t,a;return null!==(a=null===(t=e.cargoType)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}),e.addFilterResolver("CARGO_TYPE_FILTER_RESOLVER_FPV",e=>{var t,a;return null===(a=null===(t=e.voyage)||void 0===t?void 0:t.cargos)||void 0===a?void 0:a.map(e=>{var t,a;return null!==(a=null===(t=e.cargoType)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})}),e.addFilterResolver("COMMODITY_CLASS_FILTER_RESOLVER_VOYAGE",e=>{var t;return null===(t=e.cargos)||void 0===t?void 0:t.map(e=>{var t,a,o,r;return null!==(r=null===(o=null===(a=null===(t=e.commodity)||void 0===t?void 0:t.commodityGroup)||void 0===a?void 0:a.commodityClass)||void 0===o?void 0:o.key)&&void 0!==r?r:-1})}),e.addFilterResolver("COMMODITY_CLASS_FILTER_RESOLVER_FPV",e=>{var t,a;return null===(a=null===(t=e.voyage)||void 0===t?void 0:t.cargos)||void 0===a?void 0:a.map(e=>{var t,a,o,r;return null!==(r=null===(o=null===(a=null===(t=e.commodity)||void 0===t?void 0:t.commodityGroup)||void 0===a?void 0:a.commodityClass)||void 0===o?void 0:o.key)&&void 0!==r?r:-1})})}();const o=Object(Le.f)(a),r=Object(Le.e)(a),l=Object(Le.k)(a),n=Object(Le.g)(a),i=Object(Le.d)(a),c=fe.a.get(j.a.IInternationalization),s=t?"":"voyage.",d={field:s+"cargos.commodity.key",resolveField:t?"COMMODITY_FILTER_RESOLVER_VOYAGE":"COMMODITY_FILTER_RESOLVER_FPV",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityFilter"},u={field:s+"cargos.charterer.key",resolveField:t?"CHARTERER_FILTER_RESOLVER_VOYAGE":"CHARTERER_FILTER_RESOLVER_FPV",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"chartererFilter"},g={field:s+"voyageHeader.leg.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"tradeFilter"},m={field:s+"cargos.cargoGroup.commodityClass.key",resolveField:t?"COMMODITY_CLASS_FILTER_RESOLVER_VOYAGE":"COMMODITY_CLASS_FILTER_RESOLVER_FPV",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityClassFilter"},p={field:s+"cargos.cargoType.key",resolveField:t?"CARGO_TYPE_FILTER_RESOLVER_VOYAGE":"CARGO_TYPE_FILTER_RESOLVER_FPV",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"cargoTypeFilter"};return[{label:c.lang().model.commodity,filterObjectValuePath:"key",typeaheadProps:{label:c.lang().model.commodity,options:o,resolver:e=>e.commodityName},filters:[d]},{label:c.lang().model.charterer,filterObjectValuePath:"key",typeaheadProps:{label:c.lang().model.charterer,options:r,resolver:e=>Object(Te.c)(e,Te.b.businessPartner)},filters:[u]},{label:c.lang().model.trade,filterObjectValuePath:"key",typeaheadProps:{label:c.lang().model.trade,options:l,resolver:e=>e.legDesc},filters:[g]},{label:c.lang().model.commodityClass,filterObjectValuePath:"key",typeaheadProps:{label:c.lang().model.commodityClass,options:n,resolver:e=>e.commodityClassDesc},filters:[m]},{label:c.lang().model.cargoType,filterObjectValuePath:"key",typeaheadProps:{label:c.lang().model.cargoType,options:i,resolver:e=>e.cargoTypeName},filters:[p]}]}const we=l.a.memo(e=>{const t=fe.a.get(j.a.IInternationalization),a=Object(Le.o)(e.unallocatedVoyages,e.allocatedFleetPlanVoyages);return l.a.createElement(l.a.Fragment,null,l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:ke(e.groupCode,e.isCommitment,a),type:Ee.b.TYPEAHEAD,label:t.lang().model.voyage,filterCode:e.groupCode+"_VOYAGE",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:Ne(e.groupCode,e.vessels),type:Ee.b.TYPEAHEAD,label:t.lang().model.vessel,filterCode:e.groupCode+"_VESSEL",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:Ge(e.groupCode,e.isCommitment,a,e.areaReportKey),type:Ee.b.TYPEAHEAD,label:t.lang().model.areaDescription,filterCode:e.groupCode+"_AREA",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e.groupCode,configs:xe(e.groupCode,e.isCommitment,a),type:Ee.b.TYPEAHEAD,label:t.lang().common.more,filterCode:e.groupCode+"_MORE",clearOnMount:!1}))});function Ue(e,t,a,o){switch(e.toLowerCase()){case ne.a.vesselopenposition.name.toLowerCase():F.a.openDrawer(t,I.a.vesselOpenPositionDrawer,a,o);break;case ne.a.voyage.name.toLowerCase():F.a.openDrawer(t,I.a.voyageDrawer,a,o);break;case ne.a.cargo.name.toLowerCase():F.a.openDrawer(t,I.a.cargoDrawer,a,o)}}var He=a(20),Me=a(412);function Ye(e){const{selectedCard:t,setSelectedCard:a}=Object(r.useContext)(i.a),o=Object(n.h)();Object(r.useEffect)(()=>{var o,r;const l=Object(Me.a)(),n=e?null===(o=l[l.length-1])||void 0===o?void 0:o.id:null===(r=l[0])||void 0===r?void 0:r.id;n&&t!==n&&a(n)},[o])}const Be=l.a.memo(e=>{const{deps:[t,a],state:{allocatedFleetPlanVoyages:o,selectedAreaReport:c,unallocatedCargos:s,vesselOpenPositions:d,fleetplanVessels:u,selectedScenario:g},reactKeyPrefix:m,columnGrouping:p,rowGrouping:y,firstVisibleColumn:v,visibleColumns:b,visiblePorts:f,onChangeFirstVisibleColumn:E,onChangeVisibleColumns:O,onChangeColumnGrouping:C,onChangeRowGrouping:R,onChangeVisiblePorts:S,onChangeShowCommitments:h,showCommitments:_}=e,T=Object(n.h)(),A=Object(n.g)(),{setSelectedCard:P}=Object(r.useContext)(i.a),j=null==c?void 0:c.key,I=Object(r.useCallback)((e,t)=>{Ue(e,t,T,A)},[A,T]),D=Object(r.useMemo)(()=>l.a.createElement(le,{columnGrouping:p,onChangeColumnGrouping:C,onChangeRowGrouping:R,onChangeVisibleColumns:O,onChangeVisiblePorts:S,reactKeyPrefix:m+"-settings-menu-right",rowGrouping:y,visibleColumns:b,visiblePorts:f,visibleColumnsLimit:d.length>0?d.length:Ro}),[p,C,R,O,S,m,y,d.length,b,f]),F=Object(r.useCallback)((e,a)=>{var o,r,l;t.onDrop(e,a),(null===(l=null===(r=null===(o=a.monitor)||void 0===o?void 0:o.getItem())||void 0===r?void 0:r.data)||void 0===l?void 0:l.key)&&P(a.monitor.getItem().data.key)},[t,P]);return Ye(!0),Object(r.useEffect)(()=>{(null==g?void 0:g.scenarioCode)&&a.loadCargoManagementData()},[null==g?void 0:g.scenarioCode]),l.a.createElement(L.a,{reactKeyPrefix:m+"-board",leftData:s,rightData:[...d,...o],DisplayCard:V.a,onDrop:F,canDrop:t.canDrop,canDrag:t.canDrag,showCardDetails:!0,boardType:G.a.CargoManagement,onClickCard:I,columnGrouping:p,settingsMenu:D,rowGrouping:y,firstVisibleColumn:v,visibleColumns:b,visiblePorts:f,onChangeFirstVisibleColumn:E,onChangeShowCommitments:h,showCommitments:_,filtersLeft:l.a.createElement(De,{groupCode:Eo,isCommitment:!0,unallocatedCargos:s,areaReportKey:j}),filtersRight:l.a.createElement(we,{groupCode:mo,isCommitment:!1,vessels:u,unallocatedVoyages:[],areaReportKey:j,allocatedFleetPlanVoyages:o})})}),Ke=Object(p.a)(e=>{var t,a,o,r,l,n;const i=null!==(t=h.a.getFiltersByGroupCode(e,Eo))&&void 0!==t?t:[],c=ge.a.getSelectedAreaReport(e),s=null!==(a=h.a.getFiltersByGroupCode(e,mo))&&void 0!==a?a:[],d=null!==(o=ie.a.getTSModelsBuilt(e,ne.a.cargo,pe.c,se.c))&&void 0!==o?o:[],u=null!==(r=ie.a.getTSModelsBuilt(e,ne.a.fleetplanvoyage,pe.a,se.b))&&void 0!==r?r:[],g=null!==(l=ie.a.getTSModelsBuilt(e,ne.a.vesselopenposition,pe.b,de.a))&&void 0!==l?l:[];let m=null!==(n=ie.a.getTSModelsBuilt(e,ne.a.vessel,ye.a,ue.a))&&void 0!==n?n:[];const p=Object(ce.e)(u,s),y=s.filter(e=>e.field.toLowerCase().includes("vessel")||e.field.toLowerCase().includes("area"));let v=Object(ce.e)(g,y);s.length>0&&s.some(e=>e.filterCode===yo)&&(m=m.filter(e=>p.some(t=>{var a;return(null===(a=t.vessel)||void 0===a?void 0:a.key)===e.key})),v=v.filter(e=>p.some(t=>{var a;return(null===(a=t.vessel)||void 0===a?void 0:a.key)===e.key})));const b=me.a.get(e,ne.a.scenario),f=ie.a.getTSModelBuilt(e,ne.a.scenario,b||0,ve.a);return{allocatedFleetPlanVoyages:p,fleetplanVessels:m,selectedAreaReport:c,unallocatedCargos:Object(ce.e)(d,i),vesselOpenPositions:v,selectedScenario:f}},Object(m.b)([He.a.IFleetPlansController,_.a.IScenarioActions],Object(n.k)(Be)));a(158);var ze=a(323),qe=a(588),We=a(5),Xe=a(67),Qe=a(42),$e=a(40),Ze=a(105);const Je={getHeaders:e=>{const{model:t,fas:a}=e.getLanguageFile();return[{content:t.cargoReference,contentType:We.a.TEXT},{content:t.charterer,contentType:We.a.TEXT},{content:t.commodity,contentType:We.a.TEXT},{content:t.quantity,contentType:We.a.TEXT},{content:a.firstLoadPort,contentType:We.a.TEXT},{content:a.lastDischargePort,contentType:We.a.TEXT},{content:t.vessel,contentType:We.a.TEXT},{content:t.voyageReference,contentType:We.a.TEXT},{alignHeaderContent:We.c.LEFT,content:t.cargoStatus,contentType:We.a.ELEMENT}]},getRows:function(e){return e.map((e,t)=>{var a,o,r,n,i,c,s,d,u,g,m,p,y,v,b,f,E,O,C,R,S,h,_,T,A,P;const{cargoReference:j}=e,I=null!==(o=null===(a=e.charterer)||void 0===a?void 0:a.businessPartnerName)&&void 0!==o?o:"",D=null!==(n=null===(r=e.commodity)||void 0===r?void 0:r.commodityName)&&void 0!==n?n:"",F=e.cargoQuantity,L=Re.a.getFirstLoadCargoPort(e.cargoPorts),V=(null===(i=e.voyage)||void 0===i?void 0:i.isTc)?null!==(u=null===(d=null===(s=null===(c=e.voyage)||void 0===c?void 0:c.tcs[0])||void 0===s?void 0:s.deliveryPort)||void 0===d?void 0:d.portName)&&void 0!==u?u:"":null!==(m=null===(g=null==L?void 0:L.port)||void 0===g?void 0:g.portName)&&void 0!==m?m:"",G=Re.a.getLastDischargeCargoPort(e.cargoPorts),N=(null===(p=e.voyage)||void 0===p?void 0:p.isTc)?null!==(f=null===(b=null===(v=null===(y=e.voyage)||void 0===y?void 0:y.tcs[0])||void 0===v?void 0:v.redeliveryPort)||void 0===b?void 0:b.portName)&&void 0!==f?f:"":null!==(O=null===(E=null==G?void 0:G.port)||void 0===E?void 0:E.portName)&&void 0!==O?O:"",k=null!==(S=null===(R=null===(C=e.voyage)||void 0===C?void 0:C.vessel)||void 0===R?void 0:R.vesselName)&&void 0!==S?S:" - ",x=null!==(T=null===(_=null===(h=e.voyage)||void 0===h?void 0:h.voyageHeader)||void 0===_?void 0:_.referenceNo)&&void 0!==T?T:" - ",w=null!==(P=null===(A=e.bookingStatus)||void 0===A?void 0:A.statusTypeDesc)&&void 0!==P?P:"";return{content:[j,I,D,F,V,N,k,x,{content:l.a.createElement($e.a,{key:t,label:w,priority:Ze.a.getStatusPriority(w,ne.a.cargo)}),rawValue:w}],id:e.key}})}},et=(e,t,a)=>{const o={field:"cargoReference",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"cargoReference",typeaheadProps:{options:t.filter(e=>e.cargoReference),objectPaths:["cargoReference"]},filters:[o]}]},tt=(e,t,a)=>{const o={field:"charterer.businessPartnerName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"charterer.businessPartnerName",typeaheadProps:{options:t.filter(e=>{var t;return null===(t=e.charterer)||void 0===t?void 0:t.businessPartnerName}),objectPaths:["charterer.businessPartnerName"]},filters:[o]}]},at=(e,t,a)=>{const o={field:"commodity.commodityName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"commodity.commodityName",typeaheadProps:{options:t.filter(e=>{var t;return null===(t=e.commodity)||void 0===t?void 0:t.commodityName}),objectPaths:["commodity.commodityName"]},filters:[o]}]},ot=(e,t,a)=>{const o={field:"voyage.vessel.vesselName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"voyage.vessel.vesselName",typeaheadProps:{options:t.filter(e=>{var t;return null===(t=e.voyage)||void 0===t?void 0:t.vessel}),objectPaths:["voyage.vessel.vesselName"]},filters:[o]}]},rt=(e,t,a)=>{const o={field:"voyage.voyageHeader.referenceNo",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"voyage.voyageHeader.referenceNo",typeaheadProps:{options:t.filter(e=>{var t,a;return null===(a=null===(t=e.voyage)||void 0===t?void 0:t.voyageHeader)||void 0===a?void 0:a.referenceNo}),objectPaths:["voyage.voyageHeader.referenceNo"]},filters:[o]}]},lt=(e,t,a)=>{const o={field:"bookingStatus.statusTypeDesc",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"bookingStatus.statusTypeDesc",typeaheadProps:{options:t.filter(e=>{var t;return null===(t=e.bookingStatus)||void 0===t?void 0:t.statusTypeDesc}),objectPaths:["bookingStatus.statusTypeDesc"]},filters:[o]}]},nt=({reactKeyPrefix:e,cargoes:t})=>{const[a]=Object(m.a)([j.a.IInternationalization]),{model:o}=a.getLanguageFile();return l.a.createElement(l.a.Fragment,null,l.a.createElement(be.a,{reactKeyPrefix:e+"-cargo-reference",configs:et("FAS_CARGOES_TABLE_FILTER_CODE",t,o.cargoReference),type:Ee.b.TYPEAHEAD,label:o.cargoReference,filterCode:"FAS_CARGOES_TABLE_FILTER_CODE_CARGO_REFERENCE",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-charterer",configs:tt("FAS_CARGOES_TABLE_FILTER_CODE",t,o.charterer),type:Ee.b.TYPEAHEAD,label:o.charterer,filterCode:"FAS_CARGOES_TABLE_FILTER_CODE_CHARTERER",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-commodity",configs:at("FAS_CARGOES_TABLE_FILTER_CODE",t,o.commodity),type:Ee.b.TYPEAHEAD,label:o.commodity,filterCode:"FAS_CARGOES_TABLE_FILTER_CODE_COMMODITY",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-vessel",configs:ot("FAS_CARGOES_TABLE_FILTER_CODE",t,o.vessel),type:Ee.b.TYPEAHEAD,label:o.vessel,filterCode:"FAS_CARGOES_TABLE_FILTER_CODE_VESSEL",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-voyage-reference",configs:rt("FAS_CARGOES_TABLE_FILTER_CODE",t,o.voyageReference),type:Ee.b.TYPEAHEAD,label:o.voyageReference,filterCode:"FAS_CARGOES_TABLE_FILTER_CODE_VOYAGE_REFERENCE",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-cargo-status",configs:lt("FAS_CARGOES_TABLE_FILTER_CODE",t,o.cargoStatus),type:Ee.b.TYPEAHEAD,label:o.cargoStatus,filterCode:"FAS_CARGOES_TABLE_FILTER_CODE_CARGO_STATUS",clearOnMount:!1}))},it=l.a.memo(nt);var ct=a(16),st=a(88);const dt=new st.a,{model:ut}=dt.getLanguageFile(),gt=[{field:"key",label:ut.createdDate,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.DESC,queryParamName:"key"}],mt={default:{createdDate:{field:"key",label:ut.createdDate,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"key"},cargoReference:{field:"cargoReference",label:ut.cargoReference,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"cargoReference"},businessPartner:{field:"charterer.businessPartnerName",label:ut.charterer,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"charterer.businessPartnerName"},commodity:{field:"commodity.commodityName",label:ut.commodity,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"commodity.commodityName"},statusType:{field:"bookingStatus.statusTypeDesc",label:ut.cargoStatus,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"bookingStatus.statusTypeDesc"}},optional:{charterer:{field:"commodity.commodityName",label:ut.charterer,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"commodity.commodityName"},quantity:{field:"cargoQuantity",label:ut.cargoQuantity,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"cargoQuantity"},vessel:{field:"voyage.vessel.vesselName",label:ut.vessel,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyage.vessel.vesselName"},voyageReference:{field:"voyage.voyageHeader.referenceNo",label:ut.vessel,groupCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyage.voyageHeader.referenceNo"}}};var pt=a(837),yt=a(409),vt=a(287),bt=a(330);const ft={container:{display:"flex",flexDirection:"column",position:"relative",flex:"1 0",pt:1,px:3,pb:3}};function Et(e){const{location:t,history:a,reactKeyPrefix:o,state:{userLocale:n,selectedScenario:i,unfilteredCargoes:c,cargoes:s},deps:[d,u,g,m]}=e,[p,y]=Object(r.useState)(!0);Object(r.useEffect)(()=>{p&&gt.forEach(e=>{u.dispatch(g.putSortAction(e))}),y(!1)},[]);const v=Object(r.useMemo)(()=>Je.getHeaders(d),[d]),b=Object(r.useMemo)(()=>Je.getRows(s),[s]),f=Object(r.useCallback)(e=>F.a.openDrawer(e,I.a.cargoDrawer,t,a),[a,t]);return Object(r.useEffect)(()=>{(null==i?void 0:i.scenarioCode)&&m.loadFasCargoesData()},[null==i?void 0:i.scenarioCode]),l.a.createElement(ze.a,{sx:ft.container},l.a.createElement(bt.a,null,l.a.createElement(it,{reactKeyPrefix:o+"-filters",cargoes:c}),l.a.createElement(pt.a,{reactKeyPrefix:o+"-sort",sortCode:"FAS_CARGOES_TABLE_SORT_GROUP_CODE",availableSortOptions:Object.values(mt.default)})),l.a.createElement(Xe.a,{headers:v,data:b,reactKeyPrefix:o+"-table",userLocale:n,customisation:{responsive:!0,disableToolbar:!0,disableCardSorting:!0,disableSorting:!1,height:{type:We.d.FILL}},onRowClick:f}))}const Ot=Object(p.a)(e=>{var t,a,o;const r=Qe.a.getUserLocale(e),l=null!==(t=h.a.getFiltersByGroupCode(e,"FAS_CARGOES_TABLE_FILTER_CODE"))&&void 0!==t?t:[],n=yt.a.getSortsByGroupCode(e,"FAS_CARGOES_TABLE_SORT_GROUP_CODE"),i=null!==(a=ie.a.getTSModelsBuilt(e,ne.a.cargo,qe.b,se.c))&&void 0!==a?a:[],c=(null!==(o=ie.a.getTSModelsBuilt(e,ne.a.fleetplanvoyage,qe.a,se.b))&&void 0!==o?o:[]).reduce((e,{voyage:t})=>(t&&t.cargos.map(t=>e.push(t)),e),[]),s=me.a.get(e,ne.a.scenario),d=[...i,...c];return{userLocale:r,selectedScenario:ie.a.getTSModelBuilt(e,ne.a.scenario,s||0,ve.a),unfilteredCargoes:d,cargoes:Object(vt.c)(Object(ce.e)(d,l),n)}},Object(m.b)([j.a.IInternationalization,_.a.Store,_.a.ISortActions,_.a.IScenarioActions],Object(n.k)(Object(r.memo)(Et))));const Ct={getHeaders:e=>{const{model:t,fas:a}=e.getLanguageFile();return[{content:t.vessel,contentType:We.a.TEXT},{content:t.referenceNumber,contentType:We.a.TEXT},{alignHeaderContent:We.c.LEFT,content:t.voyageStatus,contentType:We.a.ELEMENT},{content:t.trade,contentType:We.a.TEXT},{content:a.startDate,contentType:We.a.DATE},{content:a.endDate,contentType:We.a.DATE},{content:t.ballastPort,contentType:We.a.TEXT},{content:t.loadPort,contentType:We.a.TEXT},{content:t.dischargePort,contentType:We.a.TEXT}]},getRows:function(e){return e.map((e,t)=>{var a,o,r,n,i,c,s,d,u,g,m,p,y,v,b,f,E,O,C,R,S,h,_,T,A,P;const j=Ve.a.getPerformanceCargo(e.cargos),I=Re.a.getFirstLoadCargoPort(j.cargoPorts),D=Re.a.getLastDischargeCargoPort(j.cargoPorts),F=null!==(o=null===(a=e.voyageHeader)||void 0===a?void 0:a.voyageStartDate)&&void 0!==o?o:new Date,L=null!==(n=null===(r=e.voyageHeader)||void 0===r?void 0:r.voyageEndDate)&&void 0!==n?n:new Date,V=null!==(s=null===(c=null===(i=e.voyageHeader)||void 0===i?void 0:i.voyageStatus)||void 0===c?void 0:c.statusTypeDesc)&&void 0!==s?s:"",G=e.isTc?null!==(g=null===(u=null===(d=e.tcs[0])||void 0===d?void 0:d.deliveryPort)||void 0===u?void 0:u.portName)&&void 0!==g?g:"":null!==(p=null===(m=null==I?void 0:I.port)||void 0===m?void 0:m.portName)&&void 0!==p?p:"",N=e.isTc?null!==(b=null===(v=null===(y=e.tcs[0])||void 0===y?void 0:y.redeliveryPort)||void 0===v?void 0:v.portName)&&void 0!==b?b:"":null!==(E=null===(f=null==D?void 0:D.port)||void 0===f?void 0:f.portName)&&void 0!==E?E:"";return{content:[null!==(C=null===(O=e.vessel)||void 0===O?void 0:O.vesselName)&&void 0!==C?C:"",null!==(S=null===(R=e.voyageHeader)||void 0===R?void 0:R.referenceNo)&&void 0!==S?S:"",{content:l.a.createElement($e.a,{key:t,label:V,priority:Ze.a.getStatusPriority(V,ne.a.voyage)}),rawValue:V},null!==(T=null===(_=null===(h=e.voyageHeader)||void 0===h?void 0:h.leg)||void 0===_?void 0:_.legDesc)&&void 0!==T?T:"",F,L,null!==(P=null===(A=e.ballastPort)||void 0===A?void 0:A.portName)&&void 0!==P?P:"",G,N],id:e.key}})}},Rt=(new st.a).getLanguageFile(),St=[{field:"voyageHeader.key",label:Rt.model.createdDate,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.DESC,queryParamName:"voyageHeader.key"}],ht={default:{ballastPort:{field:"ballastPort.portName",label:Rt.model.ballastPort,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"ballastPort.portName"},businessPartnerName:{field:"cargos.charterer.businessPartnerName",label:Rt.model.charterer,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"cargos.charterer.businessPartnerName"},commodityName:{field:"cargos.commodity.commodityName",label:Rt.model.commodity,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"cargos.commodity.commodityName"},referenceNo:{field:"voyageHeader.referenceNo",label:Rt.model.referenceNumber,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyageHeader.referenceNo"},trade:{field:"voyageHeader.leg.legDesc",label:Rt.model.trade,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyageHeader.leg.legDesc"},vessel:{field:"vessel.vesselName",label:Rt.model.vessel,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"vessel.vesselName"},voyageStatusTypeDesc:{field:"voyageHeader.voyageStatus.statusTypeDesc",label:Rt.model.voyageStatus,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyageHeader.voyageStatus.statusTypeDesc"},voyageHeaderKey:{field:"voyageHeader.key",label:Rt.model.createdDate,groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyageHeader.key"}},optional:{endDate:{field:"voyageHeader.voyageEndDate",groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyageHeader.voyageEndDate"},startDate:{field:"voyageHeader.voyageStartDate",groupCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",operator:ct.b.ASC,queryParamName:"voyageHeader.voyageStartDate"}}},_t=(e,t,a)=>{const o={field:"vessel.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselFilter"};return[{label:a,filterObjectValuePath:"key",typeaheadProps:{options:Object(Le.m)(t),objectPaths:["vesselName"],resolver:e=>{var t;return null!==(t=e.vesselName)&&void 0!==t?t:" "}},filters:[o]}]},Tt=(e,t,a)=>{const o={field:"voyageHeader.referenceNo",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"referenceNo",typeaheadProps:{options:Object(Le.n)(t).filter(e=>{var t,a;return(null!==(a=null===(t=e.referenceNo)||void 0===t?void 0:t.length)&&void 0!==a?a:-1)>0}),objectPaths:["referenceNo"],resolver:e=>{var t;return null!==(t=e.referenceNo)&&void 0!==t?t:" "}},filters:[o]}]},At=(e,t,a)=>{const o={field:"voyageHeader.voyageStatus.statusTypeDesc",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:a,filterObjectValuePath:"statusTypeDesc",typeaheadProps:{options:Object(Le.j)(t),objectPaths:["statusTypeDesc"],resolver:e=>{var t;return null!==(t=e.statusTypeDesc)&&void 0!==t?t:" "}},filters:[o]}]},Pt=(e,t,a)=>{const o={field:"ballastPort.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"ballastFilter"};return[{label:a,filterObjectValuePath:"key",typeaheadProps:{options:Object(Le.b)(t),objectPaths:["portName"],resolver:e=>{var t;return null!==(t=e.portName)&&void 0!==t?t:" "}},filters:[o]}]};const jt=(e,t,a)=>{fe.a.get(j.a.FilterResolver).addFilterResolver("LOAD_PORT_FILTER_RESOLVER_VOYAGE",e=>{var t;const a=Ve.a.getPerformanceCargo(e.cargos),o=null!==(t=Re.a.getFirstLoadCargoPort(a.cargoPorts))&&void 0!==t?t:new Oe.a({});return null==o?void 0:o.port});const o={field:"cargos.cargoPorts.port.portName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"loadPortFilter",resolveField:"LOAD_PORT_FILTER_RESOLVER_VOYAGE"};return[{label:a,filterObjectValuePath:"key",typeaheadProps:{label:a,options:Object(Le.i)(t),objectPaths:["portName"]},filters:[o]}]};const It=(e,t,a)=>{fe.a.get(j.a.FilterResolver).addFilterResolver("DISCHARGE_PORT_FILTER_RESOLVER_VOYAGE",e=>{var t;const a=Ve.a.getPerformanceCargo(e.cargos),o=null!==(t=Re.a.getLastDischargeCargoPort(a.cargoPorts))&&void 0!==t?t:new Oe.a({});return null==o?void 0:o.port});const o={field:"cargos.cargoPorts.port.portName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"dischargePortFilter",resolveField:"DISCHARGE_PORT_FILTER_RESOLVER_VOYAGE"};return[{label:a,filterObjectValuePath:"key",typeaheadProps:{label:a,options:Object(Le.i)(t),objectPaths:["portName"]},filters:[o]}]},Dt=(e,t)=>{const[a]=Object(m.a)([j.a.IInternationalization]),{model:o}=a.getLanguageFile(),r={field:"voyageHeader.leg.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING};return[{label:o.trade,filterObjectValuePath:"key",typeaheadProps:{options:Object(Le.k)(t),objectPaths:["legDesc"],resolver:e=>e.legDesc},filters:[r]}]};var Ft=a(488);const Lt=({reactKeyPrefix:e,voyages:t,user:a})=>{const[o]=Object(m.a)([j.a.IInternationalization]),{common:r,model:n}=o.getLanguageFile();return l.a.createElement(l.a.Fragment,null,l.a.createElement(be.a,{reactKeyPrefix:e+"-my-voyages",configs:(i="FAS_VOYAGES_TABLE_FILTER_CODE",c=a.key,s=r.myVoyages,[{label:s,filterObjectValuePath:"key",filters:Object(Ft.a)(i,"",c)}]),type:Ee.b.BOOLEAN,label:r.myVoyages,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_MY_VOYAGES",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-vessel",configs:_t("FAS_VOYAGES_TABLE_FILTER_CODE",t,n.vessel),type:Ee.b.TYPEAHEAD,label:n.vessel,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_VESSEL",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-reference-no",configs:Tt("FAS_VOYAGES_TABLE_FILTER_CODE",t,n.referenceNumber),type:Ee.b.TYPEAHEAD,label:n.referenceNumber,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_REFERENCE_NO",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-voyage-status",configs:At("FAS_VOYAGES_TABLE_FILTER_CODE",t,n.voyageStatus),type:Ee.b.TYPEAHEAD,label:n.voyageStatus,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_VOYAGE_STATUS",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-ballast",configs:Pt("FAS_VOYAGES_TABLE_FILTER_CODE",t,n.ballast),type:Ee.b.TYPEAHEAD,label:n.ballast,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_BALLAST",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-load-port",configs:jt("FAS_VOYAGES_TABLE_FILTER_CODE",t,n.loadPort),type:Ee.b.TYPEAHEAD,label:n.loadPort,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_LOAD_PORT",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-discharge-port",configs:It("FAS_VOYAGES_TABLE_FILTER_CODE",t,n.dischargePort),type:Ee.b.TYPEAHEAD,label:n.dischargePort,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_DISCHARGE_PORT",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:e+"-trade",configs:Dt("FAS_VOYAGES_TABLE_FILTER_CODE",t),type:Ee.b.TYPEAHEAD,label:n.trade,filterCode:"FAS_VOYAGES_TABLE_FILTER_CODE_TRADE",clearOnMount:!1}));var i,c,s},Vt=l.a.memo(Lt);var Gt=a(683),Nt=a(32);const kt={container:{display:"flex",flexDirection:"column",position:"relative",flex:"1 0",pt:1,px:3,pb:3}};function xt(e){const{location:t,history:a,reactKeyPrefix:o,state:{unfilteredVoyages:n,userLocale:i,voyages:c,selectedScenario:s,user:d},deps:[u,g,m,p]}=e,[y,v]=Object(r.useState)(!0);Object(r.useEffect)(()=>{y&&St.forEach(e=>{g.dispatch(m.putSortAction(e))}),v(!1)},[]);const b=Object(r.useMemo)(()=>Ct.getRows(c),[c]),f=Object(r.useMemo)(()=>Ct.getHeaders(u),[u]),E=Object(r.useCallback)(e=>F.a.openDrawer(e,I.a.voyageDrawer,t,a),[a,t]);return Object(r.useEffect)(()=>{(null==s?void 0:s.scenarioCode)&&p.loadFasVoyagesData()},[null==s?void 0:s.scenarioCode]),l.a.createElement(ze.a,{sx:kt.container},l.a.createElement(bt.a,null,l.a.createElement(Vt,{reactKeyPrefix:o+"-filter",voyages:n,user:d}),l.a.createElement(pt.a,{reactKeyPrefix:o+"-sort",sortCode:"FAS_VOYAGES_TABLE_SORT_GROUP_CODE",availableSortOptions:Object.values(ht.default)})),l.a.createElement(Xe.a,{headers:f,data:b,reactKeyPrefix:o+"-table",userLocale:i,customisation:{responsive:!0,disableToolbar:!0,disableCardSorting:!0,disableSorting:!1,height:{type:We.d.FILL}},onRowClick:E}))}const wt=Object(p.a)(e=>{var t,a,o;const r=Object(Nt.a)(e),l=Qe.a.getUserLocale(e),n=yt.a.getSortsByGroupCode(e,"FAS_VOYAGES_TABLE_SORT_GROUP_CODE"),i=null!==(t=h.a.getFiltersByGroupCode(e,"FAS_VOYAGES_TABLE_FILTER_CODE"))&&void 0!==t?t:[],c=[...null!==(a=ie.a.getTSModelsBuilt(e,ne.a.voyage,Gt.a,se.d))&&void 0!==a?a:[],...(null!==(o=ie.a.getTSModelsBuilt(e,ne.a.fleetplanvoyage,Gt.b,se.b))&&void 0!==o?o:[]).reduce((e,{voyage:t})=>(t&&e.push(t),e),[])],s=me.a.get(e,ne.a.scenario),d=ie.a.getTSModelBuilt(e,ne.a.scenario,s||0,ve.a);return{unfilteredVoyages:c,userLocale:l,voyages:Object(vt.c)(Object(ce.e)(c,i),n),selectedScenario:d,user:r}},Object(m.b)([j.a.IInternationalization,_.a.Store,_.a.ISortActions,_.a.IScenarioActions],Object(n.k)(Object(r.memo)(xt))));var Ut=a(572),Ht=a(78);const Mt=fe.a.get(j.a.IInternationalization),{common:Yt,dates:Bt}=Mt.lang(),Kt=e=>({label:Bt.nextWeek,filters:[Qt(e,Ee.c.LESS_THAN_OR_EQUAL,Ht.a.getDateStringWithoutUTC(Object(Ut.a)(new Date,7)),Bt.nextWeek)]}),zt=e=>({label:Bt.next2Weeks,filters:[Qt(e,Ee.c.LESS_THAN_OR_EQUAL,Ht.a.getDateStringWithoutUTC(Object(Ut.a)(new Date,14)),Bt.next2Weeks)]}),qt=e=>({label:Bt.nextMonth,filters:[Qt(e,Ee.c.LESS_THAN_OR_EQUAL,Ht.a.getDateStringWithoutUTC(Object(Ut.a)(new Date,30)),Bt.nextMonth)]}),Wt=e=>({label:Bt.nextYear,filters:[Qt(e,Ee.c.LESS_THAN_OR_EQUAL,Ht.a.getDateStringWithoutUTC(Object(Ut.a)(new Date,365)),Bt.nextYear)]}),Xt=e=>({label:Yt.future,filters:[Qt(e,Ee.c.GREATER_THAN_OR_EQUAL,Ht.a.getDateStringWithoutUTC(new Date),Yt.future)]});function Qt(e,t,a,o){return{field:"voyageEndDate",filterGroupCode:e,queryParamName:"voyage.voyageHeader.voyageEndDate",optionCode:e+"_"+o,operator:t,type:Ee.d.DATE,value:a}}const $t=e=>{const t=[Kt(e)],a=(e=>[{label:Bt.next3Months,filters:[Object.assign(Object.assign({},Qt(e,Ee.c.LESS_THAN_OR_EQUAL,Ht.a.getDateStringWithoutUTC(Object(Ut.a)(new Date,90)),Bt.next3Months)),{filterCode:e+"_DATE"})]}])(e);return{options:t,default:a,all:[Kt(e),zt(e),qt(e),...a,Wt(e),Xt(e)]}},Zt=l.a.memo(({reactKeyPrefix:e,selectedScenario:t})=>{const[a,o]=Object(m.a)([j.a.IInternationalization,_.a.IScenarioActions]),{common:n}=a.getLanguageFile(),i=Object(r.useCallback)(()=>{t&&o.refreshScenarioFleetPlanData()},[o,t]),c=Object(r.useMemo)(()=>$t(v.a).all,[]);return l.a.createElement(be.a,{reactKeyPrefix:e+"-date",onChangeCallback:i,configs:c,type:Ee.b.RADIO,label:n.date,filterCode:v.b,clearOnMount:!1,isClearable:!1})});var Jt=a(342);const ea=l.a.memo(e=>{const{deps:[t,a],state:{allocatedFleetPlanVoyages:o,fleetplanVessels:c,selectedAreaReport:s,unfilteredUnallocatedVoyages:d,unfilteredAllocatedFleetPlanVoyages:u,unallocatedVoyages:g,vesselOpenPositions:m,lastPortCalls:p,selectedScenario:y},reactKeyPrefix:v,columnGrouping:b,rowGrouping:f,firstVisibleColumn:E,visibleColumns:O,visiblePorts:C,onChangeFirstVisibleColumn:R,onChangeVisibleColumns:S,onChangeColumnGrouping:h,onChangeRowGrouping:_,onChangeVisiblePorts:T,onChangeShowCommitments:A,showCommitments:P}=e,j=null==s?void 0:s.key,I=Object(n.h)(),D=Object(n.g)(),{setSelectedCard:F}=Object(r.useContext)(i.a),N=Object(r.useCallback)((e,t)=>{Ue(e,t,I,D)},[D,I]);Ye();const k=Object(r.useMemo)(()=>l.a.createElement(le,{columnGrouping:b,onChangeColumnGrouping:h,onChangeRowGrouping:_,onChangeVisibleColumns:S,onChangeVisiblePorts:T,reactKeyPrefix:v+"-settings-menu-right",rowGrouping:f,visibleColumns:O,visiblePorts:C,visibleColumnsLimit:m.length>0?m.length:Ro}),[b,h,_,S,T,v,f,m.length,O,C]),x=Object(r.useCallback)((e,a)=>{var o,r,l,n;t.onDrop(e,a);const i=null===(r=null===(o=a.monitor)||void 0===o?void 0:o.getItem())||void 0===r?void 0:r.data;if(i){const e=i.$tsmodelClassName===ne.a.fleetplanvoyage.name.toLowerCase()?null===(n=null===(l=i)||void 0===l?void 0:l.voyage)||void 0===n?void 0:n.key:i.key;F(e)}},[t,F]);return Object(r.useEffect)(()=>{(null==y?void 0:y.scenarioCode)&&a.loadOpenPositionsData()},[null==y?void 0:y.scenarioCode]),l.a.createElement(L.a,{reactKeyPrefix:v+"-board",leftData:g,rightData:[...m,...o,...p],DisplayCard:V.a,onDrop:x,canDrop:t.canDrop,canDrag:t.canDrag,boardType:G.a.OpenPositions,onClickCard:N,columnGrouping:b,settingsMenu:k,rowGrouping:f,firstVisibleColumn:E,visibleColumns:O,visiblePorts:C,onChangeFirstVisibleColumn:R,onChangeShowCommitments:A,showCommitments:P,filtersLeft:l.a.createElement(we,{groupCode:po,isCommitment:!0,vessels:c,areaReportKey:j,unallocatedVoyages:d,allocatedFleetPlanVoyages:[]}),filtersRight:l.a.createElement(we,{groupCode:mo,isCommitment:!1,vessels:c,areaReportKey:j,unallocatedVoyages:[],allocatedFleetPlanVoyages:u})})}),ta=Object(p.a)(e=>{var t,a,o,r,l,n;const i=null!==(t=h.a.getFiltersByGroupCode(e,po))&&void 0!==t?t:[],c=null!==(a=h.a.getFiltersByGroupCode(e,mo))&&void 0!==a?a:[],s=null!==(o=ie.a.getTSModelsBuilt(e,ne.a.voyage,Jt.d,se.d))&&void 0!==o?o:[],d=null!==(r=ie.a.getTSModelsBuilt(e,ne.a.fleetplanvoyage,Jt.b,se.b))&&void 0!==r?r:[],u=null!==(l=ie.a.getTSModelsBuilt(e,ne.a.vesselopenposition,Jt.c,de.a))&&void 0!==l?l:[];let g=null!==(n=ie.a.getTSModelsBuilt(e,ne.a.vessel,ye.a,ue.a))&&void 0!==n?n:[];const m=ge.a.getSelectedAreaReport(e),p=Object(ce.e)(d,c),y=c.filter(e=>e.field.toLowerCase().includes("vessel")||e.field.toLowerCase().includes("area"));let v=Object(ce.e)(u,y);c.length>0&&c.some(e=>e.filterCode===yo)&&(g=g.filter(e=>p.some(t=>{var a;return(null===(a=t.vessel)||void 0===a?void 0:a.key)===e.key})),v=v.filter(e=>p.some(t=>{var a;return(null===(a=t.vessel)||void 0===a?void 0:a.key)===e.key})));const b=p.map(e=>{var t;const a=null===(t=e.voyage)||void 0===t?void 0:t.portCallsFromVoyage.find(e=>!!e.isLastPortCall);return a&&(a.voyage=e.voyage),a}).filter(e=>e),f=me.a.get(e,ne.a.scenario),E=ie.a.getTSModelBuilt(e,ne.a.scenario,f||0,ve.a);return{allocatedFleetPlanVoyages:p,fleetplanVessels:g,selectedAreaReport:m,unfilteredAllocatedFleetPlanVoyages:d,unfilteredUnallocatedVoyages:s,unallocatedVoyages:Object(ce.e)(s,i),vesselOpenPositions:v,lastPortCalls:b,selectedScenario:E}},Object(m.b)([He.a.IFleetPlansController,_.a.IScenarioActions],Object(n.k)(ea)));var aa=a(2523),oa=a(198),ra=a(933),la=a(713),na=a(892),ia=a(1835),ca=a(708);var sa=a(160),da=a(38);const ua=e=>({container:{flex:"1 0 0%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},schedulers:{left:0,right:0,px:3,pb:1,display:"flex",flexFlow:"column",position:"relative"},top:{top:0,overflowY:"scroll",overflowX:"hidden",border:"1px solid "+da.b.bergenRain.secondary[4],borderBottom:"2px solid "+sa.a.schedulerBoard[3],zIndex:1,borderTop:0,height:"fit-content",maxHeight:e.schedulersHeight},bottom:{bottom:0,overflowY:"scroll",overflowX:"hidden",border:"1px solid "+da.b.bergenRain.secondary[4],borderTop:0,zIndex:1,height:"fit-content",maxHeight:e.secondSchedulerHeight},header:{width:"100%",zIndex:4,background:da.b.bergenRain.secondary[1],padding:"0 24px",overflow:"hidden"},scheduler:{boxSizing:"border-box",minWidth:"300px",width:"100%",display:"flex",flexDirection:"column"},schedulerRows:{borderTop:0},schedulerHeader:{borderRight:"1px solid "+da.b.bergenRain.secondary[4]}});var ga=a(2052),ma=a(2491),pa=a(2483),ya=a(2540),va=a(1330),ba=a(159),fa=a(181),Ea=a(156);function Oa(e,t,a=!1){const o={[ba.a.COA]:[{}],[ba.a.SPOT]:[{}]},r=Object.assign({},Object(ma.a)(Object(pa.a)(t,"vesselName"),()=>[]));if(a){const t=Object(pa.a)(e,e=>function(e){var t;let a;const o=e.cargos?Ve.a.getPerformanceCargo(e.cargos):void 0;a=o&&"Contract of Affreightment"===(null===(t=o.cargoType)||void 0===t?void 0:t.cargoTypeName)?ba.a.COA:ba.a.SPOT;return a}(e));return Object.assign(o,t)}{const t=Object(pa.a)(e,e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.voyage)||void 0===t?void 0:t.vessel)||void 0===a?void 0:a.vesselName});return Object.assign(r,t)}}const Ca={getDataGrouping:Oa,mapDataToSchedulerRows:function(e,t,a=!1){const o=Oa(e,fa.a.sortByVesselName(t),a),r=[];return Object(ya.a)(o,(e,o)=>{var l;const n=e.map(e=>{var t,o,r,l;const n=Object(Ea.c)(e)?e.voyage:e,i={data:e,start:null!==(o=null===(t=null==n?void 0:n.voyageHeader)||void 0===t?void 0:t.voyageStartDate)&&void 0!==o?o:null,end:null!==(l=null===(r=null==n?void 0:n.voyageHeader)||void 0===r?void 0:r.voyageEndDate)&&void 0!==l?l:null};return a?[i]:i}),i=null!==(l=Object(va.a)(t,e=>e.vesselName===o))&&void 0!==l?l:o,c={rows:[...a?n:[n]],header:i};r.push(c)}),r}};a(93);var Ra=a(130),Sa=a(833),ha=a.n(Sa),_a=a(413),Ta=a.n(_a);function Aa(e,t,a,o){!function(e){const t=fe.a.get(j.a.FilterResolver);t.addFilterResolver("SCHEDULER_LOAD_AREA_FILTER_RESOLVER_VOYAGE",t=>Se.a.getArea(Ve.a.getFirstLoadPort(t.portCallsFromVoyage),null!=e?e:-1)),t.addFilterResolver("SCHEDULER_LOAD_AREA_FILTER_RESOLVER_FPV",t=>{var a,o,r;return Object(Fe.e)(t)?Se.a.getArea(null!==(a=t.openPositionPort)&&void 0!==a?a:new Ce.a({}),null!=e?e:-1):Se.a.getArea(Ve.a.getFirstLoadPort(null!==(r=null===(o=t.voyage)||void 0===o?void 0:o.portCallsFromVoyage)&&void 0!==r?r:[]),null!=e?e:-1)}),t.addFilterResolver("SCHEDULER_DISCHARGE_AREA_FILTER_RESOLVER_VOYAGE",t=>Se.a.getArea(Ve.a.getLastDischargePort(t.portCallsFromVoyage),null!=e?e:-1)),t.addFilterResolver("SCHEDULER_DISCHARGE_AREA_FILTER_RESOLVER_FPV",t=>{var a,o,r;return Object(Fe.e)(t)?Se.a.getArea(null!==(a=t.openPositionPort)&&void 0!==a?a:new Ce.a({}),null!=e?e:-1):Se.a.getArea(Ve.a.getLastDischargePort(null!==(r=null===(o=t.voyage)||void 0===o?void 0:o.portCallsFromVoyage)&&void 0!==r?r:[]),null!=e?e:-1)}),t.addFilterResolver("SCHEDULER_LOAD_PORT_FILTER_RESOLVER_VOYAGE",e=>{var t;const a=Ve.a.getPerformanceCargo(e.cargos),o=null!==(t=Re.a.getFirstLoadCargoPort(a.cargoPorts))&&void 0!==t?t:new Oe.a({});return null==o?void 0:o.port}),t.addFilterResolver("SCHEDULER_LOAD_PORT_FILTER_RESOLVER_FPV",e=>{var t,a;if(null===(t=null==e?void 0:e.voyage)||void 0===t?void 0:t.cargos){const t=Ve.a.getPerformanceCargo(e.voyage.cargos),o=null!==(a=Re.a.getFirstLoadCargoPort(t.cargoPorts))&&void 0!==a?a:new Oe.a({});return null==o?void 0:o.port}}),t.addFilterResolver("SCHEDULER_DISCHARGE_PORT_FILTER_RESOLVER_VOYAGE",e=>{var t;const a=Ve.a.getPerformanceCargo(e.cargos),o=null!==(t=Re.a.getLastDischargeCargoPort(a.cargoPorts))&&void 0!==t?t:new Oe.a({});return null==o?void 0:o.port}),t.addFilterResolver("SCHEDULER_DISCHARGE_PORT_FILTER_RESOLVER_FPV",e=>{var t,a;if(null===(t=null==e?void 0:e.voyage)||void 0===t?void 0:t.cargos){const t=Ve.a.getPerformanceCargo(e.voyage.cargos),o=null!==(a=Re.a.getLastDischargeCargoPort(t.cargoPorts))&&void 0!==a?a:new Oe.a({});return null==o?void 0:o.port}})}(o);const r=Object(Le.i)(a),l=Object(Le.a)(a,null!=o?o:-1),n=fe.a.get(j.a.IInternationalization),{model:i}=n.getLanguageFile(),c=t?"":"voyage.",s={field:c+"portCallsFromVoyage.port.portAreas.area.areaDescription",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"loadAreaFilter",resolveField:t?"SCHEDULER_LOAD_AREA_FILTER_RESOLVER_VOYAGE":"SCHEDULER_LOAD_AREA_FILTER_RESOLVER_FPV"},d={field:c+"portCallsFromVoyage.port.portAreas.area.areaDescription",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"dischargeAreaFilter",resolveField:t?"SCHEDULER_DISCHARGE_AREA_FILTER_RESOLVER_VOYAGE":"SCHEDULER_DISCHARGE_AREA_FILTER_RESOLVER_FPV"},u={field:c+"cargos.cargoPorts.port.portName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"loadPortFilter",resolveField:t?"SCHEDULER_LOAD_PORT_FILTER_RESOLVER_VOYAGE":"SCHEDULER_LOAD_PORT_FILTER_RESOLVER_FPV"},g={field:c+"cargos.cargoPorts.port.portName",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"dischargePortFilter",resolveField:t?"SCHEDULER_DISCHARGE_PORT_FILTER_RESOLVER_VOYAGE":"SCHEDULER_DISCHARGE_PORT_FILTER_RESOLVER_FPV"};return[{label:n.lang().model.loading,filterObjectValuePath:"key",typeaheadProps:{label:n.lang().model.loading,options:l,resolver:e=>`${e.areaDescription} ${e.areaCode}`},filters:[s]},{label:n.lang().model.discharging,filterObjectValuePath:"key",typeaheadProps:{label:n.lang().model.discharging,options:l,resolver:e=>`${e.areaDescription} ${e.areaCode}`},filters:[d]},{label:i.loadPort,filterObjectValuePath:"key",typeaheadProps:{label:i.loadPort,options:r,objectPaths:["portName"]},filters:[u]},{label:i.dischargePort,filterObjectValuePath:"key",typeaheadProps:{label:i.dischargePort,options:r,objectPaths:["portName"]},filters:[g]}]}function Pa(e,t,a){fe.a.get(j.a.FilterResolver).addFilterResolver("SCHEDULER_CHARTERER_FILTER_RESOLVER_VOYAGE",e=>{var t;return null===(t=e.cargos)||void 0===t?void 0:t.map(e=>{var t,a;return null!==(a=null===(t=e.charterer)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})});const o=Object(Le.e)(t),r={field:"voyage.cargos.charterer.key",resolveField:"SCHEDULER_CHARTERER_FILTER_RESOLVER_VOYAGE",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"chartererFilter"};return[{label:a.lang().model.charterer,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.charterer,options:o,resolver:e=>Object(Te.c)(e,Te.b.businessPartner)},filters:[r]}]}const ja=(e,t,a,o)=>{const r=Object(Le.k)(a),l=Object(Le.c)(a),n={field:"vessel.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselNameFilter"},i={field:"vessel.vesselType.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselTypeFilter"},c={field:"voyageHeader.leg.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"tradeFilter"},s={field:"voyageHeader.businessUnit.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"businessUnitFilter"};return[{label:o.lang().vessel.vesselName,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().vessel.vesselName,options:t,resolver:e=>{var t;return null!==(t=e.vesselName)&&void 0!==t?t:" "}},filters:[n]},{label:o.lang().model.vesselType,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.vesselType,options:Object(Le.l)(t),resolver:e=>{var t;return null!==(t=e.vesselTypeDesc)&&void 0!==t?t:" "}},filters:[i]},{label:o.lang().model.trade,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.trade,options:r,objectPaths:["legDesc"]},filters:[c]},{label:o.lang().model.businessUnit,filterObjectValuePath:"key",typeaheadProps:{label:o.lang().model.businessUnit,options:l,objectPaths:["businessUnitName"]},filters:[s]}]};function Ia(e,t,a){!function(){const e=fe.a.get(j.a.FilterResolver);e.addFilterResolver("SCHEDULER_CARGO_COMMODITY_FILTER_RESOLVER",e=>e.cargos.map(e=>{var t,a;return null!==(a=null===(t=e.commodity)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})),e.addFilterResolver("SCHEDULER_CARGO_COMMODITY_GROUP_FILTER_RESOLVER",e=>e.cargos.map(e=>{var t,a,o;return null!==(o=null===(a=null===(t=e.commodity)||void 0===t?void 0:t.commodityGroup)||void 0===a?void 0:a.key)&&void 0!==o?o:-1})),e.addFilterResolver("SCHEDULER_CARGO_COMMODITY_CLASS_FILTER_RESOLVER",e=>e.cargos.map(e=>{var t,a,o,r;return null!==(r=null===(o=null===(a=null===(t=e.commodity)||void 0===t?void 0:t.commodityGroup)||void 0===a?void 0:a.commodityClass)||void 0===o?void 0:o.key)&&void 0!==r?r:-1})),e.addFilterResolver("SCHEDULER_CARGO_TYPE_FILTER_RESOLVER",e=>{var t;return null===(t=e.cargos)||void 0===t?void 0:t.map(e=>{var t,a;return null!==(a=null===(t=e.cargoType)||void 0===t?void 0:t.key)&&void 0!==a?a:-1})})}();const o=Object(Le.f)(t),r=Object(Le.h)(t),l=Object(Le.g)(t),n=Object(Le.d)(t),i={field:"voyage.cargos.commodity.key",resolveField:"SCHEDULER_CARGO_COMMODITY_FILTER_RESOLVER",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityFilter"},c={field:"voyage.cargos.commodity.commodityGroup.key",resolveField:"SCHEDULER_CARGO_COMMODITY_GROUP_FILTER_RESOLVER",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityGroupFilter"},s={field:"voyage.cargos.commodity.commodityGroup.commodityClass.key",resolveField:"SCHEDULER_CARGO_COMMODITY_CLASS_FILTER_RESOLVER",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"commodityClassFilter"},d={field:"voyage.cargos.cargoType.key",resolveField:"SCHEDULER_CARGO_TYPE_FILTER_RESOLVER",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"cargoTypeFilter"};return[{label:a.lang().model.commodity,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.commodity,options:o,resolver:e=>e.commodityName},filters:[i]},{label:a.lang().model.commodityGroup,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.commodityGroup,options:r,resolver:e=>e.commodityGroupDesc},filters:[c]},{label:a.lang().model.commodityClass,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.commodityClass,options:l,resolver:e=>e.commodityClassDesc},filters:[s]},{label:a.lang().model.cargoType,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.cargoType,options:n,resolver:e=>e.cargoTypeName},filters:[d]}]}const Da=Object(r.memo)(e=>{const{reactKeyPrefix:t,unfilteredUnallocatedVoyages:a,selectedAreaReport:o,vessels:r}=e,[n]=Object(m.a)([j.a.IInternationalization]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(be.a,{reactKeyPrefix:t+"-charterer",configs:Pa(vo,a,n),type:Ee.b.TYPEAHEAD,label:n.lang().model.charterer,filterCode:vo+"_CHARTERER",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:t+"-cargo",configs:Ia(vo,a,n),type:Ee.b.TYPEAHEAD,label:n.lang().model.cargo,filterCode:vo+"_CARGO",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:t+"-area",configs:Aa(vo,!0,a,null==o?void 0:o.key),type:Ee.b.TYPEAHEAD,label:n.lang().model.areaDescription,filterCode:vo+"_AREA",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:t+"-more",configs:ja(vo,r,a,n),type:Ee.b.TYPEAHEAD,label:n.lang().common.more,filterCode:vo+"_MORE",clearOnMount:!1}))});function Fa(e,t,a){const o={field:"voyage.vessel.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselNameFilter"},r={field:"voyage.vessel.vesselType.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"vesselTypeFilter"};return[{label:a.lang().model.name,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.name,options:t,resolver:e=>{var t;return null!==(t=e.vesselName)&&void 0!==t?t:" "}},filters:[o]},{label:a.lang().common.type,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().common.type,options:Object(Le.l)(t),resolver:e=>{var t;return null!==(t=e.vesselTypeDesc)&&void 0!==t?t:" "}},filters:[r]}]}function La(e,t,a){const o=Object(Le.c)(t),r={field:"voyage.voyageHeader.referenceNo",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"referenceNoFilter"},l={field:"voyage.voyageHeader.businessUnit.key",filterGroupCode:e,operator:Ee.c.IN,type:Ee.d.STRING,optionCode:"allocatedBusinessUnitFilter"};return[{label:a.lang().model.referenceNumber,filterObjectValuePath:"referenceNo",typeaheadProps:{label:a.lang().model.referenceNumber,options:Object(Le.n)(t).filter(e=>{var t,a;return(null!==(a=null===(t=e.referenceNo)||void 0===t?void 0:t.length)&&void 0!==a?a:-1)>0}),resolver:e=>{var t;return null!==(t=e.referenceNo)&&void 0!==t?t:" "}},filters:[r]},{label:a.lang().model.businessUnit,filterObjectValuePath:"key",typeaheadProps:{label:a.lang().model.businessUnit,options:o,objectPaths:["businessUnitName"]},filters:[l]}]}const Va=Object(r.memo)(e=>{const{fleetPlanVoyages:t,reactKeyPrefix:a,vessels:o,selectedAreaReport:r}=e,n=fe.a.get(j.a.IInternationalization),i=Object(Le.o)([],t);return l.a.createElement(l.a.Fragment,null,l.a.createElement(be.a,{reactKeyPrefix:a+"-vessel",configs:Fa(bo,o,n),type:Ee.b.TYPEAHEAD,label:n.lang().model.vessel,filterCode:fo,clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:a+"-voyage",configs:La(bo,i,n),type:Ee.b.TYPEAHEAD,label:n.lang().model.voyage,filterCode:bo+"_VOYAGE",clearOnMount:!1}),l.a.createElement(be.a,{reactKeyPrefix:a+"-area",configs:Aa(bo,!1,i,null==r?void 0:r.key),type:Ee.b.TYPEAHEAD,label:n.lang().model.areaDescription,filterCode:bo+"_AREA",clearOnMount:!1}))});var Ga=a(1245);const Na={actionBar:{"@media (min-width: 600px)":{paddingLeft:"16px"}},toolbarWrapper:{display:"flex",flexWrap:"nowrap",overflowX:"auto",alignItems:"center","@media (max-width: 1190px)":{display:"block",marginTop:1}},toolbarRight:{flexDirection:"row",display:"flex",marginLeft:"auto",alignItems:"center"},toolbarLeft:{"&:first-of-type":{marginLeft:3},"& > :not(:last-child)":{marginRight:1},flexDirection:"row",display:"flex",alignItems:"center"},line:{height:"26px",float:"left",borderLeft:"1px solid "+da.b.bergenRain.secondary[4]}},ka=l.a.memo(e=>{const{reactKeyPrefix:t,i:a,unfilteredFleetPlanVoyages:o,unfilteredVessels:r,selectedAreaReport:n,unfilteredUnallocatedVoyages:i,timeUnit:c,activeTimeUnitIndex:s,onChangeTimeUnit:d,onDecrease:u,onIncrease:g}=e,{fas:m,model:p}=a.getLanguageFile(),y=c.map((e,a)=>{const o=d.bind(void 0,a),r=s===a;return l.a.createElement(H.a,{id:t+"-time-unit-button",key:"timeline-unit-buttons"+a,color:r?"primary":"inherit",onClick:o},e.description)});return l.a.createElement(ze.a,{sx:Na.toolbarWrapper},l.a.createElement(ze.a,{sx:Na.toolbarLeft},l.a.createElement(Ra.a,{color:"textSecondary",variant:"body2"},m.commitments),l.a.createElement(Da,{reactKeyPrefix:t+"-commitments-quick-filters",unfilteredUnallocatedVoyages:i,selectedAreaReport:n,vessels:r}),l.a.createElement("div",{style:Na.line}),l.a.createElement(Ra.a,{color:"textSecondary",variant:"body2"},p.schedule),l.a.createElement(Va,{reactKeyPrefix:t+"-voyages-quick-filters",vessels:r,fleetPlanVoyages:o,selectedAreaReport:n})),l.a.createElement(ze.a,{sx:Na.toolbarRight},l.a.createElement(Ga.a,{reactKeyPrefix:t+"-action-bar",actionBarStyle:Na.actionBar},l.a.createElement("div",null,y),l.a.createElement("div",null,l.a.createElement(K.a,{id:t+"-action-decrease-btn",color:"primary",onClick:u},l.a.createElement(ha.a,null)),l.a.createElement(K.a,{id:t+"-action-increase-btn",color:"primary",onClick:g},l.a.createElement(Ta.a,null))))))});var xa=a(373),wa=a(654),Ua=a(1258);const Ha=l.a.memo(e=>{const{reactKeyPrefix:t,data:a,earliestVisibleDate:o,latestVisibleDate:r,timeUnit:n,onClickBar:i,secondSchedulerHeight:c,canDrop:s,canDrag:d,onDrop:u,userLocale:g,allocatedRef:m}=e,p=ua({schedulersHeight:0,secondSchedulerHeight:c}),y={canDrop:s,canDrag:d,onDrop:u.bind(null,U.a.NONE)};return l.a.createElement(wa.a.Provider,{value:y},l.a.createElement(ze.a,{sx:p.bottom,ref:m},l.a.createElement(ze.a,{sx:p.scheduler},l.a.createElement("div",{style:p.schedulerRows},a.map((e,a)=>l.a.createElement(Ua.a,{key:a,eventIndex:a,sx:p.schedulerHeader,reactKeyPrefix:t,event:e,earliestVisibleDate:o,latestVisibleDate:r,timeUnit:n,onClickBar:i,userLocale:g,showHeaderDetail:!0}))))))});var Ma=a(1834);const Ya=l.a.memo(e=>{const{commitmentsRef:t,reactKeyPrefix:a,data:o,earliestVisibleDate:r,latestVisibleDate:n,timeUnit:i,onClickBar:c,schedulersHeight:s,canDrop:d,canDrag:u,onDrop:g,userLocale:m}=e,p=ua({schedulersHeight:s,secondSchedulerHeight:0});return l.a.createElement(ze.a,{sx:p.top,ref:t},l.a.createElement(ze.a,{sx:p.scheduler},l.a.createElement(Ma.a,{canDrop:d,canDrag:u,onDrop:g}),l.a.createElement("div",{style:p.schedulerRows},o.map((e,t)=>l.a.createElement(Ua.a,{key:t,eventIndex:t,sx:p.schedulerHeader,reactKeyPrefix:a,event:e,earliestVisibleDate:r,latestVisibleDate:n,timeUnit:i,onClickBar:c,userLocale:m,showHeaderDetail:!1})))))});var Ba=a(1244),Ka=a(1327),za=a(1428),qa=a(2495),Wa=a(2496);const Xa=e=>{const{reactKeyPrefix:t,i:a,collapseHeight:o,showCommitment:r,showAllocated:n,toggleCollapseCommitment:i,toggleCollapseAllocated:c}=e,{fas:s}=a.getLanguageFile(),d={divider:{width:"calc(100% - 198px)",position:"absolute",top:o-12,zIndex:"100",left:174,"&:after":{borderTop:0},"&:before":{borderTop:0}},chip:{width:140,backgroundColor:da.b.bergenRain.secondary[1],border:"1px solid "+da.b.bergenRain.secondary[4],"&:hover":{backgroundColor:da.b.bergenRain.secondary[2]}}};return l.a.createElement(Ka.a,{sx:d.divider},l.a.createElement(za.a,{label:r?s.hideCommitments:s.showCommitments,onClick:i,icon:r?l.a.createElement(qa.a,null):l.a.createElement(Wa.a,null),id:t+"-show-hide-commitment-chip",size:"small",sx:d.chip}),l.a.createElement(za.a,{label:n?s.hideScheduler:s.showScheduler,onClick:c,icon:n?l.a.createElement(qa.a,null):l.a.createElement(Wa.a,null),id:t+"-show-hide-scheduler-chip",size:"small",sx:Object.assign(Object.assign({},d.chip),{marginLeft:5})}))},Qa=[{timeUnit:oa.a.WEEK,unitValue:2,description:"2 Weeks"},{timeUnit:oa.a.WEEK,unitValue:4,description:"4 Weeks"},{timeUnit:oa.a.MONTH,unitValue:4,description:"4 Months"},{timeUnit:oa.a.MONTH,unitValue:12,description:"1 Year"}],$a=e=>{var t,a;const{deps:[o,c,s,d,u],state:{allocatedFleetPlanVoyages:g,selectedAreaReport:m,unallocatedVoyages:p,unfilteredFleetPlanVoyages:y,unfilteredUnallocatedVoyages:v,unfilteredVessels:b,vessels:f,userLocale:E,selectedScenario:O,settings:C},reactKeyPrefix:R}=e,S=Object(n.h)(),h=Object(n.g)(),_=Object(xa.a)(),{setSelectedCard:T}=Object(r.useContext)(i.a);Ye();const A=Object(r.useRef)(null),P=Object(r.useRef)(null),j=Object(r.useRef)(null),I=Object(r.useRef)(null),[D,F]=Object(r.useState)(!0),[L,V]=Object(r.useState)(!0),[G,N]=Object(r.useState)(c.getSchedulersHeight(A,P,!D)),[k,x]=Object(r.useState)(c.getSecondSchedulerHeight(G,j)),[w,U]=Object(r.useState)(null!==(a=null===(t=I.current)||void 0===t?void 0:t.clientHeight)&&void 0!==a?a:0),{earliestVisibleDate:H,latestVisibleDate:M,timeUnitIndex:Y}=C,B=Qa[C.timeUnitIndex],K=Object(r.useCallback)((e,t)=>Ue(e,t,S,h),[h,S]),z=Object(r.useCallback)(e=>{u.setAction(ca.a,e)},[u]),q=Object(r.useCallback)(e=>{if(H){const{start:t,end:a}=c.getNewDatesWhenTimeunitChanged(Qa[e],H);z({earliestVisibleDate:t,latestVisibleDate:a,timeUnitIndex:e})}},[c,H,z]),W=Object(r.useCallback)((e,t)=>{var a,o,r;s.onDrop(e,t);const l=null===(o=null===(a=t.monitor)||void 0===a?void 0:a.getItem())||void 0===o?void 0:o.data;if(l){const e=Object(Ea.c)(l)?null===(r=l.voyage)||void 0===r?void 0:r.key:l.key;T(e)}},[s,T]),X=Object(r.useCallback)(()=>{if(H&&M){const e=c.increaseDate(H,B.timeUnit),t=c.increaseDate(M,B.timeUnit);z({earliestVisibleDate:e,latestVisibleDate:t,timeUnitIndex:Y})}},[B.timeUnit,c,H,M,Y,z]),Q=Object(r.useCallback)(()=>{if(H&&M){const e=c.decreaseDate(H,B.timeUnit),t=c.decreaseDate(M,B.timeUnit);z({earliestVisibleDate:e,latestVisibleDate:t,timeUnitIndex:Y})}},[B.timeUnit,c,H,M,Y,z]),$=Object(r.useCallback)(()=>F(!D),[D]),Z=Object(r.useCallback)(()=>V(!L),[L]),J=Object(r.useMemo)(()=>{var e;return{height:null===(e=j.current)||void 0===e?void 0:e.clientHeight}},[]),ee=Object(r.useMemo)(()=>ua({schedulersHeight:G,secondSchedulerHeight:k}),[G,k]),te=Object(r.useMemo)(()=>Ca.mapDataToSchedulerRows(p,f,!0),[f,p]),ae=Object(r.useMemo)(()=>Ca.mapDataToSchedulerRows(g,f),[g,f]);return Object(r.useEffect)(()=>{if(!H||!M){const{start:e,end:t}=c.getNewDatesWhenTimeunitChanged(B,null!=H?H:new Date);z({earliestVisibleDate:e,latestVisibleDate:t,timeUnitIndex:Y})}},[]),Object(r.useEffect)(()=>{N(c.getSchedulersHeight(A,P,!D)),x(L?c.getSecondSchedulerHeight(G,j):c.getSchedulersHeight(A,P,!L))},[c,A,P,j,I.current,G,g,f,p,_.height,L,D]),Object(r.useEffect)(()=>{(null==O?void 0:O.scenarioCode)&&d.loadSchedulerData()},[null==O?void 0:O.scenarioCode]),Object(r.useEffect)(()=>{var e,t,a,o;return D&&ae.length||L?U(L?null!==(o=null===(a=j.current)||void 0===a?void 0:a.clientHeight)&&void 0!==o?o:G:null!==(t=null===(e=I.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:k):U(24)},[ae.length,G,k,D,L]),C.earliestVisibleDate&&C.latestVisibleDate?l.a.createElement(Ba.a.Provider,{value:J},l.a.createElement(ze.a,{sx:ee.container,tabIndex:1,ref:A},l.a.createElement("div",{ref:P},l.a.createElement(ka,{activeTimeUnitIndex:Y,i:o,onChangeTimeUnit:q,reactKeyPrefix:R+"-toolbar",unfilteredVessels:b,timeUnit:Qa,unfilteredFleetPlanVoyages:y,unfilteredUnallocatedVoyages:v,selectedAreaReport:m,onDecrease:Q,onIncrease:X}),l.a.createElement(ze.a,{sx:ee.header},l.a.createElement(ga.a,{reactKeyPrefix:R+"-header",headerWidth:150,earliestVisibleDate:C.earliestVisibleDate,latestVisibleDate:C.latestVisibleDate,timeUnit:B.timeUnit,userLocale:E}))),l.a.createElement(ze.a,{sx:ee.schedulers},l.a.createElement(aa.a,{in:L},l.a.createElement(Ya,{data:te,earliestVisibleDate:C.earliestVisibleDate,latestVisibleDate:C.latestVisibleDate,timeUnit:B.timeUnit,reactKeyPrefix:R+"-commitments",onClickBar:K,commitmentsRef:j,schedulersHeight:G,onDrop:W,canDrop:s.canDrop,canDrag:s.canDrag,userLocale:E})),l.a.createElement(Xa,{reactKeyPrefix:R+"-schedulers-collapse-divider",i:o,collapseHeight:w,showCommitment:L,showAllocated:D,toggleCollapseCommitment:Z,toggleCollapseAllocated:$}),l.a.createElement(aa.a,{in:D},l.a.createElement(Ha,{data:ae,earliestVisibleDate:C.earliestVisibleDate,latestVisibleDate:C.latestVisibleDate,timeUnit:B.timeUnit,reactKeyPrefix:R+"-allocated",onClickBar:K,allocatedRef:I,secondSchedulerHeight:k,onDrop:W,canDrop:s.canDrop,canDrag:s.canDrag,userLocale:E}))))):l.a.createElement("div",null,"Loading...")},Za=Object(p.a)(e=>{var t,a,o,r,l,n;const i=ge.a.getSelectedAreaReport(e),c=null!==(t=h.a.getFiltersByGroupCode(e,vo))&&void 0!==t?t:[],s=null!==(a=h.a.getFiltersByGroupCode(e,bo))&&void 0!==a?a:[],d=null!==(o=ie.a.getTSModelsBuilt(e,ne.a.voyage,la.a,se.d))&&void 0!==o?o:[],u=null!==(r=ie.a.getTSModelsBuilt(e,ne.a.fleetplanvoyage,ra.a,se.b))&&void 0!==r?r:[],g=null!==(l=ie.a.getTSModelsBuilt(e,ne.a.vessel,ye.a,ue.a))&&void 0!==l?l:[],m=Qe.a.getUserLocale(e),p=null!==(n=ia.a.get(e))&&void 0!==n?n:ca.b,y=Object(ce.e)(u,s);let v=g;s.length&&(v=v.filter(e=>y.some(t=>{var a;return(null===(a=t.vessel)||void 0===a?void 0:a.key)===e.key})));const b=s.filter(e=>e.filterCode===fo);if(!Object(na.a)(b)){const e=b.map(e=>Object.assign(Object.assign({},e),{field:e.field.slice(14)}));v=Object(ce.e)(g,e)}const f=me.a.get(e,ne.a.scenario),E=ie.a.getTSModelBuilt(e,ne.a.scenario,f||0,ve.a);return{allocatedFleetPlanVoyages:y,selectedAreaReport:i,unfilteredFleetPlanVoyages:u,unfilteredUnallocatedVoyages:d,unallocatedVoyages:Object(ce.e)(d,c),vessels:v,unfilteredVessels:g,userLocale:m,selectedScenario:E,settings:p}},Object(m.b)([j.a.IInternationalization,He.a.IFASSchedulerController,He.a.IFleetPlansController,_.a.IScenarioActions,_.a.ISimpleReducerActions],Object(n.k)(Object(r.memo)($a))));var Ja=a(1167),eo=a(1839),to=a(671),ao=a(1840),oo=a(1837),ro=a(1838),lo=a(1836);var no=a(456),io=a(225),co=a(534),so=a(1262),uo=a(435),go=a(190);const mo="FLEET_PLANS_OPEN_POSITIONS_FILTER_CODE",po="FLEET_PLANS_VOYAGE_COMMITMENT_FILTER_CODE",yo=po+"_VOYAGE",vo="FAS_SCHEDULER_COMMITMENT_FILTER_GROUP_CODE",bo="FAS_SCHEDULER_VOYAGES_FILTER_GROUP_CODE",fo=bo+"_VESSEL",Eo="FLEET_PLANS_CARGO_COMMITMENT_FILTER_CODE",Oo="doc-modules-fas-pages-fleet-plans",Co={authorizationType:A.a.PERMISSION,authorizedPermissions:[T.a.FleetPlansPAGE],behaviorOnAuthorizationFail:g.a.REDIRECT_NO_AUTHORIZATION},Ro=20;function So(e){Object(u.b)(Co);const{deps:[t,a,n,g,m,p],state:{selectedScenario:_,storedFirstVisibleColumn:T,storedVisibleColumns:A,storedVisiblePorts:j,storedRowGrouping:L,storedColumnsGrouping:V,storedSelectedTab:G,storedShowCommitments:N},history:k,location:x}=e,[w,U]=Object(r.useState)(!1),[H,M]=Object(r.useState)(L),[Y,B]=Object(r.useState)(V),[K,z]=Object(r.useState)(j),[q,W]=Object(r.useState)(A),[X,Q]=Object(r.useState)(T),[$,Z]=Object(r.useState)(G),[J,ee]=Object(r.useState)(N),[te,ae]=Object(r.useState)(null),[oe,re]=Object(r.useState)(!1),[le,ne]=Object(r.useState)(void 0),[ie,ce]=Object(r.useState)(!1),[se,de]=Object(r.useState)(!1),[ue,ge]=Object(r.useState)(!0),[me,pe]=Object(r.useState)(null),[ye,ve]=Object(r.useState)(i.b.selectedCard),{fas:be,model:fe}=t.getLanguageFile();Object(r.useEffect)(()=>{var e;if(ue){g.preloadAreaData();if(0===(null!==(e=h.a.getFiltersByGroupCode(m.getState(),v.a))&&void 0!==e?e:[]).length){const e=$t(v.a).default[0].filters[0];m.dispatch(p.putFilterAction(e))}ge(!1)}},[]);const Ee=Object(r.useCallback)(e=>{M(e);Object(o.a)(e=>n.setAction(E.a,e),e)},[n]),Oe=Object(r.useCallback)(e=>{B(e);Object(o.a)(e=>n.setAction(b.a,e),e)},[n]),Ce=Object(r.useCallback)(e=>{z(e);Object(o.a)(e=>n.setAction(S.a,e),e)},[n]),Re=Object(r.useCallback)(e=>{W(e);Object(o.a)(e=>n.setAction(R.a,e),e)},[n]),Se=Object(r.useCallback)(e=>{Q(e);Object(o.a)(e=>n.setAction(f.a,e),e)},[n]),he=Object(r.useCallback)(e=>{Z(e);Object(o.a)(e=>n.setAction(O.a,e),e)},[n]),_e=Object(r.useCallback)(e=>{ee(e);Object(o.a)(e=>n.setAction(C.a,e),e)},[n]);Object(r.useEffect)(()=>{(null==_?void 0:_.scenarioCode)&&g.loadFleetPlanData(_.key)},[null==_?void 0:_.scenarioCode]);const Te=Object(r.useCallback)((e,t)=>{ae(e),pe(null===t||t===be.commitments?null:parseInt(t)),U(!w)},[be.commitments,w]),Ae=Object(r.useCallback)(e=>{de(!se),pe(null===e||e===be.commitments?null:parseInt(e))},[be.commitments,se]),Pe=Object(r.useCallback)(e=>{ne(e),ce(!ie)},[ie,ne]),je=Object(r.useCallback)(()=>{re(!oe)},[oe]),Ie=Object(r.useMemo)(()=>({createVoyageCharterer:e=>Te(go.a.CARGO,e),createVoyageTC:e=>Te(go.a.TC,e),createVoyageFromTemplate:e=>Ae(e),createVoyageWithoutCargo:e=>Te(go.a.WITHOUT_CARGO,e),createCargo:()=>je(),createCargoCoaTemplate:()=>Pe(io.c.Coa),selectedCard:ye,setSelectedCard:ve}),[Te,ye,je,Pe,Ae]),De=Object(r.useCallback)(()=>{ve(i.b.selectedCard),k.push(y.a.fleetPlans.url)},[k]),Fe=Object(r.useMemo)(()=>[{id:"open-positions",label:be.openPositions,content:()=>l.a.createElement(i.a.Provider,{value:Ie},l.a.createElement(ta,{reactKeyPrefix:Oo+"-open-positions",columnGrouping:Y,rowGrouping:H,firstVisibleColumn:X,visibleColumns:q,visiblePorts:K,onChangeColumnGrouping:Oe,onChangeRowGrouping:Ee,onChangeFirstVisibleColumn:Se,onChangeVisibleColumns:Re,onChangeVisiblePorts:Ce,onChangeShowCommitments:_e,showCommitments:J})),onActivate:De},{id:"scheduler",label:be.scheduler,content:()=>l.a.createElement(i.a.Provider,{value:Ie},l.a.createElement(Za,{reactKeyPrefix:Oo+"-fas-scheduler"})),onActivate:De},{id:"cargo-management",label:be.cargoManagement,content:()=>l.a.createElement(i.a.Provider,{value:Ie},l.a.createElement(Ke,{reactKeyPrefix:Oo+"-cargo-management",columnGrouping:Y,rowGrouping:H,firstVisibleColumn:X,visibleColumns:q,visiblePorts:K,onChangeColumnGrouping:Oe,onChangeRowGrouping:Ee,onChangeFirstVisibleColumn:Se,onChangeVisibleColumns:Re,onChangeVisiblePorts:Ce,onChangeShowCommitments:_e,showCommitments:J})),onActivate:De},{id:"voyages",label:fe.voyages,content:()=>l.a.createElement(wt,{reactKeyPrefix:Oo+"-fas-voyages-table"})},{id:"cargos",label:fe.cargoes,content:()=>l.a.createElement(Ot,{reactKeyPrefix:Oo+"-fas-cargoes-table"})}],[be.openPositions,be.scheduler,be.cargoManagement,De,fe.voyages,fe.cargoes,Ie,Y,H,X,q,K,Oe,Ee,Se,Re,Ce,_e,J]),Le=Object(r.useMemo)(()=>Object(P.b)(Oo,fe.name,!1),[fe.name]),Ve=Object(r.useMemo)(()=>[l.a.createElement(c.a,{key:"notifications-panel",reactKeyPrefix:"notifications-panel"}),l.a.createElement(d.a,{key:"user-menu"})],[]),Ge=Object(r.useMemo)(()=>l.a.createElement(Zt,{reactKeyPrefix:Oo,selectedScenario:_}),[_]),Ne=Object(r.useMemo)(()=>{const e=[{text:t.lang().voyages.createVoyageCharter,onClick:()=>Te(go.a.CARGO,null)},{text:t.lang().voyages.createTimeCharter,onClick:()=>Te(go.a.TC,null)},{text:t.lang().voyages.createVoyageFromTemplate,onClick:()=>Ae(null)},{text:t.lang().voyages.createVoyageWithoutCargo,onClick:()=>Te(go.a.WITHOUT_CARGO,null)}];return[void 0,e,void 0,e,[{text:t.lang().cargoes.createCargo,onClick:()=>je()},{text:t.lang().cargoes.createCargoFromCoaTemplate,onClick:()=>Pe(io.c.Coa)}]]},[t,Te,je,Pe,Ae]),ke=Object(r.useCallback)(e=>{ve(e.key),F.a.openDrawer(e.key,I.a.cargoDrawer,x,k),g.refreshScenarioFleetPlanData()},[k,x,g]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{bottomRightContent:Ge,activeTab:$,createObject:Ne[$],middleContent:Le,onChangeTab:he,activateInitialTab:!1,reactKeyPrefix:Oo+"-page-header",rightContent:Ve,tabs:Fe,showFullBottomBorder:!0}),te===go.a.CARGO&&l.a.createElement(uo.a,{reactKeyPrefix:Oo+"-create-voyage-charter-modal",showModal:w,closeModal:()=>Te(null,null),scheduledUnallocated:!0,createVoyageType:te,scenarioKey:null==_?void 0:_.key,selectedVessel:me}),te===go.a.TC&&l.a.createElement(uo.a,{reactKeyPrefix:Oo+"-create-voyage-time-charter-modal",showModal:w,closeModal:()=>Te(null,null),createVoyageType:te,scheduledUnallocated:!0,scenarioKey:null==_?void 0:_.key,callback:()=>a.loadVoyages(_.key),selectedVessel:me}),se&&l.a.createElement(so.a,{reactKeyPrefix:"doc-modules-fas-pages-fleet-plans-create-template-voyage",showDialog:se,closeDialog:()=>Ae(null),selectedVessel:me}),te===go.a.WITHOUT_CARGO&&l.a.createElement(uo.a,{reactKeyPrefix:Oo+"-create-voyage-without-cargo",showModal:w,closeModal:()=>Te(null,null),createVoyageType:te,selectedVessel:me,scheduledUnallocated:!0,scenarioKey:null==_?void 0:_.key}),oe&&l.a.createElement(co.a,{reactKeyPrefix:"doc-modules-fas-pages-fleet-plans-create-cargo",showModal:oe,onCloseModal:je,callback:ke}),ie&&void 0!==le&&l.a.createElement(no.a,{reactKeyPrefix:"doc-modules-fas-pages-fleet-plans-create-template-cargo",showDialog:ie,closeDialog:()=>Pe(),type:le,callback:ke,scenarioKey:null==_?void 0:_.key}),Fe[$].content(),l.a.createElement(D.a,null))}const ho=Object(p.a)(e=>{const t=me.a.get(e,ne.a.scenario);return{selectedScenario:ie.a.getTSModelBuilt(e,ne.a.scenario,t||0,ve.a),storedFirstVisibleColumn:lo.a.get(e)||f.b,storedVisibleColumns:oo.a.get(e)||R.b,storedVisiblePorts:ro.a.get(e)||S.b,storedRowGrouping:eo.a.get(e)||E.b,storedColumnsGrouping:Ja.a.get(e)||b.c,storedSelectedTab:to.a.get(e)||O.b,storedShowCommitments:ao.a.get(e)}},Object(m.b)([j.a.IInternationalization,_.a.IFasVoyageApi,_.a.ISimpleReducerActions,_.a.IScenarioActions,_.a.Store,_.a.IFilterActions],Object(n.k)(Object(r.memo)(So))))},1922:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));a(10),a(11);var o=a(0),r=a.n(o),l=a(15),n=a(80),i=a(12),c=a(46),s=a(61),d=a(73),u=a(76),g=a(65),m=a(6),p=a(1),y=a(7),v=(a(1373),a(41)),b=a(27),f=a(3),E=a(5),O=a(14);const C=O.a.get(f.a.IInternationalization),{model:R,common:S,menu:h}=C.getLanguageFile();function _(e){return[e.scenarioName,e.vessels.length,e.voyages.length,e.isBudget?R.budget:" - "]}const T=[{content:R.name,contentType:E.a.TEXT},{content:h.vessels,contentType:E.a.NUMBER,alignHeaderContent:E.c.LEFT},{content:R.voyages,contentType:E.a.NUMBER,alignHeaderContent:E.c.LEFT},{content:S.type,contentType:E.a.TEXT}];var A=a(33),P=a(4);const j=[{field:"scenarioCode",filterGroupCode:"SCENARIOS_LIST_FILTER_GROUP_CODE",operator:P.c.NOT_EQUALS,queryParamName:"scenarioCode",type:P.d.STRING,value:"MASTER"}];var I=a(2012),D=a(97),F=a(2013),L=a(819),V=a(1841),G=a(24);const N=O.a.get(f.a.IInternationalization),{model:k,fas:x}=N.lang();function w(e,t,a,o){return{field:o,filterGroupCode:e,queryParamName:o,optionCode:e+a,operator:P.c.EQUALS,type:P.d.BOOLEAN,value:t}}const U=e=>[{label:k.budget,filters:[w(e,!0,k.budget,"isBudget")]},{label:x.nonBudget,filters:[w(e,!1,x.nonBudget,"isBudget")]}],H=({reactKeyPrefix:e,groupCode:t})=>{const[a]=Object(m.a)([f.a.IInternationalization]),{common:o}=a.getLanguageFile();return r.a.createElement(G.a,{reactKeyPrefix:e+"-type",configs:U(t),type:P.b.RADIO,label:o.type,filterCode:t+"_SCENARIO_TYPE"})};var M=a(1257),Y=a(42),B=a(47);const K={authorizationType:v.a.PERMISSION,authorizedPermissions:A.a.scenarios.authorizedPermissions,behaviorOnAuthorizationFail:g.a.REDIRECT_NO_AUTHORIZATION};function z(e){Object(u.b)(K);const{state:{userLocale:t}}=e,[a,g]=Object(m.a)([f.a.IInternationalization,y.a.ITypeaheadCacheController]),[v,E]=Object(o.useState)(!1),[O,C]=Object(o.useState)(!1),[R,S]=Object(o.useState)(!1),h=Object(D.g)(),A=Object(D.h)(),{fas:P}=a.getLanguageFile(),G=Object(o.useCallback)(()=>{E(!v)},[v]),N=Object(o.useCallback)(()=>{C(!O)},[O]),k=Object(o.useCallback)(()=>{S(!R)},[R]),x=Object(o.useCallback)(e=>{b.a.openDrawer(e,l.a.scenarioDrawer,A,h)},[h,A]),w=Object(o.useCallback)((e,t)=>{if(t.key){x(t.key),c.a.next();const e=Object(L.a)(t.isBudget);g.refreshCached(e)}},[g,x]),U=Object(o.useMemo)(()=>[{onClick:N,text:P.createNewScenario},{onClick:k,text:P.createNewScenarioMasterFleetPlan},{onClick:G,text:P.createNewBudgetScenario}],[P.createNewBudgetScenario,P.createNewScenario,P.createNewScenarioMasterFleetPlan,k,G,N]);return r.a.createElement(d.a,{reactKeyPrefix:"doc-modules-fas-pages-scenarios",createObject:U},v&&r.a.createElement(I.a,{reactKeyPrefix:"doc-modules-fas-pages-scenarios-create-budget-scenario",showModal:v,onCloseModal:G,onCreate:w}),O&&r.a.createElement(F.a,{reactKeyPrefix:"doc-modules-fas-pages-scenarios-create-scenario",showModal:O,onCloseModal:N,onCreate:w}),R&&r.a.createElement(M.a,{reactKeyPrefix:"doc-modules-fas-pages-scenarios-copy-scenario-modal",onClose:k,userLocale:t}),r.a.createElement(s.a,{getColSpec:_,tsmodelType:p.a.scenario,onClickItem:x,reactKeyPrefix:"doc-modules-fas-pages-scenarios-scenarios-panel-list",listId:"SCENARIO_LIST_ID",fields:V.a,requestHeaders:{notOverride:"YES"},breakpoints:i.h,tableHeaders:T,tableCustomisation:{disableSorting:!1},defaultFilters:j,hideLoadingMessage:O||v,quickFilters:r.a.createElement(H,{groupCode:"SCENARIOS_LIST_FILTER_GROUP_CODE",reactKeyPrefix:"doc-modules-fas-pages-scenarios-quick-filters"}),quickFiltersGroupCode:"SCENARIOS_LIST_FILTER_GROUP_CODE"}),r.a.createElement(n.a,null))}const q=Object(B.a)(e=>({userLocale:Y.a.getUserLocale(e)}),r.a.memo(z))},1930:function(e,t,a){"use strict";a.d(t,"a",(function(){return Z}));a(10),a(11);var o=a(0),r=a.n(o),l=a(61),n=a(73),i=a(1),c=a(5),s=a(14),d=a(35),u=a(3),g=a(16);const m=s.a.get(u.a.IInternationalization),{common:p,model:y}=m.getLanguageFile(),v={groupCode:"EXCHANGE_RATES_LIST_SORT_GROUP_CODE",operator:g.b.ASC},b={currency:Object.assign({field:y.currency,queryParamName:"currency.currencyCode"},v),exchangeRate:Object.assign({field:y.exchangeRate,queryParamName:"exchangeRate"},v),validFromDate:Object.assign({field:p.validFromDate,queryParamName:"exchangeRateDate"},v),budgetVersion:Object.assign({field:y.budgetVersion,queryParamName:"budgetVersion+.budgetVersionName"},v)},f=[Object.assign(Object.assign({},b.validFromDate),{operator:g.b.DESC}),b.budgetVersion,b.currency],E=s.a.get(u.a.IInternationalization),{common:O,model:C}=E.getLanguageFile(),R=e=>[{content:C.currency,contentType:c.a.TEXT,sortConfig:b.currency},{content:C.exchangeRate,contentType:c.a.NUMBER,numberFormatOptions:{locale:e.isoCode,minDecimals:6,maxDecimals:6},sortConfig:b.exchangeRate},{content:O.validFromDate,contentType:c.a.DATE,dateTimeFormatOptions:d.a.shortLocalizedDate,sortConfig:b.validFromDate},{content:C.budgetVersion,contentType:c.a.TEXT,sortConfig:b.budgetVersion}],S=e=>{var t,a,o,r;return[null!==(a=null===(t=e.currency)||void 0===t?void 0:t.currencyCode)&&void 0!==a?a:"",e.exchangeRate,e.exchangeRateDate,null!==(r=null===(o=e.budgetVersion)||void 0===o?void 0:o.budgetVersionName)&&void 0!==r?r:""]};var h=a(24),_=a(4);const{common:T,model:A}=s.a.get(u.a.IInternationalization).lang(),P=e=>({label:A.currency,filterObjectValuePath:"key",typeaheadProps:{type:i.a.currency,objectPaths:["currencyCode"],includeDisabledQuery:!0},filters:[{field:"currency.key",filterGroupCode:e,operator:_.c.IN,type:_.d.STRING}]}),j=e=>({label:A.budgetVersion,filterObjectValuePath:"key",typeaheadProps:{type:i.a.budgetversion,objectPaths:["budgetVersionName"],includeDisabledQuery:!0},filters:[{field:"budgetVersion.key",filterGroupCode:e,operator:_.c.IN,type:_.d.STRING}]}),I=e=>({label:T.disabled,filters:[{field:"isObjectActive",filterGroupCode:e,operator:_.c.EQUALS,type:_.d.BOOLEAN,value:!1}]}),D=({reactKeyPrefix:e,filterGroupCode:t})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{reactKeyPrefix:e+"-currency",configs:[P(t)],type:_.b.TYPEAHEAD,label:A.currency,filterCode:t+"_CURRENCY"}),r.a.createElement(h.a,{reactKeyPrefix:e+"-budget-version",configs:[j(t)],type:_.b.TYPEAHEAD,label:A.budgetVersion,filterCode:t+"_BUDGET_VERSION"}),r.a.createElement(h.a,{reactKeyPrefix:e+"-disabled",configs:[I(t)],type:_.b.BOOLEAN,label:T.disabled,filterCode:t+"_DISABLED"})),F={currency:{currencyCode:"*"},exchangeRate:"*",exchangeRateDate:"*",budgetVersion:{budgetVersionName:"*"}};var L=a(23),V=a(42),G=a(6),N=a(1979),k=a(46),x=a(15),w=a(27),U=a(97),H=a(80),M=a(65),Y=a(41),B=a(33),K=a(76),z=a(66),q=a(30),W=a(32),X=a(43);const Q={disableSorting:!1},$={authorizationType:Y.a.PERMISSION,authorizedPermissions:B.a.exchangeRates.authorizedPermissions,behaviorOnAuthorizationFail:M.a.REDIRECT_NO_AUTHORIZATION};function Z(){var e,t;Object(K.b)($);const a=null!==(e=Object(L.a)(W.a))&&void 0!==e?e:new X.a({}),c=Object(U.g)(),s=Object(U.h)(),[g]=Object(G.a)([u.a.IInternationalization]),{common:m}=g.getLanguageFile(),[p,y]=Object(o.useState)(!1),v=Object(o.useCallback)(()=>y(e=>!e),[]),E=[{onClick:v,text:m.createExchangeRate,disabled:!Object(z.a)([q.a.ExchangeRatePOST],a)}],O=null!==(t=Object(L.a)(V.a.getUserLocale))&&void 0!==t?t:d.f[0],C=Object(o.useCallback)(e=>{w.a.openDrawer(e,x.a.exchangeRateDrawer,s,c)},[c,s]),h=Object(o.useCallback)((e,{key:t})=>{t&&(C(t),k.a.next())},[C]);return r.a.createElement(n.a,{reactKeyPrefix:"doc-modules-exchange-rates-pages-list-page",createObject:E},p&&r.a.createElement(N.a,{reactKeyPrefix:"doc-modules-exchange-rates-pages-list",showModal:p,closeModal:v,onCreate:h}),r.a.createElement(l.a,{fields:F,listId:"EXCHANGE_RATES_LIST_ID",reactKeyPrefix:"doc-modules-exchange-rates-pages-list-tsmodel-list",defaultSorts:f,sortOptions:Object.values(b),tsmodelType:i.a.exchangerate,tableHeaders:R(O),getColSpec:S,tableCustomisation:Q,onClickItem:C,quickFilters:r.a.createElement(D,{reactKeyPrefix:"doc-modules-exchange-rates-pages-list-filters",filterGroupCode:"EXCHANGE_RATES_LIST_FILTER_GROUP_CODE"}),quickFiltersGroupCode:"EXCHANGE_RATES_LIST_FILTER_GROUP_CODE"}),r.a.createElement(H.a,null))}},1958:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));a(59),a(10),a(11);var o=a(0),r=a.n(o),l=a(97),n=a(392),i=a(455),c=a(46),s=a(61),d=a(73),u=a(76),g=a(65),m=a(6),p=a(193),y=a(1),v=a(43),b=a(32),f=a(94),E=a(48),O=a(66),C=a(30),R=a(95),S=a(41),h=a(3),_=a(15),T=a(80),A=a(27),P=a(23),j=a(14),I=a(5),D=a(4),F=a(16),L=a(88);const V=new L.a,{model:G,common:N}=V.getLanguageFile(),k=[{field:"releaseNumber",filterGroupCode:"SECURITY_GROUPS_LIST_FILTER_GROUP_CODE",queryParamName:"entityRelease.releaseNumber",operator:D.c.EQUALS,type:D.d.STRING}],x=[{label:N.version,filterObjectValuePath:"releaseNumber",typeaheadProps:{type:y.a.entityrelease,objectPaths:["releaseNumber"],query:"filter=entity(EQ)SecurityGroup"},filters:k}],w=[{field:G.securityGroupName,groupCode:"SECURITY_GROUPS_LIST_SORT_GROUP_CODE",operator:F.b.ASC,queryParamName:"securityGroupName"}],U={securityGroupName:{field:G.securityGroupName,groupCode:"SECURITY_GROUPS_LIST_SORT_GROUP_CODE",operator:F.b.ASC,queryParamName:"securityGroupName"}},H={getSecurityGroupsFilterConfig:e=>{const t={field:"key",filterGroupCode:e,operator:D.c.IN,type:D.d.STRING};return[{label:G.securityGroupName,filterObjectValuePath:"key",typeaheadProps:{type:y.a.securitygroup,objectPaths:["securityGroupName"]},filters:[t]}]},getReleaseNumberFilterConfig:x},M=j.a.get(h.a.IInternationalization),{model:Y}=M.getLanguageFile();function B({securityGroupName:e}){return[null!=e?e:""]}const K=[{content:Y.securityGroupName,contentType:I.a.TEXT,sortConfig:U.securityGroupName}];var z=a(24),q=a(112);function W({reactKeyPrefix:e,isRepo:t}){const a=j.a.get(h.a.IInternationalization),{model:o}=a.lang();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(z.a,{reactKeyPrefix:e+"-quick-filter-version",configs:H.getReleaseNumberFilterConfig,type:D.b.TYPEAHEAD,label:o.releaseNumber,filterCode:q.d+"_VERSION",clearOnMount:!0}),r.a.createElement(z.a,{reactKeyPrefix:e+"-security-group-name",configs:H.getSecurityGroupsFilterConfig(q.d),type:D.b.TYPEAHEAD,label:o.securityGroupName,filterCode:q.d+"_SECURITY_GROUP_NAME",clearOnMount:!1}))}var X=a(20),Q=a(1982),$=function(e,t,a,o){return new(a||(a=Promise))((function(r,l){function n(e){try{c(o.next(e))}catch(e){l(e)}}function i(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}c((o=o.apply(e,t||[])).next())}))};const Z={authorizationType:S.a.ROLE,authorizedRoles:[R.a.ADMINISTRATOR,R.a.USER_PROVISIONING],behaviorOnAuthorizationFail:g.a.REDIRECT_NO_AUTHORIZATION};function J(){var e,t;const a=Object(o.useMemo)(()=>window.location.hostname.includes(E.a.DATA_REPO_URL,0),[]),g=null!==(e=Object(P.a)(b.a))&&void 0!==e?e:new v.a({}),R="doc-modules-security-groups-list-page",S=Object(l.g)(),j=Object(l.h)();Object(u.b)(Z);const[I,D]=Object(m.a)([h.a.IInternationalization,X.a.IDataRepoActionsController]),{common:F,model:L}=I.lang(),V=L.releaseNumber,G=a?new p.a({releaseNumber:V}):void 0,[N,k]=Object(o.useState)(G),[x,H]=Object(o.useState)(!1),M=Object(o.useCallback)(()=>H(!x),[x]),Y=null!==(t=Object(P.a)(f.a.getFiltersByGroupCode,"SECURITY_GROUPS_LIST_FILTER_GROUP_CODE"))&&void 0!==t?t:[];Object(o.useMemo)(()=>{if(a){const e=Y.find(e=>"releaseNumber"===e.field);if(e){const[t]=e.selectedObj;t!==N&&k(t)}else k(G)}},[a,Y]);const z=Object(o.useMemo)(()=>(null==N?void 0:N.releaseNumber)===V||!Object(O.a)([C.a.SecurityRolePOST],g),[N,g]),q=Object(o.useMemo)(()=>[{onClick:M,text:`${F.create} ${L.securityGroup}`,disabled:z}],[F.create,z,L.securityGroup,M]),J=Object(o.useMemo)(()=>{if((null==N?void 0:N.releaseNumber)===V)return"filter=entityRelease.releaseNumber(EQ)"+V},[N,V]),ee=Object(o.useCallback)(()=>$(this,void 0,void 0,(function*(){N&&(yield D.pushChanges(N),c.a.next())})),[D,N]),te=Object(o.useMemo)(()=>{if(a)return r.a.createElement(i.a,{reactKeyPrefix:R+"-top-left-element",action:ee,i:I,disabled:z})},[z,I,a,ee]),ae=Object(o.useCallback)(e=>{A.a.openDrawer(e,_.a.securityGroupDrawer,j,S)},[S,j]),oe=Object(o.useCallback)((e,t)=>{t&&(ae(t.key),c.a.next())},[ae]);return r.a.createElement(d.a,{reactKeyPrefix:R,createObject:q},r.a.createElement(T.a,null),x&&r.a.createElement(Q.a,{reactKeyPrefix:R+"-create-security-group",showModal:x,isRepo:a,closeModal:M,callback:oe}),r.a.createElement(s.a,{getColSpec:B,tsmodelType:y.a.securitygroup,quickFilters:r.a.createElement(W,{reactKeyPrefix:R,isRepo:a}),quickFiltersGroupCode:"SECURITY_GROUPS_LIST_FILTER_GROUP_CODE",fields:n.a,queryStr:a?J:void 0,listId:"SECURITY_GROUPS_LIST_ID",reactKeyPrefix:R+"security-groups-tsmodel-list",tableHeaders:K,defaultSorts:w,sortOptions:Object.values(U),onClickItem:ae,topLeftElements:te,tableCustomisation:{disableCardSorting:!0,disableSorting:!1}}))}},1974:function(e,t,a){"use strict";a.d(t,"a",(function(){return H}));a(10),a(11);var o=a(0),r=a.n(o),l=a(97),n=a(46),i=a(61),c=a(73),s=a(76),d=a(65),u=a(6),g=a(1),m=a(33),p=a(41),y=a(3),v=a(15),b=a(80),f=a(27),E=(a(93),a(1325)),O=a(5),C=a(14);const R=C.a.get(y.a.IInternationalization),{model:S,common:h}=R.getLanguageFile(),_=e=>{const{eventDesc:t,eventCode:a,eventNo:o,eventType:l,isLaytimeEvent:n}=e,i=r.a.createElement(E.a,{checked:n,color:"primary",disabled:!0});return[t,a,"CP"===l?S.cargoPort:"PC"===l?S.portCall:"",o,{content:i,rawValue:n}]},T=[{content:h.description,contentType:O.a.TEXT},{content:h.code,contentType:O.a.TEXT},{content:h.type,contentType:O.a.TEXT},{content:S.sortOrder,contentType:O.a.NUMBER},{content:S.useInLaytimeCalculations,contentType:O.a.TEXT,alignHeaderContent:O.c.CENTER,hiddenByDefault:!0}];var A=a(16),P=a(24),j=a(4);const I=C.a.get(y.a.IInternationalization),{model:D,common:F}=I.lang(),L={field:D.sortOrder,groupCode:"EVENTS_LIST_SORT_GROUP_CODE",operator:A.b.ASC,queryParamName:"eventNo"},V=[{label:"",filters:[{field:"isObjectActive",filterGroupCode:"EVENTS_LIST_FILTER_GROUP_CODE",operator:j.c.NOT_EQUALS,queryParamName:"isObjectActive",type:j.d.BOOLEAN,value:!0}]}],G=r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{reactKeyPrefix:"doc-modules-events-pages-EVENTS_LIST_FILTER_GROUP_CODE_DISABLED",configs:V,type:j.b.BOOLEAN,label:F.disabled,filterCode:"EVENTS_LIST_FILTER_GROUP_CODE_DISABLED"}));var N=a(1846),k=a(95),x=a(7),w=a(952);const U={authorizationType:p.a.PERMISSION,authorizedPermissions:m.a.events.authorizedPermissions,behaviorOnAuthorizationFail:d.a.REDIRECT_NO_AUTHORIZATION};function H(){Object(s.b)(U);const[e,t]=Object(o.useState)(!1),[a,d]=Object(o.useState)(!1),m=Object(o.useRef)(a),p=Object(o.useCallback)(()=>t(!e),[e]),[E,O]=Object(u.a)([y.a.IInternationalization,x.a.ITSModelActions]),C=[{onClick:p,text:E.lang().common.createEvent}],R=Object(l.g)(),S=Object(l.h)(),h=Object(o.useCallback)(e=>{f.a.openDrawer(e,v.a.eventDrawer,S,R)},[R,S]),A=Object(o.useCallback)((e,t)=>{t&&(f.a.openDrawer(t.key,v.a.eventDrawer,S,R),n.a.next())},[R,S]);Object(o.useEffect)(()=>{O.loadMultipleAction({fields:w.a,type:g.a.event})},[O]);Object(o.useCallback)(()=>{d(!m.current)},[m,d]);Object(o.useEffect)(()=>{m.current=a},[a]);E.lang().common.bulkUpdate,k.a.EVENT_CONTRIBUTOR;return r.a.createElement(c.a,{reactKeyPrefix:"doc-modules-events-list-page",createObject:C},e&&r.a.createElement(N.a,{reactKeyPrefix:"doc-modules-events-list-create-event",showModal:e,closeModal:p,onCreate:A}),r.a.createElement(i.a,{getColSpec:_,tsmodelType:g.a.event,listId:"EVENTS_LIST_ID",reactKeyPrefix:"doc-modules-events-tsmodel-list",tableHeaders:T,onClickItem:h,defaultSorts:[L],fields:w.a,quickFilters:G,quickFiltersGroupCode:"EVENTS_LIST_FILTER_GROUP_CODE",tableCustomisation:{disableSorting:!1},enableBulkUpdate:a}),r.a.createElement(b.a,null))}},645:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var o,r,l,n,i,c,s,d,u=a(9),g=a(3),m=a(673),p=a(7),y=a(300),v=a(714),b=a(387),f=a(185),E=a(493),O=a(206),C=a(31),R=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e,t){return function(a,o){t(a,o,e)}};let _=class{constructor(e,t,a,o,r,l,n,i){this.fleetPlanVoyageApi=e,this.scenarioApi=t,this.cargoApi=a,this.voyageUtilStatusChecks=o,this.voyageController=r,this.cargoController=l,this.scenarioActions=n,this.store=i}canDrop(e,t,a){return null!==e}};_=R([Object(u.injectable)(),h(0,Object(u.inject)(p.a.IFasFleetPlanVoyageApi)),h(1,Object(u.inject)(p.a.IFasScenarioApi)),h(2,Object(u.inject)(p.a.IFasCargoApi)),h(3,Object(u.inject)(g.a.IVoyageUtilStatusChecks)),h(4,Object(u.inject)(p.a.IVoyageController)),h(5,Object(u.inject)(p.a.ICargoController)),h(6,Object(u.inject)(p.a.IScenarioActions)),h(7,Object(u.inject)(p.a.Store)),S("design:paramtypes",["function"==typeof(o=void 0!==f.IFasFleetPlanVoyageApi&&f.IFasFleetPlanVoyageApi)?o:Object,"function"==typeof(r=void 0!==E.IFasScenarioApi&&E.IFasScenarioApi)?r:Object,"function"==typeof(l=void 0!==b.IFasCargoApi&&b.IFasCargoApi)?l:Object,"function"==typeof(n=void 0!==m.IVoyageUtilStatusChecks&&m.IVoyageUtilStatusChecks)?n:Object,"function"==typeof(i=void 0!==y.IVoyageController&&y.IVoyageController)?i:Object,"function"==typeof(c=void 0!==v.ICargoController&&v.ICargoController)?c:Object,"function"==typeof(s=void 0!==O.IScenarioActions&&O.IScenarioActions)?s:Object,"function"==typeof(d=void 0!==C.Store&&C.Store)?d:Object])],_)},694:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));var o=a(20),r=a(14),l=a(9),n=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n};function i(e){return o.a.IFleetPlanDropZoneHandlerFactory.toString()+e}let c=class{get(e){const t=i(e),a=r.a.get(t);if(!a)throw new Error(`There is no handler registered for drop zone type ${e}. Please register one with the inversify container.`);return a}};c=n([Object(l.injectable)()],c)},826:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(59);var o=a(9),r=a(115),l=a(645),n=a(117),i=function(e,t,a,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,a,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(l<3?r(n):l>3?r(t,a,n):r(t,a))||n);return l>3&&n&&Object.defineProperty(t,a,n),n},c=function(e,t,a,o){return new(a||(a=Promise))((function(r,l){function n(e){try{c(o.next(e))}catch(e){l(e)}}function i(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}c((o=o.apply(e,t||[])).next())}))};let s=class extends l.a{onDrop(e,t,a){return c(this,void 0,void 0,(function*(){const o=a.getItem().data;if(!o||Object(r.a)(o)||o.key===(null==t?void 0:t.key)||!t||Object(r.d)(t)||!Object(r.b)(t)||!t.vessel)return;const l=this.scenarioApi.getSelected();if(!(null==l?void 0:l.fleetPlan))throw new Error("Selected scenario is null or missing fleet plan");if(Object(r.b)(o)&&o.voyage)yield this.voyageController.moveVoyage(o.voyage,t.vessel,o,this.getSequence(t.sequence),!1);else if(Object(r.f)(o)&&(null==l?void 0:l.fleetPlan)){const e={refreshFleetPlan:!1,status:new n.a({statusTypeCode:"SCH"})};yield this.voyageController.allocateVoyage(o,t.vessel,this.getSequence(t.sequence),!1,l.fleetPlan.key,e)}yield this.scenarioActions.reloadColumnData(e,Object(r.f)(o)?null:o,t)}))}};s=i([Object(o.injectable)()],s)}}]);