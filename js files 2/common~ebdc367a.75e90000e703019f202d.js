(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1214:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(378);const o={calculateArea:e=>(e.length?e.length:0)*(e.width?e.width:0),calculateFreight:e=>{const t=new r.a(e),n=t.freightRate?t.freightRate:0,o=t.actualQuantity?t.actualQuantity:t.bookedQuantity?t.bookedQuantity:0;return!!t.isLumpsum&&t.isLumpsum?n:n*o}}},1319:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={[n(1).a.areareport.name]:{areaReportName:"*"}}},1405:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(11);const r={getPaidInvoiceKeysFromPaymentsAndReceipts:e=>{const t=[];return e.map(e=>{for(const n of e.documentLines)n.refDocument&&t.push(n.refDocument.key)}),t},sortByDocumentDate:function(e,t){if(e.documentDate&&t.documentDate){const n=new Date(e.documentDate),r=new Date(t.documentDate);if(n<r)return 1;if(n>r)return-1}return 0}}},1406:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={getTotalBunkersCost:function(e){const{dlConsumption:t,doConsumption:n,flConsumption:r,foConsumption:o,dlBunkerPrice:a,doBunkerPrice:u,flBunkerPrice:i,foBunkerPrice:l}=e;return t*a+n*u+r*i+o*l},getTotalBunkersCostOwner:function(e){const{dlConsumptionOwner:t,doConsumptionOwner:n,flConsumptionOwner:r,foConsumptionOwner:o,dlBunkerPriceOwner:a,doBunkerPriceOwner:u,flBunkerPriceOwner:i,foBunkerPriceOwner:l}=e;return t*a+n*u+r*i+o*l}}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var r,o=n(83),a=n(14),u=n(91),i=n(1),l=n(32),c=n(7);!function(e){e.Cancelled="CANBO",e.Stemmed="STMBO",e.Delivered="DLVBO",e.Requirement="REQBO",e.Active="ACTBO"}(r||(r={}));const s={generateBunkerOrder:function(e){return{bunkerAccountOf:e.bunkerAccountOf?{key:e.bunkerAccountOf.key}:null,bunkerBroker:e.bunkerBroker?{key:e.bunkerBroker.key}:null,bunkerOrderLines:e.bunkerOrderLines.map(e=>{const{bunkerType:t,bunkeredQuantity:n,maxQuantity:r,minQuantity:o,unitPrice:a}=e,u=e&&e.key&&e.key>0?e.key:void 0;if(t)return{bunkerType:{bunkerTypeCode:t.bunkerTypeCode,bunkerTypeDesc:t.bunkerTypeDesc,key:t.key},bunkeredQuantity:n,key:u,maxQuantity:r,minQuantity:o,unitPrice:a}}),bunkerOrderStatus:e.bunkerOrderStatus?{key:e.bunkerOrderStatus.key}:null,bunkerPaidBy:e.bunkerPaidBy?{key:e.bunkerPaidBy.key}:null,bunkerSupplier:e.bunkerSupplier?{key:e.bunkerSupplier.key}:null,bunkeredDate:e.bunkeredDate?e.bunkeredDate:null,currency:e.currency?{key:e.currency.key}:null,externalReferenceNo:e.externalReferenceNo?e.externalReferenceNo:null,extraCost:e.extraCost?e.extraCost:null,orderDate:e.orderDate?e.orderDate:new Date,portCall:e.portCall?{key:e.portCall.key}:null}},getBunkerOrderStatus:function(e){return e.bunkerOrderStatus?e.bunkerOrderStatus.statusTypeDesc:""},getBunkerTypes:function(e){return e.map(e=>e.bunkerTypeDesc?e.bunkerTypeDesc:"").filter(e=>e)},getCurrency:function(e){return e.currency?e.currency.currencyCode:""},getExternalRef:function(e){return e.externalReferenceNo?e.externalReferenceNo:""},getOperatorName:function(e){return e.portCall&&e.portCall.ownedByVoyage&&e.portCall.ownedByVoyage.voyageHeader&&e.portCall.ownedByVoyage.voyageHeader.operator?e.portCall.ownedByVoyage.voyageHeader.operator.userName:""},getPortFromKey:function(e){const t=a.a.get(o.a.ITSModelApi),n=a.a.get(c.a.Store);return t.getSingle({authdata:Object(l.a)(n.getState()).authdata||"",fields:{portName:"*"},key:e,type:i.a.port}).then(e=>new u.a(e))},getPortName:function(e){return e&&e.portCall&&e.portCall.port?e.portCall.port.portName:""},getStatusTypeByCode:function(e,t){return e.find(e=>e.statusTypeCode===t)},getSupplierName:function(e){return e.bunkerSupplier?e.bunkerSupplier.businessPartnerName:""},getVesselName:function(e){return e&&e.vessel?e.vessel.vesselName:""},getVoyageRef:function(e){return e&&e.portCall&&e.portCall.ownedByVoyage&&e.portCall.ownedByVoyage.voyageHeader?e.portCall.ownedByVoyage.voyageHeader.referenceNo:""},isBOLineDataMissing:function(e){return(null!=e?e:[]).some(e=>!e.bunkerType||"number"!=typeof e.bunkeredQuantity)},isBOLinesMissingBunkeredQty:function(e){return e.some(e=>!e.bunkeredQuantity||0===e.bunkeredQuantity)},parseQueryParams:function(e,t){const n=e.indexOf(t);if(-1===n)return null;{const t=e.indexOf("=",n)+1,r=e.indexOf("&",t);let o;return o=-1===r?e.substring(t):e.substring(t,r),o}}}},1762:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(10),n(11);var r=n(62);const o={getBusinessPartnersFromTCInAndOut:function(e,t){let n;const o=[];if(e&&e.ownedByVoyage&&(n=new r.a(e.ownedByVoyage)),n){n.tcIn&&(n.tcIn.charterer&&o.push(n.tcIn.charterer.key),n.tcIn.owner&&o.push(n.tcIn.owner.key));for(const e of n.tcs)e.charterer&&o.push(e.charterer.key),e.owner&&o.push(e.owner.key)}return t.filter(e=>o.indexOf(e.key)>-1)}}},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(10),n(11);var r=n(618);const o={getArea:(e,t)=>{if(e.portAreas)for(const n of e.portAreas)if(n.areaReport&&n.areaReport.key===t){if(null!==n.area&&""!==n.area.areaDescription)return n.area;{const e={areaDescription:"Other",key:0};return new r.a(e)}}return null},getPortTerminalLabel:(e,t)=>{var n;return t?`${null==e?void 0:e.portName} - ${null==t?void 0:t.terminalName}`:null!==(n=null==e?void 0:e.portName)&&void 0!==n?n:""}}},217:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));n(10),n(11);var r=n(60),o=n(403);function a(e,t){return 0!==(!!e&&e.getTime())&&!!t&&0!==t.getTime()}function u(e,t){return!(e&&t)||e<=t}function i(e){let t,n,o;if(e.isTc&&e.tcs.length)[{laycanFrom:t,laycanTo:n,laycanMissedBy:o}]=e.tcs;else{const a=r.a.getPerformanceCargo(null==e?void 0:e.cargos);({laycanFrom:t,laycanTo:n,laycanMissedBy:o}=a)}return{laycanFrom:t,laycanTo:n,laycanMissedBy:o}}function l(){return new o.a({laytimeTermsMeasurementCode:"MTD",laytimeTermsMeasurementName:"/day"})}},260:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1192),o=n(14),a=n(1),u=n(21),i=n(7);function l(){const e=o.a.get(i.a.Store);return u.a.getTSModelsBuilt(e.getState(),a.a.system,r.a)[0]}const c={getSystem:l,getLengthMeasurementCode:function(){const e=l();return e.lengthMeasurement?e.lengthMeasurement.measurementCode:""},getWeightMeasurementCode:function(){const e=l();return e.weightMeasurement?e.weightMeasurement.measurementCode:""},getVolumeMeasurementCode:function(){const e=l();return e.volumeMeasurement?e.volumeMeasurement.measurementCode:""},getCurrencyCode:function(){var e,t,n;const r=l();return null!==(n=null===(t=null===(e=null==r?void 0:r.country)||void 0===e?void 0:e.currency)||void 0===t?void 0:t.currencyCode)&&void 0!==n?n:""}}},287:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return y}));n(118),n(10),n(11);var r=n(81),o=n(16);const a={[o.d.TestCase]:e=>e.test,[o.d.BUSINESS_PARTNERS_LIST_SORT_NAME]:e=>e.businessPartnerName};function u(e,t,n){if(e.compareFn)return e.compareFn(t,n);return("string"==typeof t||"number"==typeof t||"boolean"==typeof t)&&typeof t==typeof n?e.operator*l(t,n):t instanceof Date&&n instanceof Date?e.operator*l(t.getTime(),n.getTime()):e.operator*l(i(e,t),i(e,n))}function i(e,t){return null!=e.resolveField?a[e.resolveField](t):Object(r.a)(t,e.field)}function l(e,t){return e>t?o.a.GREATER_THAN:void 0===e?1:void 0===t?-1:e<t?o.a.LESS_THAN:o.a.EQUAL}function c(e,t){if(0===t.length)return e;let n=t;return n.length>1&&(n=t.sort(s)),e.sort(d.bind(null,n))}function s(e,t){return void 0!==e.priority&&void 0!==t.priority?e.priority<t.priority?-1:e.priority===t.priority?0:1:void 0!==e.priority&&void 0===t.priority?-1:void 0===e.priority&&void 0!==t.priority?1:0}function d(e,t,n){let r=0;for(const a of e)if(r=u(a,t,n),r!==o.a.EQUAL)return r;return r}function f(e){let t="";for(const n of e){const e=n.operator===o.b.ASC?`(${o.c.ASC})`:`(${o.c.DESC})`;t+=n.queryParamName?`sort=${n.queryParamName}${e}&`:""}return t.length>0&&(t=t.slice(0,t.length-1)),t}function g(e,t){return e.findIndex(e=>e.groupCode===t.groupCode&&e.field===t.field)}function y(e,t){return e.sort((e,n)=>e>n?t:e<n?-t:0)}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(472),o=n(14),a=n(1),u=n(21),i=n(372),l=n(142),c=n(7),s=n(164),d=n(186);function f(){const e=o.a.get(c.a.Store);return Object(r.a)(u.a.getTSModelsBuilt(e.getState(),a.a.scenario,{scenarioName:"*",scenarioCode:"*"},s.e))}const g={getScenarioAreaFromPort:function(e){const t=d.a.getArea(e,function(){var e;const t=o.a.get(c.a.Store),n=i.a.getSelectedAreaReport(t.getState());return null!==(e=null==n?void 0:n.key)&&void 0!==e?e:0}());return null==t?void 0:t.areaDescription},getMasterScenario:f,isMasterScenario:function(e){var t;return!!e&&e.key===(null===(t=f())||void 0===t?void 0:t.key)},getSelectedScenarioKey:function(){const e=o.a.get(c.a.Store);return l.a.get(e.getState(),a.a.scenario)}}},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));n(10),n(11),n(118),n(158);var r=n(81),o=n(503),a=n(1392),u=n(68),i=n(159),l=n(58),c=n(60);const s=(e,t)=>{const n=e.find(e=>e.event&&e.event.eventCode===t);return n&&n.eventLogDate?n.eventLogDate:null};function d(e,t){return e?s(e.eventLogs,t):null}function f(e,t){const n=Object(r.a)(e,"reasonForCall"),o=Object(r.a)(t,"reasonForCall");return!(!n||!o)&&n===o}function g(e){const t=e.sort(p);if(!y(t))for(let e=0;e<t.length;e++)t[e].portCallSequence=e+1;return function(e){e.sort(p);const t=e[0].vesselPcSequence;for(let n=0;n<e.length;n++)e[n].vesselPcSequence=n+t}(t),t}function y(e){for(let t=0;t<e.length;t++)if(e[t].portCallSequence!==t+1)return!1;return!0}function p(e,t){if(void 0===e.portCallSequence||void 0===t.portCallSequence)return 1;const n=e.portCallSequence,r=t.portCallSequence;return n>r?1:n<r?-1:0}function v(e){return null!==e.speedRef&&null!==e.speedRef.speed?e.speedRef.speed:null!==e.speed?e.speed:0}function m(e,t,n){const r=[i.a.SPOT,i.a.HAS_TRANSFER,i.a.TRANSFER,i.a.COA].map(String);return e.reduce((e,o)=>{var u,i;if(r.includes(null!==(i=null===(u=o.cargoType)||void 0===u?void 0:u.cargoTypeCode)&&void 0!==i?i:"")){const r=l.a.getMatchingCargoPortsRFC(o.cargoPorts,n,t.key);return e+Object(a.a)(r,"cargoQuantity")}return e},0)}const C={getBunkerReductionArrival:function(e){return e.foRobArrival+e.flRobArrival+e.doRobArrival+e.dlRobArrival},getBunkerReductionDeparture:function(e){return e.foRobDeparture+e.flRobDeparture+e.doRobDeparture+e.dlRobDeparture},getEventLogDate:s,getEventLogDateFromPC:d,getFirstDischargePortCall:e=>{let t=Number.MAX_VALUE,n=new u.a({});for(const r of e)r.reasonForCall&&"D"===r.reasonForCall.reasonForCall&&r.portCallSequence<t&&(t=r.portCallSequence,n=r);return n},getFirstLoadPortCall:e=>{let t=Number.MAX_VALUE,n=new u.a({});for(const r of e)r.reasonForCall&&"L"===r.reasonForCall.reasonForCall&&r.portCallSequence<t&&(t=r.portCallSequence,n=r);return n},getPortCallValueStr:function(e,t){const n=[];if(n.push(e.voyage&&e.voyage.voyageHeader?e.voyage.voyageHeader.referenceNo:""),n.push(e.port?e.port.portName:""),n.push(e.terminal?e.terminal.terminalName:""),n.push(e.reasonForCall?e.reasonForCall.reasonForCallDesc:""),t&&e.eventLogs){const t=d(e,"ARR");if(t){const e=t.toLocaleDateString();n.push("ETA: "+e)}}return n.filter(e=>e).join(", ")},sortByEventLogDate:function(e,t){if(void 0===e.eventLogs[0]||void 0===t.eventLogs[0])return 1;const n=e.eventLogs[0].eventLogDate||new Date(0),r=t.eventLogs[0].eventLogDate||new Date(0);return n>r?-1:n<r?1:0},sortByPortCallSequence:p,sortByVesselPcSequence:function(e,t){if(void 0===e.vesselPcSequence||void 0===t.vesselPcSequence)return 1;const n=e.vesselPcSequence,r=t.vesselPcSequence;return n>r?1:n<r?-1:0},isPortCallSequenceCorrect:y,resequencePortCalls:g,addPortCall:function(e,t){const n=t.sort(p);for(const t of n)t.portCallSequence>=e.portCallSequence&&t.portCallSequence++;return n.push(e),g(n),n},removePortCall:function(e,t){const n=[];for(const r of e)r.key!==t&&n.push(r);return g(n),n},createBallastPortCall:function(e){const{voyageHeader:t,ballastPort:n}=e;return new u.a({port:n,eventLogs:[{event:{eventCode:"ARR"},eventLogDate:t&&t.voyageStartDate?t.voyageStartDate:null},{event:{eventCode:"DEP"},eventLogDate:t&&t.voyageStartDate?t.voyageStartDate:null}],portCallSequence:0,reasonForCall:{reasonForCallDesc:"Ballast",reasonForCall:"B"},speed:0,isBallast:!0})},hasPortCallSequenceChanged:function(e,t){const n=e.reduce((e,t)=>(e[t.key]=t.portCallSequence,e),{});return t.some(e=>n[e.key]!==e.portCallSequence)},getCargoOnBoard:function(e,t){var n,o,a,u,i;const l=e.sort(p),c=new Map;let s=0;for(const e of l){for(const i of e.cargoPorts)if((null===(n=e.port)||void 0===n?void 0:n.key)===(null===(o=i.port)||void 0===o?void 0:o.key)){const n=Object(r.a)(i,t,0);"L"===(null===(a=i.reasonForCall)||void 0===a?void 0:a.reasonForCall)?(s+=n,c.set(e.key,s)):"D"===(null===(u=i.reasonForCall)||void 0===u?void 0:u.reasonForCall)&&(s-=n,c.set(e.key,s))}"Ballast"!==(null===(i=e.reasonForCall)||void 0===i?void 0:i.reasonForCall)&&0===e.cargoPorts.length&&c.set(e.key,s)}return c},compareRFC:f,getSpeed:v,getSpeedRef:function(e,t){const n=Object(o.a)(e.filter(e=>e.isBallast===t&&null!==e.speedRef).map(e=>e.speedRef),"key");return n&&1===n.length?n[0]:void 0},calculateDaysExtraAtSea:function(e,t){const n=v(e),r=t/100*((e.distance||0)/n/24);return new u.a(Object.assign(Object.assign({},e),{percentExtraAtSea:t,daysExtraAtSea:r}))},calculatePercentExtraAtSea:function(e,t){const n=v(e),r=e.distance||0,o=0!==n?r/n/24:0;return new u.a(Object.assign(Object.assign({},e),{percentExtraAtSea:0!==o?t/o*100:0,daysExtraAtSea:t}))},getArrivalWindowMissedBy:function(e){var t,n,r;let o;const a=null===(t=null==e?void 0:e.voyage)||void 0===t?void 0:t.cargos,u=null===(n=null==e?void 0:e.reasonForCall)||void 0===n?void 0:n.reasonForCall,i=null==e?void 0:e.cargoPorts;if("D"===u&&a&&a.length>0&&i&&i.length>0){const e=c.a.getPerformanceCargo(a);e.key===(null===(r=i[0].cargo)||void 0===r?void 0:r.key)&&e.arrivalWindowFrom&&e.arrivalWindowTo&&(o=null==e?void 0:e.arrivalWindowMissedBy)}return o},getTotalCargoQuantityWithRFC:m,getCargoQuantityOnBoardTransit:function(e,t){const n=[...e].sort(p),r=new Map;return n.reduce((e,o,a)=>(o.isBallast||(e+=m(t,n[a-1],"L"),e-=m(t,o,"D")),r.set(o.key,e),e),0),r},isStatusNotValidForChangeVoyage:function(e){var t,n,r,o;return["EST","FIN","SCU"].includes(null!==(o=null===(r=null===(n=null===(t=null==e?void 0:e.voyage)||void 0===t?void 0:t.voyageHeader)||void 0===n?void 0:n.voyageStatus)||void 0===r?void 0:r.statusTypeCode)&&void 0!==o?o:"")},getPortAndTerminalEqual:function(e,t){return e.find(e=>{var n,r;return(null===(n=e.port)||void 0===n?void 0:n.key)===(null===(r=t.port)||void 0===r?void 0:r.key)&&e.terminal&&t.terminal&&e.terminal.key===t.terminal.key&&f(e.reasonForCall,t.reasonForCall)})},isPortAndRfcEqual:function(e,t){return e.some(e=>{var n,r;return(null===(n=e.port)||void 0===n?void 0:n.key)===(null===(r=t.port)||void 0===r?void 0:r.key)&&f(e.reasonForCall,t.reasonForCall)})},getPortAndRfcEqualWithOneTerminal:function(e,t){return e.find(e=>{var n,r;return(null===(n=e.port)||void 0===n?void 0:n.key)===(null===(r=t.port)||void 0===r?void 0:r.key)&&(!!e.terminal!=!!t.terminal||!e.terminal&&!t.terminal)&&f(e.reasonForCall,t.reasonForCall)})},getDefaultEventLogs:function(){return["ARR","BRT","DEP"].map(e=>({event:e,eventLogDate:new Date}))}}},501:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(10),n(11),n(118);var r=n(1419),o=n(35),a=n(196),u=n(14),i=n(78),l=n(3),c=n(408),s=n(430);function d(e,t){return e.label<t.label?-1:e.label>t.label?1:0}const f={formatAuditLogValue:function(e,t){return"field update: recordstatus"===e.entryText.toLowerCase()?function(e){const t=u.a.get(l.a.IInternationalization).getLanguageFile();return"0"===e?t.common.enable:"1"===e?t.common.disable:e}(t):"N/A"===t?"":t},generateOptions:function(e,t){const n=[];for(const r of e)if("string"==typeof r[t]){const e={label:Object(s.a)(r[t]),value:r[t]};-1===n.findIndex(t=>t.value===e.value)&&n.push(e)}return n.sort(d),n},getAuditLogObjectColumnValue:function(e,t){const n=e.tsModelType?e.tsModelType.name:void 0;return n&&t===n||null===t?"":Object(c.a)(t)},getAuditLogObjectInfo:function(e){for(const t of e){const e=i.a.convertUTCToLocalTime(t.actionTime);if(t.user&&e&&t.action&&"NEW"===t.action.actionName){return{objectCreationDate:Object(r.a)(e,new Date,{addSuffix:!0,locale:o.f[0].localeConfig}),objectCreator:t.user.userName}}}},getAuditLogTitle:function(e){return e.tsModelType?Object(c.a)(e.tsModelType.name):""},isFieldNameSelectable:function(e,t){const n=u.a.get(l.a.IInternationalization).getLanguageFile();return t.findIndex(t=>t.value===e)>-1||(a.a.next({type:"snackbar",notification:{id:666,message:`${n.common.noAuditLogHistory} '${Object(s.a)(e)}'`,type:"info"}}),!1)}}},547:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r,o=n(260);!function(e){e.VOLUME="V",e.WEIGHT="W"}(r||(r={}));const a={getMeasurementTypeOptions:function(e){return{V:e.lang().model.volume,W:e.lang().model.weight,X:e.lang().common.other}},getMeasurementCode:function(e){return e.measurementType===r.VOLUME?o.a.getVolumeMeasurementCode():e.measurementType===r.WEIGHT?o.a.getWeightMeasurementCode():""},isMeasurementType:function(e){return Object.values(r).includes(e)}}},823:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={openAmount:(e,t)=>e-Math.sign(e)*t,getRecordPaymentDocumentType:(e,t)=>t===e>0?"PMO":"PMI"}},841:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),o=n(3);const a=e=>{const t=r.a.get(o.a.IInternationalization),{model:n}=t.getLanguageFile();switch(e){case"FO":return n.fo;case"FL":return n.lsfo;case"DO":return n.mgo;case"DL":return n.lsmgo;default:return""}}},937:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1329),o=n(14),a=n(7),u=n(21),i=n(1);const l={getLastVoyage:e=>{if(e&&e.length>0){return Object(r.a)(e,"sequence")[e.length-1].voyage}return null},getVoyageFromFPV:function(e,t){var n;const r=o.a.get(a.a.Store);return null===(n=u.a.getTSModelBuilt(r.getState(),i.a.fleetplanvoyage,e,{voyage:t}))||void 0===n?void 0:n.voyage}}}}]);