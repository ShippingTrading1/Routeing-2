(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1203:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return C}));a(109),a(163),a(10),a(11);var o=a(1204),n=a(114),r=a(1733),i=a(196),c=a(84),l=a(3),s=a(7),u=a(725),d=a(14),m=a(6);let p=void 0,y=null;"serviceWorker"in navigator?(c.a.debug("Service Worker supported"),navigator.serviceWorker.register("notification.service-worker.js").then((function(e){c.a.debug("Service Worker is registered",e),y=e})).catch((function(e){c.a.error("Service Worker Error",e)}))):c.a.warn("Push messaging is not supported");const f=Object(u.a)(e=>{p||(c.a.debug("Setting up push notification subscription"),Notification.requestPermission().then(t=>{t&&(p=i.b.subscribe(t=>{if(y&&y.active){const a=JSON.stringify({title:e.lang().common.vmsNotification,body:t.notification.data,icon:t.notification.origin.replace("ws://","http://")+"/vms/images/app-icons/128x128.png"});y.active.postMessage(a)}else c.a.debug("Service worker not active, using notification api instead"),new Notification(e.lang().common.vmsNotification,{body:t.notification.data,icon:t.notification.origin.replace("ws://","http://")+"/vms/images/app-icons/128x128.png"})}))}))},400);function b(e){const t=d.a.get(l.a.IInternationalization),a=d.a.get(s.a.Store),r=Object(o.a)(a.getState());"jxbrowser"===window.navigator.userAgent||null!=r&&!e?r&&f(t):(c.a.debug("Notifications not yet allowed, requesting permission"),Object(n.a)(t.lang().common.allowPushNotifications,t.lang().common.allowToSendPushNotifications,t.lang().common.allow,t.lang().common.deny).then(C))}function C(e){const[t,a]=Object(m.a)([l.a.IInternationalization,s.a.Store]);"jxbrowser"!==window.navigator.userAgent&&(a.dispatch(Object(r.a)(e)),e?f(t):p&&(c.a.debug("Denying notifications"),p.unsubscribe(),p=void 0))}},1604:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(59),a(10),a(11);var o,n,r=a(9),i=a(31),c=a(32),l=a(7),s=a(48),u=a(90),d=a(3),m=function(e,t,a,o){var n,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t){return function(a,o){t(a,o,e)}},f=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};let b=class{constructor(e,t){this.store=e,this.http=t}getBasicHeader(){var e;return{headers:new Headers({authorization:null!==(e=Object(c.a)(this.store.getState()).authdata)&&void 0!==e?e:"","content-type":"application/json"})}}getGenerateQueryParams({date:e,companies:t,businessUnits:a,vessel:o,voyageHeader:n,includeAll:r,keepEstimates:i,createVoyageSnapshots:c}){return["year="+(null==e?void 0:e.getFullYear()),"month="+(void 0!==(null==e?void 0:e.getMonth())&&null!==(null==e?void 0:e.getMonth())?(null==e?void 0:e.getMonth())+1:null),...(null!=t?t:[]).map(e=>"companyKey="+e.key),...(null!=a?a:[]).map(e=>"businessUnitKey="+e.key),n?"voyageHeaderKey="+n.key:"",(null==o?void 0:o.vesselCodes[0])?"vesselCodeKey="+o.vesselCodes[0].key:"","includeAll="+r,"keepEstimates="+i,"createVoySnapshots="+c].filter(Boolean).join("&")}generate(e){return f(this,void 0,void 0,(function*(){const t=this.getGenerateQueryParams(e);try{return yield this.http.post(`${s.a.API_BASE_URL}/Document/generateAccruals?${t}`,"{}",this.getBasicHeader())}catch(e){throw e instanceof Error?new Error(e.message):new Error("API call failed")}}))}putStatusSelected(e){return f(this,void 0,void 0,(function*(){const t=e.map(e=>"key="+e).join("&");try{yield this.http.put(`${s.a.API_BASE_URL}/Document/bulkUpdate?${t}`,JSON.stringify({invoicingStatus:"RFP"}),this.getBasicHeader())}catch(e){throw new Error("error")}}))}};b=m([Object(r.injectable)(),y(0,Object(r.inject)(l.a.Store)),y(1,Object(r.inject)(d.a.IHttp)),p("design:paramtypes",["function"==typeof(o=void 0!==i.Store&&i.Store)?o:Object,"function"==typeof(n=void 0!==u.IHttp&&u.IHttp)?n:Object])],b)},1649:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(59),a(10),a(11);var o,n,r=a(9),i=a(31),c=a(32),l=a(7),s=a(48),u=a(90),d=a(3),m=function(e,t,a,o){var n,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t){return function(a,o){t(a,o,e)}},f=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};let b=class{constructor(e,t){this.store=e,this.http=t}getBasicHeader(){var e;return{headers:new Headers({authorization:null!==(e=Object(c.a)(this.store.getState()).authdata)&&void 0!==e?e:"","content-type":"application/json"})}}getGenerateQueryParams({generateDate:e,businessUnits:t,companies:a,vesselCodeKey:o}){return["year="+e.getFullYear(),"month="+(e.getMonth()+1),...t.map(({key:e})=>"businessUnitKey="+e),...a.map(({key:e})=>"companyKey="+e),o?"vesselCodeKey="+o:""].filter(Boolean).join("&")}generateBunkerStockAdjustments(e){return f(this,void 0,void 0,(function*(){const t=this.getGenerateQueryParams(e);try{return yield this.http.post(`${s.a.API_BASE_URL}/Document/generateBunkerStockAdjustments?${t}`,"{}",this.getBasicHeader())}catch(e){throw e instanceof Error?new Error(e.message):new Error("API call failed")}}))}putStatusSelected(e){return f(this,void 0,void 0,(function*(){const t=e.map(e=>"key="+e).join("&");try{yield this.http.put(`${s.a.API_BASE_URL}/Document/bulkUpdate?${t}`,JSON.stringify({invoicingStatus:"RFP"}),this.getBasicHeader())}catch(e){throw new Error("error")}}))}};b=m([Object(r.injectable)(),y(0,Object(r.inject)(l.a.Store)),y(1,Object(r.inject)(d.a.IHttp)),p("design:paramtypes",["function"==typeof(o=void 0!==i.Store&&i.Store)?o:Object,"function"==typeof(n=void 0!==u.IHttp&&u.IHttp)?n:Object])],b)},1677:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));a(59),a(10),a(11);var o,n,r,i,c=a(9),l=a(31),s=a(46),u=a(1080),d=a(1),m=a(32),p=a(29),y=a(21),f=a(7),b=a(48),C=a(1678),g=a(90),T=a(3),O=a(946),S=function(e,t,a,o){var n,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e,t){return function(a,o){t(a,o,e)}},E=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};const _={timeCorrectionYear:"*",timeCorrectionMonth:"*"};let P=class{constructor(e,t,a,o){this.store=e,this.http=t,this.tsmodelActionsAsync=a,this.tsmodelActions=o}getBasicHeader(){var e;return{headers:new Headers({authorization:null!==(e=Object(m.a)(this.store.getState()).authdata)&&void 0!==e?e:"","content-type":"application/json"})}}getGenerateQueryParams({fromDate:e,toDate:t,companies:a,businessUnits:o,vesselCodeKey:n}){return["fromYear="+(null==e?void 0:e.getFullYear()),"fromMonth="+(void 0!==(null==e?void 0:e.getMonth())&&null!==(null==e?void 0:e.getMonth())?(null==e?void 0:e.getMonth())+1:null),"toYear="+(null==t?void 0:t.getFullYear()),"toMonth="+(void 0!==(null==t?void 0:t.getMonth())&&null!==(null==t?void 0:t.getMonth())?(null==t?void 0:t.getMonth())+1:null),...a.map(({key:e})=>"companyKey="+e),...o.map(({key:e})=>"businessUnitKey="+e),n?"vesselCodeKey="+n:""].filter(Boolean).join("&")}getTimeCorrectionsFromStore(){return y.a.getTSModelsBuilt(this.store.getState(),d.a.timecorrection,_,O.a)}generateTimeCorrection(e){return E(this,void 0,void 0,(function*(){const t=this.getGenerateQueryParams(e);try{return yield this.http.post(`${b.a.API_BASE_URL}/TimeCorrection/generate?${t}`,"{}",this.getBasicHeader())}catch(e){throw e instanceof Error?new Error(e.message):new Error("API call failed")}}))}loadTimeCorrectionSelection(e,t,a,o,n){return E(this,void 0,void 0,(function*(){return this.tsmodelActionsAsync.loadMultipleAction({callback:n,type:d.a.timecorrection,identifier:O.a,fields:_,overwriteKeysOnLoad:!0,query:(o.length>0?["timeCorrectionYear(GTE)"+(null==e?void 0:e.getFullYear()),"timeCorrectionYear(LTE)"+(null==t?void 0:t.getFullYear()),`voyage.voyageHeader.company(IN)(${a.map(e=>e.key)})`,`voyage.voyageHeader.businessUnit(IN)(${o.map(e=>e.key)})`,"transferStatus.statusTypeCode(EQ)NOT"]:["timeCorrectionYear(GTE)"+(null==e?void 0:e.getFullYear()),"timeCorrectionYear(LTE)"+(null==t?void 0:t.getFullYear()),`voyage.voyageHeader.company(IN)(${a.map(e=>e.key)})`,"transferStatus.statusTypeCode(EQ)NOT"]).map(e=>"filter="+e).join("&")}).then(()=>Promise.resolve())}))}freezeTimeCorrections(e,t,a,o){return E(this,void 0,void 0,(function*(){this.loadTimeCorrectionSelection(e,t,a,o).then(()=>{const a=Object(C.a)(this.getTimeCorrectionsFromStore(),e,t),o=a.map(({key:e})=>"key="+e).join("&");this.http.put(`${b.a.API_BASE_URL}/TimeCorrection/bulkUpdate?${o}`,JSON.stringify({transferStatus:"TRF"}),this.getBasicHeader()).then(()=>{this.tsmodelActions.addMultipleAction(a.map(({key:e})=>new u.a({key:e,transferStatus:"TRF"}))),s.a.next()})})}))}};P=S([Object(c.injectable)(),v(0,Object(c.inject)(f.a.Store)),v(1,Object(c.inject)(T.a.IHttp)),v(2,Object(c.inject)(f.a.ITSModelActionsAsync)),v(3,Object(c.inject)(f.a.ITSModelActions)),h("design:paramtypes",["function"==typeof(o=void 0!==l.Store&&l.Store)?o:Object,"function"==typeof(n=void 0!==g.IHttp&&g.IHttp)?n:Object,"function"==typeof(r=void 0!==p.ITSModelActionsAsync&&p.ITSModelActionsAsync)?r:Object,"function"==typeof(i=void 0!==p.ITSModelActions&&p.ITSModelActions)?i:Object])],P)},1704:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var o,n,r,i=a(9),c=a(1),l=a(7),s=a(29),u=a(495),d=a(31),m=a(646),p=function(e,t,a,o){var n,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t){return function(a,o){t(a,o,e)}};let b=class{constructor(e,t,a){this.store=e,this.tsmodelActions=t,this.selectedUserActions=a}loadUserAndSetSelected(e){const t=m.a;this.store.dispatch(this.selectedUserActions.setAction(e)),this.tsmodelActions.loadSingleAction({fields:t,key:e,type:c.a.user})}};b=p([Object(i.injectable)(),f(0,Object(i.inject)(l.a.Store)),f(1,Object(i.inject)(l.a.ITSModelActionsAsync)),f(2,Object(i.inject)(l.a.ISelectedUserActions)),y("design:paramtypes",["function"==typeof(o=void 0!==d.Store&&d.Store)?o:Object,"function"==typeof(n=void 0!==s.ITSModelActionsAsync&&s.ITSModelActionsAsync)?n:Object,"function"==typeof(r=void 0!==u.ISelectedUserActions&&u.ISelectedUserActions)?r:Object])],b)},1872:function(e,t,a){"use strict";a.d(t,"a",(function(){return Ut}));a(10),a(11);var o=a(0),n=a.n(o),r=a(97),i=a(73),c=a(76),l=a(65),s=a(6),u=a(23),d=a(33),m=a(42),p=a(41),y=a(35),f=a(3),b=a(345),C=a(61),g=a(1),T=a(5),O=a(14),S=a(16),h=a(88);const v=new h.a,{common:E,model:_}=v.getLanguageFile(),P=[{field:_.documentNo,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentNo"}],I={documentNo:{field:_.documentNo,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentNo"},documentDate:{field:_.documentDate,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentDate"},vessel:{field:_.vessel,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.voyage%2B.vessel%2B.vesselName"},voyageReference:{field:_.voyageReference,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.voyage%2B.voyageHeader%2B.referenceNo"},businessUnit:{field:_.businessUnit,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.businessUnit%2B.businessUnitCode"},company:{field:_.company,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"company%2B.companyName"},account:{field:_.account,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.account%2B.accountDesc"},currency:{field:_.currency,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentCurrency%2B.currencyCode"},documentAmount:{field:E.amount,groupCode:"ACTUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentAmount"}},N=O.a.get(f.a.IInternationalization),{model:A}=N.getLanguageFile(),R=e=>{var t,a,o,n,r,i,c,l,s,u,d,m,p,y,f,b;return[null!==(t=e.documentNo)&&void 0!==t?t:"",null!==(a=e.documentDate)&&void 0!==a?a:"",null!==(r=null===(n=null===(o=e.documentLines[0])||void 0===o?void 0:o.account)||void 0===n?void 0:n.accountDesc)&&void 0!==r?r:"",null!==(s=null===(l=null===(c=null===(i=e.documentLines[0])||void 0===i?void 0:i.voyage)||void 0===c?void 0:c.vessel)||void 0===l?void 0:l.vesselName)&&void 0!==s?s:"",null!==(p=null===(m=null===(d=null===(u=e.documentLines[0])||void 0===u?void 0:u.voyage)||void 0===d?void 0:d.voyageHeader)||void 0===m?void 0:m.referenceNo)&&void 0!==p?p:"",null!==(f=null===(y=e.documentCurrency)||void 0===y?void 0:y.currencyCode)&&void 0!==f?f:"",null!==(b=e.documentAmount)&&void 0!==b?b:""]},j=[{content:A.documentNo,contentType:T.a.TEXT,sortConfig:I.documentNo},{content:A.documentDate,contentType:T.a.DATE,sortConfig:I.documentDate},{content:A.account,contentType:T.a.TEXT,sortConfig:I.account},{content:A.vessel,contentType:T.a.TEXT,sortConfig:I.vessel},{content:A.voyageReference,contentType:T.a.TEXT,sortConfig:I.voyageReference},{content:A.currency,contentType:T.a.TEXT,sortConfig:I.currency},{content:A.documentAmount,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:I.documentAmount}],D={documentNo:"*",documentDate:"*",documentAmount:"*",documentCurrency:{currencyCode:"*"},documentLines:{account:{accountDesc:"*"},voyage:{vessel:{vesselName:"*"},voyageHeader:{referenceNo:"*"}}}};var L=a(24),k=a(4);const U=O.a.get(f.a.IInternationalization),{common:x,model:M}=U.lang(),w=(e,t)=>{const[a,o]=t;return[{label:a[0],filters:[{field:"documentType",filterGroupCode:e,optionCode:e+"_ACCRUAL_POSTED",operator:k.c.IN,queryParamName:"documentType.documentType",type:k.d.STRING,value:[a[1]]}]},{label:o[0],filters:[{field:"documentType",filterGroupCode:e,optionCode:e+"_ACCRUAL_REVERSED",operator:k.c.IN,queryParamName:"documentType.documentType",type:k.d.STRING,value:[o[1]]}]}]},B=(e,t)=>[{label:x.all,filters:[{field:"documentType",filterGroupCode:e,optionCode:e+"_ALL",operator:k.c.IN,queryParamName:"documentType.documentType",type:k.d.STRING,value:t,filterCode:e+"_DOCUMENT_TYPE"}]}],K=e=>[{label:M.readyForPosting,filters:[{field:"invoicingStatus",filterGroupCode:e,optionCode:e+"_READY_FOR_POSTING",operator:k.c.IN,queryParamName:"invoicingStatus.statusTypeCode",type:k.d.STRING,value:["RFP"]}]},{label:M.posted,filters:[{field:"invoicingStatus",filterGroupCode:e,optionCode:e+"_POSTED",operator:k.c.IN,queryParamName:"invoicingStatus.statusTypeCode",type:k.d.STRING,value:["POS"]}]}],G=e=>[{label:M.pending,filters:[{field:"invoicingStatus",filterGroupCode:e,optionCode:e+"_PENDING",operator:k.c.IN,queryParamName:"invoicingStatus.statusTypeCode",type:k.d.STRING,value:["PEN"],filterCode:e+"_STATUS"}]}],F=e=>({options:K(e),default:G(e),all:[...G(e),...K(e)]}),q=e=>{const t={field:"documentDate",filterGroupCode:e,operator:k.c.PLACEHOLDER,type:k.d.DATE};return[{label:x.month,filters:[t]}]},H=e=>{const t={field:"documentLines.voyage.vessel.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:M.vessel,filterObjectValuePath:"key",typeaheadProps:{type:g.a.vessel,objectPaths:["vesselName"],includeDisabledQuery:!0},filters:[t]}]},z=(e,t)=>{const[a,o]=t;return{options:w(e,t),default:B(e,[a[1],o[1]]),all:[...B(e,[a[1],o[1]]),...w(e,t)]}},W=e=>{const t={field:"documentLines.voyage.voyageHeader.referenceNo",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:M.voyageReference,filterObjectValuePath:"referenceNo",typeaheadProps:{type:g.a.voyageheader,objectPaths:["referenceNo"]},filters:[t]}]},Y=e=>{const t={field:"company.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:M.company,filterObjectValuePath:"key",typeaheadProps:{type:g.a.company,objectPaths:["companyName"],includeDisabledQuery:!0},filters:[t]}]},V=e=>{const t={field:"documentLines.voyage.voyageHeader.businessUnit.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:M.businessUnit,filterObjectValuePath:"key",typeaheadProps:{type:g.a.businessunit,objectPaths:["businessUnitName"],includeDisabledQuery:!0},filters:[t]}]},X=e=>{const t={field:"documentLines.account.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:M.account,filterObjectValuePath:"key",typeaheadProps:{type:g.a.account,objectPaths:["accountDesc"],includeDisabledQuery:!0},filters:[t]}]};function Q({reactKeyPrefix:e,filterGroupCode:t,documentTypes:a=[["",""],["",""]],i:o}){const{common:r,model:i}=o.lang();return{status:n.a.createElement(L.a,{reactKeyPrefix:e+"-status",configs:F(t).all,type:k.b.RADIO,label:r.status,key:e+"-status",filterCode:t+"_STATUS",isClearable:!1}),documentType:n.a.createElement(L.a,{reactKeyPrefix:e+"-document-type",configs:z(t,a).all,type:k.b.RADIO,label:i.documentType,key:e+"-document-type",filterCode:t+"_DOCUMENT_TYPE",isClearable:!1}),month:n.a.createElement(L.a,{reactKeyPrefix:e+"-month",configs:q(t),type:k.b.MONTH,label:r.month,key:e+"-month",filterCode:t+"_MONTH",clearOnMount:!1}),vessel:n.a.createElement(L.a,{reactKeyPrefix:e+"-vessel",configs:H(t),type:k.b.TYPEAHEAD,label:i.vessel,key:e+"-vessel",filterCode:t+"_VESSEL",clearOnMount:!1}),voyageReference:n.a.createElement(L.a,{reactKeyPrefix:e+"-voyage-reference",configs:W(t),type:k.b.TYPEAHEAD,label:i.voyageReference,key:e+"-voyage-reference",filterCode:t+"_VOYAGE_REFERENCE",clearOnMount:!1}),businessUnit:n.a.createElement(L.a,{reactKeyPrefix:e+"-business-unit",configs:V(t),type:k.b.TYPEAHEAD,label:i.businessUnit,key:e+"-business-unit",filterCode:t+"_BUSINESS_UNIT",clearOnMount:!1}),company:n.a.createElement(L.a,{reactKeyPrefix:e+"-company",configs:Y(t),type:k.b.TYPEAHEAD,label:i.company,key:e+"-company",filterCode:t+"_COMPANY",clearOnMount:!1}),account:n.a.createElement(L.a,{reactKeyPrefix:e+"-account",configs:X(t),type:k.b.TYPEAHEAD,label:i.account,key:e+"-account",filterCode:t+"_ACCOUNT",clearOnMount:!1})}}const J=O.a.get(f.a.IInternationalization),$=({reactKeyPrefix:e,openDrawer:t,enableBulkUpdate:a})=>{const r=Object(o.useMemo)(()=>n.a.createElement(n.a.Fragment,null,Object.values(Object(b.a)(Q({reactKeyPrefix:e,filterGroupCode:"ACTUALS_LIST_FILTER_GROUP_CODE",i:J}),["status","documentType"]))),[e]);return n.a.createElement(C.a,{getColSpec:R,tsmodelType:g.a.document,fields:D,reactKeyPrefix:e+"-tsmodel-list",listId:"ACTUALS_LIST_ID",defaultSorts:P,sortOptions:Object.values(I),tableHeaders:j,enableBulkUpdate:a,onClickItem:t,quickFilters:r,quickFiltersGroupCode:"ACTUALS_LIST_FILTER_GROUP_CODE",queryStr:"filter=documentType.documentType(IN)(ACC)&filter=invoicingStatus.statusTypeCode(EQ)POS",tableCustomisation:{disableCardSorting:!0,disableSorting:!1,aggregateTotals:!0}})};a(59);var Z=a(2485),ee=a(472);const te={documentType:{documentTypeDesc:"*"},documentNo:"*",documentDate:"*",account:{accountDesc:"*"},documentLines:{account:{accountCode:"*",accountDesc:"*"},quantity:"*",voyage:{vessel:{vesselName:"*"},voyageHeader:{referenceNo:"*"}},documentLineText:"*",documentAmount:"*"},documentCurrency:{currencyCode:"*"},businessPartner:{businessPartnerName:"*"},documentAmount:"*",invoicingStatus:{statusTypeDesc:"*"}},ae=new h.a,{common:oe,model:ne}=ae.getLanguageFile(),re=[{field:ne.documentNo,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentNo"}],ie={documentNo:{field:ne.documentNo,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentNo"},documentType:{field:ne.documentType,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentType%2B.documentType"},vessel:{field:ne.vessel,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.voyage%2B.vessel%2B.vesselName"},voyageReference:{field:ne.voyageReference,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.voyage%2B.voyageHeader%2B.referenceNo"},businessPartner:{field:ne.businessPartner,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"businessPartner%2B.businessPartnerName"},company:{field:ne.company,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"company.companyName"},account:{field:ne.account,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.account%2B.accountDesc"},documentDate:{field:ne.documentDate,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentDate"},documentText:{field:ne.documentText,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.documentLineText"},currency:{field:ne.currency,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentCurrency%2B.currencyCode"},amount:{field:oe.amount,groupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentAmount"}},ce=O.a.get(f.a.IInternationalization),{model:le,common:se}=ce.getLanguageFile(),ue=e=>{var t,a,o,n,r,i,c,l,s,u,d,m,p,y,f,b,C,g,T,O,S,h;return[null!==(a=null===(t=e.documentType)||void 0===t?void 0:t.documentTypeDesc)&&void 0!==a?a:"",null!==(o=e.documentNo)&&void 0!==o?o:"",null!==(n=e.documentDate)&&void 0!==n?n:"",null!==(c=null===(i=null===(r=e.documentLines[0])||void 0===r?void 0:r.account)||void 0===i?void 0:i.accountDesc)&&void 0!==c?c:"",null!==(d=null===(u=null===(s=null===(l=e.documentLines[0])||void 0===l?void 0:l.voyage)||void 0===s?void 0:s.vessel)||void 0===u?void 0:u.vesselName)&&void 0!==d?d:"",null!==(f=null===(y=null===(p=null===(m=e.documentLines[0])||void 0===m?void 0:m.voyage)||void 0===p?void 0:p.voyageHeader)||void 0===y?void 0:y.referenceNo)&&void 0!==f?f:"",null!==(C=null===(b=e.businessPartner)||void 0===b?void 0:b.businessPartnerName)&&void 0!==C?C:"",null!==(T=null===(g=e.documentLines[0])||void 0===g?void 0:g.documentLineText)&&void 0!==T?T:"",null!==(S=null===(O=e.documentCurrency)||void 0===O?void 0:O.currencyCode)&&void 0!==S?S:"",null!==(h=e.documentAmount)&&void 0!==h?h:""]},de=[{content:le.documentType,contentType:T.a.TEXT,textLengthFactor:2,sortConfig:ie.documentType},{content:le.documentNo,contentType:T.a.TEXT,sortConfig:ie.documentNo},{content:le.documentDate,contentType:T.a.DATE,dateTimeFormatOptions:y.a.shortLocalizedDate,sortConfig:ie.documentDate},{content:le.account,contentType:T.a.TEXT,textLengthFactor:2,sortConfig:ie.account},{content:le.vessel,contentType:T.a.TEXT,sortConfig:ie.vessel},{content:le.voyageReference,contentType:T.a.TEXT,sortConfig:ie.voyageReference},{content:le.businessPartner,contentType:T.a.TEXT,sortConfig:ie.businessPartner},{content:le.documentText,contentType:T.a.TEXT,textLengthFactor:2,sortConfig:ie.documentText},{content:le.currency,contentType:T.a.TEXT,sortConfig:ie.currency},{content:se.amount,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:ie.amount}];var me=a(20),pe=a(46),ye=a(214),fe=a(140),be=a(102),Ce=a(215),ge=a(44);const Te={generateDate:new Date,businessUnits:[],companies:[],vesselCodeKey:""},Oe=({open:e,reactKeyPrefix:t,onClose:a,onConfirm:r,userLocale:i})=>{const[c]=Object(s.a)([f.a.IInternationalization]),{common:l,model:u}=c.getLanguageFile(),[d,m]=Object(o.useState)(Te),p=Object(o.useCallback)(e=>{m(Object.assign(Object.assign({},d),{generateDate:null!=e?e:new Date}))},[d]),y=Object(o.useCallback)(e=>{m(Object.assign(Object.assign({},d),{businessUnits:e}))},[d]),b=Object(o.useCallback)(e=>{m(Object.assign(Object.assign({},d),{companies:e}))},[d]),C=Object(o.useCallback)(e=>{var t;m(Object.assign(Object.assign({},d),{vesselCodeKey:null===(t=e.vesselCodes[0])||void 0===t?void 0:t.key.toString()}))},[d]),T=Object(o.useCallback)(()=>{r(d),m(Te)},[d,r]),O=Object(o.useCallback)(()=>{a(),m(Te)},[a]),S=Object(o.useCallback)(()=>!(d.generateDate&&d.companies.length>0),[d.companies.length,d.generateDate]);return n.a.createElement(ge.a,{reactKeyPrefix:t+"-modal",open:e,onCloseModal:O,onConfirm:T,disableConfirmBtn:S(),title:l.generateBunkerStockAdjustments,maxWidth:"xs",fullWidth:!0,confirmBtnName:l.generate},n.a.createElement(ye.a,{container:!0,spacing:2},n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(Ce.a,{locale:i,reactKeyPrefix:t+"-generate-date",value:d.generateDate,showDay:!1,showShortDate:!1,label:l.month,onBlur:p})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:u.company,placeholder:l.select,objectPaths:["companyName"],isMulti:!0,type:g.a.company,isClearable:!0,reactKeyPrefix:t+"-company",onBlur:b,formControlProps:{required:!0},shouldPreload:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:u.businessUnit,placeholder:l.select,objectPaths:["businessUnitName"],isMulti:!0,type:g.a.businessunit,isClearable:!0,reactKeyPrefix:t+"-business-unit",onBlur:y,shouldPreload:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:u.vessel,objectPaths:["vesselName"],type:g.a.vessel,reactKeyPrefix:t+"-vessel",onBlur:C,shouldPreload:!0,fields:fe.g}))))};var Se=a(473),he=a(213),ve=a(187);const Ee=Object(he.a)(Object(ve.a)(e=>({button:{whiteSpace:"nowrap"}}))),_e=n.a.memo(({reactKeyPrefix:e,toggleGenerateModal:t,toggleBatchPostModal:a,i:o})=>{const r=o.lang(),i=Ee({});return n.a.createElement(n.a.Fragment,null,n.a.createElement(Se.a,{key:e+"-generate",variant:"outlined",color:"primary",onClick:t,className:i.button},r.common.generate),a?n.a.createElement(Se.a,{key:e+"-batch-post",variant:"outlined",color:"primary",onClick:a,className:i.button},r.common.batchPost):n.a.createElement(n.a.Fragment,null))});var Pe=a(94),Ie=a(1250);a(158);const[Ne]=Object(s.a)([f.a.IInternationalization]),{accruals:Ae}=Ne.getLanguageFile(),Re=(e,t)=>{switch(e){case"PEN":return Ae.pendingAccruals(t);case"RFP":return Ae.readyForPostingAccruals(t);case"POS":return Ae.postedAccruals(t)}},je=(e,t)=>{const a=e.filter(e=>t.includes(e.key));return!(0!==a.filter(e=>0===e.documentLines.length).length)&&0===a.reduce((e,t)=>e+t.documentLines[0].documentAmount,0)};var De=a(21),Le=a(114),ke=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};const Ue=({reactKeyPrefix:e,openDrawer:t,enableBulkUpdate:a,userLocale:r})=>{var i,c;const[l,d]=Object(s.a)([f.a.IInternationalization,me.a.IBunkerStockAdjustmentController]),[m,p]=Object(o.useState)(!1),[y,b]=Object(o.useState)(!1),[T,O]=Object(o.useState)(!1),S=Object(o.useCallback)(()=>p(!m),[m]),h=Object(o.useCallback)(()=>b(!y),[y]),v=Object(o.useCallback)(()=>O(!T),[T]),E=Object(o.useCallback)(e=>ke(void 0,void 0,void 0,(function*(){yield d.generateBunkerStockAdjustments(e),pe.a.next(),S()})),[d,S]),{model:_,accruals:P,common:I}=l.getLanguageFile(),N=Object(o.useMemo)(()=>[[_.bunkerAdjustment,"BAP"],[_.bunkerAdjustmentReversal,"BAR"]],[_.bunkerAdjustment,_.bunkerAdjustmentReversal]),A=Object(o.useMemo)(()=>Object(Z.a)([...F("BUNKER_STOCK_ADJUSTMENT_LIST_FILTER_GROUP_CODE").default,...z("BUNKER_STOCK_ADJUSTMENT_LIST_FILTER_GROUP_CODE",N).default],"filters"),[N]),R=Object(o.useMemo)(()=>n.a.createElement(n.a.Fragment,null,Object.values(Q({reactKeyPrefix:e,filterGroupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_FILTER_GROUP_CODE",documentTypes:N,i:l}))),[N,l,e]),j=null===(i=Object(ee.a)(((e,t)=>{var a;return null!==(a=Object(u.a)(Pe.a.getFiltersByCodes,e,e+t))&&void 0!==a?a:[]})("BUNKER_STOCK_ADJUSTMENT_LIST_FILTER_GROUP_CODE","_STATUS")))||void 0===i?void 0:i.value.toString(),D=null!==(c=Object(u.a)(De.a.getTSModelsBuilt,g.a.document,{documentLines:{documentAmount:"*"}},"BUNKER_STOCK_ADJUSTMENT_LIST_ID"))&&void 0!==c?c:[],L="PEN"===j,k=Re(j,P.bunkerStockAdjustments),U={toggleBatchPostModal:L?h:void 0},x=Object(o.useCallback)(e=>ke(void 0,void 0,void 0,(function*(){yield d.putStatusSelected(e),pe.a.next()})),[d]),M=Object(o.useCallback)(e=>{je(D,e)?Object(Le.a)(P.postSelected,P.postDialogMessage,I.post).then(t=>{t&&x(e)}):v()},[P.postDialogMessage,P.postSelected,I.post,D,x,v]),w=Object(o.useMemo)(()=>[{onClick:M,disabled:!1,label:I.post,reactKeyPrefix:e+"-selected-actions"}],[I.post,M,e]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ge.a,{reactKeyPrefix:e,open:T,title:I.incompleteSelection,maxWidth:"xs",fullWidth:!0,cancelBtnName:I.close,onCloseModal:v,hideConfirmBtn:!0},P.selectionWarning),n.a.createElement(Oe,{reactKeyPrefix:e+"-generate-bunker-stock-adjustments",open:m,onClose:S,onConfirm:E,userLocale:r}),n.a.createElement(Ie.a,{reactKeyPrefix:e+"-batch-post",open:y,onClose:h,userLocale:r,fields:te,identifier:"BUNKER_STOCK_ADJUSTMENT_LIST_ID",modalTitle:P.batchPostBunkerStockAdjustments,documentTypes:[N[0][1],N[1][1]],accrual:!1}),n.a.createElement(C.a,{tableCustomisation:{disableToolbar:!1,disableCardSorting:!0,disableSorting:!1},getColSpec:ue,tsmodelType:g.a.document,fields:te,listId:"BUNKER_STOCK_ADJUSTMENT_LIST_ID",reactKeyPrefix:e+"-tsmodel-list",sortOptions:Object.values(ie),defaultSorts:re,defaultFilters:A,selectable:L,title:k,searchPaths:["documentLines.documentLineText"],searchPlaceholder:_.documentText,selectedActions:w,quickFilters:R,topLeftElements:n.a.createElement(_e,Object.assign({reactKeyPrefix:e+"-tsmodel-list-actions",toggleGenerateModal:S},U,{i:l})),quickFiltersGroupCode:"BUNKER_STOCK_ADJUSTMENT_LIST_FILTER_GROUP_CODE",tableHeaders:de,onClickItem:t,enableBulkUpdate:a}))},xe={voyage:{vessel:{vesselName:"*"},voyageHeader:{referenceNo:"*"}},timeCorrectionYear:"*",timeCorrectionMonth:"*",daysOffhireWithinMonth:"*",daysOnhireWithinMonth:"*",daysDryDockWithinMonth:"*",daysDdBallastWithinMonth:"*",daysIdleWithinMonth:"*",daysTotal:"*",transferStatus:{statusTypeDesc:"*"}};var Me=a(1843);const we=O.a.get(f.a.IInternationalization),{model:Be,common:Ke}=we.lang(),Ge=e=>{const t={field:"voyage.voyageHeader.businessUnit.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Be.businessUnit,filterObjectValuePath:"key",typeaheadProps:{type:g.a.businessunit,objectPaths:["businessUnitName"],includeDisabledQuery:!0},filters:[t]}]},Fe=e=>{const t={field:"voyage.vessel.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Be.vessel,filterObjectValuePath:"key",typeaheadProps:{type:g.a.vessel,objectPaths:["vesselName"],includeDisabledQuery:!0},filters:[t]}]},qe=e=>{const t={field:"timeCorrectionYear",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Ke.year,filterObjectValuePath:"timeCorrectionYear",typeaheadProps:{type:g.a.timecorrection,objectPaths:["timeCorrectionYear"],shouldPreload:!1},filters:[t]}]},He=(e,t)=>{const a=Object(Me.a)(t,"timeCorrectionMonth",g.a.timecorrection),o={field:"timeCorrectionMonth",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Ke.month,filterObjectValuePath:"timeCorrectionMonth",overrideObject:"object",typeaheadProps:{objectPaths:["timeCorrectionMonth"],options:Object.values(a),disableSorting:!0,resolver:e=>Object.keys(a)[e.timeCorrectionMonth-1]},filters:[o]}]},ze=e=>{const t={field:"transferStatus.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Ke.status,filterObjectValuePath:"transferStatus.key",typeaheadProps:{type:g.a.timecorrection,objectPaths:["transferStatus.statusTypeDesc"]},filters:[t]}]},We=e=>{const t={field:"voyage.voyageHeader.referenceNo",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Be.voyageReference,filterObjectValuePath:"referenceNo",typeaheadProps:{type:g.a.voyageheader,objectPaths:["referenceNo"]},filters:[t]}]},Ye=e=>{const t={field:"voyage.voyageHeader.company.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return[{label:Be.company,filterObjectValuePath:"key",typeaheadProps:{type:g.a.company,objectPaths:["companyName"],includeDisabledQuery:!0},filters:[t]}]};function Ve({reactKeyPrefix:e,groupCode:t,userLocale:a}){const o=O.a.get(f.a.IInternationalization),{common:r,model:i}=o.lang();return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{reactKeyPrefix:e+"-business-unit",configs:Ge(t),type:k.b.TYPEAHEAD,label:i.businessUnit,filterCode:t+"_BUSINESS_UNIT",clearOnMount:!1}),n.a.createElement(L.a,{reactKeyPrefix:e+"-company",configs:Ye(t),type:k.b.TYPEAHEAD,label:i.company,filterCode:t+"_COMPANY",clearOnMount:!1}),n.a.createElement(L.a,{reactKeyPrefix:e+"-vessel",configs:Fe(t),type:k.b.TYPEAHEAD,label:i.vessel,filterCode:t+"_VESSEL",clearOnMount:!1}),n.a.createElement(L.a,{reactKeyPrefix:e+"-voyage-reverence",configs:We(t),type:k.b.TYPEAHEAD,label:i.voyageReference,filterCode:t+"_VOYAGE_REFERENCE",clearOnMount:!1}),n.a.createElement(L.a,{reactKeyPrefix:e+"-year",configs:qe(t),type:k.b.TYPEAHEAD,label:r.year,filterCode:t+"_YEAR",clearOnMount:!1}),n.a.createElement(L.a,{reactKeyPrefix:e+"-month",configs:He(t,a),type:k.b.TYPEAHEAD,label:r.month,filterCode:t+"_MONTH",clearOnMount:!1}),n.a.createElement(L.a,{reactKeyPrefix:e+"-status",configs:ze(t),type:k.b.TYPEAHEAD,label:r.status,filterCode:t+"_STATUS",clearOnMount:!1}))}var Xe=a(946);const Qe={companies:[],businessUnits:[],fromDate:null,toDate:null,vesselCodeKey:""},Je=e=>{const{open:t,onClose:a,reactKeyPrefix:r,onConfirm:i,userLocale:c}=e,[l]=Object(s.a)([f.a.IInternationalization]),{common:u,model:d}=l.getLanguageFile(),[m,p]=Object(o.useState)(Qe),y=Object(o.useCallback)(e=>{e&&m.toDate&&m.toDate<e?p(Object.assign(Object.assign({},m),{fromDate:e,toDate:e})):p(Object.assign(Object.assign({},m),{fromDate:e}))},[m]),b=Object(o.useCallback)(e=>{e&&m.fromDate&&m.fromDate>e?p(Object.assign(Object.assign({},m),{toDate:e,fromDate:e})):p(Object.assign(Object.assign({},m),{toDate:e}))},[m]),C=Object(o.useCallback)(e=>{p(Object.assign(Object.assign({},m),{companies:e}))},[m]),T=Object(o.useCallback)(e=>{p(Object.assign(Object.assign({},m),{businessUnits:e}))},[m]),O=Object(o.useCallback)(e=>{var t;p(Object.assign(Object.assign({},m),{vesselCodeKey:null===(t=e.vesselCodes[0])||void 0===t?void 0:t.key.toString()}))},[m]),S=Object(o.useCallback)(()=>{i(m),p(Qe)},[i,m]),h=Object(o.useCallback)(()=>{a(),p(Qe)},[a]),v=Object(o.useCallback)(()=>!(m.toDate&&m.fromDate&&m.companies.length>0),[m.companies.length,m.fromDate,m.toDate]);return n.a.createElement(ge.a,{reactKeyPrefix:r+"-generate-time-correction-modal",open:t,onCloseModal:h,onConfirm:S,disableConfirmBtn:v(),title:u.generateTimeCorrection,maxWidth:"xs",fullWidth:!0,confirmBtnName:u.generate},n.a.createElement(ye.a,{container:!0,spacing:2},n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(Ce.a,{locale:c,reactKeyPrefix:r+"-from-date",value:m.fromDate,showDay:!1,showShortDate:!1,label:u.fromMonth,onBlur:y,required:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(Ce.a,{locale:c,reactKeyPrefix:r+"-to-date",value:m.toDate,showDay:!1,showShortDate:!1,label:u.toMonth,onBlur:b,required:!0})),n.a.createElement(ye.a,{xs:12,item:!0},n.a.createElement(be.b,{label:d.company,placeholder:u.select,objectPaths:["companyName"],isMulti:!0,type:g.a.company,isClearable:!0,reactKeyPrefix:r+"-company",onBlur:C,formControlProps:{required:!0},shouldPreload:!0})),n.a.createElement(ye.a,{xs:12,item:!0},n.a.createElement(be.b,{label:d.businessUnit,placeholder:u.select,objectPaths:["businessUnitName"],isMulti:!0,type:g.a.businessunit,isClearable:!0,reactKeyPrefix:r+"-business-unit",onBlur:T,shouldPreload:!0})),n.a.createElement(ye.a,{xs:12,item:!0},n.a.createElement(be.b,{label:d.vessel,objectPaths:["vesselName"],type:g.a.vessel,reactKeyPrefix:r+"-vessel",onBlur:O,shouldPreload:!0,fields:fe.g}))))},$e=Object(he.a)(Object(ve.a)(e=>({button:{whiteSpace:"nowrap"}}))),Ze=n.a.memo(({reactKeyPrefix:e,toggleGenerateModal:t,toggleFreezeModal:a})=>{const[o]=Object(s.a)([f.a.IInternationalization]),r=o.lang(),i=$e({});return n.a.createElement(n.a.Fragment,null,n.a.createElement(Se.a,{key:e+"-generate",variant:"outlined",color:"primary",onClick:t,className:i.button},r.common.generate),n.a.createElement(Se.a,{key:e+"-freeze",variant:"outlined",color:"primary",onClick:a,className:i.button},r.common.freeze))});var et=a(470);const tt=new h.a,{common:at,model:ot}=tt.getLanguageFile(),nt=[{field:ot.vessel,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"voyage%2B.vessel%2B.vesselName"},{field:ot.voyageReference,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.DESC,queryParamName:"voyage%2B.fleetPlanVoyages%2B.sequence"},{field:at.year,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.DESC,queryParamName:"timeCorrectionYear"},{field:at.month,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.DESC,queryParamName:"timeCorrectionMonth"}],rt={vessel:{field:ot.vessel,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"voyage%2B.vessel%2B.vesselName"},voyageReference:{field:ot.voyageReference,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"voyage%2B.fleetPlanVoyages%2B.sequence"},year:{field:at.year,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"timeCorrectionYear"},month:{field:at.month,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"timeCorrectionMonth"},status:{field:at.status,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"transferStatus%2B.statusTypeSequence"},onhireDays:{field:ot.onhireDays,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"daysOnhireWithinMonth"},idleDays:{field:ot.idleDays,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"daysIdleWithinMonth"},totalDays:{field:ot.totalDays,groupCode:"TIME_CORRECTIONS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"daysTotal"}},it=O.a.get(f.a.IInternationalization),{model:ct,common:lt}=it.getLanguageFile(),st=(e,t)=>{var a,o,n,r,i,c,l,s,u,d,m,p;const y=Object(et.a)(new Date(e.timeCorrectionYear,e.timeCorrectionMonth-1),"LLLL",{locale:t.localeConfig}),f=e.daysOffhireWithinMonth+e.daysDryDockWithinMonth+e.daysDdBallastWithinMonth;return[null!==(n=null===(o=null===(a=e.voyage)||void 0===a?void 0:a.vessel)||void 0===o?void 0:o.vesselName)&&void 0!==n?n:"",null!==(c=null===(i=null===(r=e.voyage)||void 0===r?void 0:r.voyageHeader)||void 0===i?void 0:i.referenceNo)&&void 0!==c?c:"",null!==(l=e.timeCorrectionYear)&&void 0!==l?l:"",y,null!==(s=e.daysOnhireWithinMonth)&&void 0!==s?s:"",null!=f?f:"",null!==(u=e.daysIdleWithinMonth)&&void 0!==u?u:"",null!==(d=e.daysTotal)&&void 0!==d?d:"",null!==(p=null===(m=e.transferStatus)||void 0===m?void 0:m.statusTypeDesc)&&void 0!==p?p:""]},ut=[{content:ct.vessel,contentType:T.a.TEXT,sortConfig:rt.vessel},{content:ct.voyageReference,contentType:T.a.TEXT,sortConfig:rt.voyageReference},{content:lt.year,contentType:T.a.TEXT,sortConfig:rt.year},{content:lt.month,contentType:T.a.TEXT,sortConfig:rt.month},{content:ct.onhireDays,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:rt.onhireDays},{content:ct.offhireDays,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:ct.idleDays,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:rt.idleDays},{content:ct.totalDays,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:rt.totalDays},{content:lt.status,contentType:T.a.TEXT,sortConfig:rt.status}];var dt=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};const mt=({reactKeyPrefix:e,userLocale:t,enableBulkUpdate:a})=>{const[r]=Object(s.a)([me.a.ITimeCorrectionController]),[i,c]=Object(o.useState)(!1),[l,u]=Object(o.useState)(!1),d=Object(o.useCallback)(()=>c(!i),[i]),m=Object(o.useCallback)(()=>u(!l),[l]),p=Object(o.useCallback)(e=>dt(void 0,void 0,void 0,(function*(){yield r.generateTimeCorrection(e),pe.a.next(),d()})),[r,d]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Je,{reactKeyPrefix:e+"-generate-time-corrections",open:i,onClose:d,onConfirm:p,userLocale:t}),n.a.createElement(Xe.b,{reactKeyPrefix:e+"-freeze-time-corrections",open:l,onClose:m,userLocale:t}),n.a.createElement(C.a,{quickFilters:n.a.createElement(Ve,{reactKeyPrefix:e,groupCode:"TIME_CORRECTION_LIST_FILTER_GROUP_CODE",userLocale:t}),quickFiltersGroupCode:"TIME_CORRECTION_LIST_FILTER_GROUP_CODE",getColSpec:st,tsmodelType:g.a.timecorrection,fields:xe,topLeftElements:n.a.createElement(Ze,{reactKeyPrefix:e+"-tsmodel-list-actions",toggleFreezeModal:m,toggleGenerateModal:d}),listId:"TIME_CORRECTION_LIST_ID",sortOptions:Object.values(rt),defaultSorts:nt,reactKeyPrefix:e+"-tsmodel-list",tableHeaders:ut,enableBulkUpdate:a,tableCustomisation:{disableCardSorting:!0,disableSorting:!1}}))};var pt=a(15),yt=a(80),ft=a(27);const bt=new h.a,{common:Ct,model:gt}=bt.getLanguageFile(),Tt=[{field:gt.documentNo,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentNo"}],Ot={documentNo:{field:gt.documentNo,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentNo"},documentType:{field:gt.documentType,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentType%2B.documentType"},vessel:{field:gt.vessel,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.voyage%2B.vessel%2B.vesselName"},voyageReference:{field:gt.voyageReference,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.voyage%2B.voyageHeader%2B.referenceNo"},businessUnit:{field:gt.businessUnit,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.businessUnit%2B.businessUnitCode"},company:{field:gt.company,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"company.companyName"},account:{field:gt.account,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentLines%2B.account%2B.accountDesc"},documentDate:{field:gt.documentDate,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentDate"},currency:{field:gt.currency,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentCurrency%2B.currencyCode"},ytdEstimatedAmount:{field:Ct.ytdEstimatedAmount,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"estimateAmountYtd"},ytdActualAmount:{field:Ct.ytdActualAmount,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"accountAmountYtd"},accuralAmount:{field:Ct.accrualAmount,groupCode:"ACCRUALS_LIST_SORT_GROUP_CODE",operator:S.b.ASC,queryParamName:"documentAmount"}},St=O.a.get(f.a.IInternationalization),{model:ht,common:vt}=St.getLanguageFile(),Et=e=>{var t,a,o,n,r,i,c,l,s,u,d,m,p,y,f,b,C,g,T,O;let S=0;return e.documentLines.forEach(e=>{S+=e.quantity}),[null!==(a=null===(t=e.documentType)||void 0===t?void 0:t.documentTypeDesc)&&void 0!==a?a:"",null!==(o=e.documentNo)&&void 0!==o?o:"",null!==(n=e.documentDate)&&void 0!==n?n:"",null!==(c=null===(i=null===(r=e.documentLines[0])||void 0===r?void 0:r.account)||void 0===i?void 0:i.accountDesc)&&void 0!==c?c:"",null!==(d=null===(u=null===(s=null===(l=e.documentLines[0])||void 0===l?void 0:l.voyage)||void 0===s?void 0:s.vessel)||void 0===u?void 0:u.vesselName)&&void 0!==d?d:"",null!==(f=null===(y=null===(p=null===(m=e.documentLines[0])||void 0===m?void 0:m.voyage)||void 0===p?void 0:p.voyageHeader)||void 0===y?void 0:y.referenceNo)&&void 0!==f?f:"",null!=S?S:"",null!==(C=null===(b=e.documentCurrency)||void 0===b?void 0:b.currencyCode)&&void 0!==C?C:"",null!==(g=e.estimateAmountYtd)&&void 0!==g?g:"",null!==(T=e.accountAmountYtd)&&void 0!==T?T:"",null!==(O=e.documentAmount)&&void 0!==O?O:""]},_t=[{content:ht.documentType,contentType:T.a.TEXT,sortConfig:Ot.documentType},{content:ht.documentNo,contentType:T.a.TEXT,sortConfig:Ot.documentNo},{content:ht.documentDate,contentType:T.a.DATE,dateTimeFormatOptions:y.a.shortLocalizedDate,sortConfig:Ot.documentDate},{content:ht.account,contentType:T.a.TEXT,sortConfig:Ot.account},{content:ht.vessel,contentType:T.a.TEXT,sortConfig:Ot.vessel},{content:ht.voyageReference,contentType:T.a.TEXT,sortConfig:Ot.voyageReference},{content:ht.onhireDays,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:ht.currency,contentType:T.a.TEXT,sortConfig:Ot.currency},{content:vt.ytdEstimatedAmount,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:Ot.ytdEstimatedAmount},{content:vt.ytdActualAmount,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:Ot.ytdActualAmount},{content:vt.accrualAmount,contentType:T.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2},sortConfig:Ot.accuralAmount}],Pt={documentType:{documentTypeDesc:"*",documentType:"*"},documentNo:"*",documentDate:"*",account:{accountDesc:"*"},documentLines:{account:{accountCode:"*",accountDesc:"*"},quantity:"*",voyage:{vessel:{vesselName:"*"},voyageHeader:{referenceNo:"*"}},documentAmount:"*"},documentAmount:"*",documentCurrency:{currencyCode:"*"},estimateAmountYtd:"*",accountAmountYtd:"*",accountAmount:"*"};var It=a(169);const Nt=e=>["sort=referenceNo(ASI)","filter=referenceNo(NOTNULL)","filter=voyageStatus.statusTypeCode(NE)FIN","filter=isBudget(EQ)false","filter=isEstimate(EQ)false","filter=isUnallocated(EQ)false","filter=voyage.fleetPlanVoyages.fleetPlan.fleetPlanCode(EQ)MASTER","filter=voyage.vessel.key(EQ)"+e].join("&"),At={date:null,companies:[],businessUnits:[],vessel:null,voyageHeader:null,includeAll:!1,keepEstimates:!1,createVoyageSnapshots:!1},Rt=e=>{const{open:t,onClose:a,reactKeyPrefix:r,onConfirm:i,userLocale:c}=e,[l]=Object(s.a)([f.a.IInternationalization]),{common:u,model:d,accruals:m}=l.getLanguageFile(),[p,y]=Object(o.useState)(At),b=Object(o.useCallback)(e=>t=>y(Object.assign(Object.assign({},p),{[e]:t})),[p]),C=Object(o.useCallback)(()=>{a(),y(At)},[a]),T=Object(o.useCallback)(()=>{i(p),y(At)},[p,i]),O=Object(o.useMemo)(()=>{var e,t,a;return!(null===(e=p.date)||void 0===e?void 0:e.getMonth())&&!(null===(t=p.date)||void 0===t?void 0:t.getFullYear())||!(null!==(a=null==p?void 0:p.companies)&&void 0!==a?a:[]).length},[null==p?void 0:p.companies,p.date]);return n.a.createElement(ge.a,{reactKeyPrefix:r+"-modal",open:t,onCloseModal:C,onConfirm:T,disableConfirmBtn:O,title:u.generateAccruals,maxWidth:"xs",fullWidth:!0,confirmBtnName:u.generate},n.a.createElement(ye.a,{container:!0,spacing:2},n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(Ce.a,{locale:c,reactKeyPrefix:r+"-date",value:p.date,showDay:!1,showShortDate:!1,label:u.month,onBlur:b("date"),required:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:d.company,objectPaths:["companyName"],type:g.a.company,reactKeyPrefix:r+"-company",onChange:b("companies"),formControlProps:{required:!0},shouldPreload:!0,isMulti:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:d.businessUnit,objectPaths:["businessUnitName"],type:g.a.businessunit,reactKeyPrefix:r+"-businessUnit",onChange:b("businessUnits"),shouldPreload:!0,isMulti:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:d.vessel,objectPaths:["vesselName"],fields:fe.g,type:g.a.vessel,reactKeyPrefix:r+"-vessel",onChange:b("vessel"),isClearable:!0,shouldPreload:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(be.b,{label:d.voyage,objectPaths:["referenceNo"],type:g.a.voyageheader,reactKeyPrefix:r+"-voyage",onChange:b("voyageHeader"),formHelperText:u.pleaseSelectAVessel,disabled:!p.vessel,shouldPreload:!!p.vessel,query:p.vessel?Nt(p.vessel.key):"sort=referenceNo(ASI)",isClearable:!0})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(It.a,{onInputChange:b("includeAll"),reactKeyPrefix:r+"-include-all",checked:p.includeAll,label:m.writeAll})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(It.a,{onInputChange:b("keepEstimates"),reactKeyPrefix:r+"-keep-estimates",checked:p.keepEstimates,label:m.keepEstimates})),n.a.createElement(ye.a,{xs:6,item:!0},n.a.createElement(It.a,{onInputChange:b("createVoyageSnapshots"),reactKeyPrefix:r+"-create-voyage-snapshots",checked:p.createVoyageSnapshots,label:m.createVoyageSnapshots}))))};var jt=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};const Dt=({reactKeyPrefix:e,openDrawer:t,enableBulkUpdate:a,userLocale:r})=>{var i,c;const[l,d]=Object(s.a)([f.a.IInternationalization,me.a.IAccrualController]),[m,p]=Object(o.useState)(!1),[y,b]=Object(o.useState)(!1),[T,O]=Object(o.useState)(!1),S=Object(o.useCallback)(()=>p(!m),[m]),h=Object(o.useCallback)(()=>b(!y),[y]),v=Object(o.useCallback)(()=>O(!T),[T]),{model:E,accruals:_,common:P}=l.getLanguageFile(),I=Object(o.useMemo)(()=>[[E.accrualPosted,"ACP"],[E.accrualReversed,"ACR"]],[E.accrualPosted,E.accrualReversed]),N=Object(o.useMemo)(()=>Object(Z.a)([...F("ACCRUALS_LIST_FILTER_GROUP_CODE").default,...z("ACCRUALS_LIST_FILTER_GROUP_CODE",I).default],"filters"),[I]),A=Object(o.useCallback)(e=>jt(void 0,void 0,void 0,(function*(){yield d.generate(e),pe.a.next(),S()})),[d,S]),R=Object(o.useMemo)(()=>Object.values(Q({reactKeyPrefix:e,filterGroupCode:"ACCRUALS_LIST_FILTER_GROUP_CODE",documentTypes:I,i:l})),[I,l,e]),j=null===(i=Object(ee.a)(((e,t)=>{var a;return null!==(a=Object(u.a)(Pe.a.getFiltersByCodes,e,e+t))&&void 0!==a?a:[]})("ACCRUALS_LIST_FILTER_GROUP_CODE","_STATUS")))||void 0===i?void 0:i.value.toString(),D=null!==(c=Object(u.a)(De.a.getTSModelsBuilt,g.a.document,{documentLines:{documentAmount:"*"}},"ACCRUALS_LIST_ID"))&&void 0!==c?c:[],L="PEN"===j,k=Re(j,P.accruals),U={toggleBatchPostModal:L?h:void 0},x=Object(o.useCallback)(e=>jt(void 0,void 0,void 0,(function*(){yield d.putStatusSelected(e),pe.a.next()})),[d]),M=Object(o.useCallback)(e=>{je(D,e)?Object(Le.a)(_.postSelected,_.postDialogMessage,P.post).then(t=>{t&&x(e)}):v()},[_.postDialogMessage,_.postSelected,P.post,D,x,v]),w=Object(o.useMemo)(()=>[{onClick:M,disabled:!1,label:P.post,reactKeyPrefix:e+"-selected-actions"}],[P.post,M,e]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ge.a,{reactKeyPrefix:e,open:T,title:P.incompleteSelection,maxWidth:"xs",fullWidth:!0,cancelBtnName:P.close,onCloseModal:v,hideConfirmBtn:!0},_.selectionWarning),n.a.createElement(Rt,{reactKeyPrefix:e+"-generate-modal",open:m,onClose:S,userLocale:r,onConfirm:A}),n.a.createElement(Ie.a,{reactKeyPrefix:e+"-batch-post",open:y,onClose:h,userLocale:r,fields:Pt,identifier:"ACCRUALS_LIST_ID",modalTitle:_.batchPostAccruals,documentTypes:[I[0][1],I[1][1]],accrual:!0}),n.a.createElement(C.a,{tableCustomisation:{disableToolbar:!1,disableCardSorting:!0,disableSorting:!1,aggregateTotals:!0},getColSpec:Et,tsmodelType:g.a.document,fields:Pt,listId:"ACCRUALS_LIST_ID",reactKeyPrefix:e+"-tsmodel-list",tableHeaders:_t,defaultSorts:Tt,sortOptions:Object.values(Ot),onClickItem:t,selectable:L,title:k,selectedActions:w,defaultFilters:N,quickFilters:n.a.createElement(n.a.Fragment,null,R),quickFiltersGroupCode:"ACCRUALS_LIST_FILTER_GROUP_CODE",enableBulkUpdate:a,topLeftElements:n.a.createElement(_e,Object.assign({reactKeyPrefix:e+"-tsmodel-list-generate-action",toggleGenerateModal:S},U,{i:l}))}))};var Lt=a(95);const kt={authorizationType:p.a.PERMISSION,authorizedPermissions:d.a.accruals.authorizedPermissions,behaviorOnAuthorizationFail:l.a.REDIRECT_NO_AUTHORIZATION};function Ut(){var e;Object(c.b)(kt);const[t]=Object(s.a)([f.a.IInternationalization]),{accruals:a,menu:l,common:d}=t.getLanguageFile(),[p,b]=Object(o.useState)(!1),C=Object(o.useRef)(p),g="doc-modules-accruals-page",T=null!==(e=Object(u.a)(m.a.getUserLocale))&&void 0!==e?e:y.f[0],O=Object(r.g)(),S=Object(r.h)(),h=Object(o.useCallback)((e,t)=>{ft.a.openDrawer(t,e,S,O)},[S,O]),v=Object(o.useMemo)(()=>[{id:"accruals",label:d.accruals,content:()=>n.a.createElement(Dt,{reactKeyPrefix:g+"-accruals-list",openDrawer:h.bind(null,pt.a.accrualDrawer),enableBulkUpdate:p,userLocale:T})},{id:"bunker-stock-adjustments",label:a.bunkerStockAdjustments,content:()=>n.a.createElement(Ue,{reactKeyPrefix:g+"-bunker-stock-list",openDrawer:h.bind(null,pt.a.bunkerStockAdjustmentDrawer),enableBulkUpdate:p,userLocale:T})},{id:"actuals",label:a.actuals,content:()=>n.a.createElement($,{reactKeyPrefix:g+"-actuals-list",openDrawer:h.bind(null,pt.a.actualDrawer),enableBulkUpdate:p})},{id:"time-correction",label:a.timeCorrection,content:()=>n.a.createElement(mt,{reactKeyPrefix:g+"-time-correction-list",userLocale:T,enableBulkUpdate:p})}],[d.accruals,a.bunkerStockAdjustments,a.actuals,a.timeCorrection,h,p,T]);Object(o.useCallback)(()=>{b(!C.current)},[C,b]);Object(o.useEffect)(()=>{C.current=p},[p]);t.lang().common.bulkUpdate,Lt.a.ACCRUAL_CONTRIIBUTOR;return n.a.createElement(i.a,{reactKeyPrefix:g+"-page",tabs:v},n.a.createElement(yt.a,null))}},1893:function(e,t,a){"use strict";a.d(t,"a",(function(){return Re}));a(10),a(11);var o=a(0),n=a.n(o),r=a(6),i=a(3),c=a(187),l=a(695),s=a(1419),u=a(97),d=a(76),m=a(65),p=a(329),y=a(47),f=a(1),b=a(43),C=a(241),g=a(21),T=a(42),O=a(41),S=a(646),h=a(984),v=a(214),E=a(130),_=a(893),P=a(1429),I=a(413),N=a.n(I);const A=Object(l.a)(e=>Object(c.a)({li:{minHeight:50},list:{display:"flex",flexDirection:"column",justifyContent:"space-evenly"},listWrapper:{maxWidth:500,width:"100%"}}))(e=>{const{listItems:t,classes:a}=e,o=t.map((e,o)=>n.a.createElement(h.a,{id:"doc-modules-account-pages-personal-info-personal-info-details-list-list-item",divider:o+1!==t.length,key:"account_list_item_"+o,button:!!e.onClick,onClick:e.onClick,className:a.li},n.a.createElement(v.a,{container:!0,alignItems:"center"},n.a.createElement(v.a,{item:!0,xs:4},n.a.createElement(E.a,{variant:"overline"},e.name.toUpperCase())),n.a.createElement(v.a,{item:!0,xs:7},n.a.createElement(E.a,{variant:"body1"},e.value)),!!e.onClick&&n.a.createElement(v.a,{item:!0,xs:1},n.a.createElement(N.a,null)))));return n.a.createElement(_.a,{className:a.listWrapper},n.a.createElement(P.a,{"aria-label":"Account information",className:a.list},o))});var R=a(57),j=a(70),D=a(37),L=a(12),k=a(44),U=a(92),x=a(139),M=a(19);class w extends n.a.Component{constructor(e){super(e),this.state={email:e.user.email,emailValid:!0},this.i=e.deps[0],this.onClickConfirm=this.onClickConfirm.bind(this),this.onEmailChange=this.onEmailChange.bind(this),this.enterPressed=this.enterPressed.bind(this)}onClickConfirm(){const{user:e,onCloseModal:t}=this.props,{email:a,emailValid:o}=this.state;a&&a!==e.email&&o&&(U.a.getUpdateFieldFunction({fieldToSet:"email",fields:S.a,key:e.key,type:f.a.user})(a),t())}onEmailChange(e,t){this.setState({email:e,emailValid:t})}enterPressed(e){"Enter"===e.key&&this.onClickConfirm()}getColSpec(){const{user:e,reactKeyPrefix:t}=this.props;return Object(M.a)({disableUpdate:!0,fieldOptions:[{fieldName:"email",textInputProps:{letterCase:R.a.LOWERCASE,onInputChange:this.onEmailChange,validation:j.b.Email}}],object:new x.a({email:e.email}),type:f.a.contactinfo,userLocale:this.props.userLocale,reactKeyPrefix:t})}render(){const{showModal:e,onCloseModal:t,user:a,reactKeyPrefix:o}=this.props,{email:r,emailValid:i}=this.state,c=this.i.getLanguageFile(),l=!r||!i||r===a.email;return n.a.createElement(k.a,{reactKeyPrefix:o+"modal",open:e,maxWidth:"xs",fullWidth:!0,title:c.alerts.changeEmail,onConfirm:this.onClickConfirm,disableConfirmBtn:l,confirmBtnName:c.common.ok,fullscreenOnMobile:!0,onCloseModal:t},n.a.createElement(D.a,{reactKeyPrefix:o,items:this.getColSpec(),breakpoints:L.e}))}}const B=Object(r.b)([i.a.IInternationalization],w);var K=a(861);class G extends n.a.Component{constructor(e){super(e),this.state={password:"",requiredFieldsValid:!0},this.i=e.deps[0],this.onClickConfirm=this.onClickConfirm.bind(this),this.onChangePassword=this.onChangePassword.bind(this)}onClickConfirm(){const{user:e,onCloseModal:t}=this.props,{password:a}=this.state;U.a.getUpdateFieldFunction({fieldToSet:"userPassword",fields:S.a,key:e.key,type:f.a.user})(a),t()}onChangePassword(e,t,a){this.setState({password:e,requiredFieldsValid:t&&a})}render(){const{showModal:e,onCloseModal:t,user:a,reactKeyPrefix:o}=this.props,{requiredFieldsValid:r,password:i}=this.state,c=this.i.getLanguageFile();return n.a.createElement(k.a,{reactKeyPrefix:o,open:e,maxWidth:"xs",fullWidth:!0,title:"Change Password",onConfirm:this.onClickConfirm,confirmBtnName:c.common.ok,fullscreenOnMobile:!0,onCloseModal:t,disableConfirmBtn:!(i&&r)},n.a.createElement(K.a,{reactKeyPrefix:o+"password-input",allowTogglePasswordVisibility:!0,confirmationRequired:!0,onInputChange:this.onChangePassword,autoFocus:!0,user:a}))}}const F=Object(r.b)([i.a.IInternationalization],G);var q=a(20),H=a(33);class z extends o.Component{constructor(e){super(e),this.state=Object.assign(Object.assign({},e.state),{showEmailModal:!1,showPasswordModal:!1,isAzureInstallation:!1}),this.i=this.props.deps[0],this.controller=e.controller,this.onClickEmailListItem=this.onClickEmailListItem.bind(this),this.onCloseEmailModal=this.onCloseEmailModal.bind(this),this.onClickPasswordListItem=this.onClickPasswordListItem.bind(this),this.onClosePasswordModal=this.onClosePasswordModal.bind(this),this.onIsAzureInstallation=this.onIsAzureInstallation.bind(this)}UNSAFE_componentWillMount(){const{userId:e}=this.state;e&&this.controller.loadUserAndSetSelected(e);const[t,a]=this.props.deps;a.getDataloyInfo().then(e=>{var t;return this.onIsAzureInstallation(null!==(t=e.isAzureInstallation)&&void 0!==t&&t)})}UNSAFE_componentWillReceiveProps(e){this.setState(Object.assign({},e.state))}onIsAzureInstallation(e){this.setState({isAzureInstallation:e})}onClickEmailListItem(){this.setState({showEmailModal:!0})}onCloseEmailModal(){this.setState({showEmailModal:!1})}onClickPasswordListItem(){this.setState({showPasswordModal:!0})}onClosePasswordModal(){this.setState({showPasswordModal:!1})}render(){const{user:e,showPasswordModal:t,showEmailModal:a,userLocale:o,isAzureInstallation:r}=this.state,{classes:i}=this.props,c=this.i.getLanguageFile();if(e){const l=e.passwordLastChanged?Object(s.a)(e.passwordLastChanged,new Date,{addSuffix:!0,locale:o.localeConfig}):void 0,u=[{name:c.model.userName,onClick:void 0,value:e.userName},{name:c.model.userCode,onClick:void 0,value:e.userCode},{name:c.model.email,onClick:this.onClickEmailListItem,value:e.email},{name:c.model.password,onClick:r?void 0:this.onClickPasswordListItem,value:l}];return n.a.createElement("div",{className:i.wrapper},n.a.createElement(A,{listItems:u}),n.a.createElement(F,{reactKeyPrefix:"doc-modules-account-pages-personal-info-change-password-modal",onCloseModal:this.onClosePasswordModal,showModal:t,user:e}),n.a.createElement(B,{reactKeyPrefix:"doc-modules-account-pages-personal-info-change-email-modal",showModal:a,onCloseModal:this.onCloseEmailModal,user:e,userLocale:o}))}return null}}const W={authorizationType:O.a.PERMISSION,authorizedPermissions:H.a.account.authorizedPermissions,behaviorOnAuthorizationFail:m.a.REDIRECT_NO_AUTHORIZATION},Y=Object(d.a)(W,Object(y.a)(e=>{const t=C.a.getUserData(e),a=t?t.key:0;return{user:g.a.getTSModelBuilt(e,f.a.user,a,S.a)||new b.a({}),userId:a,userLocale:T.a.getUserLocale(e)}},Object(r.b)([i.a.IInternationalization,q.a.IDataloyInfoController],Object(p.a)(q.a.IPersonalInfoTabController,Object(u.k)(Object(l.a)(e=>Object(c.a)({header:{marginBottom:e.spacing(2)},wrapper:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:e.spacing(2)}}))(z))))));var V=a(73),X=a(1263),Q=a(7),J=a(213),$=a(1203),Z=a(1204),ee=a(2107),te=a(2461),ae=a(982),oe=a(61),ne=(a(93),a(169)),re=a(5),ie=a(14),ce=a(32),le=a(736);const se=ie.a.get(i.a.IInternationalization),{model:ue,common:de}=se.getLanguageFile(),me=e=>{const{webhookTemplateCode:t,webhookTemplateName:a,webhookTemplateDescription:o,webhookSubscriptions:i}=e,[c,l]=Object(r.a)([Q.a.Store,q.a.INotificationSettingsController]),s=Object(ce.a)(c.getState()),u=i.some(e=>{var t,a,o;return(null===(t=e.user)||void 0===t?void 0:t.key)===s.key&&!e.unsubscribed&&(null===(o=null===(a=e.channelInfo)||void 0===a?void 0:a.channelType)||void 0===o?void 0:o.channelTypeCode)===le.a.WSOC}),d=i.some(e=>{var t,a,o;return(null===(t=e.user)||void 0===t?void 0:t.key)===s.key&&!e.unsubscribed&&(null===(o=null===(a=e.channelInfo)||void 0===a?void 0:a.channelType)||void 0===o?void 0:o.channelTypeCode)===le.a.EMAIL});return[t,a,o,{rawValue:u,content:n.a.createElement(ne.a,{reactKeyPrefix:"doc-modules-account-pages-notifications-push-notification-cbx",disabled:!1,checked:u,onInputChange:()=>l.toggleSubscription(le.a.WSOC,e,s,u)})},{rawValue:d,content:n.a.createElement(ne.a,{reactKeyPrefix:"doc-modules-account-pages-notifications-email-notification-cbx",disabled:!1,checked:d,onInputChange:()=>l.toggleSubscription(le.a.EMAIL,e,s,d)})}]},pe=[{content:de.code,contentType:re.a.TEXT},{content:ue.name,contentType:re.a.TEXT},{content:de.description,contentType:re.a.TEXT},{content:de.pushNotification,contentType:re.a.ELEMENT},{content:ue.email,contentType:re.a.ELEMENT}];var ye=a(459),fe=a(16);const be=ie.a.get(i.a.IInternationalization),{model:Ce,common:ge}=be.lang(),Te=[{field:ge.code,groupCode:"NOTIFICATION_SETTINGS_LIST_SORT_GROUP_CODE",operator:fe.b.ASC,queryParamName:"webhookTemplateCode"},{field:Ce.name,groupCode:"NOTIFICATION_SETTINGS_LIST_SORT_GROUP_CODE",operator:fe.b.ASC,queryParamName:"webhookTemplateName"}],Oe=[{field:ge.code,groupCode:"NOTIFICATION_SETTINGS_LIST_SORT_GROUP_CODE",operator:fe.b.ASC,queryParamName:"webhookTemplateCode"}];var Se=a(24),he=a(4);const ve=ie.a.get(i.a.IInternationalization),{model:Ee,common:_e}=ve.getLanguageFile(),Pe={code:e=>{const t={field:"webhookTemplateCode",filterGroupCode:e,operator:he.c.IN,type:he.d.STRING};return{label:_e.code,filterObjectValuePath:"webhookTemplateCode",typeaheadProps:{type:f.a.webhooktemplate,objectPaths:["webhookTemplateCode"],query:"filter=webhookTemplateCode(NOTNULL)&sort=webhookTemplateCode(ASI)",shouldPreload:!0},filters:[t]}},name:e=>{const t={field:"webhookTemplateName",filterGroupCode:e,operator:he.c.IN,type:he.d.STRING};return{label:Ee.name,filterObjectValuePath:"webhookTemplateName",typeaheadProps:{type:f.a.webhooktemplate,objectPaths:["webhookTemplateName"],query:"filter=webhookTemplateName(NOTNULL)&sort=webhookTemplateName(ASI)",shouldPreload:!0},filters:[t]}}};function Ie({reactKeyPrefix:e}){const t=ie.a.get(i.a.IInternationalization),{model:a,common:o}=t.getLanguageFile();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Se.a,{reactKeyPrefix:e+"-notification-setting-code-filter",configs:[Pe.code("NOTIFICATION_SETTINGS_FILTER_GROUP_CODE")],type:he.b.TYPEAHEAD,filterCode:"NOTIFICATION_SETTINGS_FILTER_GROUP_CODE_code",label:o.code}),n.a.createElement(Se.a,{reactKeyPrefix:e+"notification-setting-name-filter",configs:[Pe.name("NOTIFICATION_SETTINGS_FILTER_GROUP_CODE")],type:he.b.TYPEAHEAD,filterCode:"NOTIFICATION_SETTINGS_FILTER_GROUP_CODE_name",label:a.name}))}const Ne=Object(J.a)(Object(c.a)(e=>({listWrapper:{maxWidth:700,display:"flex",flexDirection:"column",alignItems:"center"},toggle:{marginBottom:e.spacing(2)}})));function Ae(){const[e,t]=Object(r.a)([i.a.IInternationalization,Q.a.Store]),{common:a}=e.getLanguageFile(),c=Ne({}),[l,s]=Object(o.useState)(Object(Z.a)(t.getState())),u=Object(o.useCallback)(()=>{const e=!l;Object($.b)(e),s(e)},[l]),d=Object(o.useMemo)(()=>n.a.createElement(ee.a,{onClick:u,checked:!!l}),[l,u]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{className:c.listWrapper},n.a.createElement(ae.a,{label:a.allowPushNotifications,labelPlacement:"start",id:"doc-modules-account-pages-notifications-toggle-btn",control:d,className:c.toggle})),n.a.createElement(oe.a,{getColSpec:me,tsmodelType:f.a.webhooktemplate,fields:ye.a,listId:"NOTIFICATIONS_LIST_ID",reactKeyPrefix:"doc-modules-account-pages-notifications-tsmodel-list",tableHeaders:pe,defaultSorts:Oe,sortOptions:Te,quickFilters:n.a.createElement(Ie,{reactKeyPrefix:"doc-modules-account-pages-notifications"}),quickFiltersGroupCode:"NOTIFICATION_SETTINGS_FILTER_GROUP_CODE"}))}function Re(){const[e]=Object(r.a)([i.a.IInternationalization]),{common:t}=e.lang(),a=Object(o.useMemo)(()=>[{id:"personal-info",label:t.personalInfo,content:()=>n.a.createElement(Y,null)},{id:"preferences",label:t.preferences,content:()=>n.a.createElement(X.a,null)},{id:"notification-settings",label:t.notificationSettings,content:()=>n.a.createElement(Ae,null)}],[t.notificationSettings,t.personalInfo,t.preferences]);return n.a.createElement(V.a,{reactKeyPrefix:"doc-modules-account-pages-account-page",tabs:a})}},1926:function(e,t,a){"use strict";a.d(t,"a",(function(){return B}));var o=a(0),n=a.n(o),r=a(97),i=a(73),c=a(61),l=a(1),s=a(80),u=(a(93),a(14)),d=a(3),m=a(5);const p=u.a.get(d.a.IInternationalization),{common:y}=p.getLanguageFile(),f=({accountDesc:e,accountCode:t,glAccount:a})=>[e,t,a],b=[{content:y.description,contentType:m.a.TEXT},{content:y.code,contentType:m.a.TEXT},{content:y.glAccount,contentType:m.a.TEXT}];var C=a(1844),g=a(16);const T=u.a.get(d.a.IInternationalization),{common:O}=T.getLanguageFile(),S=[{field:O.description,groupCode:"ACCOUNTS_LIST_SORT_GROUP_CODE",operator:g.b.ASC,queryParamName:"accountDesc"}];var h=a(41),v=a(65),E=a(33),_=a(76),P=a(27),I=a(15),N=a(4),A=a(24),R=(a(10),a(11),a(6));const[j]=Object(R.a)([d.a.IInternationalization]),{common:D}=j.getLanguageFile(),L=e=>{const t={field:"key",filterGroupCode:e,operator:N.c.IN,type:N.d.STRING};return[{label:D.description,filterObjectValuePath:"key",typeaheadProps:{type:l.a.account,objectPaths:["accountDesc"],includeDisabledQuery:!0},filters:[t]}]},k=e=>{const t={field:"key",filterGroupCode:e,operator:N.c.IN,type:N.d.STRING};return[{label:D.code,filterObjectValuePath:"key",typeaheadProps:{type:l.a.account,objectPaths:["accountCode"],includeDisabledQuery:!0},filters:[t]}]},U=e=>{const t={field:"key",filterGroupCode:e,operator:N.c.IN,type:N.d.STRING};return[{label:D.glAccount,filterObjectValuePath:"key",typeaheadProps:{type:l.a.account,objectPaths:["glAccount"],query:"filter=glAccount(NOTNULL)",includeDisabledQuery:!0},filters:[t]}]},x=e=>[{label:"",filters:[{field:"isObjectActive",filterGroupCode:e,operator:N.c.NOT_EQUALS,type:N.d.BOOLEAN,value:!0}]}];function M({reactKeyPrefix:e}){const t=u.a.get(d.a.IInternationalization),{common:a}=t.lang();return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{reactKeyPrefix:e+"-description",configs:L("ACCOUNTS_LIST_FILTER_GROUP_CODE"),type:N.b.TYPEAHEAD,label:a.description,filterCode:"ACCOUNTS_LIST_FILTER_GROUP_CODE_DESCRIPTION",clearOnMount:!1}),n.a.createElement(A.a,{reactKeyPrefix:e+"-accountCode",configs:k("ACCOUNTS_LIST_FILTER_GROUP_CODE"),type:N.b.TYPEAHEAD,label:a.code,filterCode:"ACCOUNTS_LIST_FILTER_GROUP_CODE_ACCOUNT_CODE",clearOnMount:!1}),n.a.createElement(A.a,{reactKeyPrefix:e+"-glAccount",configs:U("ACCOUNTS_LIST_FILTER_GROUP_CODE"),type:N.b.TYPEAHEAD,label:a.glAccount,filterCode:"ACCOUNTS_LIST_FILTER_GROUP_CODE_GL_ACCOUNT",clearOnMount:!1}),n.a.createElement(A.a,{reactKeyPrefix:e+"-disabled",configs:x("ACCOUNTS_LIST_FILTER_GROUP_CODE"),type:N.b.BOOLEAN,label:a.disabled,filterCode:"ACCOUNTS_LIST_FILTER_GROUP_CODE_DISABLED"}))}const w={authorizationType:h.a.PERMISSION,authorizedPermissions:E.a.accounts.authorizedPermissions,behaviorOnAuthorizationFail:v.a.REDIRECT_NO_AUTHORIZATION},B=()=>{Object(_.b)(w);const e=Object(r.g)(),t=Object(r.h)(),a=Object(o.useCallback)(a=>{P.a.openDrawer(a,I.a.accountDrawer,t,e)},[t,e]);return n.a.createElement(i.a,{reactKeyPrefix:"doc-modules-accounts-page"},n.a.createElement(c.a,{fields:C.a,listId:"ACCOUNTS_LIST_ID",reactKeyPrefix:"doc-modules-accounts-list",tsmodelType:l.a.account,getColSpec:f,tableHeaders:b,defaultSorts:S,quickFilters:n.a.createElement(M,{reactKeyPrefix:"doc-modules-accounts-quickfilter"}),quickFiltersGroupCode:"ACCOUNTS_LIST_FILTER_GROUP_CODE",onClickItem:a}),n.a.createElement(s.a,null))}},1927:function(e,t,a){"use strict";a.d(t,"a",(function(){return V}));a(10),a(11);var o=a(6),n=a(3),r=a(0),i=a.n(r),c=a(97),l=a(61),s=a(73),u=a(1),d=a(33),m=a(15),p=a(80),y=a(27),f=a(24),b=a(14),C=a(4);const g=b.a.get(n.a.IInternationalization),{common:T,model:O}=g.lang(),S=e=>({label:O.name,filterObjectValuePath:"key",typeaheadProps:{type:u.a.bank,objectPaths:["bankName"],includeDisabledQuery:!0},filters:[{field:"key",filterGroupCode:e,operator:C.c.IN,type:C.d.STRING}]}),h=e=>({label:T.disabled,filters:[{field:"isObjectActive",filterGroupCode:e,operator:C.c.NOT_EQUALS,queryParamName:"isObjectActive",type:C.d.BOOLEAN,value:!0}]}),v=({reactKeyPrefix:e,filterGroupCode:t})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{reactKeyPrefix:e+"-bank-name",configs:[S(t)],type:C.b.TYPEAHEAD,label:O.name,filterCode:t+"_BANK_NAME"}),i.a.createElement(f.a,{reactKeyPrefix:e+"-disabled",configs:[h(t)],type:C.b.BOOLEAN,label:T.disabled,filterCode:t+"_DISABLED"}));var E=a(5);const _=b.a.get(n.a.IInternationalization),{model:P}=_.getLanguageFile(),I=[{content:P.name,contentType:E.a.TEXT},{content:P.city,contentType:E.a.TEXT},{content:P.country,contentType:E.a.TEXT}],N=({bankName:e,addresses:t})=>{var a,o,n,r,i;return[e,null!==(o=null===(a=t[0])||void 0===a?void 0:a.city)&&void 0!==o?o:"",null!==(i=null===(r=null===(n=t[0])||void 0===n?void 0:n.country)||void 0===r?void 0:r.countryName)&&void 0!==i?i:""]};var A=a(16);const R=b.a.get(n.a.IInternationalization),{model:j,common:D}=R.getLanguageFile(),L="BANKS_LIST_SORT_GROUP_CODE",k=[{field:j.name,groupCode:L,operator:A.b.ASC,queryParamName:"bankName"}],U=[{field:j.name,groupCode:L,operator:A.b.ASC,queryParamName:"bankName"},{field:j.city,groupCode:L,operator:A.b.ASC,queryParamName:"addresses[0].city"},{field:j.country,groupCode:L,operator:A.b.ASC,queryParamName:"addresses[0].country.countryName"}],x={bankName:"*",addresses:{city:"*",country:{countryName:"*"}}};var M=a(2016),w=a(46),B=a(66),K=a(30),G=a(23),F=a(43),q=a(32),H=a(41),z=a(65),W=a(76);const Y={authorizationType:H.a.PERMISSION,authorizedPermissions:d.a.banks.authorizedPermissions,behaviorOnAuthorizationFail:z.a.REDIRECT_NO_AUTHORIZATION};function V(){var e;Object(W.b)(Y);const[t]=Object(o.a)([n.a.IInternationalization]),{common:a}=t.getLanguageFile(),d=null!==(e=Object(G.a)(q.a))&&void 0!==e?e:new F.a({}),[f,b]=Object(r.useState)(!1),C=Object(r.useCallback)(()=>b(e=>!e),[]),g=[{onClick:C,text:a.createBank,disabled:!Object(B.a)([K.a.BankPOST],d)}],T=Object(c.g)(),O=Object(c.h)(),S=Object(r.useCallback)(e=>y.a.openDrawer(e,m.a.bankDrawer,O,T),[T,O]),h=Object(r.useCallback)((e,{key:t})=>{t&&(S(t),w.a.next())},[S]);return i.a.createElement(s.a,{reactKeyPrefix:"doc-modules-banks-pages-list-page",createObject:g},f&&i.a.createElement(M.a,{reactKeyPrefix:"doc-modules-banks-pages-list-create",showModal:f,closeModal:C,onCreate:h}),i.a.createElement(l.a,{fields:x,listId:"BANKS_LIST_ID",reactKeyPrefix:"doc-modules-banks-pages-list-tsmodel-list",defaultSorts:k,sortOptions:U,tsmodelType:u.a.bank,tableHeaders:I,getColSpec:N,quickFilters:i.a.createElement(v,{reactKeyPrefix:"doc-modules-banks-pages-list-filters",filterGroupCode:"BANKS_LIST_FILTER_GROUP_CODE"}),onClickItem:S,quickFiltersGroupCode:"BANKS_LIST_FILTER_GROUP_CODE"}),i.a.createElement(p.a,null))}},646:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));const o={contactInfo:{email:"*",faxNo:"*",mobileNo:"*",phoneNo:"*",telexNo:"*"},email:"*",passwordLastChanged:"*",userCode:"*",userName:"*"}},736:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return S}));a(59);var o,n,r,i=a(1),c=a(313),l=a(29),s=a(7),u=a(3),d=a(545),m=a(356),p=a(648),y=a(46),f=a(459),b=a(9),C=function(e,t,a,o){var n,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T=function(e,t){return function(a,o){t(a,o,e)}},O=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((o=o.apply(e,t||[])).next())}))};!function(e){e.WSOC="WSOC",e.EMAIL="EMAIL",e.DB="DB"}(r||(r={}));let S=class{constructor(e,t){this.tsModelActions=e,this.websocketUtils=t}toggleSubscription(e,t,a,o){o?this.unsubscribeFromChannel(e,t,a):this.subscribeToChannel(e,t,a)}subscribeToChannel(e,t,a){return O(this,void 0,void 0,(function*(){const o=yield this.getSubscription(e,a.key,t.key,!0);if(o)this.updateExistingSubscription(e,t,a,!0,o);else{const o=this.getWebhookSubscription(t,e,a);o&&this.createSubscription(o)}}))}unsubscribeFromChannel(e,t,a){return O(this,void 0,void 0,(function*(){const o=yield this.getSubscription(e,a.key,t.key,!1);o&&this.updateExistingSubscription(e,t,a,!1,o)}))}updateExistingSubscription(e,t,a,o,n){return O(this,void 0,void 0,(function*(){if(e===r.WSOC){const e=yield this.getSubscription(r.DB,a.key,t.key,o);e&&this.updateSubscription(e.key,!o,r.DB)}this.updateSubscription(n.key,!o,e)}))}getSubscription(e,t,a,o){return O(this,void 0,void 0,(function*(){let n=[];const r=[`filter=unsubscriptionDate(${o?"NOTNULL":"NULL"})`,"filter=channelInfo.channelType.channelTypeCode(EQ)"+e,"filter=user.key(EQ)"+t,"filter=webhookTemplate.key(EQ)"+a].join("&");return yield this.tsModelActions.loadMultipleAction({query:r,type:i.a.webhooksubscription}).then(e=>{n=e.entities}),n[0]}))}getWebhookSubscription(e,t,a){let o=void 0;return t&&a&&(o=new c.a({channelInfo:{url:a.email,channelType:{channelTypeCode:t}},templateMsg:e.templateMsg,json:e.json,exression:e.expression,onlyMainObject:e.onlyMainObject||!1,user:a.key,webhookTemplate:e,unsubscribed:!1}),e.dlpAlertScript?o.dlpAlertScript=e.dlpAlertScript:(o.objectType=e.objectType,o.eventType=e.eventType)),o}createSubscription(e){var t,a;const o=null===(a=null===(t=e.channelInfo)||void 0===t?void 0:t.channelType)||void 0===a?void 0:a.channelTypeCode;if(o){if(o===r.WSOC){this.createWebhookSubscription(Object(d.a)(e,!1),r.DB);const t=null!==e.dataloyObject?"/"+e.dataloyObject:"";this.websocketUtils.createWebsocketSubscription(`${this.websocketUtils.getBaseUrlForSocket()}/${this.websocketUtils.WebsocketEndpoint.objectSubscription}/${e.objectType}/${e.eventType}${t}`,[p.a])}this.createWebhookSubscription(Object(d.c)(e,!1),o)}}updateSubscription(e,t,a){const o={unsubscribed:t},n=a===r.DB?void 0:()=>y.a.next();this.tsModelActions.updateSingleAction({fields:f.c,type:i.a.webhooksubscription,data:o,key:e,callback:n})}createWebhookSubscription(e,t){const a=t===r.DB?void 0:()=>y.a.next();this.tsModelActions.createAction({fields:f.c,type:i.a.webhooksubscription,data:e,callback:a})}};S=C([Object(b.injectable)(),T(0,Object(b.inject)(s.a.ITSModelActionsAsync)),T(1,Object(b.inject)(u.a.IWebsocketUtils)),g("design:paramtypes",["function"==typeof(o=void 0!==l.ITSModelActionsAsync&&l.ITSModelActionsAsync)?o:Object,"function"==typeof(n=void 0!==m.IWebsocketUtils&&m.IWebsocketUtils)?n:Object])],S)},946:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return y}));a(10),a(11);var o=a(214),n=a(0),r=a.n(n),i=a(102),c=a(215),l=a(44),s=a(6),u=a(1),d=a(3),m=a(20);const p="FREEZE_TIME_CORRECTIONS_LIST_ID";function y({reactKeyPrefix:e,open:t,onClose:a,userLocale:p}){const[y,f]=Object(s.a)([d.a.IInternationalization,m.a.ITimeCorrectionController]),[b,C]=Object(n.useState)(null),[g,T]=Object(n.useState)(null),[O,S]=Object(n.useState)([]),[h,v]=Object(n.useState)([]),E=y.getLanguageFile(),_=!b||!g||!h.length,P=Object(n.useCallback)(e=>{e&&g&&g<e?(C(e),T(e)):C(e)},[g]),I=Object(n.useCallback)(e=>{e&&b&&b>e?(T(e),C(e)):T(e)},[b]),N=Object(n.useCallback)(()=>{a(),C(new Date),T(new Date)},[a]),A=Object(n.useCallback)(()=>{b&&g&&h.length&&(N(),f.freezeTimeCorrections(b,g,h,O))},[h,O,b,N,f,g]);return r.a.createElement(l.a,{title:E.accruals.freezeTimeCorrections,confirmBtnName:E.common.freeze,open:t,reactKeyPrefix:e+"-modal",onCloseModal:N,onConfirm:A,fullWidth:!0,maxWidth:"xs",disableConfirmBtn:_},r.a.createElement(o.a,{container:!0,spacing:2},r.a.createElement(o.a,{item:!0,xs:6},r.a.createElement(c.a,{reactKeyPrefix:e+"-from-year-month",label:E.common.fromMonth,onBlur:P,value:b,locale:p,showDay:!1,showShortDate:!1,required:!0})),r.a.createElement(o.a,{item:!0,xs:6},r.a.createElement(c.a,{reactKeyPrefix:e+"-to-year-month",label:E.common.toMonth,onBlur:I,value:g,locale:p,showDay:!1,showShortDate:!1,required:!0})),r.a.createElement(o.a,{xs:12,item:!0},r.a.createElement(i.b,{reactKeyPrefix:e+"-companies",label:E.model.company,type:u.a.company,objectPaths:["companyName"],onChange:v,formControlProps:{required:!0},shouldPreload:!0,isMulti:!0})),r.a.createElement(o.a,{item:!0,xs:12},r.a.createElement(i.b,{reactKeyPrefix:e+"-business-units",label:E.model.businessUnits,type:u.a.businessunit,objectPaths:["businessUnitName"],onChange:S,shouldPreload:!0,isMulti:!0}))))}}}]);