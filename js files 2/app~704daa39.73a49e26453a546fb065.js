(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1264:function(e,t,a){"use strict";a.d(t,"a",(function(){return ee}));a(10),a(11);var o=a(0),n=a.n(o),l=a(420),r=a(61),i=a(73),c=a(6),s=a(23),b=a(1),u=a(626),d=a(21),p=a(42),m=a(35),y=a(3),T=a(80),f=a(12),O=a(19),E=a(84),h=a(500);var j=a(24),k=a(4),I=a(14);const C=I.a.get(y.a.IInternationalization),{model:P}=C.lang(),v=e=>{const t={field:"objectType",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return{label:P.objectType,filterObjectValuePath:"objectType",typeaheadProps:{type:b.a.webhooknotification,objectPaths:["objectType"],query:"filter=objectType(NOTNULL)",shouldPreload:!0},filters:[t]}},w=e=>({label:P.isFailed,filterObjectValuePath:"isFailed",filters:[{field:"isFailed",filterGroupCode:e,operator:k.c.NOT_EQUALS,queryParamName:"isFailed",type:k.d.BOOLEAN,value:!1}]}),S=e=>{const t={field:"object",filterGroupCode:e,operator:k.c.IN,type:k.d.NUMBER,isKeyFilter:!0};return{label:P.dataloyObjectKey,filterObjectValuePath:"object",typeaheadProps:{type:b.a.webhooknotification,objectPaths:["object"],shouldPreload:!0},filters:[t]}},g=e=>{const t={field:"attempts",filterGroupCode:e,operator:k.c.IN,type:k.d.NUMBER};return{label:P.attempts,filterObjectValuePath:"attempts",typeaheadProps:{type:b.a.webhooknotification,objectPaths:["attempts"]},filters:[t],shouldPreload:!0}},N=e=>{const t={field:"webhookSub.key",filterGroupCode:e,operator:k.c.IN,type:k.d.NUMBER};return{label:"Subscription",filterObjectValuePath:"key",typeaheadProps:{type:b.a.webhooksubscription,objectPaths:["key"],query:"filter=key(IN)",shouldPreload:!0},filters:[t]}},x=e=>{const t={field:"webhookSub.user.key",filterGroupCode:e,operator:k.c.IN,type:k.d.STRING};return{label:P.user,filterObjectValuePath:"key",typeaheadProps:{type:b.a.user,objectPaths:["userName"],shouldPreload:!0},filters:[t]}};function _({reactKeyPrefix:e,filterGroupCode:t,onListPage:a}){const[o]=Object(c.a)([y.a.IInternationalization]),{model:l,webhooks:r}=o.lang();return n.a.createElement(n.a.Fragment,null,a&&n.a.createElement(n.a.Fragment,null,n.a.createElement(j.a,{reactKeyPrefix:e+"-subscription",configs:[N(t)],type:k.b.TYPEAHEAD,label:r.webhookKey,filterCode:t+"_SUBSCRIPTION",clearOnMount:!1})),n.a.createElement(j.a,{reactKeyPrefix:e+"-object-type",configs:[v(t)],type:k.b.TYPEAHEAD,label:l.objectType,filterCode:t+"_OBJECT_TYPE",clearOnMount:!1}),n.a.createElement(j.a,{reactKeyPrefix:e+"-is-failed",configs:[w(t)],type:k.b.BOOLEAN,label:l.isFailed,filterCode:t+"_IS_FAILED",clearOnMount:!1}),n.a.createElement(j.a,{reactKeyPrefix:e+"-object-key",configs:[S(t)],type:k.b.TYPEAHEAD,label:l.dataloyObjectKey,filterCode:t+"_OBJECT_KEY",clearOnMount:!1}),n.a.createElement(j.a,{reactKeyPrefix:e+"-attempts",configs:[g(t)],type:k.b.TYPEAHEAD,label:l.attempts,filterCode:t+"_ATTEMPTS",clearOnMount:!1}),a&&n.a.createElement(n.a.Fragment,null,n.a.createElement(j.a,{reactKeyPrefix:e+"-user",configs:[x(t)],type:k.b.TYPEAHEAD,label:l.user,filterCode:t+"_USER",clearOnMount:!1})))}var A=a(16);const K=I.a.get(y.a.IInternationalization),{model:R}=K.lang();function L(e){return[{field:R.notificationKey,groupCode:e,operator:A.b.DESC,queryParamName:"key"},{field:R.deliveredDate,groupCode:e,operator:A.b.ASC,queryParamName:"deliveredDate"},{field:R.isFailed,groupCode:e,operator:A.b.ASC,queryParamName:"failed"},{field:R.attempts,groupCode:e,operator:A.b.ASC,queryParamName:"attempts"}]}function D(e){const t=L(e),a=function(e){return[{field:R.dataloyObjectKey,groupCode:e,operator:A.b.ASC,queryParamName:"object"},{field:R.user,groupCode:e,operator:A.b.ASC,queryParamName:"webhookSub.user.userName"}]}(e);return t.concat(a)}function M(e){return[{field:R.notificationKey,groupCode:e,operator:A.b.DESC,queryParamName:"key"}]}var F=a(37),U=a(44);const q=n.a.memo((function(e){const{showModal:t,onClose:a,title:o,reactKeyPrefix:l,deps:[r],colSpec:i}=e,{common:c}=r.getLanguageFile();return n.a.createElement(U.a,{reactKeyPrefix:l+"-webhook-notification-details-modal",open:t,maxWidth:"md",fullWidth:!0,onCloseModal:a,title:o,hideConfirmBtn:!0,cancelBtnName:c.close},void 0!==i&&n.a.createElement(F.a,{reactKeyPrefix:l+"-webhook-notification-h-list",items:i,breakpoints:f.e}))})),G=Object(c.b)([y.a.IInternationalization],q);var H=a(81),B=a(5);const W=I.a.get(y.a.IInternationalization),{model:z,common:Y,webhooks:X}=W.getLanguageFile(),$=[{content:z.deliveredDate,contentType:B.a.DATE},{content:z.attempts,contentType:B.a.TEXT},{content:z.isFailed,contentType:B.a.TEXT},{content:z.objectType,contentType:B.a.TEXT},{content:z.dataloyObjectKey,contentType:B.a.TEXT}],V=[{content:z.notificationKey,contentType:B.a.TEXT},{content:X.webhookKey,contentType:B.a.TEXT},{content:z.user,contentType:B.a.TEXT}].concat($),Q=(e,t,a)=>{const o=[Object(H.a)(e,"deliveredDate",""),Object(H.a)(e,"attempts",""),Object(H.a)(e,"failed","")?Y.yes:Y.no,Object(H.a)(e,"objectType",""),Object(H.a)(e,"object","")],n=[Object(H.a)(e,"key",""),Object(H.a)(e,"webhookSub.key",""),Object(H.a)(e,"webhookSub.user.userName","")];return a?n.concat(o):o},[J]=Object(c.a)([y.a.IInternationalization]),Z=J.lang();function ee({webhookSubscriptionKey:e,reactKeyPrefix:t}){const{webhooks:a}=Z,c=Object(s.a)(p.a.getUserLocale)||m.f[0],[y,j]=Object(o.useState)(!1),[k,I]=Object(o.useState)(0),C=void 0===e,P=Object(o.useCallback)(()=>{j(!1),k&&I(0)},[k]),v=Object(o.useCallback)(()=>j(!0),[]),w=Object(s.a)(d.a.getTSModelBuilt,b.a.webhooknotification,null!=k?k:0,l.b),S=Object(o.useMemo)(()=>k?function(e,t,a,o){var l,r;const{model:i}=o.getLanguageFile();try{a.json&&(a.json=atob(a.json))}catch(e){E.a.error(e)}const c={fieldOptions:[{fieldName:"deliveredDate",label:i.deliveredDate,disabled:!0,dateInputProps:{showTime:!0},breakpoints:f.h},{fieldName:"attempts",label:i.attempts,disabled:!0,breakpoints:f.h},{fieldName:"errorMsg",overrideComponent:n.a.createElement(h.a,{reactKeyPrefix:e+"-error-message",value:null!==(l=a.errorMsg)&&void 0!==l?l:"",label:i.errorMessage,multiline:!0,disabled:!0})},{fieldName:"json",overrideComponent:n.a.createElement(h.a,{reactKeyPrefix:e+"-json",value:null!==(r=a.json)&&void 0!==r?r:"",label:i.json,multiline:!0,disabled:!0})}],object:a,type:b.a.webhooknotification,userLocale:t,reactKeyPrefix:e};return Object(O.a)(c)}(t,c,null!=w?w:new u.a({}),J):[],[t,c,w,k]),g=Object(o.useCallback)(e=>{I(e),v()},[v]),N=n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{getColSpec:(e,t)=>Q(e,0,C),tsmodelType:b.a.webhooknotification,fields:l.b,listId:"WEBHOOK_NOTIFICATION_LIST_ID",reactKeyPrefix:t,tableHeaders:V,quickFiltersGroupCode:"WEBHOOK_NOTIFICATION_LIST_FILTER_GROUP_CODE",onClickItem:g,quickFilters:n.a.createElement(_,{reactKeyPrefix:t,filterGroupCode:"WEBHOOK_NOTIFICATION_LIST_FILTER_GROUP_CODE",onListPage:C}),sortOptions:D("WEBHOOK_NOTIFICATIONS_LIST_PAGE_SORT_GROUP_CODE"),defaultSorts:M("WEBHOOK_NOTIFICATIONS_LIST_PAGE_SORT_GROUP_CODE")})),x=n.a.createElement(n.a.Fragment,null,n.a.createElement(r.a,{getColSpec:(e,t)=>Q(e,0,C),tsmodelType:b.a.webhooknotification,fields:l.b,listId:"WEBHOOK_NOTIFICATIONS_ID",reactKeyPrefix:t,tableHeaders:$,quickFiltersGroupCode:"WEBHOOK_NOTIFICATION_FILTER_GROUP_CODE",onClickItem:g,queryStr:"filter=webhookSub.key(EQ)"+e,quickFilters:n.a.createElement(_,{reactKeyPrefix:t,filterGroupCode:"WEBHOOK_NOTIFICATION_FILTER_GROUP_CODE",onListPage:C}),sortOptions:L("WEBHOOK_NOTIFICATIONS_LIST_SORT_GROUP_CODE"),defaultSorts:M("WEBHOOK_NOTIFICATIONS_LIST_SORT_GROUP_CODE")}));return n.a.createElement(n.a.Fragment,null,C?n.a.createElement(i.a,{reactKeyPrefix:t+"-notification-list"},N):n.a.createElement(n.a.Fragment,null,x,n.a.createElement(T.a,null)),y&&n.a.createElement(G,{reactKeyPrefix:t,onClose:P,showModal:y,colSpec:S,title:a.webhookNotification}))}},1895:function(e,t,a){"use strict";a.d(t,"a",(function(){return se}));a(10),a(11);var o=a(82),n=a(0),l=a.n(n),r=a(6),i=a(3),c=a(420),s=a(23),b=a(21),u=a(1),d=a(15),p=a(7),m=a(97),y=a(35),T=a(42),f=a(1264),O=a(37),E=a(982),h=a(2107),j=a(19),k=a(92),I=a(648),C=a(356),P=a(46);function v(e,t,a){const[o]=Object(r.a)([i.a.IInternationalization]),n=o.lang(),c=l.a.createElement(E.a,{label:n.alerts.subscribed,labelPlacement:"end",id:e+"subscribed-toggle-btn",control:l.a.createElement(h.a,{onClick:e=>{var a,o;if(k.a.getUpdateFieldFunction({fieldToSet:"unsubscribed",fields:{unsubscribed:"*",unsubscriptionDate:"*"},key:t.key,type:u.a.webhooksubscription,callback:()=>P.a.next()})(!e.target.checked),"WSOC"===(null===(o=null===(a=t.channelInfo)||void 0===a?void 0:a.channelType)||void 0===o?void 0:o.channelTypeCode)){const e=null!==t.dataloyObject?"/"+t.dataloyObject:"",a=`${C.b.getBaseUrlForSocket()}/${C.b.WebsocketEndpoint.objectSubscription}/${t.objectType}/${t.eventType}${e}`,o=C.b.getActiveWebsocket(a);o&&"open"===o.status&&!t.unsubscribed.valueOf()?o.closeConnection():C.b.createWebsocketSubscription(a,[I.a])}},checked:!t.unsubscribed,color:"secondary"})});return Object(j.a)({fieldOptions:[{fieldName:"unsubscribed",label:"",overrideComponent:c}],object:t,type:u.a.webhooksubscription,userLocale:a,reactKeyPrefix:e})}var w=a(12),S=a(209),g=a(470),N=a(71),x=a(57),_=a(70),A=a(778),K=a(288);const[R]=Object(r.a)([i.a.IInternationalization]),{model:L}=R.getLanguageFile();function D(e){var t,a;const o=null===(a=null===(t=e.channelInfo)||void 0===t?void 0:t.channelType)||void 0===a?void 0:a.channelTypeCode,n=U(e);return"EMAIL"===o?n:"HTTP"===o?function(e){const t=U(e);return e.accessToken?[...t,M]:e.accessTokenRequestUrl?[...t,...F]:[...t,...q(e)]}(e):[]}const M={fieldName:"accessToken",disabled:!0,label:L.accessToken,breakpoints:w.e},F=[{fieldName:"accessTokenRequestUrl",disabled:!0,label:L.accessTokenRequestUrl,breakpoints:w.e},{fieldName:"accessTokenRequestBody",disabled:!0,label:L.accessTokenRequestBody,textInputProps:{multiline:!0,maxRows:4},breakpoints:w.e}];function U(e){var t,a,o,n,l;const r=null===(a=null===(t=e.channelInfo)||void 0===t?void 0:t.channelType)||void 0===a?void 0:a.channelTypeCode;return[{fieldName:"channelTypeCode",disabled:!0,label:L.channelType,overrideType:u.a.channeltype,overrideObject:new A.a(null!==(n=null===(o=e.channelInfo)||void 0===o?void 0:o.channelType)&&void 0!==n?n:{})},{fieldName:"url",disabled:!0,label:"EMAIL"===r?L.email:L.url,overrideType:u.a.channelinfo,overrideObject:new K.a(null!==(l=e.channelInfo)&&void 0!==l?l:{}),breakpoints:w.e,textInputProps:"EMAIL"===r?{letterCase:x.a.LOWERCASE,validation:_.b.EmailOnClient}:void 0}]}function q(e){var t;const a=new K.a(null!==(t=e.channelInfo)&&void 0!==t?t:{});return[{fieldName:"userName",disabled:!0,label:L.userName,overrideType:u.a.channelinfo,overrideObject:a}]}var G=a(84),H=a(28),B=a(323);var W=a(656);var z=a(214),Y=a(809);function X({webhookSubscription:e,reactKeyPrefix:t}){var a;const[o]=Object(r.a)([i.a.IInternationalization]),[c,b]=Object(n.useState)(Object(Y.a)(e.expression)),[d,p]=Object(n.useState)(e.objectType),m=null!==(a=Object(s.a)(T.a.getUserLocale))&&void 0!==a?a:y.f[0],f=Object(n.useCallback)(e=>p(e),[]),E=Object(n.useCallback)(t=>{b(t),p(e.objectType)},[e.objectType]),h={expressionText:c,setExpressionText:b,setObjectType:f,objectTypeState:d,webhookSub:e,onErrorCallback:E};Object(n.useEffect)(()=>p(d),[d]);const k=Object(n.useMemo)(()=>function(e,t,a,o){const{model:n}=o.getLanguageFile();try{t.accessTokenRequestBody&&(t.accessTokenRequestBody=atob(t.accessTokenRequestBody))}catch(e){G.a.error(e)}const{dataloyObject:r}=t,i={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"objectType",disabled:!0,formControlProps:{required:!0},label:n.objectType,breakpoints:w.h},...r?[{fieldName:"dataloyObject",disabled:!0,label:n.dataloyObjectKey,breakpoints:w.h,numberInputProps:{maskSettings:H.a.mask9}}]:[{overrideComponent:l.a.createElement(B.a,null)}],{fieldName:"eventType",disabled:!0,formControlProps:{required:!0},label:n.eventType,breakpoints:w.h},{fieldName:"dlpAlertScript",disabled:!0,label:n.dlpAlertScript,breakpoints:w.h},{fieldName:"user",disabled:!0,formControlProps:{required:!0},label:n.user,breakpoints:w.h},...D(t)],object:t,type:u.a.webhooksubscription,userLocale:a};return Object(j.a)(i)}(t,e,m,o),[o,t,m,e]),I=Object(n.useMemo)(()=>function(e,t,a,o,n){const{model:r,webhooks:i}=o.getLanguageFile(),{expressionText:c,setExpressionText:s,setObjectType:b,webhookSub:d,objectTypeState:p,onErrorCallback:m}=n;try{t.json&&"{}"!==t.json&&(t.json=atob(t.json))}catch(e){G.a.error(e)}const y={reactKeyPrefix:e,fieldOptions:[{fieldName:"json",label:r.json,textInputProps:{multiline:!0,maxRows:4},breakpoints:w.e},{fieldName:"expression",label:r.expression,breakpoints:w.e,overrideComponent:l.a.createElement(W.a,{reactKeyPrefix:e+"-text-area",value:c,objectType:p,onChange:e=>{s(e.target.value)},onEmptyTextArea:()=>{b(d.objectType)},onAdd:b,onErrorCallback:m,objectTypeInDb:d.objectType,onEdit:!0,webhookSub:d})},{fieldName:"templateMsg",label:i.templateMsg,breakpoints:w.e},{fieldName:"doNotUnsubscribe",label:"Do Not Unsubscribe",breakpoints:w.e},{fieldName:"onlyMainObject",label:r.onlyMainObject,breakpoints:w.e},{fieldName:"rawObject",label:r.rawObject,breakpoints:w.e},{fieldName:"staticMsg",label:r.staticMsg,breakpoints:w.e}],object:t,type:u.a.webhooksubscription,userLocale:a};return Object(j.a)(y)}(t,e,m,o,h),[h,o,t,m,e]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{container:!0,spacing:2},l.a.createElement(z.a,{item:!0,sm:6,xs:12},l.a.createElement(N.a,null,l.a.createElement(O.a,{reactKeyPrefix:t+"-main-section",key:t+"-main-section",items:k,breakpoints:w.h}))),l.a.createElement(z.a,{item:!0,sm:6,xs:12},l.a.createElement(N.a,null,l.a.createElement(O.a,{reactKeyPrefix:t+"-misc-section",key:t+"-misc-section",items:I,breakpoints:w.e})))))}function $({webhookSubscription:e,reactKeyPrefix:t,userLocale:a}){const[o]=Object(r.a)([i.a.IInternationalization]),{model:n}=o.getLanguageFile(),c=e.createdDate?Object(g.a)(e.createdDate,y.a.shortLocalizedDate,{locale:a.localeConfig}):"",s=e.unsubscriptionDate?Object(g.a)(e.unsubscriptionDate,y.a.shortLocalizedDate,{locale:a.localeConfig}):"",b=l.a.createElement(O.a,{reactKeyPrefix:t+"-webhook-subscription-overview_horizontal_list",items:v(t,e,a),breakpoints:w.a}),u=[{primaryTitle:{text:n.subscriptionDate},primaryText:{text:"",tooltip:""},secondaryTitle:{text:c}},{primaryTitle:{text:n.unsubscriptionDate},primaryText:{text:"",tooltip:""},secondaryTitle:{text:s}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{kpiContainer:!0},l.a.createElement(S.a,{data:u,reactKeyPrefix:t+"tile-group",justify:"flex-start"}),b),l.a.createElement(X,{webhookSubscription:e,reactKeyPrefix:t}))}var V=a(51),Q=a(313),J=a(232),Z=a(153),ee=a(312),te=a(1239),ae=a(1238),oe=a(1240);function ne(e,t,a,o,n,r){const i=new Q.a(t),{setChannelType:c,channelType:s,setChannelInfoUrl:b,emailInput:d,urlInput:p}=r,m={reactKeyPrefix:e,fieldOptions:[{fieldName:"channelType",overrideComponent:l.a.createElement(ee.a,{reactKeyPrefix:e+"-http-auth-type",onChange:e=>{var t,a;const o=e.target.value,n=i.channelInfo,l=function(e,t,a){switch(e){case"HTTP":return a;case"EMAIL":return t;default:return""}}(o,d,p);o!==(null===(t=null==n?void 0:n.channelType)||void 0===t?void 0:t.channelTypeCode)?b(""):b(null!==(a=n.url)&&void 0!==a?a:""),""!==l&&l!==(null==n?void 0:n.url)&&b(l),c(Z.a[o])},selectedValue:s,name:"channelTypeCode",options:[{label:n.lang().model.http,value:Z.a.HTTP},{label:n.lang().model.email,value:Z.a.EMAIL},{label:n.lang().webhooks.webSocket,value:Z.a.WSOC}]})}],object:i,type:u.a.webhooksubscription,userLocale:o};return Object(j.a)(m)}function le(e,t,a,o,n,r){var i;const{model:c}=n.getLanguageFile(),{httpAuthType:s,setHttpAuthType:b,setChannelInfoUrl:d,url:p,setUrlInput:m,editAuthTypeContextData:y}=r,T=l.a.createElement(x.b,{reactKeyPrefix:e+"channel-info-email-text-input",value:p,onInputChange:e=>{a.bind("channelInfo.url",e),d(e),m(e)}}),f={reactKeyPrefix:e,fieldOptions:[{fieldName:"url",label:c.url,overrideObject:new K.a(null!==(i=t.channelInfo)&&void 0!==i?i:{}),overrideType:u.a.channelinfo,overrideComponent:T},{fieldName:"httpOptions",overrideComponent:l.a.createElement(ee.a,{reactKeyPrefix:e+"-http-auth-type",onChange:e=>{b(J.a[e.target.value])},selectedValue:s,name:"httpAuthType",options:[{label:n.lang().model.password,value:J.a.PASSWORD},{label:n.lang().model.accessToken,value:J.a.TOKEN},{label:n.lang().model.requestAccessToken,value:J.a.TOKEN_REQUEST}]})}],userLocale:o,object:t,type:u.a.webhooksubscription},O={[J.a.PASSWORD]:ae.a,[J.a.TOKEN]:te.a,[J.a.TOKEN_REQUEST]:oe.a};return[...Object(j.a)(f),...O[s](e,t,a,o,n,y)]}function re(e,t,a,o,n,r){var i;const{model:c}=n.getLanguageFile(),{setChannelInfoUrl:s,url:b,setEmailInput:d}=r,p=l.a.createElement(x.b,{reactKeyPrefix:e+"channel-info-email-text-input",value:b,onInputChange:e=>{a.bind("channelInfo.url",e),d(e),s(e)},letterCase:x.a.LOWERCASE,validation:_.b.EmailOnClient}),m={reactKeyPrefix:e,fieldOptions:[{fieldName:"url",label:c.email,overrideObject:new K.a(null!==(i=t.channelInfo)&&void 0!==i?i:{}),overrideType:u.a.channelinfo,overrideComponent:p}],userLocale:o,object:t,type:u.a.webhooksubscription};return Object(j.a)(m)}var ie=a(545);function ce(e){var t,a;const{reactKeyPrefix:o,webhook:r,openModal:i,i:s,tsmodelActions:b,closeModal:d}=e,{common:p,model:m}=s.getLanguageFile(),[y,T]=Object(n.useState)(new Q.a(null!=r?r:{})),[f,O]=Object(n.useState)((null===(a=null===(t=y.channelInfo)||void 0===t?void 0:t.channelType)||void 0===a?void 0:a.channelTypeDesc)===Z.a.HTTP?Z.a.HTTP:Z.a.EMAIL),[E,h]=Object(n.useState)(y.channelInfo?y.channelInfo.url:""),[j,k]=Object(n.useState)(""),[I,C]=Object(n.useState)(""),[P,v]=Object(n.useState)(null!==y.accessToken?J.a.TOKEN:null!==y.accessTokenRequestUrl?J.a.TOKEN_REQUEST:J.a.PASSWORD),[S,g]=Object(n.useState)(!1),[N,x]=Object(n.useState)(""),[_,A]=Object(n.useState)(""),K={showPassword:S,setShowPassword:g,username:N,setUsername:x,accessToken:_,onChangeAccessToken:A},R=Object(n.useCallback)(()=>{var e,t,a,o;O((null===(t=null===(e=y.channelInfo)||void 0===e?void 0:e.channelType)||void 0===t?void 0:t.channelTypeCode)===Z.a.HTTP?Z.a.HTTP:(null===(o=null===(a=y.channelInfo)||void 0===a?void 0:a.channelType)||void 0===o?void 0:o.channelTypeCode)===Z.a.EMAIL?Z.a.EMAIL:Z.a.WSOC),h(y.channelInfo?y.channelInfo.url:""),C(""),k("")},[y.channelInfo]);Object(n.useEffect)(()=>{T(y),R()},[y]),Object(n.useEffect)(()=>{T(r)},[r]),Object(n.useEffect)(()=>{h(E)},[E]);const L={setWebhookState:T,url:E,channelType:f,httpAuthType:P,setChannelInfoUrl:h,setChannelType:O,setHttpAuthType:v,urlInput:j,emailInput:I,setUrlInput:k,setEmailInput:C,editAuthTypeContextData:K},D=Object(n.useCallback)((e,t,a,o)=>{const n=f===Z.a.HTTP?le:f===Z.a.EMAIL?re:null,l=t=>t?t(e,y,a,o,s,L):[];return[...l(ne),...l(n)]},[f,L,s,y]),M=Object(n.useCallback)(e=>{var t,a,o,n;h(null!==(a=null===(t=null==e?void 0:e.channelInfo)||void 0===t?void 0:t.url)&&void 0!==a?a:""),O((null===(n=null===(o=null==e?void 0:e.channelInfo)||void 0===o?void 0:o.channelType)||void 0===n?void 0:n.channelTypeDesc)===Z.a.HTTP?Z.a.HTTP:Z.a.EMAIL),v(null!==e.accessToken?J.a.TOKEN:null!==e.accessTokenRequestUrl?J.a.TOKEN_REQUEST:J.a.PASSWORD),k(""),C(""),T(null!=e?e:new Q.a({obj:e}))},[]),F=Object(n.useCallback)((e,t)=>{t&&b.loadSingleAction({key:t.key,type:u.a.webhooksubscription,fields:c.a,callback:(e,t)=>{t&&M(t)}})},[M,b]),U=Object(n.useCallback)(e=>Z.a.EMAIL===f?Object(ie.c)(e,!0):Z.a.HTTP===f?Object(ie.b)(e,P,!0):void 0,[f,P]),q=Object(n.useCallback)(()=>{R(),d()},[d,R]);return l.a.createElement(V.a,{modalProps:{reactKeyPrefix:o+"-edit-channel-type",title:`${p.edit} ${m.channelType}`,open:i,onCloseModal:q},breakpoints:w.e,selectedObject:y,getColSpec:D,contextData:L,updateProps:{objToUpdate:y,objToUpdateType:u.a.webhooksubscription,type:u.a.webhooksubscription,callback:F},propertiesToOverwrite:{channelInfo:{channelType:{channelTypeCode:f},url:E}},overrideGetData:U})}const se=()=>{const[e,t,a]=Object(r.a)([i.a.IInternationalization,p.a.ISelectedTSModelActions,p.a.ITSModelActionsAsync]),O=e.getLanguageFile(),{common:E,webhooks:h,model:j}=O,k=Object(s.a)(T.a.getUserLocale)||y.f[0],{drawerId:I,tabId:C}=Object(m.i)(),P=Object(s.a)(b.a.getTSModelBuilt,u.a.webhooksubscription,null!=I?I:0,c.a);Object(n.useEffect)(()=>{I&&a.loadSingleAction({fields:c.a,key:I,type:u.a.webhooksubscription})},[t,I,a]);const[v,w]=Object(n.useState)(!1),S=Object(n.useCallback)(()=>{w(!1)},[]),g=Object(n.useMemo)(()=>[{onClick:()=>w(!0),text:`${E.edit} ${j.channelType}`}],[E.edit,j.channelType]),N=Object(n.useMemo)(()=>P?[{id:"overview",content:()=>l.a.createElement($,{webhookSubscription:P,reactKeyPrefix:"doc-common-components-drawer-webhook-subscription-drawerwebhook-subscription-overview",userLocale:k}),label:E.overview},{id:"notifications",content:()=>l.a.createElement(f.a,{webhookSubscriptionKey:P.key,reactKeyPrefix:"doc-common-components-drawer-webhook-subscription-drawerwebhook-subscription-notifications"}),label:E.notifications}]:[],[P,k,E.overview,E.notifications]);return P?l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{reactKeyPrefix:"doc-common-components-drawer-webhook-subscription-drawer",secondaryActions:g,drawerKey:Number(I),drawerRoute:d.a.webhookSubscriptionDrawer,key:d.a.webhookSubscriptionDrawer+I,subject:h.subscriptionDetails,subjectLoaded:!!P,subjectName:String(P.key),tabs:N,tabId:C,tsModelType:u.a.webhooksubscription,reloadParentDrawer:()=>{}}),l.a.createElement(ce,{reactKeyPrefix:"doc-common-components-drawer-webhook-subscription-drawer",webhook:P,openModal:v,i:e,tsmodelActions:a,closeModal:S})):null}},1910:function(e,t,a){"use strict";a.d(t,"a",(function(){return $}));a(10),a(11);var o=a(0),n=a.n(o),l=a(61),r=a(73),i=a(76),c=a(65),s=a(1),b=a(95),u=a(41),d=a(48),p=a(80),m=a(4),y=a(16),T=a(88);const f=new T.a,{model:O}=f.getLanguageFile(),E="ENTITY_RELEASE_LIST_SORT_GROUP_CODE",h=e=>[{label:O.releaseNumber,filterObjectValuePath:"releaseNumber",typeaheadProps:{type:s.a.entityrelease,objectPaths:["releaseNumber"]},filters:[{field:"releaseNumber",filterGroupCode:e,operator:m.c.IN,type:m.d.STRING}]}],j=e=>[{label:O.entity,filterObjectValuePath:"entity",typeaheadProps:{type:s.a.entityrelease,objectPaths:["entity"]},filters:[{field:"entity",filterGroupCode:e,operator:m.c.IN,type:m.d.STRING}]}],k=[{field:O.releaseNumber,groupCode:E,operator:y.b.DESC,queryParamName:"releaseNumber"},{field:O.entity,groupCode:E,operator:y.b.ASC,queryParamName:"entity"}],I=[{field:O.releaseNumber,groupCode:E,operator:y.b.ASC,queryParamName:"releaseNumber"},{field:O.entity,groupCode:E,operator:y.b.ASC,queryParamName:"entity"},{field:O.transactionNumber,groupCode:E,operator:y.b.ASC,queryParamName:"transactionNumber"}];var C=a(23),P=a(81),v=a(14),w=a(3),S=a(5);const g=v.a.get(w.a.IInternationalization),{model:N}=g.getLanguageFile();function x(e){return[Object(P.a)(e,"releaseNumber"),Object(P.a)(e,"entity"),Object(P.a)(e,"transactionNumber"),Object(P.a)(e,"releaseDate")]}const _=[{content:N.releaseNumber,contentType:S.a.TEXT},{content:N.entity,contentType:S.a.TEXT},{content:N.transactionNumber,contentType:S.a.TEXT},{content:N.releasedDate,contentType:S.a.DATE}];var A=a(960),K=a(24);function R({reactKeyPrefix:e}){const t=v.a.get(w.a.IInternationalization),{model:a}=t.lang();return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{reactKeyPrefix:e+"-entity-release-release-number",configs:h("ENTITY_RELEASE_LIST_FILTER_GROUP_CODE"),type:m.b.TYPEAHEAD,label:a.releaseNumber,filterCode:"ENTITY_RELEASE_LIST_FILTER_GROUP_CODE_RELEASE_NUMBER",clearOnMount:!1}),n.a.createElement(K.a,{reactKeyPrefix:e+"-entity-release-entity",configs:j("ENTITY_RELEASE_LIST_FILTER_GROUP_CODE"),type:m.b.TYPEAHEAD,label:a.entity,filterCode:"ENTITY_RELEASE_LIST_FILTER_GROUP_CODE_ENTITY",clearOnMount:!1}))}var L=a(6),D=a(1981),M=a(46),F=a(2038),U=a(1251),q=a(51),G=a(12),H=a(19),B=a(193);function W(e,t,a,o){const n={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"releaseNumber",formControlProps:{required:!0},disabled:!0},{fieldName:"releaseDate",onUpdateOverride:a.bind(null,"releaseDate")}],object:new B.a(t),type:s.a.entityrelease,userLocale:o};return Object(H.a)(n)}function z({reactKeyPrefix:e,closeModal:t,showModal:a,onUpdate:l,entityRelease:r}){const[i]=Object(L.a)([w.a.IInternationalization]),{common:c,model:b}=i.getLanguageFile(),u=new Date,d=Object(o.useMemo)(()=>({entityRelease:r}),[r]),p=Object(o.useMemo)(()=>({callback:l,type:s.a.entityrelease}),[l]);return null!==r.releaseDate&&(null==r?void 0:r.releaseDate)>u?n.a.createElement(q.a,{modalProps:{reactKeyPrefix:e+"-edit-modal",maxWidth:"xs",onCloseModal:t,open:a,title:`${c.edit} ${b.entityRelease}`,confirmBtnName:c.update},getColSpec:W,breakpoints:G.e,updateProps:p,selectedObject:r,contextData:d,allowDelete:!1}):null}var Y=a(21);const X={authorizationType:u.a.ROLE,authorizedRoles:[b.a.ADMINISTRATOR,b.a.USER_PROVISIONING],behaviorOnAuthorizationFail:c.a.REDIRECT_NO_AUTHORIZATION};function $(){Object(i.b)(X);const e="doc-modules-entity-release-list-page",t=Object(o.useMemo)(()=>window.location.hostname.includes(d.a.DATA_REPO_URL,0),[]),[a]=Object(L.a)([w.a.IInternationalization]),{model:c}=a.lang(),[b,u]=Object(o.useState)(!1),[m,y]=Object(o.useState)(!1),[T,f]=Object(o.useState)(),O=Object(o.useCallback)((e,t)=>{t&&M.a.next()},[]),E=Object(o.useCallback)(()=>{y(!1),f(null)},[]),[h,j]=Object(o.useState)(!1),[P,v]=Object(o.useState)([]),S=Object(o.useCallback)(()=>{u(!b)},[b]),g=Object(o.useCallback)(()=>{j(!h)},[h]),N=Object(o.useCallback)(()=>{Object(U.a)().then(e=>v(e))},[]),K=Object(o.useMemo)(()=>{const e=[];return e.push({text:c.createRelease,onClick:()=>{u(!0)}},{disabled:!t,text:c.deleteRelease,onClick:()=>{N(),j(!0)}}),e},[N,t,c.createRelease,c.deleteRelease]),q=Object(C.a)(Y.a.getTSModelBuilt,s.a.entityrelease,T,A.a),G=Object(o.useCallback)(()=>{y(!0)},[]),H=Object(o.useCallback)(e=>{f(e),G()},[G]);return n.a.createElement(r.a,{reactKeyPrefix:e,secondaryActions:K},n.a.createElement(p.a,null),n.a.createElement(D.a,{reactKeyPrefix:e+"-create-entity-release",showModal:b,closeModal:S,callback:O}),n.a.createElement(F.a,{reactKeyPrefix:e+"-delete-entity-release",showModal:h,closeModal:g,callback:O,list:P}),t&&m&&n.a.createElement(z,{reactKeyPrefix:e+"-edit-entity-release-date",showModal:m,closeModal:E,onUpdate:O,entityRelease:q}),n.a.createElement(l.a,{getColSpec:x,tsmodelType:s.a.entityrelease,quickFilters:n.a.createElement(R,{reactKeyPrefix:e}),quickFiltersGroupCode:"ENTITY_RELEASE_LIST_FILTER_GROUP_CODE",fields:A.a,listId:"ENTITY_RELEASE_LIST_ID",reactKeyPrefix:e+"-tsmodel-list",tableHeaders:_,defaultSorts:k,sortOptions:I,onClickItem:H}))}},1916:function(e,t,a){"use strict";a.d(t,"a",(function(){return F}));a(10),a(11);var o=a(82),n=a(0),l=a.n(n),r=a(33),i=a(6),c=a(3),s=a(23),b=a(21),u=a(1),d=a(15),p=a(7),m=a(97),y=a(459),T=a(71),f=a(42),O=a(35),E=a(12),h=a(37),j=a(809),k=(a(93),a(19)),I=a(656),C=a(202);function P({webhookTemplate:e,reactKeyPrefix:t}){var a;const[o]=Object(i.a)([c.a.IInternationalization]),[r,b]=Object(n.useState)(Object(j.a)(e.expression)),[d,p]=Object(n.useState)(e.objectType),m=null!==(a=Object(s.a)(f.a.getUserLocale))&&void 0!==a?a:O.f[0],y=Object(n.useCallback)(e=>p(e),[]),P=Object(n.useCallback)(t=>{b(t),p(e.objectType)},[e.objectType]),v=Object(n.useMemo)(()=>({expressionText:r,setExpressionText:b,setObjectType:y,objectTypeState:d,template:e,onErrorCallback:P}),[r,d,y,P,e]);Object(n.useEffect)(()=>p(d),[d]);const w=Object(n.useMemo)(()=>function(e,t,a,o,n){const{model:r,webhooks:i,common:c}=o.getLanguageFile(),{expressionText:s,setExpressionText:b,template:d,onErrorCallback:p,setObjectType:m,objectTypeState:y}=n,T={reactKeyPrefix:e,fieldOptions:[{fieldName:"webhookTemplateCode",label:c.code,formControlProps:{required:!0}},{fieldName:"webhookTemplateName",label:r.name,formControlProps:{required:!0}},{fieldName:"webhookTemplateDescription",label:c.description,formControlProps:{required:!0},textInputProps:{multiline:!0,minRows:4,maxRows:4}},{overrideComponent:l.a.createElement(C.a,null)},{fieldName:"objectType",disabled:!0,formControlProps:{required:!0},label:r.objectType,breakpoints:E.h},{fieldName:"eventType",disabled:!0,formControlProps:{required:!0},label:r.eventType,breakpoints:E.h},{fieldName:"dlpAlertScript",disabled:!0,label:r.dlpAlertScript,breakpoints:E.e},{fieldName:"templateMsg",label:i.templateMsg,breakpoints:E.e,textInputProps:{multiline:!0,minRows:2,maxRows:4}},{fieldName:"json",label:r.json,textInputProps:{multiline:!0,minRows:4,maxRows:4},breakpoints:E.e},{fieldName:"expression",label:r.expression,breakpoints:E.e,textInputProps:{multiline:!0,minRows:4,maxRows:4},overrideComponent:l.a.createElement(I.a,{reactKeyPrefix:e+"-text-area",value:s,objectType:y,onChange:e=>{b(e.target.value)},onEmptyTextArea:()=>{m(d.objectType)},onAdd:m,onErrorCallback:p,objectTypeInDb:d.objectType,onEdit:!0,webhookTemplate:d})},{fieldName:"onlyMainObject",label:r.onlyMainObject,breakpoints:E.e}],object:t,type:u.a.webhooktemplate,userLocale:a};return Object(k.a)(T)}(t,e,m,o,v),[v,o,t,m,e]);return l.a.createElement(T.a,null,l.a.createElement(h.a,{reactKeyPrefix:t+"-overview",key:t+"-overview",items:w,breakpoints:E.e}))}function v({webhookTemplate:e,reactKeyPrefix:t}){return l.a.createElement(P,{webhookTemplate:e,reactKeyPrefix:t})}var w=a(114),S=a(61),g=a(5),N=a(16),x=a(43);const[_]=Object(i.a)([c.a.IInternationalization]),{model:A}=_.getLanguageFile(),K=e=>{var t,a,o,n;const{userCode:l,userName:r,email:i}=null!==(t=e.user)&&void 0!==t?t:new x.a({});return[l,r,i,null!==(n=null===(o=null===(a=e.channelInfo)||void 0===a?void 0:a.channelType)||void 0===o?void 0:o.channelTypeCode)&&void 0!==n?n:""]},R=[{content:A.userCode,contentType:g.a.TEXT},{content:A.userName,contentType:g.a.TEXT},{content:A.email,contentType:g.a.TEXT},{content:A.channelType,contentType:g.a.TEXT}],L={user:{userCode:"*",userName:"*",email:"*"},channelInfo:{channelType:{channelTypeCode:"*"}}},D=[{field:A.userName,groupCode:"WEBHOOK_TEMPLATE_USERS_LIST_SORT_GROUP_CODE",operator:N.b.ASC,queryParamName:"userName"}];function M({webhookTemplateKey:e,reactKeyPrefix:t}){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{getColSpec:K,tsmodelType:u.a.webhooksubscription,fields:L,listId:"WEBHOOK_TEMPLATE_USERS_LIST_ID",reactKeyPrefix:t,tableHeaders:R,queryStr:`filter=webhookTemplate.key(EQ)${e}&filter=unsubscriptionDate(NULL)`,defaultSorts:D}))}const F=()=>{const[e,t,a]=Object(i.a)([c.a.IInternationalization,p.a.ISelectedTSModelActions,p.a.ITSModelActionsAsync]),{model:T,common:f,webhookTemplates:O}=e.getLanguageFile(),{drawerId:E,tabId:h}=Object(m.i)(),j=Object(m.g)(),k=Object(s.a)(b.a.getTSModelBuilt,u.a.webhooktemplate,null!=E?E:0,y.d);Object(n.useEffect)(()=>{E&&a.loadSingleAction({fields:y.d,key:E,type:u.a.webhooktemplate})},[t,E,a]);const I=Object(n.useCallback)(e=>{e&&0===e.length?Object(w.a)(O.deleteTemplate,f.genericDeleteConfirmation,void 0,void 0,void 0,"xs").then(e=>{e&&k&&a.deleteAction({type:u.a.webhooktemplate,key:k.key,callback:e=>{e||j.push(r.a.subscriptionTemplates.url)}})}):Object(w.a)(O.deleteTemplate,O.deleteTemplateWarn,"",f.close,!0,"xs")},[f.close,f.genericDeleteConfirmation,j,a,k,O.deleteTemplate,O.deleteTemplateWarn]),C=Object(n.useCallback)(()=>{k&&a.loadMultipleAction({query:`filter=webhookTemplate.key(EQ)${k.key}&filter=unsubscriptionDate(NULL)`,type:u.a.webhooksubscription,callback:(e,t)=>I(t)})},[I,a,k]),P=Object(n.useMemo)(()=>[{onClick:C,text:f.delete}],[f.delete,C]),S=Object(n.useMemo)(()=>k?[{id:"overview",content:()=>l.a.createElement(v,{webhookTemplate:k,reactKeyPrefix:"doc-common-components-drawer-webhook-template-drawerwebhook-template-overview"}),label:f.overview},{id:"subscribers",content:()=>l.a.createElement(M,{webhookTemplateKey:null!=E?E:0,reactKeyPrefix:"doc-common-components-drawer-webhook-template-drawerwebhook-template-users-list"}),label:O.subscribers}]:[],[k,f.overview,O.subscribers,E]);return k?l.a.createElement(o.a,{reactKeyPrefix:"doc-common-components-drawer-webhook-template-drawer",drawerKey:Number(E),drawerRoute:d.a.webhookTemplateDrawer,key:d.a.webhookTemplateDrawer+E,subject:T.subscriptionTemplate,subjectLoaded:!!k,subjectName:k.key.toString(),tabs:S,tabId:h,secondaryActions:P,tsModelType:u.a.webhooktemplate,reloadParentDrawer:()=>{}}):null}}}]);