(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1225:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));a(10),a(11);var o=a(0),n=a.n(o),r=a(44),i=a(6),l=a(3),c=a(20),d=a(102),s=a(214),u=a(57);const m={gridContainer:{width:"100%"},gridItem:{width:"100%",pb:.5}};function v(e){const[t,a]=Object(i.a)([l.a.IInternationalization,c.a.ITcDrawerController]),{common:v,model:b}=t.getLanguageFile(),{reactKeyPrefix:p,onClose:f,open:y,tc:C,currencies:g}=e,[O,h]=Object(o.useState)(g[0]),[j,P]=Object(o.useState)(b.statementOfAccount),N=Object(o.useCallback)(()=>{f()},[f]),R=Object(o.useCallback)(()=>{a.printSoa(C,!C.isTcIn,O,j),f()},[a,f,O,C,j]);return n.a.createElement(r.a,{reactKeyPrefix:p+"-modal",open:y,onCloseModal:N,title:v.printStatementOfAccount(!1),confirmBtnName:v.print,onConfirm:R,maxWidth:"sm",fullWidth:!0,disableConfirmBtn:!O},n.a.createElement(s.a,{container:!0,sx:m.gridContainer},n.a.createElement(s.a,{item:!0,sx:m.gridItem},n.a.createElement(d.a,{label:b.currency,options:g,defaultSelectedOptions:O,overrideDefaultSelectedOptions:!0,reactKeyPrefix:p+"currency-typeahead",formControlProps:{required:!0},onChange:h})),n.a.createElement(s.a,{item:!0,sx:m.gridItem},n.a.createElement(u.b,{reactKeyPrefix:p+"-title-input",label:v.title,required:!1,value:j,onInputChange:P,variant:"standard"}))))}},1234:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));a(10),a(11);var o,n=a(0),r=a.n(n),i=a(44),l=a(6),c=a(3),d=a(20),s=a(312),u=a(102),m=a(503),v=a(472),b=a(86),p=a(60),f=a(23),y=a(21),C=a(1),g=a(62),O=a(107),h=a(57),j=a(214);!function(e){e.CHARTERER="CHARTERER",e.OWNER="OWNER"}(o||(o={}));const P={gridContainer:{width:"100%"},gridItem:{width:"100%",pb:.5}};function N(e){var t,a,N;const[R,x]=Object(l.a)([c.a.IInternationalization,d.a.IPrintSOAModalController]),E=Object(n.useRef)(!1),{common:S,model:w}=R.getLanguageFile(),{reactKeyPrefix:k,onClose:A,open:I,voyageKey:T}=e,[D,L]=Object(n.useState)(o.CHARTERER),[K,M]=Object(n.useState)(void 0),[H,U]=Object(n.useState)(void 0),[W,q]=Object(n.useState)(!1),[B,F]=Object(n.useState)(w.statementOfAccount),V=Object(n.useCallback)(()=>{A()},[A]),$=null!==(t=Object(f.a)(y.a.getTSModelBuilt,C.a.voyage,T,O.f))&&void 0!==t?t:new g.a({});Object(n.useEffect)(()=>{x.loadVoyage(T,()=>{E.current=!0})},[x,T]);const z=Object(n.useMemo)(()=>Object(m.a)($.cargos.filter(e=>!!e.charterer&&!e.reletOfCargo).map(e=>e.charterer),"key"),[$.cargos]),_=Object(n.useMemo)(()=>Object(m.a)($.cargos.filter(e=>!!e.charterer&&e.reletOfCargo).map(e=>e.charterer),"key"),[$.cargos]),J=Object(n.useCallback)(()=>{var e,t,a,n;D===o.CHARTERER&&K?x.printSoa($.key,!0,K,null===(t=null===(e=$.voyageHeader)||void 0===e?void 0:e.company)||void 0===t?void 0:t.key,B):D===o.OWNER&&H&&x.printSoa($.key,!1,H,null===(n=null===(a=$.voyageHeader)||void 0===a?void 0:a.company)||void 0===n?void 0:n.key,B),A()},[x,A,K,H,D,B,$.key,null===(N=null===(a=$.voyageHeader)||void 0===a?void 0:a.company)||void 0===N?void 0:N.key]);return Object(n.useEffect)(()=>{q(p.a.hasRelet($)),M(Object(v.a)(z)),U(Object(v.a)(_))},[z,_,$]),r.a.createElement(i.a,{reactKeyPrefix:k+"-modal",open:I,onCloseModal:V,title:S.printStatementOfAccount(!1),confirmBtnName:S.print,onConfirm:J,maxWidth:"sm",fullWidth:!0,disableConfirmBtn:!K&&!H},r.a.createElement(j.a,{container:!0,sx:P.gridContainer},E.current&&W&&r.a.createElement(s.a,{reactKeyPrefix:k+"-radio-group",onChange:e=>{const t=e.target.value;L(o[t])},selectedValue:D,options:[{label:w.charterer,value:o.CHARTERER},{label:w.owner,value:o.OWNER}]}),E.current&&D===o.CHARTERER&&r.a.createElement(j.a,{item:!0,sx:P.gridItem},r.a.createElement(u.a,{label:w.charterer,options:z,defaultSelectedOptions:K,overrideDefaultSelectedOptions:!0,reactKeyPrefix:k+"charterer-typeahead",resolver:e=>Object(b.c)(e,b.b.businessPartner),formControlProps:{required:!0},onChange:M,noOptionsMessage:()=>w.noChartererForVoyage,fullWidth:!0})),E.current&&D===o.OWNER&&r.a.createElement(j.a,{item:!0,sx:P.gridItem},r.a.createElement(u.a,{label:w.owner,options:_,defaultSelectedOptions:H,overrideDefaultSelectedOptions:!0,reactKeyPrefix:k+"owner-typeahead",resolver:e=>Object(b.c)(e,b.b.businessPartner),formControlProps:{required:!0},onChange:U,noOptionsMessage:()=>w.noOwnerForReletCargo,fullWidth:!0})),E.current&&r.a.createElement(j.a,{item:!0,sx:P.gridItem},r.a.createElement(h.b,{reactKeyPrefix:k+"-title-input",label:S.title,required:!1,value:B,onInputChange:F,variant:"standard"})),E.current?"":S.loading))}},1294:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));a(10),a(11);var o=a(0),n=a.n(o),r=a(3),i=a(6),l=a(51),c=a(12),d=a(1),s=a(19),u=a(2108),m=a(81),v=a(312),b=a(556);const p={[b.a.OUR]:{isOwnersCost:!1,isCharterersCost:!1},[b.a.OWNER]:{isOwnersCost:!0,isCharterersCost:!1},[b.a.CHARTERER]:{isOwnersCost:!1,isCharterersCost:!0}};function f(e,t,a,o,r,i){const{model:l,common:c}=r.getLanguageFile(),{isOwnersCost:f,isCharterersCost:y}=t,C=Object(m.a)(t,"serviceOrder.currency.currencyCode"),g=function({isCharterersCost:e,isOwnersCost:t}){var a;return null!==(a=Object(u.a)(p,{isCharterersCost:e,isOwnersCost:t}))&&void 0!==a?a:b.a[0]}({isCharterersCost:y,isOwnersCost:f}),O=[{fieldName:"serviceCode",formControlProps:{required:!0},label:c.service,typeaheadProps:{objectPaths:["description"],shouldPreload:!0,fields:{description:"*",isCharterersCost:"*",isOwnersCost:"*"}},onUpdateOverride:e=>{a("serviceCode",e),a("isCharterersCost",e.isCharterersCost),a("isOwnersCost",e.isOwnersCost)}},{fieldName:"description",label:c.additionalDescription,onUpdateOverride:a.bind(null,"description")},{fieldName:"amountEstimate",label:l.amountEstimated,onUpdateOverride:a.bind(null,"amountEstimate"),formControlProps:{required:!1},InputProps:{endAdornment:C},numberInputProps:{maskSettings:{allowNegative:!0}}},{fieldName:"cost",label:l.cost,formControlProps:{required:!0},overrideComponent:n.a.createElement(v.a,{reactKeyPrefix:e+"-cost-type",row:!0,onChange:e=>{const t=e.target.value,o=p[t];a("isCharterersCost",o.isCharterersCost),a("isOwnersCost",o.isOwnersCost)},selectedValue:g,options:[{label:c.our,value:b.a.OUR},{label:l.owner,value:b.a.OWNER},{label:l.charterer,value:b.a.CHARTERER}]})}],h=[...O.slice(0,3),{fieldName:"amountRevised",label:l.amountRevised,onUpdateOverride:a.bind(null,"amountRevised"),formControlProps:{required:!1},InputProps:{endAdornment:C},numberInputProps:{maskSettings:{allowNegative:!0}}},{fieldName:"amountFinal",label:l.amountFinal,onUpdateOverride:a.bind(null,"amountFinal"),formControlProps:{required:!1},InputProps:{endAdornment:C},numberInputProps:{maskSettings:{allowNegative:!0}}},...O.slice(3)],j={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:i.isEditing?h:O,object:t,type:d.a.serviceorderline,userLocale:o};return Object(s.a)(j)}var y=a(499),C=a(114),g=a(7);const O=Object(i.b)([r.a.IInternationalization],(function(e){const{showDialog:t,closeDialog:a,serviceOrder:r,serviceOrderLine:s,onCreateOrderLine:u,onDeleteOrderLine:m,isEditing:v,reactKeyPrefix:b}=e,[p]=e.deps,{common:O}=p.getLanguageFile(),j=`${s?O.edit:O.create} ${O.orderLine}`,P=s?O.save:O.create,N=Object(o.useCallback)(()=>{a();const[e]=Object(i.a)([g.a.ITSModelActions]),t=s?{serviceOrderLines:null==r?void 0:r.serviceOrderLines.map(e=>({key:e.key})).filter(e=>e.key!==s.key)}:null;Object(C.a)(O.delete,O.genericDeleteConfirmation).then(a=>{var o;a&&e.updateSingleAction({key:null!==(o=null==r?void 0:r.key)&&void 0!==o?o:0,type:d.a.serviceorder,data:t})})},[a,O.delete,O.genericDeleteConfirmation,r,s]);return n.a.createElement(l.a,{modalProps:{reactKeyPrefix:b+"modal",maxWidth:"xs",onCloseModal:a,open:t,title:j,confirmBtnName:P},breakpoints:c.e,getColSpec:f,selectedObject:s,allowDelete:!!s,isConfirmDisabled:h,overrideOnConfirm:u,overrideOnDelete:null!=m?m:N,contextData:{isEditing:v},updateProps:{fields:y.a,objPropToUpdate:"serviceOrderLines",objToUpdate:r,objToUpdateType:d.a.serviceorder,shouldUseArray:!0,type:d.a.serviceorderline}})}));function h(e){return!e.serviceCode||!e.serviceCode.key}},1644:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));a(59),a(109),a(163);var o,n,r,i=a(9),l=a(31),c=a(107),d=a(1),s=a(29),u=a(7),m=a(32),v=a(48),b=a(90),p=a(3),f=a(528),y=function(e,t,a,o){var n,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(i=(r<3?n(i):r>3?n(t,a,i):n(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e,t){return function(a,o){t(a,o,e)}},O=function(e,t,a,o){return new(a||(a=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};let h=class{constructor(e,t,a){this.store=e,this.tsmodelActions=t,this.http=a}printSoa(e,t,a,o,n){var r;return O(this,void 0,void 0,(function*(){const{authdata:i}=Object(m.a)(this.store.getState()),l=yield this.http.get(`${v.a.API_BASE_URL}/Report/generateSOA/Voyage/${e}?out=${t}${a?"&businessPartnerId="+a.key:""}${o?"&companyId="+o:""}${n?"&title="+n:""}`,{headers:new Headers({authorization:null!=i?i:""})});Object(f.a)("SOA_"+(null!==(r=null==a?void 0:a.businessPartnerName)&&void 0!==r?r:"").replace(" ","_"),yield l.text())}))}loadVoyage(e,t){this.tsmodelActions.loadSingleAction({fields:c.f,key:e,type:d.a.voyage,callback:(e,a)=>{!e&&t&&a&&t()}})}};h=y([Object(i.injectable)(),g(0,Object(i.inject)(u.a.Store)),g(1,Object(i.inject)(u.a.ITSModelActionsAsync)),g(2,Object(i.inject)(p.a.IHttp)),C("design:paramtypes",["function"==typeof(o=void 0!==l.Store&&l.Store)?o:Object,"function"==typeof(n=void 0!==s.ITSModelActionsAsync&&s.ITSModelActionsAsync)?n:Object,"function"==typeof(r=void 0!==b.IHttp&&b.IHttp)?r:Object])],h)},1769:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a(10),a(11);var o=a(0),n=a.n(o),r=a(37),i=a(44),l=a(19),c=a(6),d=a(251),s=a(74),u=a(101),m=a(91),v=a(248),b=a(1),p=a(514),f=a(111),y=a(108),C=a(3);function g(e){const[t]=Object(c.a)([C.a.IInternationalization]),{documentLine:a,showModal:g,reactKeyPrefix:O,userLocale:h,isStatusAssembled:j,onClose:P}=e,{model:N,menu:R,common:x}=t.getLanguageFile(),E=Object(o.useMemo)(()=>{var e,t,o,n,r,i,c,C,g,P,E,S,w,k,A,I,T,D,L;if(a){const K=new f.a({vesselName:null===(t=null===(e=a.voyage)||void 0===e?void 0:e.vessel)||void 0===t?void 0:t.vesselName}),M=(null===(n=null===(o=null==a?void 0:a.cargoPort)||void 0===o?void 0:o.port)||void 0===n?void 0:n.portName)?a.cargoPort.port.portName:null===(i=null===(r=a.portCall)||void 0===r?void 0:r.port)||void 0===i?void 0:i.portName,H=new m.a({portName:M}),U=(null===(C=null===(c=null==a?void 0:a.cargoPort)||void 0===c?void 0:c.terminal)||void 0===C?void 0:C.terminalName)?null===(g=a.cargoPort)||void 0===g?void 0:g.terminal.terminalName:null===(E=null===(P=a.portCall)||void 0===P?void 0:P.terminal)||void 0===E?void 0:E.terminalName,W=new v.a({terminalName:U}),q=new s.a({cargoReference:null===(S=a.cargo)||void 0===S?void 0:S.cargoReference}),B=new d.a({accountDesc:null===(w=a.account)||void 0===w?void 0:w.accountDesc}),F=new u.a({currencyCode:null===(A=null===(k=a.document)||void 0===k?void 0:k.documentCurrency)||void 0===A?void 0:A.currencyCode}),V=new p.a({vatCode:null===(T=null===(I=a.vatRate)||void 0===I?void 0:I.vat)||void 0===T?void 0:T.vatCode}),$=new y.a({referenceNo:null===(L=null===(D=a.voyage)||void 0===D?void 0:D.voyageHeader)||void 0===L?void 0:L.referenceNo});return Object(l.a)({fieldOptions:[{disabled:!0,fieldName:"vesselName",label:N.vessel,overrideObject:K,overrideType:b.a.vessel},{disabled:!0,fieldName:"referenceNo",label:N.voyage,overrideType:b.a.voyageheader,overrideObject:$,numberInputProps:{maskSettings:{decimalScale:0}}},{disabled:!0,fieldName:"portName",label:N.port,overrideObject:H,overrideType:b.a.port},{disabled:!0,fieldName:"terminalName",label:N.terminal,overrideObject:W,overrideType:b.a.terminal},{disabled:!0,fieldName:"cargoReference",label:N.bookingNo,overrideType:b.a.cargo,overrideObject:q},{disabled:!0,fieldName:"accountDesc",label:R.account,overrideObject:B,overrideType:b.a.account},{disabled:!j,fieldName:"documentLineText",label:N.documentLineText,breakpoints:{xs:12,sm:12,md:12,lg:12,xl:12}},{disabled:!0,fieldName:"quantity",label:N.quantity,numberInputProps:{maskSettings:{decimalScale:5}}},{disabled:!0,fieldName:"unitPrice",label:N.unitPrice},{disabled:!0,fieldName:"documentAmount",label:x.amount},{disabled:!0,fieldName:"currencyCode",label:N.currency,overrideObject:F,overrideType:b.a.currency,breakpoints:{xs:3,sm:3,md:3,lg:3,xl:3}},{disabled:!0,fieldName:"exchangeRate",label:N.exchangeRate,breakpoints:{xs:3,sm:3,md:3,lg:3,xl:3},numberInputProps:{maskSettings:{decimalScale:5}}},{disabled:!0,fieldName:"exchangeRateDate",label:N.exchangeRateDate},{disabled:!0,fieldName:"vatCode",label:N.vatCode,overrideObject:V,overrideType:b.a.vat},{disabled:!0,fieldName:"vatRate",label:N.vatRate},{disabled:!0,fieldName:"companyCurrencyAmount",label:N.companyCurrencyAmount},{disabled:!0,fieldName:"voyageCurrencyAmount",label:N.voyageCurrencyAmount},{disabled:!0,fieldName:"sourceCurrencyAmount",label:N.sourceCurrencyAmount}],object:a,type:b.a.documentline,userLocale:h,reactKeyPrefix:O})}},[x.amount,a,j,R.account,N.bookingNo,N.companyCurrencyAmount,N.currency,N.documentLineText,N.exchangeRate,N.exchangeRateDate,N.port,N.quantity,N.sourceCurrencyAmount,N.terminal,N.unitPrice,N.vatCode,N.vatRate,N.vessel,N.voyage,N.voyageCurrencyAmount,O,h]);return n.a.createElement(i.a,{reactKeyPrefix:O+"-modal",open:g,title:x.documentLine,onCloseModal:P,hideConfirmBtn:!0,hideCancelBtn:!0},n.a.createElement(r.a,{reactKeyPrefix:O+"-modal-fields",items:a?E:[],breakpoints:{xs:6,sm:6,md:6,lg:6,xl:6}}))}},1812:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a(10),a(11);var o=a(130),n=a(0),r=a.n(n),i=a(44),l=a(1),c=a(102),d=a(6),s=a(3);const u=({reactKeyPrefix:e,onChangeBallastPort:t,onChangeVessel:a,onClose:u,onUnallocate:m,showModal:v,selectedVoyage:b})=>{const[p]=Object(d.a)([s.a.IInternationalization]),[f,y]=Object(n.useState)(null),[C,g]=Object(n.useState)(null),{fas:O,common:h}=p.getLanguageFile(),j=Object(n.useCallback)(e=>{var t,a,o,n,r;return null!==(r=null!==(n=null===(o=null===(a=null===(t=e.voyageHeader)||void 0===t?void 0:t.budgetVoyageStart)||void 0===a?void 0:a.voyage)||void 0===o?void 0:o.vessel)&&void 0!==n?n:e.vessel)&&void 0!==r?r:null},[]),P=Object(n.useCallback)(e=>{var t,a,o,n,r;return null!==(r=null!==(n=null===(o=null===(a=null===(t=e.voyageHeader)||void 0===t?void 0:t.budgetVoyageStart)||void 0===a?void 0:a.voyage)||void 0===o?void 0:o.ballastPort)&&void 0!==n?n:e.ballastPort)&&void 0!==r?r:null},[]);Object(n.useEffect)(()=>{y(j(b)),g(P(b))},[P,j,b]);const N=Object(n.useCallback)(e=>{e&&(y(e),a&&a(e))},[a]),R=Object(n.useCallback)(e=>{e&&(g(e),t&&t(e))},[t]),x=Object(n.useCallback)(()=>{u&&u(),y(null),g(null)},[u]),E=Object(n.useCallback)(()=>{m&&f&&C&&m(f,C),x()},[x,m,C,f]);return r.a.createElement(i.a,{reactKeyPrefix:e+"-unallocate-modal",open:v,onCloseModal:x,title:O.unallocateSelectedVoyage,confirmBtnName:h.unallocate,onConfirm:E,maxWidth:"md",fullWidth:!0},r.a.createElement(o.a,{variant:"h6"},O.selectVessel),r.a.createElement(c.b,{defaultSelectedOptions:f,reactKeyPrefix:e+"-vesselList",onChange:N,type:l.a.vessel,objectPaths:["vesselName"],shouldPreload:!0}),r.a.createElement(o.a,{variant:"h6"},O.selectBallastPort),r.a.createElement(c.b,{defaultSelectedOptions:C,reactKeyPrefix:e+"-ballastPortList",onChange:R,type:l.a.port,objectPaths:["portName"],shouldPreload:!0}))}},2063:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(10),a(11);var o=a(0),n=a.n(o),r=a(51),i=a(12),l=a(6),c=a(1),d=a(3),s=a(20),u=a(19),m=a(28);function v(e,t,a,o,n){var r,i;const l=n.getLanguageFile(),d=null!==(i=null===(r=t.documentCurrency)||void 0===r?void 0:r.currencyCode)&&void 0!==i?i:"",s={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{fieldName:"documentAmount",label:l.common.amount,numberInputProps:{maskSettings:m.a.mask2},onUpdateOverride:a.bind(null,"documentAmount"),InputProps:{endAdornment:d}},{fieldName:"documentDate",label:l.common.date,formControlProps:{required:!0},onUpdateOverride:a.bind(null,"documentDate"),dateInputProps:{showTime:!1}}],object:t,type:c.a.document,userLocale:o};return Object(u.a)(s)}const b=n.a.memo(({reactKeyPrefix:e,closeModal:t,showModal:a,onCreate:u,document:m})=>{const[b,p]=Object(l.a)([d.a.IInternationalization,s.a.IInvoiceDrawerController]),{common:f,invoices:y}=b.getLanguageFile(),C=Object(o.useRef)({documentDate:new Date,documentAmount:m.documentAmount,documentCurrency:m.documentCurrency}),g=Object(o.useCallback)(({documentDate:e})=>!e,[]),O=Object(o.useCallback)(e=>p.getRecordPaymentPostableData(e,m),[p,m]);return n.a.createElement(r.a,{modalProps:{reactKeyPrefix:e+"-create",maxWidth:"xs",onCloseModal:t,open:a,title:y.recordPayment,confirmBtnName:f.add},propertiesToSet:C.current,getColSpec:v,breakpoints:i.e,createProps:{callback:u,type:c.a.document},isConfirmDisabled:g,overrideGetData:O})})}}]);