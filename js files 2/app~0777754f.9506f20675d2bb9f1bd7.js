(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1187:function(e,t,a){"use strict";a.d(t,"a",(function(){return k})),a.d(t,"b",(function(){return P}));a(158);var n,s,r,i=a(9),o=a(31),l=a(16),d=a(1),c=a(152),u=a(7),b=a(29),m=a(21),p=a(669),h=a(299),f=a(642),y=a(1188),g=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e,t){return function(a,n){t(a,n,e)}};const k="BUNKER_ORDER_DRAWER_BUNKER_TYPES";let P=class{constructor(e,t,a){this.store=e,this.selectedBunkerOrderActions=t,this.tsmodelActions=a}loadBusinessPartnersOnTc(e){let t=[];e.portCall&&e.portCall.voyage&&(t=e.portCall.voyage.tcs,e.portCall.voyage.tcIn&&t.push(e.portCall.voyage.tcIn));const a=t.map(e=>[e.charterer?e.charterer.key:null,e.owner?e.owner.key:null]).reduce((e,t)=>e.concat(t),[]).filter(e=>null!=e);a.length>0&&this.tsmodelActions.loadMultipleAction({fields:y.a,query:`filter=key(IN)(${a.join(",")})`,type:d.a.businesspartner})}loadBunkerOrderAndSetAsSelected(e){const t=h.a;this.store.dispatch(this.selectedBunkerOrderActions.setAction(e)),this.tsmodelActions.loadSingleAction({fields:t,key:e,type:d.a.bunkerorder,callback:(e,a)=>{if(a){const e=m.a.getTSModelBuilt(this.store.getState(),d.a.bunkerorder,a.key,t)||a;this.loadBusinessPartnersOnTc(e)}}})}onDeleteBunkerOrder(e){this.tsmodelActions.deleteAction({key:e.key,type:d.a.bunkerorder})}onUpdateBOStatus(e,t,a){t&&this.tsmodelActions.updateSingleAction({data:{bunkerOrderStatus:e,stemmedDate:a},fields:h.a,key:t.key,type:d.a.bunkerorder})}onUpdateBunkerOrder(e){const t=c.b.generateBunkerOrder(e);this.tsmodelActions.updateSingleAction({data:t,fields:h.a,key:e.key,type:d.a.bunkerorder})}loadBunkerTypes(){const e=f.a,t=[{field:"bunkerTypeDesc",groupCode:"bunkerTypes",operator:l.b.ASC,queryParamName:"bunkerTypeDesc"}];this.tsmodelActions.loadMultipleAction({fields:e,headers:{},identifier:k,sorts:t,type:d.a.bunkertype})}};P=g([Object(i.injectable)(),v(0,Object(i.inject)(u.a.Store)),v(1,Object(i.inject)(u.a.ISelectedBunkerOrderActions)),v(2,Object(i.inject)(u.a.ITSModelActionsAsync)),O("design:paramtypes",["function"==typeof(n=void 0!==o.Store&&o.Store)?n:Object,"function"==typeof(s=void 0!==p.ISelectedBunkerOrderActions&&p.ISelectedBunkerOrderActions)?s:Object,"function"==typeof(r=void 0!==b.ITSModelActionsAsync&&b.ITSModelActionsAsync)?r:Object])],P)},1216:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));a(10),a(11);var n=a(187),s=a(695),r=a(100),i=a.n(r),o=a(0),l=a.n(o),d=a(5),c=a(67),u=a(6),b=a(568),m=a(199),p=a(30),h=a(41),f=a(3),y=a(2062),g=a(271);class O extends l.a.PureComponent{constructor(e){super(e),this.state={selectedBunkerOrderLine:null,selectedBunkerOrderLineIndex:-1,showDialog:!1},this.i=this.props.deps[0],this.lang=this.i.getLanguageFile(),this.generateTableRows=this.generateTableRows.bind(this),this.onCreateBunkerOrderLine=this.onCreateBunkerOrderLine.bind(this),this.onClickBunkerOrderLine=this.onClickBunkerOrderLine.bind(this),this.onCloseDialog=this.onCloseDialog.bind(this),this.onConfirmDialog=this.onConfirmDialog.bind(this),this.onDeleteBunkerOrderLine=this.onDeleteBunkerOrderLine.bind(this)}onCloseDialog(){this.setState({selectedBunkerOrderLine:null,selectedBunkerOrderLineIndex:-1,showDialog:!1})}onConfirmDialog(e,t,a,n,s,r,i){const o=[...this.props.bunkerOrderLines];let l;if(-1===i&&(i=o.length),!t){l=(new g.a).getNextKey()}const d=new b.a(Object.assign(Object.assign({},o[i]),{bunkerType:e,bunkeredQuantity:s,key:t||l,maxQuantity:n,minQuantity:a,unitPrice:r}));o[i]=d,this.props.onChange(o),this.setState({selectedBunkerOrderLine:null,selectedBunkerOrderLineIndex:-1,showDialog:!1})}getHeaders(){return[{content:this.lang.model.bunkerType,contentType:d.a.TEXT},{content:this.lang.model.minQty,contentType:d.a.NUMBER,numberFormatOptions:{minDecimals:3,maxDecimals:3}},{content:this.lang.model.maxQty,contentType:d.a.NUMBER,numberFormatOptions:{minDecimals:3,maxDecimals:3}},{content:this.lang.model.bunkeredQty,contentType:d.a.NUMBER,numberFormatOptions:{minDecimals:3,maxDecimals:3}},{content:this.lang.model.unitPrice,contentType:d.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}}]}onCreateBunkerOrderLine(){this.setState({selectedBunkerOrderLine:new b.a({}),showDialog:!0})}onDeleteBunkerOrderLine(e){const t=this.props.bunkerOrderLines.filter(t=>t.key!==e);this.setState({selectedBunkerOrderLine:null,selectedBunkerOrderLineIndex:-1,showDialog:!1}),this.props.onChange(t)}onClickBunkerOrderLine(e){const t=this.props.bunkerOrderLines.find(t=>t.key===e);t&&this.setState({selectedBunkerOrderLine:t,selectedBunkerOrderLineIndex:this.props.bunkerOrderLines.indexOf(t),showDialog:!0})}generateTableRows(){const{bunkerOrderLines:e}=this.props,t=[];if(e&&e.length>0)for(const a of e){const e=[a.bunkerType?a.bunkerType.bunkerTypeDesc:"",a.minQuantity,a.maxQuantity,a.bunkeredQuantity,a.unitPrice];t.push({content:e,id:a.key})}return t}render(){const{selectedBunkerOrderLineIndex:e,showDialog:t,selectedBunkerOrderLine:a}=this.state,{userLocale:n,addButtonDisabled:s,bunkerTypes:r,bunkerOrderLines:o,footer:d,className:u,user:b,reactKeyPrefix:f}=this.props,g=this.getHeaders(),O=Object(m.a)(b,[{authorizationType:h.a.PERMISSION,disabled:!!s,executePermissions:[p.a.BunkerOrderPOST],icon:i.a,iconButtonProps:{color:"primary","aria-label":this.lang.bo.createBunkerOrderLine},label:this.lang.common.create,noWriteProp:"disabled",onClick:this.onCreateBunkerOrderLine,readPermissions:[p.a.BunkerOrderPOST],writePermissions:[p.a.BunkerOrderPOST],reactKeyPrefix:f+"primary-actions"}]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a,{bunkerOrderLine:a,bunkerTypes:r,index:e,isDeleteBtnDisabled:o.length<=1,onClose:this.onCloseDialog,onConfirm:this.onConfirmDialog,onDelete:this.onDeleteBunkerOrderLine,showDialog:t,userLocale:n,user:b,reactKeyPrefix:f+"create-bo-modal"}),l.a.createElement(c.a,{className:u,headers:g,userLocale:n,reactKeyPrefix:f+"order-lines-table",title:this.lang.bo.bunkerOrderLines,data:this.generateTableRows(),primaryActions:O,onRowClick:this.onClickBunkerOrderLine,footer:d,customisation:{responsive:!0}}))}}const v=Object(u.b)([f.a.IInternationalization,f.a.IKeyGen],Object(s.a)(e=>Object(n.a)({cells:{padding:5},headers:{padding:5},row:{cursor:"pointer"}}))(O))},1217:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));a(10),a(11);var n=a(0),s=a.n(n),r=a(640),i=a(102),o=a(44),l=a(92),d=a(6),c=a(278),u=a(1),b=a(3);class m extends s.a.PureComponent{constructor(e){super(e),[this.i]=this.props.deps,this.onConfirm=this.onConfirm.bind(this),this.onChangeBankAccount=this.onChangeBankAccount.bind(this)}onConfirm(){const{objectKey:e,bankAccounts:t,onConfirm:a,objectType:n}=this.props,{bankAccount:s}=this.state;if(s&&t.indexOf(s)<0){const a=[...t.map(e=>({key:e.key})),this.state.bankAccount];l.a.getUpdateFieldFunction({fieldToSet:"bankAccounts",fields:{bankAccounts:r.a},key:e,type:n})(a)}a()}onChangeBankAccount(e){e&&this.setState({bankAccount:new c.a(e)})}render(){const{showModal:e,onClose:t,reactKeyPrefix:a}=this.props,n=this.i.getLanguageFile();return s.a.createElement(o.a,{title:n.businessPartner.addBankAccount,open:e,onCloseModal:t,maxWidth:"xs",fullWidth:!0,confirmBtnName:n.common.add,onConfirm:this.onConfirm,reactKeyPrefix:a+"add-bank-account-modal"},s.a.createElement(i.b,{reactKeyPrefix:a+"bank-account-typeahead",label:n.businessPartner.bankAccount,type:u.a.bankaccount,objectPaths:["bank.bankName","bankAccountNo","currency.currencyCode"],shouldPreload:!0,onChange:this.onChangeBankAccount}))}}const p=Object(d.b)([b.a.IInternationalization],m)},1645:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n,s,r=a(9),i=a(31),o=a(1),l=a(29),d=a(7),c=a(452),u=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e,t){return function(a,n){t(a,n,e)}};let p=class{constructor(e,t){this.store=e,this.tsmodelActions=t}loadBankOverview(e){this.tsmodelActions.loadSingleAction({fields:c.c,key:e,type:o.a.bank})}};p=u([Object(r.injectable)(),m(0,Object(r.inject)(d.a.Store)),m(1,Object(r.inject)(d.a.ITSModelActionsAsync)),b("design:paramtypes",["function"==typeof(n=void 0!==i.Store&&i.Store)?n:Object,"function"==typeof(s=void 0!==l.ITSModelActionsAsync&&l.ITSModelActionsAsync)?s:Object])],p)},1646:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n,s=a(9),r=a(1),i=a(7),o=a(29),l=a(1184),d=a(46),c=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e,t){return function(a,n){t(a,n,e)}};let m=class{constructor(e){this.tsmodelActions=e}loadBaselineTerm(e){this.tsmodelActions.loadSingleAction({fields:l.a,key:e,type:r.a.baselineterm})}deleteBaselineTerm(e){this.tsmodelActions.deleteAction({key:e,type:r.a.baselineterm,callback:()=>d.a.next()})}toggleEnabledBaselineTerm(e,t){this.tsmodelActions.updateSingleAction({key:e,data:{isObjectActive:t},type:r.a.baselineterm,callback:()=>d.a.next()})}};m=c([Object(s.injectable)(),b(0,Object(s.inject)(i.a.ITSModelActionsAsync)),u("design:paramtypes",["function"==typeof(n=void 0!==o.ITSModelActionsAsync&&o.ITSModelActionsAsync)?n:Object])],m)},1647:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n,s=a(9),r=a(1),i=a(7),o=a(29),l=a(1185),d=a(46),c=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e,t){return function(a,n){t(a,n,e)}};let m=class{constructor(e){this.tsmodelActions=e}loadBusinessUnit(e){this.tsmodelActions.loadSingleAction({fields:l.a,key:e,type:r.a.businessunit})}deleteBusinessUnit(e){this.tsmodelActions.deleteAction({key:e,type:r.a.businessunit,callback:()=>d.a.next()})}toggleEnabledBusinessUnit(e,t){this.tsmodelActions.updateSingleAction({key:e,data:{isObjectActive:t},type:r.a.businessunit,callback:()=>d.a.next()})}};m=c([Object(s.injectable)(),b(0,Object(s.inject)(i.a.ITSModelActionsAsync)),u("design:paramtypes",["function"==typeof(n=void 0!==o.ITSModelActionsAsync&&o.ITSModelActionsAsync)?n:Object])],m)},1894:function(e,t,a){"use strict";a.d(t,"a",(function(){return De}));a(10),a(11),a(109);var n=a(0),s=a.n(n),r=a(97),i=a(33),o=a(2102),l=a(246),d=a(218),c=a(371),u=a.n(c),b=a(81),m=a(187),p=a(695),h=a(100),f=a.n(h),y=a(149),g=a.n(y),O=a(57),v=a(70),k=a(139),P=a(348),C=a(1),j=a(19),w=a(168);function T(e,t,a,n,s,r){const i=t.contactInfo&&t.contactInfo.length>0?t.contactInfo[0]:new k.a({}),o=w.b.bind(null,t,C.a.contactinfo,"contactInfo",a),{model:l}=s.getLanguageFile(),d={disableUpdate:!0,fieldOptions:[{fieldName:"individualName",formControlProps:{required:!0},label:l.name,onUpdateOverride:a.bind(null,"individualName")},{fieldName:"phoneNo",label:l.phoneNo,onUpdateOverride:o.bind(null,"phoneNo"),overrideObject:i,overrideType:C.a.contactinfo},{fieldName:"mobileNo",label:l.mobileNo,onUpdateOverride:o.bind(null,"mobileNo"),overrideObject:i,overrideType:C.a.contactinfo},{fieldName:"email",label:l.email,onUpdateOverride:o.bind(null,"email"),overrideObject:i,overrideType:C.a.contactinfo,textInputProps:{letterCase:O.a.LOWERCASE,onInputChange:r.onChangeEmail,validation:v.b.EmailOnClient}}],object:new P.a(t),type:C.a.individual,userLocale:n,reactKeyPrefix:e};return Object(j.a)(d)}var A=a(224),N=a(12),S=a(51),B=a(44),I=a(5),D=a(67),L=a(6),E=a(3);const x={isEmailValid:!1,removeIndividualModal:!1,selectedContactPersonLine:null,selectedItems:[],showDialog:!1};class M extends s.a.PureComponent{constructor(e){super(e),this.state=Object.assign({},x),this.i=this.props.deps[0],this.confirmBtnIsDisabled=this.confirmBtnIsDisabled.bind(this),this.generateTableRows=this.generateTableRows.bind(this),this.getHeaders=this.getHeaders.bind(this),this.onChangeEmail=this.onChangeEmail.bind(this),this.onClickContactPerson=this.onClickContactPerson.bind(this),this.onCloseDialog=this.onCloseDialog.bind(this),this.onOpenDialog=this.onOpenDialog.bind(this),this.onClickRemoveIndividuals=this.onClickRemoveIndividuals.bind(this),this.toggleRemoveIndividualModal=this.toggleRemoveIndividualModal.bind(this)}onClickContactPerson(e){const{businessPartner:{individuals:t}}=this.props,a=t.find(t=>t.key===e);a&&this.setState({selectedContactPersonLine:a,showDialog:!0})}onCloseDialog(){this.setState(Object.assign({},x))}onOpenDialog(){this.setState({showDialog:!0})}getHeaders(){const e=this.i.getLanguageFile();return[{content:e.model.name,contentType:I.a.TEXT},{content:e.model.phoneNo,contentType:I.a.TEXT},{content:e.model.mobileNo,contentType:I.a.TEXT},{content:e.model.email,contentType:I.a.TEXT}]}onChangeEmail(e){this.setState({isEmailValid:e})}confirmBtnIsDisabled(e){const{individualName:t}=e,{isEmailValid:a}=this.state;return!(!!t&&t.length>0)&&!a}getTitle(){const e=this.i.getLanguageFile();return this.isEditing()?e.common.editContactPerson:e.common.addContactPerson}isEditing(){return!!this.state.selectedContactPersonLine}generateTableRows(){const{businessPartner:{individuals:e}}=this.props,t=[];if(e&&e.length>0)for(const a of e){const e=[Object(b.a)(a,"individualName",""),Object(b.a)(a,"contactInfo[0].phoneNo",""),Object(b.a)(a,"contactInfo[0].mobileNo",""),Object(b.a)(a,"contactInfo[0].email","")];t.push({content:e,id:a.key})}return t}toggleRemoveIndividualModal(){this.setState({removeIndividualModal:!this.state.removeIndividualModal})}onClickRemoveIndividuals(){const{onDeleteContactPersons:e}=this.props,{selectedItems:t}=this.state;e(t),this.toggleRemoveIndividualModal(),this.setState({selectedItems:[]})}render(){const{showDialog:e,selectedContactPersonLine:t}=this.state,{userLocale:a,addButtonDisabled:n,businessPartner:r,className:i,reactKeyPrefix:o}=this.props,l=this.i.getLanguageFile(),d=this.getHeaders(),c=[{disabled:!1,icon:g.a,iconButtonProps:{"aria-label":l.common.remove},label:l.common.remove,onClick:e=>{this.setState({selectedItems:e},()=>{this.toggleRemoveIndividualModal()})},reactKeyPrefix:o+"selected-actions"}],u=[{disabled:!!n,icon:f.a,iconButtonProps:{color:"primary","aria-label":l.common.addContactPerson},label:l.common.addContactPerson,onClick:this.onOpenDialog,reactKeyPrefix:o+"primary-actions"}];return s.a.createElement(s.a.Fragment,null,s.a.createElement(D.a,{className:i,data:this.generateTableRows(),headers:d,userLocale:a,primaryActions:u,reactKeyPrefix:o+"contact-persons-table",onRowClick:this.onClickContactPerson,title:l.model.contactPersons,selectable:!0,selectedActions:c,customisation:{responsive:!0}}),s.a.createElement(S.a,{modalProps:{confirmBtnName:this.isEditing()?l.common.save:l.common.create,onCloseModal:this.onCloseDialog,onDelete:this.onCloseDialog,open:e,title:this.getTitle(),reactKeyPrefix:o+"create-edit-tsmodel"},breakpoints:N.e,contextData:{onChangeEmail:this.onChangeEmail},getColSpec:T,isConfirmDisabled:this.confirmBtnIsDisabled,selectedObject:t,enableCopy:!1,updateProps:{fields:{individuals:A.b.individuals},objPropToUpdate:"individuals",objToUpdate:r,objToUpdateType:C.a.businesspartner,shouldKeepValues:this.isEditing(),shouldUseArray:!0,type:C.a.individual}}),s.a.createElement(B.a,{open:this.state.removeIndividualModal,onCloseModal:this.toggleRemoveIndividualModal,onConfirm:this.onClickRemoveIndividuals,title:l.common.delete,maxWidth:"xs",fullWidth:!0,reactKeyPrefix:o+"remove-individual-modal"},l.common.deleteItemsConfirmation))}}const R=Object(L.b)([E.a.IInternationalization],Object(p.a)(()=>Object(m.a)({cells:{padding:5},headers:{padding:5},row:{cursor:"pointer"}}))(M));var K=a(37),U=a(244),F=a(270),_=a(754),G=a(566),W=a(86),z=a(202);class q extends s.a.PureComponent{constructor(e){super(e),this.getBusinessPartnerMainDetailsColSpec=(e,t,a,n,r)=>{const[i]=this.props.deps,{reactKeyPrefix:c}=this.props,m=i.getLanguageFile(),p=Object(b.a)(e,"www[0].www",""),h=!!p&&s.a.createElement(o.a,{position:"end"},s.a.createElement("a",{href:"http://"+p,rel:"noopener noreferrer",target:"_blank"},s.a.createElement(d.a,{title:m.common.openInNewTab},s.a.createElement(l.a,null,s.a.createElement(u.a,null)))));return[Object(j.a)({object:e,parentData:{type:C.a.businesspartner,key:e.key},type:C.a.businesspartner,updateResponseFields:A.b,userLocale:t,reactKeyPrefix:c,fieldOptions:[{fieldName:"businessPartnerType",formControlProps:{required:!0}},{fieldName:"companyRegistrationNo"},{fieldName:"businessPartnerName",formControlProps:{required:!0}},{fieldName:"vatNumber"},{fieldName:"businessPartnerSort",formControlProps:{required:!0}},{fieldName:"businessPartnerLink",typeaheadProps:{shouldPreload:!0,objectPaths:W.b.businessPartner}},{fieldName:"businessPartnerCode",formControlProps:{required:!0},textInputProps:{letterCase:O.a.UPPERCASE}},{fieldName:"isInterCompany",label:m.model.interCompany}]}),Object(j.a)({object:e.addresses[0]||new U.a({}),type:C.a.address,parentData:{type:C.a.businesspartner,key:e.key},updateResponseFields:A.a,userLocale:t,reactKeyPrefix:c,fieldOptions:[{fieldName:"address1",onUpdateOverride:e.addresses[0]?void 0:e=>{a(new U.a({address1:e}))}},{fieldName:"address2",onUpdateOverride:e.addresses[0]?void 0:e=>{a(new U.a({address2:e}))}},{fieldName:"address3",onUpdateOverride:e.addresses[0]?void 0:e=>{a(new U.a({address3:e}))}},{fieldName:"postalCode",onUpdateOverride:e.addresses[0]?void 0:e=>{a(new U.a({postalCode:e}))}},{fieldName:"city",onUpdateOverride:e.addresses[0]?void 0:e=>{a(new U.a({city:e}))}},{fieldName:"subdivision",label:m.model.subdivision,onUpdateOverride:e.addresses[0]?void 0:e=>{null!=e&&a(new U.a({subdivision:new _.a({key:e})}))}},{fieldName:"country",typeaheadProps:{shouldPreload:!0},onUpdateOverride:e.addresses[0]?void 0:e=>{null!=e&&a(new U.a({country:new F.a({key:e})}))}}]}),Object(j.a)({parentData:{type:C.a.businesspartner,key:e.key},object:e.contactInfo[0]||new k.a({}),type:C.a.contactinfo,userLocale:t,updateResponseFields:A.a,reactKeyPrefix:c,fieldOptions:[{fieldName:"phoneNo",onUpdateOverride:e.contactInfo[0]?void 0:e=>{r(new k.a({phoneNo:e}))}},{fieldName:"mobileNo",onUpdateOverride:e.contactInfo[0]?void 0:e=>{r(new k.a({mobileNo:e}))}},{fieldName:"faxNo",onUpdateOverride:e.contactInfo[0]?void 0:e=>{r(new k.a({faxNo:e}))}},{fieldName:"telexNo",onUpdateOverride:e.contactInfo[0]?void 0:e=>{r(new k.a({telexNo:e}))}},{fieldName:"email",onUpdateOverride:e.contactInfo[0]?void 0:e=>{r(new k.a({email:e}))},textInputProps:{letterCase:O.a.LOWERCASE,validation:v.b.EmailOnClient}}]}).concat(Object(j.a)({parentData:{type:C.a.businesspartner,key:e.key},object:e.www[0]||new G.a({}),type:C.a.www,userLocale:t,updateResponseFields:A.f,reactKeyPrefix:c,fieldOptions:[{InputProps:{endAdornment:h},fieldName:"www",label:m.model.www,onUpdateOverride:e.www[0]?void 0:e=>{n(new G.a({www:e}))}}]}))]},this.getBusinessPartnerMainDetailsHorizontalLists=this.getBusinessPartnerMainDetailsHorizontalLists.bind(this)}getBusinessPartnerMainDetailsHorizontalLists(){const{businessPartner:e,userLocale:t,classes:a,onChangeAddresses:n,onChangeBusinessPartnerWww:r,onChangeContactInfo:i}=this.props,o=[];if(e&&t){const l=this.getBusinessPartnerMainDetailsColSpec(e,t,n,r,i);for(let e=0;e<l.length;e++){const t=s.a.createElement(K.a,{reactKeyPrefix:"doc-common-components-drawer-business-partner-drawer-main-details-list-"+e,key:"business_partner_main_details_list_"+e,items:l[e],breakpoints:N.a}),n=s.a.createElement(z.a,{key:"divider_"+e,className:a.divider});switch(e){case l.length-1:o.push(t);break;default:o.push(t,n)}}}return o}render(){const e=this.getBusinessPartnerMainDetailsHorizontalLists(),{businessPartner:t,userLocale:a,onDeleteContactPersons:n,reactKeyPrefix:r}=this.props;return t?s.a.createElement(s.a.Fragment,null,e,s.a.createElement(R,{onDeleteContactPersons:n,businessPartner:t,userLocale:a,reactKeyPrefix:r+"contact-persons"})):null}}const $=Object(L.b)([E.a.IInternationalization],Object(p.a)(e=>Object(m.a)({}))(q));var H=a(1217),V=a(88),Q=a(63),X=a(85),Y=a(323);const J=(new V.a).getLanguageFile(),Z=(e,t,a)=>{var n;if(t){const r=[];for(const e of t.bankAccounts)r.push(e.key);return Object(j.a)({object:t,parentData:{type:C.a.businesspartner,key:t.key},type:C.a.businesspartner,userLocale:a,updateResponseFields:A.b,reactKeyPrefix:e,fieldOptions:[{fieldName:"paymentTerms",label:J.businessPartner.defaultPaymentTerms,typeaheadProps:{shouldPreload:!0}},{fieldName:"baselineTerm",label:J.businessPartner.defaultBaselineTerm,typeaheadProps:{shouldPreload:!0}},{fieldName:"payee",label:J.businessPartner.defaultInvoiceParty,typeaheadProps:{shouldPreload:!0,objectPaths:W.b.businessPartner}},{fieldName:"companyBankAccount",label:J.businessPartner.defaultReceivableAccount,typeaheadProps:{query:"filter=companies(NOTNULL)",shouldPreload:!0}},{fieldName:"bankAccount",label:J.businessPartner.defaultPayableAccount,typeaheadProps:{query:r.length?`filter=key(IN)(${r.join(",")})`:"",shouldPreload:!0}},{InputProps:{endAdornment:Q.a.Percent},fieldName:"maxAdvancePaymentPercent",numberInputProps:{validation:[{type:X.a.RANGE,max:100}],maskSettings:{decimalScale:0,allowNegative:!1}}},{fieldName:"rating"},{fieldName:"ratingExpiryDate"},"C"===(null===(n=t.businessPartnerType)||void 0===n?void 0:n.businessPartnerType)?{fieldName:"isTotalCommissionPayable",label:"Deduct 100% Commission on Balance Freight Calculation"}:{overrideComponent:s.a.createElement(Y.a,null)}]})}};a(118),a(158);var ee=a(2517),te=a(26),ae=a(38),ne=a(123);const se=Object(L.b)([E.a.IInternationalization],Object(p.a)(e=>Object(m.a)({balance:{fontWeight:500},negativeBalance:{color:ae.a.secondary},positiveBalance:{color:ae.a.error}}))(e=>{const{deps:[t],classes:a,totalAmount:n,totalAmountPaid:r,totalBalance:i,userLocale:o,headers:l}=e,d=t.getLanguageFile(),c=n.reduce((e,t)=>+e+ +t,0),u=r.reduce((e,t)=>+e+ +t,0),b=i.reduce((e,t)=>+e+ +t,0),m=ne.a.formatNumberLocalized(c,o.isoCode,{maxDecimals:2,minDecimals:2}),p=ne.a.formatNumberLocalized(0!==u?u/-1:u,o.isoCode,{maxDecimals:2,minDecimals:2}),h=ne.a.formatNumberLocalized(b,o.isoCode,{maxDecimals:2,minDecimals:2}),f=l.length-3;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee.a,{colSpan:f},d.common.total),s.a.createElement(ee.a,{colSpan:1,align:"right"},m),s.a.createElement(ee.a,{colSpan:1,align:"right"},p),s.a.createElement(ee.a,{colSpan:1,align:"right",className:Object(te.default)(a.balance,{[a.negativeBalance]:b<0},{[a.positiveBalance]:b>0})},h))}));var re=a(1405);const ie=Object(L.b)([E.a.IInternationalization],e=>{const{invoices:t,paymentsAndReceipts:a,userLocale:n}=e,r=e.deps[0].getLanguageFile(),i=re.a.getPaidInvoiceKeysFromPaymentsAndReceipts(a);let o=[],l=[],d=[];const c=[{content:r.businessPartner.invoiceNumber,contentType:I.a.TEXT},{content:r.model.documentText,contentType:I.a.TEXT},{content:r.common.amount,contentType:I.a.NUMBER,numberFormatOptions:{maxDecimals:2,minDecimals:2}},{content:r.businessPartner.amountPaid,contentType:I.a.NUMBER,numberFormatOptions:{maxDecimals:2,minDecimals:2}},{content:r.common.balance,contentType:I.a.NUMBER,numberFormatOptions:{maxDecimals:2,minDecimals:2}}];let u=[];if(t){t.sort(re.a.sortByDocumentDate),t.map(e=>{let t=0,n=e.documentAmount;if(i.indexOf(e.key)>-1){t=a.filter(t=>{for(const a of t.documentLines)return!!a.refDocument&&a.refDocument.key===e.key}).reduce((e,t)=>+e+ +t.documentAmount,0),n+=t}0!==n&&(o.push(n),l.push(t),d.push(e.documentAmount),u.push({content:[e.documentNo,e.documentText,e.documentAmount,0!==t?t/-1:t,n],id:e.key}))});0===o.reduce((e,t)=>+e+ +t,0)&&(u=[],o=[],l=[],d=[])}const b=u.length>0&&s.a.createElement(se,{userLocale:n,totalAmount:d,totalAmountPaid:l,totalBalance:o,headers:c});return s.a.createElement(D.a,{data:u,headers:c,userLocale:n,reactKeyPrefix:"doc-common-components-drawer-business-partner-drawer-invoice-table-invoice-table",title:r.businessPartner.outstandingInvoices,footer:b,pagination:{enabled:u.length>15,rowsPerPage:[15,30,45]},customisation:{responsive:!0}})});var oe=a(1281),le=a(99),de=a(717),ce=a(20),ue=a(23),be=a(21),me=a(640),pe=a(30),he=a(66),fe=a(32),ye=a(43);const ge=({i:e,userLocale:t,reactKeyPrefix:a,businessPartner:r})=>{var i,o,l;const[d]=Object(L.a)([ce.a.IBusinessPartnerDrawerController]),[c,u]=Object(n.useState)(!1),b=Object(n.useRef)(!1),m=Object(ue.a)(fe.a)||new ye.a({}),{bankAccounts:p}=null!==(i=Object(ue.a)(be.a.getTSModelBuilt,C.a.businesspartner,r.key,{bankAccounts:me.a}))&&void 0!==i?i:new le.a({}),h=null!==(o=Object(ue.a)(be.a.getTSModelsBuilt,C.a.document,A.d,de.c+"_"+r.key))&&void 0!==o?o:[],f=null!==(l=Object(ue.a)(be.a.getTSModelsBuilt,C.a.document,A.e,de.d+"_"+r.key))&&void 0!==l?l:[];Object(n.useEffect)(()=>{d.loadBankAccounts(r.key,()=>b.current=!0),d.loadInvoices(r.key),d.loadPaymentsAndReceipts(r.key)},[r.key,d]);const y=Object(n.useCallback)(()=>{u(e=>!e)},[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(K.a,{reactKeyPrefix:a+"financial-tab-col-spec",items:Z(a,r,t),breakpoints:N.a}),b&&h&&f&&s.a.createElement(s.a.Fragment,null,s.a.createElement(oe.a,{bankAccounts:p,createEditDisabled:!Object(he.a)([pe.a.BusinessPartnerPUT],m),i:e,userLocale:t,onClickAdd:y,reactKeyPrefix:a,parentObject:null!=r?r:new le.a({}),parentObjectType:C.a.businesspartner}),s.a.createElement(ie,{userLocale:t,invoices:h,paymentsAndReceipts:f}),s.a.createElement(H.a,{reactKeyPrefix:a+"bank-account-modal",showModal:c,objectKey:r.key,objectType:C.a.businesspartner,bankAccounts:p,onClose:y,onConfirm:y})))};var Oe=a(82),ve=a(15),ke=a(46),Pe=a(208),Ce=a(329),je=a(92),we=a(47),Te=a(7),Ae=a(1218),Ne=a(42),Se=a(154);const Be="doc-common-components-drawer-business-partner-drawer";class Ie extends s.a.PureComponent{constructor(e){super(e),this.state=Object.assign(Object.assign({},e.state),{showIsActiveModal:!1,showEditBPNameModal:!1,showDeleteModal:!1,windowWidth:window.innerWidth}),this.controller=e.controller,[,this.i]=e.deps,this.businessPartnerKey=this.getBusinessPartnerId(e.match),this.onChangeAddresses=this.onChangeAddresses.bind(this),this.onChangeBusinessPartnerWww=this.onChangeBusinessPartnerWww.bind(this),this.onChangeContactInfo=this.onChangeContactInfo.bind(this),this.onDeleteContactPersons=this.onDeleteContactPersons.bind(this),this.onToggleIsActive=this.onToggleIsActive.bind(this),this.getSecondaryActions=this.getSecondaryActions.bind(this),this.onPermanentlyDelete=this.onPermanentlyDelete.bind(this),this.toggleEditBPNameModal=this.toggleEditBPNameModal.bind(this),this.onChangeBPName=this.onChangeBPName.bind(this),this.toggleIsActiveModal=this.toggleIsActiveModal.bind(this),this.toggleDeleteModal=this.toggleDeleteModal.bind(this),this.loadBusinessPartner(this.businessPartnerKey)}UNSAFE_componentWillReceiveProps(e){const t=this.getBusinessPartnerId(e.match);this.businessPartnerKey!==t&&(this.loadBusinessPartner(t),this.businessPartnerKey=t),this.setState(Object.assign({},e.state))}onChangeAddresses(e){const{businessPartner:t}=this.state;t&&this.controller.createAddress(t.key,e)}onChangeContactInfo(e){const{businessPartner:t}=this.state;t&&this.controller.createContactInfo(t.key,e)}onChangeBusinessPartnerWww(e){const{businessPartner:t}=this.state;t&&this.controller.createBusinessPartnerWww(t.key,e)}onDeleteContactPersons(e){const{businessPartner:t}=this.state;t&&this.controller.deleteContactPersons(e,t)}loadBusinessPartner(e){e&&0!==e&&this.controller.loadBusinessPartnerAndSetSelected(e)}getBusinessPartnerId(e){return e&&e.params&&e.params.drawerId?parseInt(e.params.drawerId,10):void 0}onToggleIsActive(){const{businessPartner:e}=this.state;if(e){const{isObjectActive:t}=e;this.setState({businessPartner:new le.a(Object.assign(Object.assign({},this.state.businessPartner),{isObjectActive:!t,addresses:e.addresses}))}),je.a.updateField(!t,{fieldToSet:"isObjectActive",fields:{isObjectActive:"*"},key:e.key,type:C.a.businesspartner,callback:()=>{this.toggleIsActiveModal(),ke.a.next()}})}}onPermanentlyDelete(){this.state.businessPartner&&(this.controller.permaDeleteBusinessPartner(this.state.businessPartner.key),this.props.history.push(i.a.businessPartners.url),ke.a.next())}toggleDeleteModal(){this.setState({showDeleteModal:!this.state.showDeleteModal})}toggleIsActiveModal(){this.setState({showIsActiveModal:!this.state.showIsActiveModal})}toggleEditBPNameModal(){this.setState({showEditBPNameModal:!this.state.showEditBPNameModal})}onChangeBPName(e){this.state.businessPartner&&this.controller.onUpdateBPName(e,this.state.businessPartner.key)}getSecondaryActions(){const{businessPartner:e}=this.state,t=this.i.lang(),a=!!(null==e?void 0:e.isObjectActive);return[{disabled:!1,onClick:this.toggleIsActiveModal,text:a?t.common.disable:t.common.enable},{disabled:a,onClick:this.toggleDeleteModal,text:t.common.delete,tooltipText:a?t.common.disableBeforeDelete:void 0},{disabled:!1,onClick:this.toggleEditBPNameModal,text:t.businessPartner.editName}]}getTabs(){const e=this.i.lang(),{businessPartner:t,userLocale:a,windowWidth:n}=this.state;return[{id:"main-details",content:()=>s.a.createElement($,{reactKeyPrefix:Be+"main-details",businessPartner:t,userLocale:a,windowWidth:n,onChangeAddresses:this.onChangeAddresses,onChangeContactInfo:this.onChangeContactInfo,onChangeBusinessPartnerWww:this.onChangeBusinessPartnerWww,onDeleteContactPersons:this.onDeleteContactPersons}),label:e.common.mainDetails},{id:"financial",content:()=>s.a.createElement(ge,{i:this.i,reactKeyPrefix:Be+"financial-tab",businessPartner:t||new le.a({}),userLocale:a}),label:e.common.financial}]}render(){var e;const{businessPartner:t,showEditBPNameModal:a}=this.state,n=this.i.lang();if(t){const r=t?t.isObjectActive:void 0;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Oe.a,{reactKeyPrefix:Be,drawerKey:null!==(e=this.businessPartnerKey)&&void 0!==e?e:0,drawerRoute:ve.a.businessPartnerDrawer,isObjectActive:t,secondaryActions:this.getSecondaryActions(),key:ve.a.businessPartnerDrawer+this.businessPartnerKey,subject:n.model.businessPartner,subjectLoaded:!!t,subjectName:t?t.businessPartnerName:"",tabs:this.getTabs(),tabId:this.props.match.params.tabId,tsModelType:C.a.businesspartner,reloadParentDrawer:()=>{}}),s.a.createElement(B.a,{reactKeyPrefix:Be+"-delete-modal",open:this.state.showDeleteModal,onCloseModal:this.toggleDeleteModal,onConfirm:this.onPermanentlyDelete,title:n.common.delete,maxWidth:"xs",fullWidth:!0,confirmBtnName:n.common.delete},n.businessPartner.deleteBusinessPartner),s.a.createElement(B.a,{reactKeyPrefix:Be+"-toggle-is-active-modal",open:this.state.showIsActiveModal,onCloseModal:this.toggleIsActiveModal,onConfirm:this.onToggleIsActive,title:r?n.common.disable:n.common.enable,maxWidth:"xs",fullWidth:!0,confirmBtnName:r?n.common.disable:n.common.enable},r?n.businessPartner.disableBusinessPartner:n.businessPartner.enableBusinessPartner),s.a.createElement(Pe.a,{reactKeyPrefix:Be+"edit-name-modal",title:n.businessPartner.editName,value:t.businessPartnerName,showModal:a,onClose:this.toggleEditBPNameModal,onConfirm:this.onChangeBPName,characterRequirements:{minLength:1,maxLength:Se.a.businesspartner.businessPartnerName.limit}}))}return s.a.createElement(s.a.Fragment,null)}}const De=Object(we.a)(e=>{const t=Ae.a.get(e);return{businessPartner:be.a.getTSModelBuilt(e,C.a.businesspartner,t||0,A.b),userLocale:Ne.a.getUserLocale(e)}},Object(L.b)([Te.a.ITSModelActionsAsync,E.a.IInternationalization],Object(Ce.a)(ce.a.IBusinessPartnerDrawerController,Object(r.k)(Ie))))},1899:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));a(10),a(11);var n=a(0),s=a.n(n),r=a(97),i=a(6),o=a(23),l=a(1),d=a(21),c=a(42),u=a(35),b=a(3),m=a(82),p=a(15),h=a(20),f=a(150),y=a(452),g=a(37),O=a(12),v=a(75),k=a(71),P=a(19);const C=(e,t,a,n)=>{const{model:s}=t.getLanguageFile(),r=[{label:s.bankName,fieldName:"bankName"},{label:s.swiftCode,fieldName:"swiftAddress"},{label:s.chipsUid,fieldName:"chip"},{label:s.abaNumber,fieldName:"abaNumber"}];return Object(P.a)({fieldOptions:r,updateResponseFields:y.c,object:n,type:l.a.bank,userLocale:a,reactKeyPrefix:e})},j=({reactKeyPrefix:e,bank:t,i:a,userLocale:n})=>{const{common:r}=a.getLanguageFile();return s.a.createElement(k.a,null,s.a.createElement(v.a,{title:r.mainDetails}),s.a.createElement(g.a,{reactKeyPrefix:e+"-field-list",items:C(e,a,n,t),breakpoints:O.a}))};var w=a(244);const T=({reactKeyPrefix:e,bank:t,i:a,userLocale:n})=>{const{model:s}=a.getLanguageFile(),r=t.addresses&&t.addresses.length>0&&t.addresses[0].subdivision?t.addresses[0].subdivision:void 0,i=t.addresses&&t.addresses.length>0&&t.addresses[0].country?t.addresses[0].country:void 0,o=[{label:s.address1,fieldName:"address1"},{label:s.address2,fieldName:"address2"},{label:s.address3,fieldName:"address3"},{label:s.postalCode,fieldName:"postalCode"},{label:s.city,fieldName:"city"},{fieldName:"subdivision",label:s.subdivision,typeaheadProps:{objectPaths:["subdivisionName"],defaultSelectedOptions:r}},{label:s.country,fieldName:"country",typeaheadProps:{objectPaths:["countryName"],shouldPreload:!0,defaultSelectedOptions:i}}];return Object(P.a)({fieldOptions:o,object:t.addresses[0]||new w.a({}),type:l.a.address,updateResponseFields:y.a,parentData:{type:l.a.bank,key:t.key},userLocale:n,reactKeyPrefix:e})},A=({reactKeyPrefix:e,bank:t,i:a,userLocale:n})=>{const{model:r}=a.getLanguageFile();return s.a.createElement(k.a,null,s.a.createElement(v.a,{title:r.address}),s.a.createElement(g.a,{reactKeyPrefix:e+"-field-list",items:T({reactKeyPrefix:e,bank:t,i:a,userLocale:n}),breakpoints:O.a}))};var N=a(57),S=a(139),B=a(70);const I=({reactKeyPrefix:e,bank:t,i:a,userLocale:n})=>{const{model:s}=a.getLanguageFile(),r=[{label:s.phoneNo,fieldName:"phoneNo"},{label:s.mobileNo,fieldName:"mobileNo"},{label:s.faxNo,fieldName:"faxNo"},{label:s.telexNo,fieldName:"telexNo"},{label:s.email,fieldName:"email",textInputProps:{letterCase:N.a.LOWERCASE,validation:B.b.EmailOnClient}}];return Object(P.a)({fieldOptions:r,object:t.contactInfo[0]||new S.a({}),type:l.a.contactinfo,updateResponseFields:y.b,parentData:{type:l.a.bank,key:t.key},userLocale:n,reactKeyPrefix:e})},D=({reactKeyPrefix:e,bank:t,i:a,userLocale:n})=>{const{model:r}=a.getLanguageFile();return s.a.createElement(k.a,null,s.a.createElement(v.a,{title:r.contactInfo}),s.a.createElement(g.a,{reactKeyPrefix:e+"-field-list",items:I({reactKeyPrefix:e,bank:t,i:a,userLocale:n}),breakpoints:O.a}))},L=e=>{const{i:t,reactKeyPrefix:a,bankKey:n,userLocale:r}=e,i=Object(o.a)(d.a.getTSModelBuilt,l.a.bank,null!=n?n:0,y.c);return i?s.a.createElement(s.a.Fragment,null,s.a.createElement(j,{i:t,reactKeyPrefix:a+"-bank-details-section",bank:i,userLocale:r}),s.a.createElement(A,{i:t,reactKeyPrefix:a+"-bank-address-section",bank:i,userLocale:r}),s.a.createElement(D,{i:t,reactKeyPrefix:a+"-contact-info-section",bank:i,userLocale:r})):s.a.createElement(s.a.Fragment,null)},E=()=>{var e;const[t,a]=Object(i.a)([b.a.IInternationalization,h.a.IBankDrawerController]),{model:g,common:O}=t.getLanguageFile(),{drawerId:v,tabId:k}=Object(r.i)(),P=null!==(e=Object(o.a)(c.a.getUserLocale))&&void 0!==e?e:u.f[0];Object(n.useEffect)(()=>{v&&a.loadBankOverview(v)},[v,a]);const C=Object(o.a)(d.a.getTSModelBuilt,l.a.bank,null!=v?v:0,y.c),j=!!(null==C?void 0:C.isObjectActive),w=Object(n.useMemo)(()=>v?Object(f.a)({isActive:j,key:v,type:l.a.bank,deleteTitle:g.bank}):[],[j,g.bank,v]),T=Object(n.useMemo)(()=>C?[{id:"overview",label:O.overview,content:()=>s.a.createElement(L,{i:t,bankKey:C.key,reactKeyPrefix:"doc-common-components-drawer-bank-drawer-overview",userLocale:P})}]:[],[C,O.overview,t,P]);return C?s.a.createElement(m.a,{drawerKey:Number(v),tabs:T,tabId:k,drawerRoute:p.a.bankDrawer,reactKeyPrefix:"doc-common-components-drawer-bank-drawer",key:p.a.bankDrawer+v,secondaryActions:w,isObjectActive:C,subjectLoaded:!!C,subject:g.bank,subjectName:C.bankName,tsModelType:l.a.bank}):s.a.createElement(s.a.Fragment,null)}},1943:function(e,t,a){"use strict";a.d(t,"a",(function(){return Y}));a(109),a(10),a(11);var n=a(695),s=a(0),r=a.n(s),i=a(97),o=a(718),l=a(187);const d=e=>Object(l.a)({});var c=a(37),u=a(12),b=a(6),m=a(3),p=a(480),h=a(64),f=a(1),y=a(108),g=a(62),O=a(58),v=a(19),k=a(96),P=a(30),C=a(27),j=a(15);var w=a(202);class T extends r.a.PureComponent{constructor(e){super(e),this.getBillOfLadingMainDetailsHorizontalLists=this.getBillOfLadingMainDetailsHorizontalLists.bind(this)}getBillOfLadingMainDetailsHorizontalLists(){const{billOfLading:e,userLocale:t,classes:a,reactKeyPrefix:n,deps:s}=this.props,i=[],l=[""];if(e&&t){const d=function(e,t,a,n){var s,r,i,l,d;const{model:c}=n.getLanguageFile(),u=t.subCargos&&0!==t.subCargos.length&&t.subCargos[0].cargo?t.subCargos[0].cargo.cargoPorts:null,b=O.a.getFirstDischargeCargoPort(u||[]),m=t.subCargos&&0!==t.subCargos.length&&t.subCargos[0].cargo?t.subCargos[0].cargo:null,w=m&&m.voyage?m.voyage:null,T=w&&w.voyageHeader?w.voyageHeader:new y.a({}),A={fieldOptions:[{fieldName:"billOfLadingNo"},{disabled:!0,fieldName:"port",overrideObject:new h.a(b||{}),typeaheadProps:{query:k.d},openObject:{permissions:[P.a.PortCallGET],onOpen:C.a.openDrawer.bind(null,null!==(r=null===(s=null==b?void 0:b.portCall)||void 0===s?void 0:s.key)&&void 0!==r?r:-1,j.a.portCallDrawer)},overrideType:f.a.cargoport},{fieldName:"billOfLadingDate"},{fieldName:"releasedDate"},{disabled:!0,fieldName:"vessel",overrideObject:new g.a(w||{}),overrideType:f.a.voyage,openObject:{permissions:[P.a.VesselGET],onOpen:C.a.openDrawer.bind(null,null!==(l=null===(i=null==w?void 0:w.vessel)||void 0===i?void 0:i.key)&&void 0!==l?l:-1,j.a.vesselDrawer)}},{disabled:!0,fieldName:"referenceNo",label:c.voyage,overrideObject:new y.a(T),overrideType:f.a.voyageheader,openObject:{permissions:[P.a.VoyageGET],onOpen:C.a.openDrawer.bind(null,null!==(d=null==w?void 0:w.key)&&void 0!==d?d:-1,j.a.voyageDrawer)}},{fieldName:"consignee"},{fieldName:"notifyParty"},{fieldName:"billOfLadingStatus",typeaheadProps:{query:"filter=statusClass.statusClassCode(EQ)BOL&filter=statusTypeDesc(NE)Scheduled",shouldPreload:!0}},{fieldName:"isHandlingCostIncluded"},{fieldName:"isOnCarriageIncluded"}],object:new p.a(t),type:f.a.billoflading,updateResponseFields:o.a,userLocale:a,reactKeyPrefix:e};return[Object(v.a)(A)]}(n,e,t,s[0]);for(let e=0;e<d.length;e++){const t=r.a.createElement(c.a,{reactKeyPrefix:`${n}-h-list-${e}`,key:`${n}_${e}`,items:d[e],breakpoints:u.a}),s=r.a.createElement(w.a,{key:"divider_"+e,className:a.divider}),o=r.a.createElement("p",{key:"sectionHeader_"+e},l[e]);i.push(o,t,s)}}return i}render(){const e=this.getBillOfLadingMainDetailsHorizontalLists();return r.a.createElement(s.Fragment,null,e)}}const A=Object(b.b)([m.a.IInternationalization],Object(n.a)(d)(T));var N=a(1297),S=a(82),B=a(80),I=a(47),D=a(7),L=a(21),E=a(1761),x=a(42),M=a(48),R=a(81),K=a(114),U=a(876),F=a(290),_=a(51),G=a(23),W=a(262),z=a(136),q=a(89),$=a(378);function H(e){var t,a,n;const{showModal:i,closeModal:l,notifyParty:d,consignee:c,billOfLading:h,reactKeyPrefix:y}=e,g=Object(s.useMemo)(()=>h.subCargos.map(e=>new $.a(e)),[h]),O=Object(G.a)(L.a.getTSModelsBuilt,f.a.subcargo,F.d,F.a)||[],[v]=Object(b.a)([m.a.IInternationalization]),{model:k,common:P,cargoes:C}=v.getLanguageFile(),j=Object(s.useCallback)(()=>{Object(W.a)(F.a),l&&l()},[l]),w=Object(s.useCallback)((e,t,a)=>{if("subCargos"===t){const t=[...g,...a.map(e=>new $.a({key:e}))];return new p.a(Object.assign(Object.assign({},e),{subCargos:t}))}return e},[g]),T=h.key;return Object(s.useEffect)(()=>{var e,t,a,n,s,r;i&&(null===(a=null===(t=null===(e=h.subCargos[0])||void 0===e?void 0:e.cargo)||void 0===t?void 0:t.cargoPorts[0])||void 0===a?void 0:a.portCall)&&Object(F.h)(null===(r=null===(s=null===(n=h.subCargos[0])||void 0===n?void 0:n.cargo)||void 0===s?void 0:s.cargoPorts[0])||void 0===r?void 0:r.portCall,c,d)},[c,d,T,i]),r.a.createElement(_.a,{modalProps:{reactKeyPrefix:y,confirmBtnName:P.add,maxWidth:"md",onCloseModal:j,open:i&&!!(null===(n=null===(a=null===(t=h.subCargos[0])||void 0===t?void 0:t.cargo)||void 0===a?void 0:a.cargoPorts[0])||void 0===n?void 0:n.portCall),title:`${P.add} ${C.subCargo} ${P.to} ${k.billOfLading}`},getColSpec:()=>[],selectedObject:h,isConfirmDisabled:e=>!(e.subCargos&&e.subCargos.length>g.length),overrideUpdateEntity:w,tableProps:{data:Object(z.b)(O,U.a.rowContentProperties),headers:U.a.getHeaders(v),reactKeyPrefix:"create-bol-sub-cargoes",selectable:!0,title:C.subCargoes},tableDataProperty:"subCargos",breakpoints:u.h,overrideGetData:e=>Object(q.a)(new p.a({key:e.key,subCargos:e.subCargos})),updateProps:{callback:j,type:f.a.billoflading,fields:o.a}})}var V=a(174),Q=a(74);class X extends r.a.PureComponent{constructor(e){super(e),this.state=Object.assign(Object.assign({},e.state),{tabValue:0,windowWidth:window.innerWidth,showAddSubCargoModal:!1}),this.billOfLadingId=this.getBillOfLadingId(e.match),this.loadBillOfLading(this.billOfLadingId),this.closeAddSubCargoModal=this.closeAddSubCargoModal.bind(this),this.openAddSubCargoModal=this.openAddSubCargoModal.bind(this),this.confirmDelete=this.confirmDelete.bind(this),this.onPrint=this.onPrint.bind(this),this.loadBillOfLading=this.loadBillOfLading.bind(this)}UNSAFE_componentWillReceiveProps(e){const t=this.getBillOfLadingId(e.match);this.billOfLadingId!==t&&(this.loadBillOfLading(t),this.billOfLadingId=t),this.setState(Object.assign({},e.state))}loadBillOfLading(e){const[t,a]=this.props.deps;e&&0!==e&&(this.props.dispatchAction(t.setAction(e)),a.loadSingleAction({fields:o.a,key:e,type:f.a.billoflading}))}closeAddSubCargoModal(){this.setState({showAddSubCargoModal:!1})}openAddSubCargoModal(){this.setState({showAddSubCargoModal:!0})}getBillOfLadingId(e){return e&&e.params&&e.params.drawerId?parseInt(e.params.drawerId,10):void 0}onPrint(e){const{billOfLading:t}=this.state,a=M.a.BASE_URL?M.a.BASE_URL:"production"===M.a.NODE_ENV?"":"http://platform-dev.dataloy.com";if(t){const n=a+`/birt?username=dataloyreport&password=BEyeTOnKAble/preview?__report=${e}.rptdesign&__format=pdf&bill_of_lading_id=`+t.key;window.open(n)}}delete(){if(this.state.billOfLading){const[,e]=this.props.deps;e.deleteAction({key:this.state.billOfLading.key,type:f.a.billoflading}),this.props.history&&this.props.history.goBack()}}confirmDelete(){const e=this.props.deps[2].getLanguageFile();this.state.billOfLading&&Object(K.a)(e.billsOfLading.deleteBillOfLading,e.common.deleteItemConfirmation).then(e=>{e&&this.delete()})}getSecondaryActions(){var e;const t=this.props.deps[2].getLanguageFile(),{billOfLading:a}=this.state,n="Released"===(null===(e=null==a?void 0:a.billOfLadingStatus)||void 0===e?void 0:e.statusTypeDesc);return[{disabled:!1,onClick:e=>this.onPrint("waybill"),text:`${t.common.print} ${t.model.seaWaybill}`},{disabled:!1,onClick:e=>this.onPrint("bill_of_lading"),text:`${t.common.print} ${t.model.billOfLading}`},{disabled:n,onClick:e=>this.confirmDelete(),text:""+t.common.delete,tooltipText:n?t.billsOfLading.deleteReleasedBillOfLadingHelp:void 0}]}render(){var e,t;const{billOfLading:a,userLocale:n,windowWidth:s}=this.state,{deps:[i,o,l]}=this.props,{common:d,model:c,cargoes:u}=l.getLanguageFile();if(a){const i="Not released"===(null===(e=a.billOfLadingStatus)||void 0===e?void 0:e.statusTypeDesc),o=[{id:"main-details",content:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{reactKeyPrefix:"doc-common-components-drawer-bill-of-lading-drawermain-details",billOfLading:a,userLocale:n,windowWidth:s/2}),r.a.createElement(N.a,{reactKeyPrefix:"doc-common-components-drawer-bill-of-lading-drawersub-cargo-list",subCargos:a.subCargos,cargo:new Q.a({}),readOnly:!0,userLocale:n,disableDelete:!0,onClickCreate:i?this.openAddSubCargoModal:void 0,createTooltip:`${d.add} ${u.subCargo} ${d.to} ${c.billOfLading}`})),label:d.mainDetails}];return r.a.createElement(S.a,{reactKeyPrefix:"doc-common-components-drawer-bill-of-lading-drawer",status:{statusObject:Object(R.a)(a,"billOfLadingStatus"),type:V.b.LABEL},drawerKey:null!==(t=this.billOfLadingId)&&void 0!==t?t:0,drawerRoute:j.a.billOfLadingDrawer,key:j.a.billOfLadingDrawer+this.billOfLadingId,secondaryActions:this.getSecondaryActions(),subject:c.billOfLading,subjectLoaded:!!a,subjectName:a?a.billOfLadingNo:"",tabs:o,tabId:this.props.match.params.tabId,tsModelType:f.a.billoflading},r.a.createElement(B.a,null),r.a.createElement(H,{reactKeyPrefix:"doc-common-components-drawer-bill-of-lading-draweradd-sub-cargo-to-bol-modal",showModal:this.state.showAddSubCargoModal,closeModal:this.closeAddSubCargoModal,billOfLading:a,consignee:a.consignee,notifyParty:a.notifyParty}))}return null}}const Y=Object(I.a)(e=>{const t=E.a.get(e);return{billOfLading:L.a.getTSModelBuilt(e,f.a.billoflading,t||0,o.a),userLocale:x.a.getUserLocale(e)}},Object(b.b)([D.a.ISelectedBillOfLadingActions,D.a.ITSModelActionsAsync,m.a.IInternationalization],Object(i.k)(Object(n.a)(d)(X))))},1944:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));a(10),a(11);var n=a(82),s=a(0),r=a.n(s),i=a(6),o=a(3),l=a(23),d=a(21),c=a(1),u=a(15),b=a(7),m=a(97),p=a(174),h=a(42),f=a(35);const y={invoicingStatus:{statusTypeDesc:"*",statusTypeCode:"*"},documentLines:{voyage:{vessel:{vesselName:"*"},voyageHeader:{referenceNo:"*",businessUnit:{businessUnitName:"*"}}},businessUnit:{businessUnitName:"*"},quantity:"*"},company:{companyName:"*"},documentDate:"*",account:{accountDesc:"*"},documentAmount:"*",documentCurrency:{currencyCode:"*"}};var g=a(37),O=a(12),v=a(75),k=a(71),P=a(81),C=a(209);const j=({reactKeyPrefix:e,bunkerStockAdjustment:t,i:a,userLocale:n})=>{const{common:s,model:i}=a.getLanguageFile(),o=a.formatNumber(t.documentAmount,{maxDecimals:2,minDecimals:2,locale:n.isoCode}),l=Object(P.a)(t,"documentLines",[]),d=Object(P.a)(t,"documentCurrency.currencyCode",""),c=a.formatNumber(l.length>0?l[0].quantity:0,{maxDecimals:2,minDecimals:2,locale:n.isoCode})+" MT",u=[{primaryTitle:{text:s.accrualAmount},primaryText:{text:`${o} ${d}`,tooltip:""}},{primaryTitle:{text:i.quantity},primaryText:{text:c,tooltip:""}}];return r.a.createElement(C.a,{breakpoints:{xs:6,sm:6,md:6,lg:6,xl:6},data:u,reactKeyPrefix:e+"-kpi-tiles"})};var w=a(19),T=a(251),A=a(148),N=a(134),S=a(201),B=a(111),I=a(108),D=a(62),L=a(30),E=a(27);const x=({reactKeyPrefix:e,bunkerStockAdjustment:t,userLocale:a,i:n})=>{const{common:i}=n.getLanguageFile(),o=Object(s.useMemo)(()=>((e,t,a,n)=>{var s,r,i,o,l,d,b,m,p,h,f,y,g,O,v,k;const{model:C}=n.getLanguageFile(),j=null!==(s=t.documentLines[0])&&void 0!==s?s:new S.a({}),x=null!==(r=j.voyage)&&void 0!==r?r:new D.a({}),M=null!==(i=x.voyageHeader)&&void 0!==i?i:new I.a({}),R=Object(P.a)(t,"documentCurrency.currencyCode",""),K={reactKeyPrefix:e,fieldOptions:[{fieldName:"vesselName",overrideObject:null!==(o=x.vessel)&&void 0!==o?o:new B.a({}),overrideType:c.a.vessel,label:C.vessel,disabled:!0,openObject:{permissions:[L.a.VesselGET],onOpen:E.a.openDrawer.bind(null,null!==(d=null===(l=x.vessel)||void 0===l?void 0:l.key)&&void 0!==d?d:-1,u.a.vesselDrawer)}},{fieldName:"referenceNo",overrideObject:M,overrideType:c.a.voyageheader,disabled:!0,label:C.voyage,openObject:{permissions:[L.a.VoyageGET],onOpen:E.a.openDrawer.bind(null,null!==(b=x.key)&&void 0!==b?b:-1,u.a.voyageDrawer)}},{fieldName:"businessUnitName",overrideObject:null!==(m=M.businessUnit)&&void 0!==m?m:new A.a({}),overrideType:c.a.businessunit,disabled:!0,label:C.businessUnit,openObject:{permissions:[L.a.BusinessUnitGET],onOpen:E.a.openDrawer.bind(null,null!==(h=null===(p=M.businessUnit)||void 0===p?void 0:p.key)&&void 0!==h?h:-1,u.a.businessUnitDrawer)}},{fieldName:"companyName",overrideObject:null!==(f=t.company)&&void 0!==f?f:new N.a({}),overrideType:c.a.company,disabled:!0,label:C.companyName,openObject:{permissions:[L.a.CompanyGET],onOpen:E.a.openDrawer.bind(null,null!==(g=null===(y=t.company)||void 0===y?void 0:y.key)&&void 0!==g?g:-1,u.a.companyDrawer)}},{fieldName:"documentDate",disabled:!0},{fieldName:"accountDesc",overrideObject:null!==(O=j.account)&&void 0!==O?O:new T.a({}),overrideType:c.a.account,disabled:!0,label:C.account,openObject:{permissions:[L.a.AccountGET],onOpen:E.a.openDrawer.bind(null,null!==(k=null===(v=j.account)||void 0===v?void 0:v.key)&&void 0!==k?k:-1,u.a.accountDrawer)}},{fieldName:"documentAmount",disabled:!0,InputProps:{endAdornment:R}}],object:t,type:c.a.document,userLocale:a};return Object(w.a)(K)})(e,t,a,n),[e,t,a,n]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{userLocale:a,i:n,bunkerStockAdjustment:t,reactKeyPrefix:e+"-kpi-tiles"}),r.a.createElement(k.a,null,r.a.createElement(v.a,{title:i.mainDetails}),r.a.createElement(g.a,{reactKeyPrefix:e+"-field-list",key:e+"-field-list",items:o,breakpoints:O.h})))},M=()=>{var e;const[t,a]=Object(i.a)([o.a.IInternationalization,b.a.ITSModelActionsAsync]),g=null!==(e=Object(l.a)(h.a.getUserLocale))&&void 0!==e?e:f.f[0],{common:O,accruals:v}=t.getLanguageFile(),{drawerId:k,tabId:P}=Object(m.i)(),C=Object(l.a)(d.a.getTSModelBuilt,c.a.document,null!=k?k:0,y);Object(s.useEffect)(()=>{k&&a.loadSingleAction({fields:y,key:k,type:c.a.document})},[a,k]);const j=Object(s.useMemo)(()=>C?[{id:"main-details",label:O.mainDetails,content:()=>r.a.createElement(x,{bunkerStockAdjustment:C,i:t,reactKeyPrefix:"doc-common-components-drawer-bunker-stock-adjustment-drawer-main-details",userLocale:g})}]:[],[C,O.mainDetails,t,g]);return C?r.a.createElement(n.a,{reactKeyPrefix:"doc-common-components-drawer-bunker-stock-adjustment-drawer",drawerKey:Number(k),drawerRoute:u.a.bunkerStockAdjustmentDrawer,key:u.a.bunkerStockAdjustmentDrawer+k,size:"medium",subject:v.bunkerStockAdjustment,subjectLoaded:!!C,subjectName:String(C.key),tabs:j,tabId:P,tsModelType:c.a.document,status:{statusObject:C.invoicingStatus,type:p.b.LABEL}}):null}},1986:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));a(10),a(11);var n=a(82),s=a(0),r=a.n(s),i=a(97),o=a(6),l=a(23),d=a(1),c=a(21),u=a(42),b=a(35),m=a(3),p=a(37),h=a(12),f=a(75),y=a(71),g=(a(93),a(57)),O=a(19),v=a(154),k=a(70);const P=({reactKeyPrefix:e,baselineTerm:t,userLocale:a,i:n})=>{const i=n.getLanguageFile(),o=Object(s.useMemo)(()=>(({reactKeyPrefix:e,baselineTerm:t,userLocale:a,i:n})=>{const{common:s,model:r}=n.getLanguageFile(),i={reactKeyPrefix:e,fieldOptions:[{fieldName:"baselineTermDesc",label:s.description,formControlProps:{required:!0}},{fieldName:"baselineTermCode",label:s.code,formControlProps:{required:!0},textInputProps:{characterRequirements:{maxLength:v.a.baselineterm.baselineTermCode.limit},letterCase:g.a.UPPERCASE,validation:k.b.BaselineTermCode}}],object:t,type:d.a.baselineterm,userLocale:a};return Object(O.a)(i)})({reactKeyPrefix:e,baselineTerm:t,userLocale:a,i:n}),[t,n,e,a]);return r.a.createElement(y.a,null,r.a.createElement(f.a,{title:i.common.details}),r.a.createElement(p.a,{reactKeyPrefix:e+"-main-details",items:o,breakpoints:h.h}))};var C=a(15),j=a(1184),w=a(20),T=a(150);const A=()=>{var e;const[t,a]=Object(o.a)([m.a.IInternationalization,w.a.IBaselineTermDrawerController]),p=null!==(e=Object(l.a)(u.a.getUserLocale))&&void 0!==e?e:b.f[0],{common:h,model:f}=t.getLanguageFile(),{drawerId:y,tabId:g}=Object(i.i)();Object(s.useEffect)(()=>{y&&a.loadBaselineTerm(y)},[y,a]);const O=Object(l.a)(c.a.getTSModelBuilt,d.a.baselineterm,null!=y?y:0,j.a),v=!!(null==O?void 0:O.isObjectActive),k=Object(s.useMemo)(()=>O?[{id:"overview",label:h.overview,content:()=>r.a.createElement(P,{baselineTerm:O,i:t,reactKeyPrefix:"doc-common-components-drawer-baseline-term-drawer-overview",userLocale:p})}]:[],[O,h.overview,t,p]),A=Object(s.useMemo)(()=>y?Object(T.a)({isActive:v,key:y,type:d.a.baselineterm,deleteTitle:f.baselineTerm}):[],[y,v,f.baselineTerm]);return O?r.a.createElement(n.a,{reactKeyPrefix:"doc-common-components-drawer-baseline-term-drawer",drawerKey:Number(y),drawerRoute:C.a.baselineTermDrawer,key:C.a.baselineTermDrawer+y,isObjectActive:O,subject:f.baselineTerm,subjectLoaded:!!O,subjectName:O.baselineTermDesc,tabs:k,tabId:g,tsModelType:d.a.baselineterm,secondaryActions:A}):r.a.createElement(r.a.Fragment,null)}},1987:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));a(10),a(11);var n=a(0),s=a.n(n),r=a(97),i=a(1404),o=a(6),l=a(23),d=a(1),c=a(21),u=a(42),b=a(7),m=a(35),p=a(3),h=a(37),f=a(12),y=a(75),g=a(71),O=a(19),v=a(251),k=a(148),P=a(134),C=a(201),j=a(111),w=a(108),T=a(62),A=a(30),N=a(15),S=a(27);function B(e,t,a,n){var s,r,i,o,l,c,u,b,m,p,h,f,y,g,B;const{model:I}=t.lang(),{documentLines:D,documentCurrency:L,company:E}=n,x=null!==(s=null==L?void 0:L.currencyCode)&&void 0!==s?s:"",M=null!==(r=D[0])&&void 0!==r?r:new C.a({}),R=null!==(i=M.voyage)&&void 0!==i?i:new T.a({}),K=null!==(o=R.voyageHeader)&&void 0!==o?o:new w.a({}),U=[{disabled:!0,overrideObject:null!==(l=R.vessel)&&void 0!==l?l:new j.a({}),overrideType:d.a.vessel,fieldName:"vesselName",label:I.vessel,openObject:{permissions:[A.a.VesselGET],onOpen:S.a.openDrawer.bind(null,null!==(u=null===(c=R.vessel)||void 0===c?void 0:c.key)&&void 0!==u?u:-1,N.a.vesselDrawer)}},{disabled:!0,overrideObject:K,overrideType:d.a.voyageheader,fieldName:"referenceNo",label:I.voyage,openObject:{permissions:[A.a.VoyageGET],onOpen:S.a.openDrawer.bind(null,null!==(b=R.key)&&void 0!==b?b:-1,N.a.voyageDrawer)}},{disabled:!0,overrideObject:null!==(m=K.businessUnit)&&void 0!==m?m:new k.a({}),overrideType:d.a.businessunit,fieldName:"businessUnitCode",label:I.businessUnit,openObject:{permissions:[A.a.BusinessUnitGET],onOpen:S.a.openDrawer.bind(null,null!==(h=null===(p=K.businessUnit)||void 0===p?void 0:p.key)&&void 0!==h?h:-1,N.a.businessUnitDrawer)}},{disabled:!0,overrideObject:null!=E?E:new P.a({}),overrideType:d.a.company,fieldName:"companyName",label:I.company,openObject:{permissions:[A.a.CompanyGET],onOpen:S.a.openDrawer.bind(null,null!==(f=null==E?void 0:E.key)&&void 0!==f?f:-1,N.a.companyDrawer)}},{disabled:!0,fieldName:"documentDate",label:I.documentDate},{disabled:!0,overrideObject:null!==(y=M.account)&&void 0!==y?y:new v.a({}),overrideType:d.a.account,fieldName:"accountDesc",label:I.account,openObject:{permissions:[A.a.AccountGET],onOpen:S.a.openDrawer.bind(null,null!==(B=null===(g=M.account)||void 0===g?void 0:g.key)&&void 0!==B?B:-1,N.a.accountDrawer)}},{disabled:!0,overrideObject:M,overrideType:d.a.documentline,fieldName:"documentLineText",label:I.documentLineText},{disabled:!0,overrideObject:M,overrideType:d.a.documentline,fieldName:"unitPrice",label:I.unitPrice,InputProps:{endAdornment:x}},{disabled:!0,overrideObject:M,overrideType:d.a.documentline,fieldName:"quantity",label:I.quantity},{disabled:!0,fieldName:"documentAmount",label:I.documentAmount,InputProps:{endAdornment:x}}];return Object(O.a)({fieldOptions:U,object:n,type:d.a.document,userLocale:a,reactKeyPrefix:e})}function I({reactKeyPrefix:e,document:t,userLocale:a,i:n}){return s.a.createElement(g.a,null,s.a.createElement(y.a,{title:n.lang().common.overview}),s.a.createElement(h.a,{reactKeyPrefix:e+"-fields",items:B(e,n,a,t),breakpoints:f.d}))}var D=a(82);function L(){var e;const[t,a]=Object(o.a)([p.a.IInternationalization,b.a.ITSModelActionsAsync]),{common:h}=t.getLanguageFile(),{drawerId:f,tabId:y}=Object(r.i)(),g=null!==(e=Object(l.a)(u.a.getUserLocale))&&void 0!==e?e:m.f[0],O=Object(l.a)(c.a.getTSModelBuilt,d.a.document,null!=f?f:0,i.a);Object(n.useEffect)(()=>{f&&a.loadSingleAction({fields:i.a,key:f,type:d.a.document})},[a,f]);const v=Object(n.useMemo)(()=>O?[{id:"overview",label:h.overview,content:()=>s.a.createElement(I,{reactKeyPrefix:"doc-common-components-drawer-bunker-transaction-drawer-overview",i:t,document:O,userLocale:g})}]:[],[O,h.overview,t,g]);return O?s.a.createElement(D.a,{reactKeyPrefix:"doc-common-components-drawer-bunker-transaction-drawer",drawerKey:Number(f),drawerRoute:N.a.bunkerTransactionDrawer,key:N.a.bunkerTransactionDrawer+f,size:"medium",isObjectActive:O,subject:h.bunkerTransaction,subjectLoaded:!!O,subjectName:String(O.key),tabs:v,tabId:y,tsModelType:d.a.document}):s.a.createElement(s.a.Fragment,null)}},1988:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));a(10),a(11);var n=a(82),s=a(0),r=a.n(s),i=a(97),o=a(6),l=a(23),d=a(1),c=a(21),u=a(42),b=a(35),m=a(3),p=a(37),h=a(12),f=a(71),y=a(19);const g=({reactKeyPrefix:e,businessUnit:t,userLocale:a,i:n})=>{const i=Object(s.useMemo)(()=>(({reactKeyPrefix:e,businessUnit:t,userLocale:a,i:n})=>{const{common:s,model:r}=n.getLanguageFile(),i={reactKeyPrefix:e,fieldOptions:[{fieldName:"businessUnitName",label:r.name},{fieldName:"businessUnitCode",label:s.code},{fieldName:"voyageCurrency",label:r.voyageCurrency,typeaheadProps:{objectPaths:["currencyCode"],shouldPreload:!0}},{fieldName:"businessUnitLink",label:r.parentBusinessUnit,typeaheadProps:{objectPaths:["businessUnitName"],shouldPreload:!0}}],object:t,type:d.a.businessunit,userLocale:a};return Object(y.a)(i)})({reactKeyPrefix:e,businessUnit:t,userLocale:a,i:n}),[t,n,e,a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(p.a,{reactKeyPrefix:e+"-field-list",items:i,breakpoints:h.h})))};var O=a(15),v=a(1185),k=a(114),P=a(20);const C=()=>{var e;const[t,a]=Object(o.a)([m.a.IInternationalization,P.a.IBusinessUnitDrawerController]),p=null!==(e=Object(l.a)(u.a.getUserLocale))&&void 0!==e?e:b.f[0],{common:h,model:f}=t.getLanguageFile(),{drawerId:y,tabId:C}=Object(i.i)();Object(s.useEffect)(()=>{y&&a.loadBusinessUnit(y)},[y,a]);const j=Object(l.a)(c.a.getTSModelBuilt,d.a.businessunit,null!=y?y:0,v.a),w=!!(null==j?void 0:j.isObjectActive),T=Object(s.useCallback)(()=>{j&&Object(k.a)(h.disableEnableObjectTitle(w,f.businessUnit),h.disableBusinessUnit(w),w?h.disable:h.enable).then(e=>{e&&a.toggleEnabledBusinessUnit(j.key,!w)})},[j,h,a,w,f.businessUnit]),A=Object(s.useCallback)(()=>{j&&Object(k.a)(h.deleteObjectTitle(f.businessUnit),h.deleteConfirmationBusinessUnit,h.delete).then(e=>{e&&a.deleteBusinessUnit(j.key)})},[j,h,a,f.businessUnit]),N=Object(s.useMemo)(()=>[{text:w?h.disable:h.enable,onClick:T},{text:h.delete,onClick:A,disabled:w,tooltipText:w?h.disableBeforeDelete:void 0}],[h.delete,h.disable,h.disableBeforeDelete,h.enable,w,A,T]),S=Object(s.useMemo)(()=>j?[{id:"overview",label:h.overview,content:()=>r.a.createElement(g,{businessUnit:j,i:t,reactKeyPrefix:"doc-common-components-drawer-business-unit-drawer-overview",userLocale:p})}]:[],[j,h.overview,t,p]);return j?r.a.createElement(n.a,{reactKeyPrefix:"doc-common-components-drawer-business-unit-drawer",drawerKey:Number(y),drawerRoute:O.a.businessUnitDrawer,key:O.a.businessUnitDrawer+y,isObjectActive:j,subject:f.businessUnit,subjectLoaded:!!j,subjectName:j.businessUnitName,tabs:S,tabId:C,tsModelType:d.a.businessunit,secondaryActions:N}):r.a.createElement(r.a.Fragment,null)}},2043:function(e,t,a){"use strict";a.d(t,"a",(function(){return ae}));a(109),a(10),a(11),a(163);var n=a(0),s=a.n(n),r=a(97),i=a(218),o=a(81),l=a(1215),d=a(28),c=a(57),u=a(37),b=a(12),m=a(102),p=a(92),h=a(6),f=a(68),y=a(91),g=a(1),O=a(111),v=a(1762),k=a(66),P=a(199),C=a(30),j=a(41),w=a(19),T=a(3),A=a(299),N=a(86),S=a(27),B=a(15);class I extends s.a.PureComponent{constructor(e){super(e),this.getBunkerOrderDrawerColspec=e=>{var t,a,n,r,u,b,h,T;let I=[];const{model:D,common:L}=this.lang,{userLocale:E,businessPartnerList:x,user:M,reactKeyPrefix:R}=this.props;e.portCall&&(I=v.a.getBusinessPartnersFromTCInAndOut(e.portCall,x));const K=t=>p.a.getUpdateFieldFunction({fieldToSet:t,fields:A.a,key:e.key,type:g.a.bunkerorder}),U=I.length>0?s.a.createElement(m.a,{label:D.bunkerAccountOf,defaultSelectedOptions:e.bunkerAccountOf,reactKeyPrefix:R+"-bunker-order-account-of",disabled:!Object(k.a)([C.a.BunkerOrderPOST],M),onBlur:t=>{const a=Object(o.a)(t,"key",null);Object(o.a)(e,"bunkerAccountOf.key",null)!==a&&K("bunkerAccountOf")(a)},options:I,objectPaths:N.b.businessPartner}):s.a.createElement(i.a,{title:L.tcContractNotPresent,enterDelay:300},s.a.createElement("div",null,s.a.createElement(c.b,{reactKeyPrefix:R+"-bunker-order-account-of-text-input",label:D.bunkerAccountOf,value:L.na,disabled:!0}))),F=I.length>0?s.a.createElement(m.a,{label:D.bunkerPaidBy,defaultSelectedOptions:e.bunkerPaidBy,reactKeyPrefix:R+"-bunkerPaidBy",disabled:!Object(k.a)([C.a.BunkerOrderPOST],M),onBlur:t=>{const a=Object(o.a)(t,"key",null);Object(o.a)(e,"bunkerPaidBy.key",null)!==a&&K("bunkerPaidBy")(a)},options:I,objectPaths:N.b.businessPartner}):s.a.createElement(i.a,{title:L.tcContractNotPresent,enterDelay:300},s.a.createElement("div",null,s.a.createElement(c.b,{reactKeyPrefix:R+"-bunkerPaidBy-text-input",label:D.bunkerPaidBy,value:L.na,disabled:!0}))),_=e.portCall?e.portCall:new f.a({}),G=_.port?_.port:new y.a({}),{eta:W,etb:z,etd:q}=Object(l.a)(_,this.i,E),$=!!e.bunkerOrderStatus&&("Stemmed"===e.bunkerOrderStatus.statusTypeDesc||"Delivered"===e.bunkerOrderStatus.statusTypeDesc),H=e.vessel?e.vessel:new O.a({}),V=e.bunkerOrderStatus&&"Requirement"===e.bunkerOrderStatus.statusTypeDesc?s.a.createElement(i.a,{title:D.stemmedDateTooltip,enterDelay:300},s.a.createElement("div",null,L.na)):void 0,Q=Object(P.a)(M,[{disabled:!0,fieldName:"vesselName",label:D.vessel,overrideObject:H,overrideType:g.a.vessel,typeaheadProps:{shouldPreload:!0},openObject:{permissions:[C.a.VesselGET],onOpen:S.a.openDrawer.bind(null,H.key,B.a.vesselDrawer)}},{disabled:!0,fieldName:"portName",label:D.port,overrideObject:G,overrideType:g.a.port,openObject:{permissions:[C.a.PortCallGET],onOpen:S.a.openDrawer.bind(null,_.key,B.a.portCallDrawer)}},{authorizationType:j.a.PERMISSION,executePermissions:[C.a.BunkerOrderPOST],fieldName:"bunkerSupplier",formControlProps:{required:$},noWriteProp:"disabled",readPermissions:[C.a.BunkerOrderPOST],typeaheadProps:{objectPaths:N.b.businessPartner,fields:N.a.businessPartner},writePermissions:[C.a.BunkerOrderPOST],openObject:{permissions:[C.a.BusinessPartnerGET],onOpen:S.a.openDrawer.bind(null,null!==(a=null===(t=e.bunkerSupplier)||void 0===t?void 0:t.key)&&void 0!==a?a:-1,B.a.businessPartnerDrawer)}},{authorizationType:j.a.PERMISSION,executePermissions:[C.a.BunkerOrderPOST],fieldName:"bunkerBroker",noWriteProp:"disabled",readPermissions:[C.a.BunkerOrderPOST],writePermissions:[C.a.BunkerOrderPOST],disabled:!Object(k.a)([C.a.BunkerOrderPOST],M),typeaheadProps:{objectPaths:N.b.businessPartner},openObject:{permissions:[C.a.BusinessPartnerGET],onOpen:S.a.openDrawer.bind(null,null!==(r=null===(n=e.bunkerBroker)||void 0===n?void 0:n.key)&&void 0!==r?r:-1,B.a.businessPartnerDrawer)}},{authorizationType:j.a.PERMISSION,executePermissions:[C.a.BunkerOrderPOST],fieldName:"extraCost",InputProps:{endAdornment:e.currency?e.currency.currencyCode:""},noWriteProp:"disabled",numberInputProps:{maskSettings:d.a.mask2},readPermissions:[C.a.BunkerOrderPOST],writePermissions:[C.a.BunkerOrderPOST]},{authorizationType:j.a.PERMISSION,executePermissions:[C.a.BunkerOrderPOST],fieldName:"externalReferenceNo",noWriteProp:"disabled",readPermissions:[C.a.BunkerOrderPOST],writePermissions:[C.a.BunkerOrderPOST]},{fieldName:"bunkerAccountOf",overrideComponent:U,openObject:{permissions:[C.a.BusinessPartnerGET],onOpen:S.a.openDrawer.bind(null,null!==(b=null===(u=e.bunkerAccountOf)||void 0===u?void 0:u.key)&&void 0!==b?b:-1,B.a.businessPartnerDrawer)}},{fieldName:"bunkerPaidBy",overrideComponent:F,openObject:{permissions:[C.a.BusinessPartnerGET],onOpen:S.a.openDrawer.bind(null,null!==(T=null===(h=e.bunkerPaidBy)||void 0===h?void 0:h.key)&&void 0!==T?T:-1,B.a.businessPartnerDrawer)}},{authorizationType:j.a.PERMISSION,executePermissions:[C.a.BunkerOrderPOST],fieldName:"orderDate",noWriteProp:"disabled",readPermissions:[C.a.BunkerOrderPOST],writePermissions:[C.a.BunkerOrderPOST]},{authorizationType:j.a.PERMISSION,executePermissions:[C.a.BunkerOrderPOST],fieldName:"stemmedDate",label:D.stemmedDate,noWriteProp:"disabled",overrideComponent:V,readPermissions:[C.a.BunkerOrderPOST],writePermissions:[C.a.BunkerOrderPOST]},{fieldName:"bunkeredDate"},{fieldName:"eventLogDate",label:D.eta,overrideComponent:W},{fieldName:"eventLogDate",label:D.etb,overrideComponent:z},{fieldName:"eventLogDate",label:D.etd,overrideComponent:q}]);return[...Object(w.a)({fieldOptions:Q,object:e,parentData:{key:e.key,type:g.a.bunkerorder},type:g.a.bunkerorder,updateResponseFields:A.a,userLocale:E,reactKeyPrefix:R})]},this.i=this.props.deps[0],this.lang=this.i.getLanguageFile()}getBunkerOrderHorizontalListData(){const{bunkerOrder:e}=this.props;if(e)return this.getBunkerOrderDrawerColspec(e)}render(){const e=this.getBunkerOrderHorizontalListData();return s.a.createElement(u.a,{reactKeyPrefix:this.props.reactKeyPrefix+"h-list",items:e,breakpoints:b.a})}}const D=Object(h.b)([T.a.IInternationalization],I);var L=a(1216),E=a(1187),x=a(82),M=a(44),R=a(329),K=a(47),U=a(280),F=a(152),_=a(32),G=a(21),W=a(1763),z=a(42),q=a(84),$=a(642),H=a(1188),V=a(20),Q=a(174),X=a(202),Y=a(117),J=a(412);const Z="doc-common-components-drawer-bunker-order-drawer",ee={errorMessages:[],modalTitle:void 0,modalBody:void 0,modalOnConfirm:void 0,modalConfirmBtnName:void 0,modalCancelBtnName:void 0};class te extends n.PureComponent{constructor(e){super(e),this.controller=e.controller,this.lang=e.deps[0].lang(),this.state=Object.assign(Object.assign(Object.assign({},e.state),{bunkerOrderId:null}),ee),this.loadBunkerOrder=this.loadBunkerOrder.bind(this),this.getBunkerOrderId=this.getBunkerOrderId.bind(this),this.onChangeBunkerOrderLines=this.onChangeBunkerOrderLines.bind(this),this.onCloseModal=this.onCloseModal.bind(this),this.onChangeBunkerOrder=this.onChangeBunkerOrder.bind(this),this.onDeleteBunkerOrder=this.onDeleteBunkerOrder.bind(this),this.onChangeStatus=this.onChangeStatus.bind(this),this.getDisabledStatuses=this.getDisabledStatuses.bind(this),this.getStatus=this.getStatus.bind(this)}UNSAFE_componentWillMount(){this.getBunkerOrderId(this.props.match),this.controller.loadBunkerTypes()}UNSAFE_componentWillReceiveProps(e){this.getBunkerOrderId(e.match),this.setState(e.state)}loadBunkerOrder(){const{bunkerOrderId:e}=this.state;e&&this.controller.loadBunkerOrderAndSetAsSelected(e)}getBunkerOrderId(e){var t;if(null==e?void 0:e.params){const a=Number(null!==(t=e.params.drawerId)&&void 0!==t?t:"0");a!==this.state.bunkerOrderId&&this.setState({bunkerOrderId:a},this.loadBunkerOrder)}}getDisabledStatuses(){const e={[F.a.Active]:void 0,[F.a.Cancelled]:C.a.CancelBunkerOrderACTION,[F.a.Delivered]:C.a.RegisterDeliveryBunkerOrderACTION,[F.a.Requirement]:void 0,[F.a.Stemmed]:C.a.StemBunkerOrderACTION};return Object.entries(e).filter(([,e])=>!!e&&!Object(k.a)([e],this.state.user)).map(([e])=>new Y.a({statusTypeCode:e}))}validateStatusTransition({statusTypeCode:e}){var t;const{bo:a}=this.lang,{bunkerSupplier:n,bunkeredDate:s,bunkerOrderLines:r=[]}=null!==(t=this.state.bunkerOrder)&&void 0!==t?t:new U.a({}),i=[];switch(e){case F.a.Delivered:n||i.push(a.supplierRequired),s||i.push(a.deliveryDateRequired),r.length?F.b.isBOLinesMissingBunkeredQty(r)&&i.push(a.registerDeliveryLineBunkeredError):i.push(a.registerDeliveryLineCountError);break;case F.a.Stemmed:n||i.push(a.supplierRequired)}return i}onChangeBunkerOrder(e){this.controller.onUpdateBunkerOrder(e)}onChangeBunkerOrderLines(e){const{bunkerOrder:t}=this.state,a=new U.a(Object.assign(Object.assign({},t),{bunkerOrderLines:e}));this.setState({bunkerOrder:a},()=>q.a.debug(this.state.bunkerOrder));F.b.isBOLineDataMissing(e)||this.controller.onUpdateBunkerOrder(a)}onChangeStatus(e){const{bo:t,common:a}=this.lang;let n,s,r=a.confirm,i=a.cancel;const o=this.validateStatusTransition(e);if(o.length)this.setState({errorMessages:o});else{switch(e.statusTypeCode){case F.a.Stemmed:n=t.stemModalHeader,s=t.confirmStemBunkerOrder;break;case F.a.Delivered:n=t.registerDeliveryModalHeader,s=t.confirmRegisterDeliveryBunkerOrder;break;case F.a.Cancelled:n=t.cancelModalHeader,s=t.confirmCancelBunkerOrder,r=t.cancelOrder,i=t.keepOrder}this.setState({modalTitle:n,modalBody:s,modalConfirmBtnName:r,modalCancelBtnName:i,modalOnConfirm:()=>{this.controller.onUpdateBOStatus(e.statusTypeCode,this.state.bunkerOrder,e.statusTypeCode===F.a.Stemmed?new Date:void 0),this.onCloseModal()}})}}onDeleteBunkerOrder(){this.state.bunkerOrder&&this.controller.onDeleteBunkerOrder(this.state.bunkerOrder);const e=Object(J.a)();if(e&&e.length>1&&e[0].id!==this.state.bunkerOrderId){const t=e.pop();t&&t.id===this.state.bunkerOrderId&&this.props.history.push(this.props.location.pathname.replace(`/${t.hash}/${t.id}`,""))}else this.props.history&&this.props.history.goBack()}onCloseModal(){this.setState(ee)}getSecondaryActions(){var e,t;const{bunkerOrder:a,user:n}=this.state,s=(null!==(t=null===(e=null==a?void 0:a.bunkerOrderStatus)||void 0===e?void 0:e.statusTypeCode)&&void 0!==t?t:"")===F.a.Cancelled,{model:r,common:i}=this.lang;return[{disabled:!s||!Object(k.a)([C.a.DeleteBunkerOrderACTION],n),onClick:()=>this.setState({modalTitle:`${i.delete} ${r.bunkerOrder}`,modalBody:`${i.deleteConfirmation} ${r.bunkerOrder}?`,modalOnConfirm:this.onDeleteBunkerOrder}),text:i.delete}]}getModal(){return this.state.modalBody&&this.state.modalTitle?s.a.createElement(M.a,{reactKeyPrefix:Z+"-confirm-modal",fullWidth:!0,maxWidth:"xs",onCloseModal:this.onCloseModal,onConfirm:this.state.modalOnConfirm,open:!0,title:this.state.modalTitle,confirmBtnName:this.state.modalConfirmBtnName,cancelBtnName:this.state.modalCancelBtnName},this.state.modalBody):null}getErrorModal(){const{errorMessages:e}=this.state,t=s.a.createElement("ul",null,e.map((e,t)=>s.a.createElement("li",{key:t},e)));return s.a.createElement(M.a,{reactKeyPrefix:Z+"-error-modal",fullWidth:!0,hideConfirmBtn:!0,cancelBtnName:this.lang.common.close,maxWidth:"xs",onCloseModal:this.onCloseModal,open:!!e.length,title:this.lang.common.missingData},e.length>1?t:e)}getStatus(){var e;const{bunkerOrder:t}=this.state,a=(null===(e=null==t?void 0:t.bunkerOrderStatus)||void 0===e?void 0:e.statusTypeCode)===F.a.Cancelled?Q.b.LABEL:Q.b.TRANSITION;return{statusObject:null==t?void 0:t.bunkerOrderStatus,type:a,onClick:this.onChangeStatus}}render(){const{bunkerOrder:e,bunkerOrderId:t,userLocale:a,user:n}=this.state,{model:r,common:i}=this.lang;return t&&e?s.a.createElement(x.a,{reactKeyPrefix:Z,drawerKey:t,drawerRoute:B.a.bunkerOrderDrawer,status:this.getStatus(),key:B.a.bunkerOrderDrawer+t,secondaryActions:this.getSecondaryActions(),subject:r.bunkerOrder,subjectLoaded:!!e,subjectName:t.toString(),tsModelType:g.a.bunkerorder,tabs:[{id:"main-details",content:()=>{var t;return s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{reactKeyPrefix:Z+"-h-list",bunkerOrder:e,businessPartnerList:this.state.businessPartnerList,onChange:this.onChangeBunkerOrder,userLocale:a,user:n}),s.a.createElement(X.a,null),s.a.createElement(L.a,{reactKeyPrefix:Z+"-order-lines",addButtonDisabled:!Object(k.a)([C.a.CreateBunkerOrderLineACTION],n),bunkerOrderLines:null!==(t=e.bunkerOrderLines)&&void 0!==t?t:[],bunkerTypes:this.state.bunkerTypes,onChange:this.onChangeBunkerOrderLines,userLocale:a,user:n}),this.getModal(),!!this.state.errorMessages.length&&this.getErrorModal())},label:i.mainDetails}],tabId:this.props.match.params.tabId}):null}}const ae=Object(K.a)(e=>{const t=Object(_.a)(e),a=W.a.get(e),n=G.a.getTSModelBuilt(e,g.a.bunkerorder,a||0,A.a),s=z.a.getUserLocale(e),r=G.a.getTSModelsBuilt(e,g.a.bunkertype,$.a,E.a),i=G.a.getAllTSModelsBuilt(e,g.a.businesspartner,H.a);return{boStatusTypes:G.a.getAllTSModelsBuilt(e,g.a.statustype,A.b),bunkerOrder:n,bunkerTypes:r,businessPartnerList:i,user:t,userLocale:s}},Object(h.b)([T.a.IInternationalization],Object(R.a)(V.a.IBunkerOrderDrawerController,Object(r.k)(te))))},717:function(e,t,a){"use strict";a.d(t,"c",(function(){return j})),a.d(t,"d",(function(){return w})),a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return A}));var n,s,r,i,o=a(9),l=a(81),d=a(31),c=a(224),u=a(92),b=a(4),m=a(1),p=a(7),h=a(237),f=a(29),y=a(925),g=a(87),O=a(640),v=a(89),k=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(e,t){return function(a,n){t(a,n,e)}};const j="OUTSTANDING_INVOICES_FILTER_LIST_ID",w="PAYMENTS_AND_RECEIPTS_LIST_ID",T="BUSINESS_PARTNERS_LIST";let A=class{constructor(e,t,a,n){this.store=e,this.selectedBusinessPartnerActions=t,this.tsmodelActions=a,this.keySetActions=n}loadInvoices(e){const t=[{field:"documentType",filterGroupCode:"OUTSTANDING_INVOICES_FILTER_GROUP_CODE",operator:b.c.IN,queryParamName:"documentType.documentType",type:b.d.STRING,value:"(INO,INI,CRO,CRI)"},{field:"refDocument",filterGroupCode:"OUTSTANDING_INVOICES_FILTER_GROUP_CODE",operator:b.c.NULL,type:b.d.STRING,value:""},{field:"businessPartner",filterGroupCode:"OUTSTANDING_INVOICES_FILTER_GROUP_CODE",operator:b.c.EQUALS,queryParamName:"businessPartner.key",type:b.d.NUMBER,value:e},{field:"invoicingStatus",filterGroupCode:"OUTSTANDING_INVOICES_FILTER_GROUP_CODE",operator:b.c.EQUALS,queryParamName:"invoicingStatus.statusTypeCode",type:b.d.STRING,value:"POS"}];this.tsmodelActions.loadMultipleAction({fields:c.d,filters:t,headers:{},identifier:`${j}_${e}`,type:m.a.document})}loadPaymentsAndReceipts(e){const t=[{field:"documentType",filterGroupCode:"PAYMENTS_AND_RECEIPTS_FILTER_GROUP_CODE",operator:b.c.IN,queryParamName:"documentType.documentType",type:b.d.STRING,value:"(PMO,PMI)"},{field:"businessPartner",filterGroupCode:"PAYMENTS_AND_RECEIPTS_FILTER_GROUP_CODE",operator:b.c.EQUALS,queryParamName:"businessPartner.key",type:b.d.NUMBER,value:e},{field:"invoicingStatus",filterGroupCode:"PAYMENTS_AND_RECEIPTS_FILTER_GROUP_CODE",operator:b.c.EQUALS,queryParamName:"invoicingStatus.statusTypeCode",type:b.d.STRING,value:"POS"}];this.tsmodelActions.loadMultipleAction({fields:c.e,filters:t,headers:{},identifier:`${w}_${e}`,type:m.a.document})}loadBusinessPartnerAndSetSelected(e){const t=c.b;this.store.dispatch(this.selectedBusinessPartnerActions.setAction(e)),this.tsmodelActions.loadSingleAction({fields:t,key:e,type:m.a.businesspartner})}permaDeleteBusinessPartner(e){this.tsmodelActions.deleteAction({key:e,type:m.a.businesspartner})}removeItemFromState(e){const t=Number(e.toString());this.store.dispatch(this.keySetActions.removeKeysAction({identifier:T,keys:[t]}))}createAddress(e,t){const a={addresses:[{address1:t.address1,address2:t.address2,address3:t.address3,city:t.city,country:Object(l.a)(t,"country.key",void 0),postalCode:t.postalCode,subdivision:Object(l.a)(t,"subdivision.key",void 0)}],key:e};this.tsmodelActions.updateSingleAction({data:a,fields:c.a,key:e,type:m.a.businesspartner})}createContactInfo(e,t){this.tsmodelActions.updateSingleAction({data:{contactInfo:[Object(v.a)(t)]},fields:c.c,key:e,type:m.a.businesspartner})}createBusinessPartnerWww(e,t){const a={key:e,www:[{www:t.www}]};this.tsmodelActions.updateSingleAction({data:a,fields:c.f,key:e,type:m.a.businesspartner})}onUpdateBPName(e,t){const a={businessPartnerName:e};this.tsmodelActions.updateSingleAction({data:a,fields:Object(g.a)(["businessPartnerName"]),key:t,type:m.a.businesspartner})}deleteContactPersons(e,t){const a=t.individuals.filter(t=>-1!==e.indexOf(t.key));for(let n=0;n<a.length;n++){const s=a[n];this.tsmodelActions.updateSingleAction({data:{isObjectActive:!1},key:s.key,type:m.a.individual}).then(()=>{if(s.contactInfo[0])return this.tsmodelActions.updateSingleAction({data:{isObjectActive:!1},key:s.contactInfo[0].key,type:m.a.contactinfo})}).then(()=>{if(s.contactInfo[0])return this.tsmodelActions.deleteAction({key:s.contactInfo[0].key,type:m.a.contactinfo})}).then(()=>this.tsmodelActions.deleteAction({key:s.key,type:m.a.individual})).then(()=>{if(n===a.length-1)return this.updateIndividualState(t,e)})}}updateIndividualState(e,t){const a=e.individuals.filter(e=>-1===t.indexOf(e.key));return u.a.getUpdateFieldFunction({fieldToSet:"individuals",fields:c.b,key:e.key,type:m.a.businesspartner})(a)}loadBankAccounts(e,t){this.tsmodelActions.loadSingleAction({fields:{bankAccounts:O.a},type:m.a.businesspartner,key:e,callback:t})}};A=k([Object(o.injectable)(),C(0,Object(o.inject)(p.a.Store)),C(1,Object(o.inject)(p.a.ISelectedBusinessPartnerActions)),C(2,Object(o.inject)(p.a.ITSModelActionsAsync)),C(3,Object(o.inject)(p.a.KeySetActions)),P("design:paramtypes",["function"==typeof(n=void 0!==d.Store&&d.Store)?n:Object,"function"==typeof(s=void 0!==y.ISelectedBusinessPartnerActions&&y.ISelectedBusinessPartnerActions)?s:Object,"function"==typeof(r=void 0!==f.ITSModelActionsAsync&&f.ITSModelActionsAsync)?r:Object,"function"==typeof(i=void 0!==h.IKeySetActions&&h.IKeySetActions)?i:Object])],A)}}]);