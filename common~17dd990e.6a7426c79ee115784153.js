(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1265:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));n(59),n(10),n(11);var a=n(0),o=n.n(a),i=n(218),r=n(246),c=n(2516),s=n(130),l=n(1746),u=n.n(l),d=n(1429),p=n(2378),b=n(323),m=n(984),f=n(2086),y=n(213),h=n(187),g=n(24),O=n(2104),j=n(23),C=n(35),k=n(42),v=n(216),E=n(6),I=n(3);function S(e){return e&&"RMM"===e}function w(e,t){return e?e&&e.slice(0,e.indexOf(".")):t}function x(e){return e?e.indexOf(" More details: ")>0?e.slice(e.indexOf(".")+1,e.lastIndexOf(" More details: ")):e.slice(e.indexOf(".")+1):e}var A=n(2467),R=n(38),N=n(173);const T=Object(y.a)(e=>Object(h.a)({listItem:{alignItems:"baseline"},subject:{color:e.palette.text.primary,fontSize:e.typography.fontSize-1,fontWeight:e.typography.fontWeightBold,paddingBottom:e.spacing(1.5)},body:{color:e.palette.grey[900],fontSize:e.typography.fontSize-1,paddingBottom:e.spacing(1.5),display:"block"},link:{color:e.palette.text.primary,fontSize:e.typography.fontSize-1.5},date:{color:e.palette.grey[600],fontSize:e.typography.fontSize-3.5,float:"right"}}));function P(e){const t=T({}),[n,r]=Object(E.a)([I.a.IInternationalization,N.a.INotificationController]),{key:c,body:l,subject:u,scriptCode:d,date:p,relativeDate:y,linkToSource:h,isRead:g}=e.notification,{onClose:P}=e,{common:M}=n.getLanguageFile(),L=Object(j.a)(k.a.getUserLocale)||C.f[0],U=p&&o.a.createElement(i.a,{placement:"left",title:o.a.createElement(v.a,{value:p,dateFormat:C.a.longLocalizedDate,userLocale:L})},o.a.createElement("span",null,y)),D=Object(a.useCallback)(()=>r.setNotificationReadStatus(c,!g,e.onStatusChange),[r,g,c,e.onStatusChange]),{subject:_,body:B}=function(e,t,n){return{subject:S(n)?w(e,t):t,body:S(n)?x(e):e}}(l,u,d||""),K=o.a.createElement(s.a,{component:"span",className:t.link},h&&o.a.createElement(O.a,{onClick:P,href:h},M.moreDetails),o.a.createElement(s.a,{component:"span",className:t.date},U)),z=o.a.createElement(s.a,{className:t.subject},o.a.createElement(b.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},o.a.createElement("span",null,_),o.a.createElement(i.a,{title:M.markAsReadUnread(g),placement:"left"},o.a.createElement(b.a,{component:"span",display:"flex",alignItems:"center",justifyContent:"space-between",sx:{padding:.5,borderRadius:"50%",cursor:"pointer",border:"1px solid "+R.b.bergenRain.secondary[4],gap:1,alignItems:"baseline","&:hover":{borderColor:R.b.bergenRain.secondary[5]}},onClick:D},o.a.createElement(A.a,{color:g?"disabled":"primary",sx:{width:8,height:8}}))))),F=o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{component:"span",className:t.body},B),K);return o.a.createElement(m.a,{className:t.listItem,divider:!0,dense:!0},o.a.createElement(f.a,{primary:z,secondary:F}))}var M=n(2383);function L({key:e}){return o.a.createElement(m.a,{key:e,sx:{flexDirection:"column",alignItems:"flex-start"},divider:!0,dense:!0},o.a.createElement(s.a,{width:"75%",sx:{pt:1,pb:1}},o.a.createElement(M.a,{variant:"text",width:"100%"})),o.a.createElement(s.a,{width:"100%",sx:{pb:1}},o.a.createElement(M.a,{variant:"text",width:"100%"})),o.a.createElement(s.a,{width:"25%",sx:{pb:1}},o.a.createElement(M.a,{variant:"text",width:"100%"})))}var U=n(4),D=n(43),_=n(32),B=n(94);const K={field:"isRead",filterGroupCode:"NOTIFICATION_PANEL_LIST_FILTER_GROUP_CODE",operator:U.c.EQUALS,type:U.d.BOOLEAN,value:!1},z=Object(y.a)(e=>Object(h.a)({listHeader:{fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.h4.fontSize,color:e.palette.text.primary,backgroundColor:e.palette.background.paper,borderBottom:"1px solid "+e.palette.grey[300],paddingBottom:e.spacing(1)}}));function F({reactKeyPrefix:e,notifications:t,className:n,subheader:i,noNotificationsMessage:r,loading:c,loadingCount:l,isUnreadMessages:u,onStatusChange:y,onMarkAllRead:h,onClose:O}){var C,k;const[v,S]=Object(E.a)([I.a.IInternationalization,N.a.INotificationController]),{common:w}=v.getLanguageFile(),x=null!==(C=Object(j.a)(_.a))&&void 0!==C?C:new D.a({}),A=null!==(k=Object(j.a)(B.a.getFiltersByCodes,"NOTIFICATION_PANEL_LIST_FILTER_GROUP_CODE","NOTIFICATION_PANEL_LIST_FILTER_GROUP_CODE_IS_READ"))&&void 0!==k?k:[],R=z({}),T=Object(a.useMemo)(()=>t.filter(e=>!A.length||!e.isRead).map(e=>o.a.createElement(P,{onClose:O,key:e.key,notification:Object.assign(Object.assign({},e),{isRead:e.isRead||!u}),onStatusChange:y})),[A.length,u,t,O,y]),M=Object(a.useMemo)(()=>[...Array(l).keys()].map(e=>o.a.createElement(L,{key:e})),[l]),F=Object(a.useCallback)(()=>{h&&h(),S.markAllNotificationsAsRead(x,t)},[S,t,h,x]);return o.a.createElement(d.a,{className:n,subheader:o.a.createElement(p.a,{className:R.listHeader},i," ",o.a.createElement(b.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},o.a.createElement(g.a,{reactKeyPrefix:e+"-is-read",label:w.showUnread,type:U.b.BOOLEAN,filterCode:"NOTIFICATION_PANEL_LIST_FILTER_GROUP_CODE_IS_READ",clearOnMount:!1,configs:[{label:"",filters:[K]}]}),o.a.createElement(s.a,{variant:"caption",onClick:F,style:{cursor:"pointer"}},u?w.markAllAsRead:"")))},t.length&&T||!c&&r&&o.a.createElement(m.a,null,o.a.createElement(f.a,null,r)),c&&M)}var W=n(1745),V=n(196),q=n(737),H=n(1744),G=n.n(H),J=n(2536),$=n(21),Q=n(1),X=n(1134),Y=n(2465);function Z(e){if(null===e)return"";const t=Object(X.a)(new Date,e),n=Object(Y.a)(e);return Math.abs(t)<30?"now":n+" ago"}var ee=n(935),te=n(78);function ne(){var e;const t=null!==(e=Object(j.a)($.a.getTSModelsBuilt,Q.a.webhooknotification,ee.c,ee.a))&&void 0!==e?e:[],n=Object(j.a)($.a.getAllTSModelsBuilt,Q.a.remark,{info:"*"})||[],[,o]=Object(a.useReducer)(e=>e+1,0);return Object(a.useEffect)(()=>{const e=setInterval(()=>{o()},3e4);return()=>clearInterval(e)},[]),t.map(e=>{const t=n.find(t=>t.key===e.object);return function(e,t){var n,a;return{key:e.key,subject:e.messageSubject,body:e.messageTxt,date:e.deliveredDate,relativeDate:Z(te.a.convertUTCToLocalTime(e.deliveredDate)),scriptCode:null===(a=null===(n=e.webhookSub)||void 0===n?void 0:n.dlpAlertScript)||void 0===a?void 0:a.scriptCode,linkToSource:t?t.info:"",isRead:e.isRead}}(e,t)})}var ae=function(e,t,n,a){return new(n||(n=Promise))((function(o,i){function r(e){try{s(a.next(e))}catch(e){i(e)}}function c(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}s((a=a.apply(e,t||[])).next())}))};const oe=Object(y.a)(e=>Object(h.a)({buttonWithBadge:{marginRight:e.spacing(1),padding:0},button:{marginRight:e.spacing(1)},list:{width:384,paddingBottom:0}})),ie={vertical:"bottom",horizontal:"right"},re={vertical:"top",horizontal:"right"};function ce({limit:e=10,reactKeyPrefix:t}){const n=oe({}),[l,d]=Object(E.a)([I.a.IInternationalization,N.a.INotificationController]),{common:p}=l.getLanguageFile(),[b,m]=Object(a.useState)(null),[f,y]=Object(a.useState)(null),[h,g]=Object(a.useState)(0),O=Object(a.useRef)(1),j=Object(a.useRef)(!1),C=Object(q.a)(),k=Math.max(0,h-(O.current-1)*e),v=ne().slice(0,h-k),S=Object(a.useCallback)(e=>ae(this,void 0,void 0,(function*(){const t=yield d.getNotificationsUnreadCount(C,{isRead:!1,hasUpdated:e});null!==t&&(d.updateUnreadCount(t),y(t))})),[d,C]),w=Object(a.useCallback)(()=>{j.current=!1,O.current++},[]),x=Object(a.useCallback)(()=>ae(this,void 0,void 0,(function*(){j.current||(j.current=!0,d.getNotifications(O.current,e,C,w))})),[d,e,w,C]),A=Object(a.useCallback)(e=>ae(this,void 0,void 0,(function*(){m(e.currentTarget),x();const t=yield d.getNotificationsCount(C);g(null!=t?t:0)})),[e,JSON.stringify(C)]),R=Object(a.useCallback)(()=>S(!0),[S]),T=Object(a.useCallback)(()=>{m(null),O.current=1},[]);return Object(a.useEffect)(()=>{S(!1)},[JSON.stringify(C)]),Object(a.useEffect)(()=>{const e=V.b.subscribe(e=>{e&&y(e=>(null!=e?e:0)+1)});return()=>e.unsubscribe()},[b,f,e,JSON.stringify(C)]),Object(a.useEffect)(()=>{null!==f&&d.updateUnreadCount(f)},[f]),o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{title:p.notifications},o.a.createElement(r.a,{id:t+"icon-btn",onClick:A,className:f?n.buttonWithBadge:n.button},o.a.createElement(W.a,{reactKeyPrefix:t+"-notification-badge",value:null!=f?f:0},o.a.createElement(u.a,null)))),o.a.createElement(c.a,{id:t+"popover",open:!!b,anchorEl:b,onClose:T,anchorOrigin:ie,transformOrigin:re,sx:{maxHeight:880}},o.a.createElement(G.a,{pageStart:1,loadMore:x,hasMore:!!k,useWindow:!1,initialLoad:!1},o.a.createElement(F,{onClose:T,reactKeyPrefix:t+"-notifications-list",notifications:v,className:n.list,subheader:p.notifications,noNotificationsMessage:p.noNotificationsToShow,loading:j.current,loadingCount:Object(J.a)(k,0,e),isUnreadMessages:(null!=f?f:0)>0,onStatusChange:R,onMarkAllRead:()=>y(0)})),!v.length||j.current||k?o.a.createElement(o.a.Fragment,null):o.a.createElement(s.a,{variant:"subtitle1",component:"div",p:2,align:"center"},p.noMoreNotificationsToShow)))}},1272:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n(118);var a=n(0),o=n.n(a),i=(n(10),n(11),n(634)),r=n.n(i),c=n(1734),s=n.n(c),l=n(2523),u=n(1429),d=n(984),p=n(2086),b=n(213),m=n(187),f=n(97),y=n(53),h=n(26),g=n(135),O=n(341);const j=Object(b.a)(e=>Object(m.a)({nested:{paddingLeft:e.spacing(4),overflow:"hidden",width:"100%",borderRadius:"500px",borderBottomLeftRadius:0,borderTopLeftRadius:0,paddingRight:e.spacing(.5)},text:{paddingLeft:e.spacing(7/8),fontSize:"1rem",color:e.palette.grey[700]},selected:{paddingLeft:e.spacing(7/8),fontSize:"1rem",color:"black"}})),C=Object(a.memo)((function(e){const{menuItem:{name:t,url:n,key:i},onClickMenuItem:r,reactKeyPrefix:c}=e,s=j({}),l=Object(f.h)(),u=Object(a.useCallback)(e=>{"other"===t.toLowerCase()&&e.preventDefault(),r&&r()},[t,r]),b=n.startsWith("/")?void 0:"_blank",m=n.startsWith("/")?void 0:"noopener noreferrer",C=Object(O.d)(l.pathname,n);return o.a.createElement(d.a,{button:!0,className:s.nested,component:y.b,to:n,key:i,onClick:u,target:b,rel:m,selected:C,id:c+"-"+Object(g.b)(t)},o.a.createElement(p.a,{primary:t,primaryTypographyProps:{className:Object(h.default)(s.text,{[s.selected]:C})}}))}));var k=n(6),v=n(47),E=n(702),I=n(1735),S=n(7);const w=Object(b.a)(e=>Object(m.a)({headerItem:{overflow:"hidden",width:"100%",borderRadius:"500px",borderBottomLeftRadius:0,borderTopLeftRadius:0,paddingRight:e.spacing(.5)},headerItemText:{fontWeight:700}})),x=Object(a.memo)((function(e){const{headerItem:t,childItems:n,reactKeyPrefix:i,onClickMenuItem:c,hideHeader:b,state:{collapse:m}}=e,y=w({}),h=Object(f.h)(),[O,j]=Object(a.useState)(()=>n.some(e=>h.pathname.includes(e.url)));Object(a.useEffect)(()=>{O&&m&&j(!1)},[m,O]);const[v]=Object(k.a)([S.a.ISimpleReducerActions]),I=Object(a.useCallback)(()=>{v.setAction(E.a,!1),j(!O)},[v,O]),x=n.map(e=>o.a.createElement(C,{reactKeyPrefix:i+"-"+Object(g.b)(t.name),menuItem:e,key:e.key,onClickMenuItem:c})),A=o.a.createElement(u.a,{component:"div",dense:!0,disablePadding:!0},x),R=b?A:o.a.createElement(l.a,{in:O,timeout:"auto",unmountOnExit:!0},A);return o.a.createElement(o.a.Fragment,null,!b&&o.a.createElement(d.a,{id:i+"-"+Object(g.b)(t.name),button:!0,onClick:I,key:t.key,className:y.headerItem},O?o.a.createElement(s.a,null):o.a.createElement(r.a,null),o.a.createElement(p.a,{primary:t.name.toLocaleUpperCase(),primaryTypographyProps:{className:y.headerItemText}})),R)})),A=Object(v.a)(e=>({collapse:I.a.get(e)}),Object(a.memo)(x));var R=n(832);function N(e,t){return e.sequenceNo-t.sequenceNo}const T={sortBySequenceNo:N,generateMenuGroups:function(e,t,n){if(e){return e.filter(e=>!!e.parentMenuItem&&"Menu"===e.parentMenuItem.name&&"user"!==e.name.toLowerCase()).sort(N).map(a=>{const i=e.filter(e=>!!e.parentMenuItem&&e.parentMenuItem.key===a.key);return i.sort(N),o.a.createElement(A,{headerItem:a,childItems:i,key:a.key,onClickMenuItem:n,reactKeyPrefix:t,hideHeader:a.name.startsWith(R.a)})})}return null}}},1865:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(10),n(11);var a=n(0),o=n.n(a),i=n(44),r=n(6),c=n(47),s=n(7),l=n(1866),u=n(42),d=n(3),p=n(1235);class b extends o.a.PureComponent{constructor(e){super(e),this.state=Object.assign({},e.state),this.onCloseModal=this.onCloseModal.bind(this)}UNSAFE_componentWillReceiveProps(e){this.setState(Object.assign({},e.state))}onCloseModal(){const{dispatchAction:e}=this.props,[t,n]=this.props.deps;this.setState(()=>e(n.setAction({key:null,tsModelType:null,fieldName:void 0})))}render(){const{deps:[e],reactKeyPrefix:t}=this.props;return null!==this.state.selectedAttachment.key?o.a.createElement(i.a,{reactKeyPrefix:t+"modal",title:e.lang().model.attachments,open:null!==this.state.selectedAttachment.key,onCloseModal:this.onCloseModal,maxWidth:"lg",fullWidth:!0,actionButtons:[],fullscreenOnMobile:!0},o.a.createElement(p.a,{reactKeyPrefix:t+"attachments",sourceId:this.state.selectedAttachment.key})):null}}const m=Object(r.b)([d.a.IInternationalization,s.a.ISelectedAttachmentActions],Object(c.a)(e=>({selectedAttachment:l.a.get(e),userLocale:u.a.getUserLocale(e)}),b))},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),o=n.n(a),i=n(57),r=n(44),c=n(6),s=n(3),l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};class u extends o.a.PureComponent{constructor(e){super(e),this.state={inputValue:"",isInputValid:!0},this.lang=this.props.deps[0].lang(),this.onChangeValue=this.onChangeValue.bind(this),this.onConfirm=this.onConfirm.bind(this),this.onClose=this.onClose.bind(this),this.onEnterPress=this.onEnterPress.bind(this)}componentDidMount(){window.addEventListener("keydown",this.onEnterPress)}componentWillUnmount(){window.removeEventListener("keydown",this.onEnterPress)}onEnterPress(e){this.props.showModal&&this.state.isInputValid&&"Enter"===e.key&&this.onConfirm()}onChangeValue(e,t){this.setState({isInputValid:t,inputValue:e})}onConfirm(){this.props.onConfirm(this.state.inputValue.trim()),this.onClose()}onClose(){this.setState({inputValue:"",isInputValid:!0}),this.props.onClose()}render(){const e=this.props,{confirmBtnName:t=this.lang.common.save,showModal:n,onClose:a,onConfirm:c,title:s,reactKeyPrefix:u,characterRequirements:d}=e,p=l(e,["confirmBtnName","showModal","onClose","onConfirm","title","reactKeyPrefix","characterRequirements"]),{inputValue:b,isInputValid:m}=this.state;return o.a.createElement(r.a,{reactKeyPrefix:u+"modal",title:s,open:n,onCloseModal:this.onClose,maxWidth:"xs",fullWidth:!0,confirmBtnName:t,onConfirm:this.onConfirm,disableConfirmBtn:!m||b.trim()===p.value},o.a.createElement(i.b,Object.assign({},p,{reactKeyPrefix:u+"text-input",onInputChange:this.onChangeValue,characterRequirements:d})))}}const d=Object(c.b)([s.a.IInternationalization],u)},354:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n(0),o=n.n(a),i=n(1429),r=n(213),c=n(187),s=n(1272);const l=274,u=Object(r.a)(e=>Object(c.a)({root:{width:"100%",maxWidth:l-10}})),d=Object(a.memo)((function(e){const{menuItems:t,reactKeyPrefix:n,onClickMenuItem:a}=e,r=u({}),c=s.a.generateMenuGroups(t,n,a);return o.a.createElement(i.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:r.root},c)}))},502:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return j}));var a=n(1424),o=n(892),i=n(2091),r=n(114),c=n(14),s=n(1),l=n(89),u=n(168),d=n(3),p=n(131),b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};function m(e,t,n,a,o){if(a)return a(n,o);if(e&&e.type)return Object(l.a)(new e.type.class(n));if(t&&t.type){const{objPropToUpdate:e,objToUpdate:a,objToUpdateType:i,shouldKeepValues:r,shouldUseArray:c,type:s}=t;if(!n||0===Object.keys(n).length&&n.constructor===Object)throw new Error("Entity undefined or empty object.");return e&&a&&c&&i?{[e]:Object(u.g)(a[e],Object(l.a)(new s.class(n),r),o)}:Object(l.a)(new s.class(n),r)}throw new Error("Missing/incorrect create or update props.")}function f(e,t,n,a){const o=m(e,void 0,n,a);o&&e.type&&t.createAction(Object.assign(Object.assign({},e),{data:o,type:e.type}))}function y(e,t,n,a){const o=m(void 0,e,n,a);if(o&&e.type){const{objToUpdate:a,objToUpdateType:i,fields:r,headers:c,smartResponse:s}=e,l=b(e,["objToUpdate","objToUpdateType","fields","headers","smartResponse"]);t.updateSingleAction(Object.assign(Object.assign({},l),{data:o,key:a?a.key:n.key,type:i||e.type,fields:s?{}:r,headers:Object.assign(Object.assign({},c),s&&p.a.smartJson)}))}}function h(e,t,n,a,o,i){const l=c.a.get(d.a.IInternationalization);if(!a)throw new Error("Update props missing.");{const{objToUpdate:c,objToUpdateType:u,shouldUseArray:d,type:f,smartResponse:y,headers:h}=a,g=b(a,["objToUpdate","objToUpdateType","shouldUseArray","type","smartResponse","headers"]);Object(r.a)(l.lang().common.delete,l.lang().common.genericDeleteConfirmation,l.lang().common.delete).then(r=>{if(r)if(c&&u&&d){const r=m(void 0,a,t,o,!0);e.updateSingleAction(Object.assign(Object.assign({},g),{callback:i?void 0:a=>{a||e.deleteAction({callback:n,key:t.key,type:s.a[t.$tsmodelClassName.toLowerCase()]})},data:r,key:c.key,type:u,headers:Object.assign(Object.assign({},h),y&&p.a.smartJson)}))}else f&&e.deleteAction(Object.assign(Object.assign({},g),{callback:n,key:t.key,type:f}))})}}function g(e,t,n,a){t&&e.copySingleAction({callback:(e,t)=>{a&&a(t),n()},key:t.key,type:s.a[t.$tsmodelClassName]})}function O(e,t){return Object(a.a)(new t.class(e))}function j(e,t,n,a){let r=Object(o.a)(e)?e:O(e,t);if(n){const e=(e,t)=>null==e?t:e;r=Object(i.a)(r,O(n,t),e)}if(a){const e=(e,t)=>Array.isArray(e)?t:void 0;r=Object(i.a)(r,O(a,t),e)}return new t.class(r)}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));n(10),n(11);var a=n(323),o=n(473),i=n(214),r=n(2361),c=n(981),s=n(0),l=n.n(s),u=n(37),d=n(12),p=n(502),b=n(44),m=n(67),f=n(6),y=n(47),h=n(7),g=n(42),O=n(3),j=n(71),C=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const k=Object(s.memo)(Object(y.a)((function(e){return{userLocale:g.a.getUserLocale(e)}}),Object(f.b)([h.a.ITSModelActionsAsync,O.a.IInternationalization],(function(e){const{breakpoints:t,contextData:n,createProps:c,enableCopy:f=!1,selectedObject:y,getColSpec:h,overrideUpdateEntity:g,isConfirmDisabled:O,state:{userLocale:k},tableDataProperty:v,tableProps:E,updateProps:I,overrideGetData:S,allowDelete:w,children:x,childrenAtBottom:A,tree:R,propertiesToSet:N,propertiesToOverwrite:T,overrideOnConfirm:P,overrideOnDelete:M,onMoreDetails:L,onEntityChange:U,stopDeleteSinglePropagation:D,getColSpecArray:_}=e,B=e.modalProps,{onCloseModal:K,onDelete:z,reactKeyPrefix:F}=B,W=C(B,["onCloseModal","onDelete","reactKeyPrefix"]),[V,q]=e.deps,H=I&&I.type?I.type:void 0,G=c&&c.type?c.type:void 0,J=H||G,$=Object(s.useMemo)(()=>J?Object(p.e)({},J,N):{},[N,J]),[Q,X]=Object(s.useState)($),[Y,Z]=Object(s.useState)({});Object(s.useEffect)(()=>{J&&W.open&&X(e=>Object(p.e)(e,J,N,T))},[W.open,T,N,J]),Object(s.useEffect)(()=>{y&&J&&X(new J.class(y))},[y,J]),Object(s.useEffect)(()=>{U&&U(Q)},[Q]);const ee=Object(s.useCallback)(()=>{X($),K&&K()},[$,K]),te=Object(s.useCallback)(()=>{P?(P(Q),X($)):c?(Object(p.b)(c,V,Q,S),ee()):I&&(Object(p.f)(I,V,Q,S),ee())},[Q,P,c,I,$,V,S,ee]),ne=Object(s.useCallback)(()=>{M?(M(Q),X($)):I&&w&&(Object(p.c)(V,Q,z,I,S,D),ee())},[M,I,w,Q,$,V,z,S,D,ee]),ae=Object(s.useCallback)((e,t)=>{"boolean"==typeof t&&Z(n=>Object.assign(Object.assign({},n),{[e]:t}))},[]),oe=Object(s.useCallback)((e,t,n)=>{g?X(a=>g(a,e,t,n)):J&&(X(n=>new J.class(Object(r.a)(n,e,t))),ae(e,n))},[g,J,ae]),ie=Object(s.useCallback)(t=>{v&&oe(v,t),e.tableProps&&e.tableProps.onRowSelect&&e.tableProps.onRowSelect(t)},[oe,e.tableProps,v]),re=Object(s.useMemo)(()=>l.a.createElement(a.a,{paddingTop:"16px"},l.a.createElement(m.a,Object.assign({},E,{userLocale:k,data:E&&E.data?E.data:[],headers:E&&E.headers?E.headers:[],reactKeyPrefix:F+"createObjectModalTable",onRowSelect:ie}))),[E,k,F,ie]),ce=Object(s.useMemo)(()=>l.a.createElement(o.a,{disabled:!f,color:"primary",onClick:()=>Object(p.a)(V,Q,ee,e.onCopyCompleted)},q.lang().common.copy),[f,V,Q,q,ee,e.onCopyCompleted]),se=Object(s.useMemo)(()=>l.a.createElement(o.a,{color:"primary",onClick:L},q.lang().common.moreDetails),[L,q]),le=Object(s.useMemo)(()=>h?h(F,Q,oe,k,q,n):[],[n,Q,h,q,oe,F,k]),ue=Object(s.useMemo)(()=>l.a.createElement(i.a,{container:!0,spacing:2,direction:"column"},_&&_.map((e,a)=>l.a.createElement(i.a,{item:!0,key:a,sm:12/_.length,xs:12},l.a.createElement(j.a,null,l.a.createElement(u.a,{reactKeyPrefix:F+"h-list",items:e(F,Q,oe,k,q,n),breakpoints:t||d.d}))))),[t,n,Q,_,q,oe,F,k]);return l.a.createElement(b.a,Object.assign({},W,{reactKeyPrefix:F+"modal",disableConfirmBtn:!!O&&O(Q,Y),fullWidth:!0,onCloseModal:ee,onConfirm:te,onDelete:w?ne:void 0,extraButtons:f&&y?[ce]:void 0,extraButtonsLeft:L?[se]:void 0}),A?void 0:x,_&&ue,h&&l.a.createElement(u.a,{reactKeyPrefix:F+"h-list",items:le,breakpoints:t||d.d}),R,E?re:null,A?x:void 0)}))),c.a)},737:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var a=n(23),o=n(1),i=n(21),r=n(164);const c={dlpAlertScript:{scriptCode:"*"},channelInfo:{channelType:{channelTypeCode:"*"}},objectType:"*",eventType:"*",dataloyObject:"*"};function s(){var e;return(null!==(e=Object(a.a)(i.a.getTSModelsBuilt,o.a.webhooksubscription,c,r.g))&&void 0!==e?e:[]).map(({key:e})=>e)}},935:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return I})),n.d(t,"b",(function(){return S}));n(59);var a,o,i,r,c=n(9),s=n(315),l=n(31),u=n(1),d=n(626),p=n(29),b=n(670),m=n(912),f=n(1599),y=n(7),h=n(48),g=n(153),O=n(90),j=n(3),C=function(e,t,n,a){var o,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(i<3?o(r):i>3?o(t,n,r):o(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},k=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(e,t){return function(n,a){t(n,a,e)}};const E="NOTIFICATION_LIST_IDENTIFIER",I={deliveredDate:"*",messageTxt:"*",messageSubject:"*",webhookSub:{dlpAlertScript:{scriptCode:"*"}},objectType:"*",object:"*",isRead:"*"};let S=class{constructor(e,t,n,a){this.tsmodelActions=e,this.http=t,this.store=n,this.simpleReducerActions=a}setNotificationReadStatus(e,t,n){return this.tsmodelActions.updateSingleAction({type:u.a.webhooknotification,data:{isRead:t},key:e,callback:()=>{n&&n(t)}})}markAllNotificationsAsRead(e,t){var n,a,o;const i=null!==(a=null===(n=Object(s.maxBy)(t,"key"))||void 0===n?void 0:n.key)&&void 0!==a?a:0,r="expression=webhookSub.user.key = "+e.key+" and key <= "+i+" and webhookSub.unsubscriptionDate = null  and webhookSub.channelInfo.channelType.channelTypeCode = '"+g.a.DB+"' and isRead = false";return this.http.put(`${h.a.API_BASE_URL}/WebhookNotification/bulkUpdate?${r}`,JSON.stringify({isRead:!0}),{headers:new Headers({authorization:null!==(o=e.authdata)&&void 0!==o?o:"","content-type":"application/json"})}).then(()=>{this.tsmodelActions.addMultipleAction(t.map(e=>new d.a({key:e.key,isRead:!0})))})}getNotifications(e,t,n,a){return n.length?this.tsmodelActions.loadMultipleAction({type:u.a.webhooknotification,query:`filter=webhookSub.key(IN)(${n})&sort=key(DS)`,fields:I,pageItemLimit:t,pageNumber:e,identifier:E,overwriteKeysOnLoad:1===e}).then(({entities:e})=>{const t=e.filter(({objectType:e})=>"Remark"===e).map(e=>e.object);t.length?this.tsmodelActions.loadMultipleAction({type:u.a.remark,query:`filter=key(IN)(${t})`,fields:{info:"*"},callback:a}):a&&a()}):Promise.resolve()}updateUnreadCount(e){this.simpleReducerActions.setAction(m.a,e)}getTotalNotificationsCount(e,t){return e.length?this.getNotificationsCount(e,t):Promise.resolve(null)}getNotificationsUnreadCount(e,t){if(!e.length)return Promise.resolve(null);if(!(null==t?void 0:t.hasUpdated)){const e=f.a.get(this.store.getState());if(null!==e)return Promise.resolve(e)}return this.getNotificationsCount(e,t)}getNotificationsCount(e,t){return this.tsmodelActions.loadMultipleAction({type:u.a.webhooknotification,query:`filter=webhookSub.key(IN)(${e})`+(void 0!==(null==t?void 0:t.isRead)?"&filter=isRead(EQ)"+t.isRead:""),fields:{key:"*"},pageItemLimit:1,pageNumber:1,noCount:!1}).then(({headers:e})=>Number(e.totalobjectsnumber))}};S=C([Object(c.injectable)(),v(0,Object(c.inject)(y.a.ITSModelActionsAsync)),v(1,Object(c.inject)(j.a.IHttp)),v(2,Object(c.inject)(y.a.Store)),v(3,Object(c.inject)(y.a.ISimpleReducerActions)),k("design:paramtypes",["function"==typeof(a=void 0!==p.ITSModelActionsAsync&&p.ITSModelActionsAsync)?a:Object,"function"==typeof(o=void 0!==O.IHttp&&O.IHttp)?o:Object,"function"==typeof(i=void 0!==l.Store&&l.Store)?i:Object,"function"==typeof(r=void 0!==b.ISimpleReducerActions&&b.ISimpleReducerActions)?r:Object])],S)}}]);