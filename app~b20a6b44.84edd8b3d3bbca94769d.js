(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1648:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));n(59);var a,o,r,l=n(9),i=n(1),c=n(29),s=n(7),d=n(107),u=n(83),p=n(104),y=n(32),b=n(31),m=function(e,t,n,a){var o,r=arguments.length,l=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,a);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e,t){return function(n,a){t(n,a,e)}},v=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function l(e){try{c(a.next(e))}catch(e){r(e)}}function i(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const O={foPrice:"*",dlPrice:"*",flPrice:"*",doPrice:"*",foConsumption:"*",flConsumption:"*",doConsumption:"*",dlConsumption:"*",foCost:"*",flCost:"*",dlCost:"*",doCost:"*"},C={foProfitLoss:"*",flProfitLoss:"*",doProfitLoss:"*",dlProfitLoss:"*",foProfitLossTcIn:"*",flProfitLossTcIn:"*",doProfitLossTcIn:"*",dlProfitLossTcIn:"*"};let k=class{constructor(e,t,n){this.tsmodelActions=e,this.objectApi=t,this.store=n}deleteOpeningBalance(e){return v(this,void 0,void 0,(function*(){yield this.objectApi.delete({authdata:Object(y.a)(this.store.getState()).authdata||"",key:e.key,type:i.a.bunkerstock})}))}updateOpeningBalance(e,t,n){return v(this,void 0,void 0,(function*(){const n=e.filter(e=>(null==e?void 0:e.key)===t);if(1!==n.length)return Promise.reject();yield this.objectApi.put({authdata:Object(y.a)(this.store.getState()).authdata||"",key:t,type:i.a.bunkerstock,data:{price:n[0].price,quantity:n[0].quantity}})}))}refreshBunkerStocks(e){return e?this.tsmodelActions.loadSingleAction({type:i.a.voyage,fields:Object.assign({voyageHeader:Object.assign({bunkerStocks:d.a},C)},O),key:e}):Promise.reject()}getFleetPlanVoyages(e){var t;return e?this.objectApi.getMultiple({type:i.a.fleetplanvoyage,fields:{sequence:"*"},query:"filter=voyage(EQ)"+e,authdata:null!==(t=Object(y.a)(this.store.getState()).authdata)&&void 0!==t?t:""}):Promise.reject()}};k=m([Object(l.injectable)(),g(0,Object(l.inject)(s.a.ITSModelActionsAsync)),g(1,Object(l.inject)(u.a.ITSModelApi)),g(2,Object(l.inject)(s.a.Store)),f("design:paramtypes",["function"==typeof(a=void 0!==c.ITSModelActionsAsync&&c.ITSModelActionsAsync)?a:Object,"function"==typeof(o=void 0!==p.ITSModelApi&&p.ITSModelApi)?o:Object,"function"==typeof(r=void 0!==b.Store&&b.Store)?r:Object])],k)},1813:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(118),n(10),n(11);var a=n(0),o=n.n(a),r=n(5),l=n(67),i=n(6),c=n(50),s=n(3),d=n(136),u=n(63),p=n(60);const y={disableToolbar:!1,height:{type:r.d.STATIC},responsive:!1,disableSorting:!0};function b(e){const{voyage:t,className:n,onRowClick:b,userLocale:m,reactKeyPrefix:f}=e,g=t.portCallsFromVoyage.sort(c.a.sortByPortCallSequence),[v]=Object(i.a)([s.a.IInternationalization]),O=Object(a.useCallback)(e=>{switch(e){case"S":return v.lang().vessel.summer;case"W":return v.lang().vessel.winter;case"T":return v.lang().vessel.tropical}return e},[v]),C=Object(a.useCallback)(e=>{switch(e){case"SW":return v.lang().model.saltWater;case"BW":return v.lang().model.brackishWaterShort;case"FT":return v.lang().model.freshWater}return e},[v]),k=Object(a.useCallback)(e=>{var t,n,a,o;return(null!==(t=e.foRobArrival)&&void 0!==t?t:0)+(null!==(n=e.flRobArrival)&&void 0!==n?n:0)+(null!==(a=e.doRobArrival)&&void 0!==a?a:0)+(null!==(o=e.dlRobArrival)&&void 0!==o?o:0)},[]),j=Object(a.useCallback)(e=>{var t,n,a,o;return(null!==(t=e.foRobDeparture)&&void 0!==t?t:0)+(null!==(n=e.flRobDeparture)&&void 0!==n?n:0)+(null!==(a=e.doRobDeparture)&&void 0!==a?a:0)+(null!==(o=e.dlRobDeparture)&&void 0!==o?o:0)},[]),h=Object(a.useMemo)(()=>p.a.getQobMap(t),[t]),P=Object(a.useCallback)(e=>p.a.getQobArrival(t,e,h),[t,h]),T=Object(a.useCallback)(e=>p.a.getQobDeparture(t,e,h),[t,h]),E=Object(a.useMemo)(()=>[{content:v.lang().model.port,contentType:r.a.TEXT},{content:v.lang().model.reasonForCall,contentType:r.a.TEXT},{content:v.lang().model.arrival,contentType:r.a.DATE},{content:v.lang().model.departure,contentType:r.a.DATE,hiddenByDefault:!0},{content:v.lang().model.draft+" ("+v.lang().common.meterUnit+")",contentType:r.a.NUMBER},{content:v.lang().model.zone,contentType:r.a.TEXT},{content:v.lang().model.waterSalinity,contentType:r.a.TEXT},{content:v.lang().model.waterDensity+" ("+u.a.Density+")",contentType:r.a.NUMBER,hiddenByDefault:!0},{content:v.lang().model.bunkerReductionArriving+" ("+u.a.Weight+")",contentType:r.a.NUMBER},{content:v.lang().model.bunkerReductionDeparting+" ("+u.a.Weight+")",contentType:r.a.NUMBER},{content:v.lang().model.quantityOnBoardArriving+" ("+u.a.Weight+")",contentType:r.a.NUMBER},{content:v.lang().model.quantityOnBoardDeparting+" ("+u.a.Weight+")",contentType:r.a.NUMBER},{content:v.lang().model.safetyMargin+" ("+u.a.Percent+")",contentType:r.a.NUMBER,hiddenByDefault:!0},{content:v.lang().model.constantReduction+" ("+u.a.Weight+")",contentType:r.a.NUMBER,hiddenByDefault:!0},{content:v.lang().model.freshWaterReduction+" ("+u.a.Weight+")",contentType:r.a.NUMBER,hiddenByDefault:!0}],[v]),x=Object(a.useMemo)(()=>g.map(e=>{var t,n,a,o,r;return{content:[e.port?e.port.portName:"-",e.reasonForCall?e.reasonForCall.reasonForCallDesc:"-",c.a.getEventLogDateFromPC(e,"ARR"),c.a.getEventLogDateFromPC(e,"DEP"),null!==(t=e.draft)&&void 0!==t?t:0,e.zone?O(e.zone):"-",e.waterSalinity?C(e.waterSalinity):"-",null!==(n=e.waterDensity)&&void 0!==n?n:0,k(e),j(e),P(e),T(e),null!==(a=e.safetyMargin)&&void 0!==a?a:0,null!==(o=e.constantReduction)&&void 0!==o?o:0,null!==(r=e.freshWaterReduction)&&void 0!==r?r:0],id:e.key}}),[g,O,C,k,j,P,T]),S=Object(a.useMemo)(()=>x.length>10?{enabled:!0,rowsPerPage:[8]}:void 0,[x.length]);return o.a.createElement(l.a,{headers:E,data:x,reactKeyPrefix:f,userLocale:m,onRowClick:b,title:v.lang().model.schedule,customisation:y,pagination:S,className:n,defaultComparator:Object(d.e)()})}},1917:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));n(59),n(10),n(11),n(118),n(93);var a=n(0),o=n.n(a),r=n(67),l=n(6),i=n(3),c=n(877),s=n(23),d=n(60),u=n(5),p=n(14),y=n(108);const b=p.a.get(i.a.IInternationalization),{model:m,common:f,vessel:g}=b.getLanguageFile(),v={maxDecimals:3,minDecimals:3},O={maxDecimals:2,minDecimals:2},C={maxDecimals:0,minDecimals:0};var k=n(130),j=n(623),h=n(1801),P=n(2070),T=n(20),E=n(21),x=n(1),S=n(107),B=n(213),N=n(187),R=(n(158),n(1329)),I=n(841);const w=p.a.get(i.a.IInternationalization),{model:U,common:D}=w.getLanguageFile(),L="CO2",A=e=>[{content:""+D.description,contentType:u.a.TEXT},{content:U.bunkerType,contentType:u.a.TEXT},{content:`${U.quantity} (${D.mt})`,contentType:u.a.NUMBER,numberFormatOptions:v},{content:`${U.price} (${e})`,contentType:u.a.NUMBER,numberFormatOptions:O},{content:`${U.co2} (${D.mt})`,contentType:u.a.NUMBER,numberFormatOptions:v},{content:U.tc,contentType:u.a.TEXT}],M=(e,t,n,a)=>{const{tc:o}=a.getLanguageFile();return Object(R.a)(e,"sequence").reduce((e,a)=>{var r,l;if((null===(r=a.bunkerCategory)||void 0===r?void 0:r.bunkerCategoryCode)===t.toUpperCase()){const t=a.bunkerStockEmissions.find(e=>{var t;return(null===(t=e.emissionType)||void 0===t?void 0:t.emissionCode)===L}),r=a.tc?a.tc.isTcIn?o.in:o.out:"";e.push({content:[a.description,Object(I.a)(a.bunkerCategory.bunkerCategoryCode),a.quantity,a.price,null!==(l=null==t?void 0:t.emission)&&void 0!==l?l:0,r],id:a.key,disableOnClickForRow:"OPENING BALANCE"!==a.description.toUpperCase(),customisation:{className:a.notUse?n.notUse:void 0}})}return e},[])};var F=n(44);const K=e=>{const{i:t,reactKeyPrefix:n,onClose:a,onOpen:r}=e,{voyages:l,common:i,model:c}=t.getLanguageFile();return o.a.createElement(F.a,{title:l.editOpeningBalance,hideCancelBtn:!0,confirmBtnName:i.ok,open:r,reactKeyPrefix:n+"-edit-opening-balance-disabled-modal",onCloseModal:a,onConfirm:a},o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,{variant:"subtitle2"},l.editOpeningBalanceDisabledText),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(k.a,{variant:"body2"},i.status," ",i.estimated)),o.a.createElement("li",null,o.a.createElement(k.a,{variant:"body2"},i.status," ",i.unallocated)),o.a.createElement("li",null,o.a.createElement(k.a,{variant:"body2"},c.voyageStartDate," ",i.fixed)),o.a.createElement("li",null,o.a.createElement(k.a,{variant:"body2"},l.editOpeningBalanceDisabledTextSeq)))))};var H=n(19),q=n(62),W=n(28),$=n(81);function V(e,t,n,a,o,r){var l,i;const{model:c,common:s}=o.getLanguageFile(),{currentBunker:d}=r,u="fo"===d?"foIndex":"flIndex",p="fo"===d?"foIndexPriceAdd":"flIndexPriceAdd";return Object(H.a)({disableUpdate:!0,fieldOptions:[{fieldName:u,label:c.index,overrideObject:null!==(l=null==t?void 0:t.voyageHeader)&&void 0!==l?l:new y.a({}),overrideType:x.a.voyageheader,onUpdateOverride:e=>{n("voyageHeader."+u,e),null===e&&n("voyageHeader."+p,null)},typeaheadProps:{objectPaths:["marketIndexCode"],shouldPreload:!0,defaultSelectedOptions:Object($.a)(t.voyageHeader,u),query:"filter=marketIndexCategory.marketIndexCategoryCode(EQ)BUNK"}},{fieldName:p,label:s.indexPriceAdd,disabled:!Object($.a)(t.voyageHeader,u),overrideObject:null!==(i=null==t?void 0:t.voyageHeader)&&void 0!==i?i:new y.a({}),overrideType:x.a.voyageheader,onUpdateOverride:e=>n("voyageHeader."+p,e),numberInputProps:{maskSettings:W.a.mask6}}],object:new q.a(t),type:x.a.voyage,userLocale:a,reactKeyPrefix:e})}var X=n(12),z=n(51),G=n(89);const Y=e=>{const{i:t,reactKeyPrefix:n,onOpen:r,onClose:l,voyage:i,currentBunker:c}=e,{voyages:s,common:d}=t.getLanguageFile(),u=Object(a.useCallback)(e=>{if((null==i?void 0:i.voyageHeader)&&e.voyageHeader){const{voyageHeader:t}=e,{voyageHeader:n}=i,a=Object($.a)(t,c+"Index"),o=Object($.a)(t,c+"IndexPriceAdd");return{voyageHeader:{key:null==n?void 0:n.key,[c+"Index"]:a?Object(G.a)(a):null,[c+"IndexPriceAdd"]:a&&!o?0:o}}}},[c,i]),p={objToUpdate:i,objToUpdateType:x.a.voyage,type:x.a.voyage,smartResponse:!0,fields:{voyageHeader:{[c+"Index"]:{marketIndexCode:"*"},[c+"IndexPriceAdd"]:"*"}}};return o.a.createElement(z.a,{modalProps:{title:s.editBenchmarkIndex,onCloseModal:l,open:r,confirmBtnName:d.ok,reactKeyPrefix:n,maxWidth:"sm",fullWidth:!0},getColSpec:V,overrideGetData:u,breakpoints:X.h,contextData:{currentBunker:c},updateProps:p,selectedObject:i})};var Q=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function l(e){try{c(a.next(e))}catch(e){r(e)}}function i(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const J=Object(B.a)(e=>Object(N.a)({notUse:{backgroundColor:e.palette.grey[200]}})),_={dataloyPreferenceName:"BUNKER_PRICE_CURRENCY",fields:{prefName:"*",prefDefault:"*"}};function Z(e){var t,n,p;const{voyageKey:B,userLocale:N,reactKeyPrefix:R}=e,[I,w,U]=Object(l.a)([i.a.IInternationalization,T.a.IBunkerDetailsController,T.a.IVoyageDrawerController]),D=J({}),{common:L,model:H}=I.getLanguageFile(),W=Object(s.a)(E.a.getTSModelBuilt,x.a.voyage,B,S.k),{voyageHeader:$,voyageCurrency:V}=null!=W?W:new q.a({});let X=null!==(t=null==$?void 0:$.bunkerStocks)&&void 0!==t?t:[];X=Object(a.useMemo)(()=>X.sort((e,t)=>e.sequence-t.sequence),[X]);const[z,G]=Object(a.useState)(!1),[Z,ee]=Object(a.useState)(X),te=Object(a.useRef)(!1);Object(a.useEffect)(()=>{U.loadBunkerStocks(B,()=>te.current=!0)},[B]),Object(a.useEffect)(()=>{ee(X)},[X]);const[ne,ae]=Object(a.useState)(!1),[oe,re]=Object(a.useState)(!1),[le,ie]=Object(a.useState)(!1),[ce,se]=Object(a.useState)(null),[de,ue]=Object(a.useState)(!1),[pe,ye]=Object(a.useState)(""),be=null!==(n=Object(s.a)(c.a.getDataloyPreference,_))&&void 0!==n?n:[],me=d.a.getBunkerPriceCurrency(be,null!=W?W:new q.a({})),[fe,ge]=Object(a.useState)(),[ve,Oe]=Object(a.useState)(!1),[Ce,ke]=Object(a.useState)(),[je,he]=Object(a.useState)(!1);Object(a.useEffect)(()=>{!function(){var e,t;Q(this,void 0,void 0,(function*(){const n=yield w.getFleetPlanVoyages(B),a="EST"===(null===(e=null==$?void 0:$.voyageStatus)||void 0===e?void 0:e.statusTypeCode)||"SCU"===(null===(t=null==$?void 0:$.voyageStatus)||void 0===t?void 0:t.statusTypeCode)||(null==$?void 0:$.isVoyageStartFixed)||1===n.length&&1===n[0].sequence;re(a)}))}()},[w,null==$?void 0:$.isVoyageStartFixed,null===(p=null==$?void 0:$.voyageStatus)||void 0===p?void 0:p.statusTypeCode,B]);const Pe=Object(a.useMemo)(()=>{var e;return((e,t)=>[{content:m.bunkerType,contentType:u.a.TEXT},{content:`${m.price} (${e})`,contentType:u.a.NUMBER,numberFormatOptions:O},{content:`${g.consumption} (${f.mt})`,contentType:u.a.NUMBER,numberFormatOptions:v},{content:`${m.cost} (${t})`,contentType:u.a.NUMBER,numberFormatOptions:O},{content:""+f.profitLossCharterer,contentType:u.a.NUMBER,numberFormatOptions:O},{content:""+f.profitLossOwner,contentType:u.a.NUMBER,numberFormatOptions:O},{alignHeaderContent:u.c.RIGHT,content:""+f.benchmarkIndex,contentType:u.a.TEXT},{alignHeaderContent:u.c.RIGHT,content:""+f.indexPriceAdd,contentType:u.a.TEXT}])(me,null!==(e=null==V?void 0:V.currencyCode)&&void 0!==e?e:"")},[me,V]),Te=Object(a.useMemo)(()=>W?((e,t)=>{var n,a;const{foPrice:o,dlPrice:r,flPrice:l,doPrice:i,foConsumption:c,flConsumption:s,doConsumption:d,dlConsumption:u,foCost:p,flCost:f,dlCost:g,doCost:v,voyageHeader:O}=e,{foProfitLoss:k,flProfitLoss:j,doProfitLoss:h,dlProfitLoss:P,foProfitLossTcIn:T,flProfitLossTcIn:E,doProfitLossTcIn:x,dlProfitLossTcIn:S,foIndex:B,foIndexPriceAdd:N,flIndex:R,flIndexPriceAdd:I}=O||new y.a({});return[{content:[m.fo,o,c,p,k,T,null!==(n=null==B?void 0:B.marketIndexCode)&&void 0!==n?n:"",""+(null!==N?b.formatNumber(N,C):"")],id:1},{content:[m.lsmgo,r,u,g,P,S,"",""],id:2,disableOnClickForRow:!0},{content:[m.mgo,i,d,v,h,x,"",""],id:3,disableOnClickForRow:!0},{content:[m.lsfo,l,s,f,j,E,null!==(a=null==R?void 0:R.marketIndexCode)&&void 0!==a?a:"",""+(null!==I?b.formatNumber(I,C):"")],id:4}]})(W):[],[N,W]),Ee=Object(a.useMemo)(()=>A(me),[me]),xe=Object(a.useCallback)(()=>Q(this,void 0,void 0,(function*(){W&&(ce&&(yield w.updateOpeningBalance(Z,ce.key,W)),setTimeout(()=>w.refreshBunkerStocks(B),200))})),[w,Z,ce,W,B]),Se=Object(a.useCallback)(e=>{var t,n;return null!==(n=null===(t=X.find(t=>{var n;return"OPENING BALANCE"===t.description.toUpperCase()&&(null===(n=t.bunkerCategory)||void 0===n?void 0:n.bunkerCategoryCode)===e}))||void 0===t?void 0:t.key)&&void 0!==n?n:-1},[X]),Be=Object(a.useCallback)(e=>"Bought from owner"===X[0].description?Se(e):-1,[Se,X]),Ne=Object(a.useCallback)(e=>{var t,n,a;if(oe){const o=X.find(t=>t.key===e);if(o){let e=0;for(const a of X)if((null===(t=a.bunkerCategory)||void 0===t?void 0:t.bunkerCategoryCode)===(null===(n=o.bunkerCategory)||void 0===n?void 0:n.bunkerCategoryCode)&&a.description===o.description&&e++,e>1)break;Be((null===(a=o.bunkerCategory)||void 0===a?void 0:a.bunkerCategoryCode)||"")===o.key?G(!1):G(e>1),se(o),ie(!0)}}else ae(!0)},[oe,X]),Re=Object(a.useCallback)(()=>{ie(!1),ae(!1),Oe(!1),ge(null),he(!1)},[]),Ie=Object(a.useCallback)(()=>Q(this,void 0,void 0,(function*(){ce&&(yield w.deleteOpeningBalance(ce),setTimeout(()=>w.refreshBunkerStocks(B),200),Re())})),[w,Re,ce,B]),we=Object(a.useCallback)(()=>{he(!0)},[]),Ue=Object(a.useCallback)(()=>{xe(),Re()},[Re,xe]),De=Object(a.useCallback)(()=>{se(null),xe(),ke(null)},[xe]),Le=Object(a.useCallback)(e=>{$&&(ke($.key),ge({bunkerCategoryCode:e}),Oe(!0))},[$]),Ae=Object(a.useCallback)(e=>[{disabled:!oe,label:H.addopeningbalance,reactKeyPrefix:R+"-add-opening-balance",buttonSxProps:{width:"150px"},onClick:()=>{Le(e)}}],[oe,H.addopeningbalance,Le,R]),Me=Object(a.useMemo)(()=>["FO","DL","DO","FL"].map(e=>o.a.createElement(r.a,{key:"bunker-stock-"+e.toLowerCase(),headers:Ee,onRowClick:Ne,data:M(null!=X?X:[],e.toUpperCase(),D,I),reactKeyPrefix:R+"bunker-stock-"+e.toLowerCase(),userLocale:N,customisation:{disableToolbar:!1,responsive:!0,disableSorting:!0},disableCustomiseColumns:!0,primaryActions:Ae(e)})),[Ee,D,I,Ne,Ae,R,X,N]),Fe=Object(a.useCallback)(()=>{const e=(e,t)=>{const n=Z.map((n,a)=>ce&&n.key===ce.key?new j.a(Object.assign(Object.assign({},Z[a]),{[e]:t})):n);ee(n)};if(ce)return Object(h.a)({selectedBunkerStock:ce,onConfirm:Ue,onClose:Re,reactKeyPrefix:R,open:le,bunkerCurrency:me,userLocale:N,onUpdateOverride:e,onDelete:we,showDelete:z})},[ce,Z,Ue,Re,R,le,me,N,we,z]),Ke=Object(a.useCallback)(e=>{[1,4].includes(e)&&(ye(1===e?"fo":"fl"),ue(!0))},[]),He=Object(a.useCallback)(()=>{ue(!1)},[]);return te.current?o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,{headers:Pe,data:Te,reactKeyPrefix:R,userLocale:N,title:H.bunker,onRowClick:Ke,customisation:{disableToolbar:!0,responsive:!0,disableSorting:!0}}),o.a.createElement(k.a,{variant:"h3"},H.bunkerStock),Me,Fe(),ne&&o.a.createElement(K,{i:I,reactKeyPrefix:R,onClose:Re,onOpen:ne}),ve&&o.a.createElement(P.a,{selectedBunkerCategory:fe,voyageHeaderKey:Ce,userLocale:N,bunkerCurrency:me,reactKeyPrefix:R,onOpen:ve,onConfirm:De,onClose:Re}),",",de&&o.a.createElement(Y,{i:I,reactKeyPrefix:R+"-edit-benchmark-index-modal",onClose:He,onOpen:de,voyage:W,currentBunker:pe}),o.a.createElement(F.a,{reactKeyPrefix:R+"-delete-modal",open:je,onCloseModal:()=>he(!1),onConfirm:Ie,title:L.delete,maxWidth:"xs",fullWidth:!0,confirmBtnName:L.delete},L.deleteConfirmationOpeningBalance)):o.a.createElement(o.a.Fragment,null)}},2065:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n(10),n(11);var a=n(0),o=n.n(a),r=n(37),l=n(23),i=n(1),c=n(43),s=n(32),d=n(6),u=n(3),p=n(20),y=n(12),b=n(19),m=n(108),f=n(199),g=n(30),v=n(818),O=n(15),C=n(27);var k=n(21),j=n(107),h=n(62),P=n(273);const T=e=>{var t,n,T;const{voyageKey:E,userLocale:x,reactKeyPrefix:S}=e,B=null!==(t=Object(l.a)(s.a))&&void 0!==t?t:new c.a({}),[N,R]=Object(d.a)([u.a.IInternationalization,p.a.IVoyageDrawerController]),I=Object(a.useRef)(!1),w=null!==(n=Object(l.a)(k.a.getTSModelBuilt,i.a.voyage,E,j.d))&&void 0!==n?n:new h.a({}),U=null!==(T=w.voyageHeader)&&void 0!==T?T:new m.a({}),D=v.a.isPlanningStage(U),L=Object(P.a)(U.company||U.businessUnit?{companyRequired:!D,businessUnitRequired:!D,selectedCompany:U.company,selectedBusinessUnit:U.businessUnit}:{companyRequired:!D,businessUnitRequired:!D});return Object(a.useEffect)(()=>{I.current||R.loadOrganisationalData(E,()=>{I.current=!0})},[R,w,E]),w&&I.current?o.a.createElement(r.a,{items:((e,t,n,a,o,r)=>function(e,t,n,a,o,r,l){var c,s,d,u;const{model:p,common:k,alerts:j}=t.lang(),h=null!==(c=a.voyageHeader)&&void 0!==c?c:new m.a({}),P=null!==(s=null==l?void 0:l.find(e=>{var t,n,a,o;return e.company===(null!==(n=null===(t=null==h?void 0:h.company)||void 0===t?void 0:t.key)&&void 0!==n?n:void 0)&&e.businessUnit===(null!==(o=null===(a=null==h?void 0:h.businessUnit)||void 0===a?void 0:a.key)&&void 0!==o?o:void 0)}))&&void 0!==s?s:null,T=Object(f.a)(o,[{fieldName:"company",formControlProps:{required:!v.a.isPlanningStage(h)},label:k.companyBusinessUnit,breakpoints:y.e,openObject:{permissions:[g.a.CompanyGET],onOpen:C.a.openDrawer.bind(null,null!==(u=null===(d=h.company)||void 0===d?void 0:d.key)&&void 0!==u?u:-1,O.a.companyDrawer)},typeaheadProps:{options:null!=l?l:[],defaultSelectedOptions:P,resolver:e=>null==e?void 0:e.label,showWarning:!0,warningText:j.changingCompanyOnVoyage},onUpdateOverride:r.bind(null,"companyBusinessUnit")},{fieldName:"pool",breakpoints:y.e,typeaheadProps:{shouldPreload:!0}},{fieldName:"charteringResponsible",label:p.responsibleCharterer,breakpoints:y.e,typeaheadProps:{shouldPreload:!0}},{fieldName:"operator",label:p.responsibleOperator,breakpoints:y.e,typeaheadProps:{shouldPreload:!0}},{fieldName:"accountantResponsible",label:p.responsibleAccountant,breakpoints:y.e,typeaheadProps:{shouldPreload:!0}},{fieldName:"claimsOperator",label:p.claimOperator,breakpoints:y.e},{fieldName:"leg",label:p.trade,breakpoints:y.e,formControlProps:{required:!1},typeaheadProps:{shouldPreload:!0,objectPaths:["legDesc"],showWarning:!0,warningText:j.changingTrades}}]);return Object(b.a)({fieldOptions:T,object:h,parentData:{key:h.key,type:i.a.voyageheader},type:i.a.voyageheader,userLocale:n,reactKeyPrefix:e,smartResponse:!0})}(e,t,n,a,o,r,L))(S,N,x,w,B,(e,t)=>{var n;if("companyBusinessUnit"===e){const e=new m.a({key:null===(n=null==w?void 0:w.voyageHeader)||void 0===n?void 0:n.key,company:(null==t?void 0:t.company)?{key:t.company}:null,businessUnit:(null==t?void 0:t.businessUnit)?{key:t.businessUnit}:null});R.updateOrganisationalData(e)}}),reactKeyPrefix:S}):o.a.createElement(o.a.Fragment,null)}},2066:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(2513),o=n(0),r=n.n(o),l=n(107),i=n(51),c=n(12),s=n(1),d=n(60),u=n(1231),p=n(19),y=n(108);const b=(e,t,n,a,o,{isNominated:r})=>{const{model:l,common:i}=o.lang(),c={reactKeyPrefix:e,userLocale:a,object:new y.a(t),type:s.a.voyageheader,disableUpdate:!0,fieldOptions:[r?{fieldName:"voyageNo",label:l.voyageNo,onUpdateOverride:n.bind(null,"voyageNo"),numberInputProps:{maskSettings:{decimalScale:0,disableThousandSeparator:!0,allowNegative:!1}}}:{fieldName:"referenceNo",label:l.referenceNumber,onUpdateOverride:n.bind(null,"referenceNo")},{fieldName:"voyageStartYear",label:i.startYear,numberInputProps:{maskSettings:{format:u.a.Year}},onUpdateOverride:n.bind(null,"voyageStartYear")}]};return Object(p.a)(c)};function m(e){const{reactKeyPrefix:t,onClose:n,open:o,voyage:u,i:p}=e,{common:y,fas:m}=p.getLanguageFile(),f=d.a.getIsNominatedOrHigher(u),g=f?y.editVoyageNumber:m.editVoyageReference;return r.a.createElement(i.a,{modalProps:{title:g,reactKeyPrefix:t,open:o,onCloseModal:n,onConfirm:n,maxWidth:"xs",confirmBtnName:y.save},contextData:{isNominated:f},getColSpec:b,selectedObject:Object(a.a)(u.voyageHeader,["key","voyageNo","referenceNo","voyageStartYear"]),breakpoints:c.h,updateProps:{type:s.a.voyageheader,fields:{voyage:l.n}}})}}}]);