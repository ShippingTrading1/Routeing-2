(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1663:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));a(59);var o,r,n,l,c=a(9),i=a(944),s=a(1),d=a(7),u=a(29),m=a(31),p=a(496),y=a(142),b=a(222),f=a(819),v=function(e,t,a,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(l=(n<3?r(l):n>3?r(t,a,l):r(t,a))||l);return n>3&&l&&Object.defineProperty(t,a,l),l},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(e,t){return function(a,o){t(a,o,e)}},C=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function l(e){try{i(o.next(e))}catch(e){n(e)}}function c(e){try{i(o.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,c)}i((o=o.apply(e,t||[])).next())}))};let j=class{constructor(e,t,a,o){this.store=e,this.selectedTSModelActions=t,this.tsmodelActions=a,this.cacheController=o}dispatchLoadScenario(e,t){this.tsmodelActions.loadSingleAction({fields:t||{scenarioName:"*"},key:e,type:s.a.scenario})}dispatchUpdateScenario(e,t,a){this.tsmodelActions.updateSingleAction({data:t,fields:a||i.a,key:e,type:s.a.scenario})}dispatchDeleteScenario(e){return C(this,void 0,void 0,(function*(){return yield this.tsmodelActions.deleteAction({key:e,type:s.a.scenario})}))}deleteScenario(e){return C(this,void 0,void 0,(function*(){if(e){yield this.dispatchDeleteScenario(e.key);y.a.get(this.store.getState(),s.a.scenario)===e.key&&this.selectedTSModelActions.setAction(s.a.scenario,null);const t=Object(f.a)(e.isBudget);this.cacheController.refreshCached(t)}}))}};j=v([Object(c.injectable)(),O(0,Object(c.inject)(d.a.Store)),O(1,Object(c.inject)(d.a.ISelectedTSModelActions)),O(2,Object(c.inject)(d.a.ITSModelActionsAsync)),O(3,Object(c.inject)(d.a.ITypeaheadCacheController)),g("design:paramtypes",["function"==typeof(o=void 0!==m.Store&&m.Store)?o:Object,"function"==typeof(r=void 0!==p.ISelectedTSModelReducerActions&&p.ISelectedTSModelReducerActions)?r:Object,"function"==typeof(n=void 0!==u.ITSModelActionsAsync&&u.ITSModelActionsAsync)?n:Object,"function"==typeof(l=void 0!==b.ITypeaheadCacheController&&b.ITypeaheadCacheController)?l:Object])],j)},1687:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var o,r=a(9),n=a(1),l=a(7),c=a(29),i=a(579),s=function(e,t,a,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(l=(n<3?r(l):n>3?r(t,a,l):r(t,a))||l);return n>3&&l&&Object.defineProperty(t,a,l),l},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e,t){return function(a,o){t(a,o,e)}};let m=class{constructor(e){this.tsmodelActions=e}loadService(e){this.tsmodelActions.loadSingleAction({key:e,type:n.a.servicecode,fields:i.a})}updateService(e,t){this.tsmodelActions.updateSingleAction({key:e,data:t,type:n.a.servicecode,fields:i.a})}};m=s([Object(r.injectable)(),u(0,Object(r.inject)(l.a.ITSModelActionsAsync)),d("design:paramtypes",["function"==typeof(o=void 0!==c.ITSModelActionsAsync&&c.ITSModelActionsAsync)?o:Object])],m)},1688:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a(59);var o,r,n=a(9),l=a(48),c=a(3),i=a(90),s=a(7),d=a(31),u=a(32),m=function(e,t,a,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(l=(n<3?r(l):n>3?r(t,a,l):r(t,a))||l);return n>3&&l&&Object.defineProperty(t,a,l),l},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t){return function(a,o){t(a,o,e)}},b=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function l(e){try{i(o.next(e))}catch(e){n(e)}}function c(e){try{i(o.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,c)}i((o=o.apply(e,t||[])).next())}))};let f=class{constructor(e,t){this.store=e,this.http=t}getNominationMailBody(e){var t;return b(this,void 0,void 0,(function*(){try{const a=yield this.http.get(l.a.API_BASE_URL+`/ServiceOrder/${e}/NominationMail`,{headers:new Headers({authorization:null!==(t=Object(u.a)(this.store.getState()).authdata)&&void 0!==t?t:"","content-type":"text/html"})});return yield a.text()}catch(e){throw e instanceof Error?new Error(e.message):new Error("API call failed")}}))}getDataloyInfo(){var e;return b(this,void 0,void 0,(function*(){try{const t=yield this.http.get(l.a.API_BASE_URL+"/dataloy/info",{headers:new Headers({authorization:null!==(e=Object(u.a)(this.store.getState()).authdata)&&void 0!==e?e:""})});return yield t.json()}catch(e){e instanceof Error&&console.error(e)}}))}};f=m([Object(n.injectable)(),y(0,Object(n.inject)(s.a.Store)),y(1,Object(n.inject)(c.a.IHttp)),p("design:paramtypes",["function"==typeof(o=void 0!==d.Store&&d.Store)?o:Object,"function"==typeof(r=void 0!==i.IHttp&&i.IHttp)?r:Object])],f)},1716:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var o,r=a(9),n=a(486),l=a(1),c=a(29),i=a(7),s=function(e,t,a,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(l=(n<3?r(l):n>3?r(t,a,l):r(t,a))||l);return n>3&&l&&Object.defineProperty(t,a,l),l},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e,t){return function(a,o){t(a,o,e)}};let m=class{constructor(e){this.tsmodelActions=e}loadTaxes(e){this.tsmodelActions.loadSingleAction({fields:n.a,key:e,type:l.a.vat})}loadTaxRates(e){this.tsmodelActions.loadSingleAction({fields:{vatRates:n.b},key:e,type:l.a.vat})}};m=s([Object(r.injectable)(),u(0,Object(r.inject)(i.a.ITSModelActionsAsync)),d("design:paramtypes",["function"==typeof(o=void 0!==c.ITSModelActionsAsync&&c.ITSModelActionsAsync)?o:Object])],m)},1900:function(e,t,a){"use strict";a.d(t,"a",(function(){return je}));a(10),a(11),a(109),a(163);var o=a(0),r=a.n(o),n=a(97),l=a(35),c=a(82),i=a(15),s=a(6),d=a(1),u=a(7),m=a(21),p=a(42),y=a(3),b=a(81),f=a(208),v=a(154),g=a(114),O=a(23),C=a(174),j=a(365),h=a(245),P=a(213),S=a(187);const E=Object(P.a)(Object(S.a)(e=>({container:{backgroundColor:Object(h.a)(e.palette.primary.main,.05),borderRadius:"10px",padding:"20px"},containerTitle:{flexDirection:"column"},table:{paddingTop:"20px"},flexDiv:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-start",alignItems:"flex-start",marginBottom:e.spacing(1)},serviceOrderDrawerArrow:{verticalAlign:"middle",marginLeft:e.spacing(1.5),marginRight:e.spacing(1.5),color:e.palette.grey[500]},secondaryPort:{color:e.palette.grey[600]}})));var w=a(499),N=a(37),R=a(19),T=a(99),x=a(221),k=a(248),A=a(91),I=a(43),D=a(108),M=a(111),L=a(1215),K=a(68),F=a(86),_=a(30),B=a(27);function U(e,t,a,o){var r,n,l,c,s,u,m,p,y,f,v,g,O,C,j,h,P,S,E,N,U,G;const{model:q}=t.lang(),{eta:V,etb:$,etd:z}=Object(L.a)(Object(b.a)(o,"portCall",null)||new K.a({}),t,a);return Object(R.a)({fieldOptions:[{disabled:!0,fieldName:"vesselName",label:q.vessel,overrideObject:new M.a(Object(b.a)(o,"portCall.ownedByVoyage.vessel")||{}),overrideType:d.a.vessel,typeaheadProps:{shouldPreload:!0},openObject:{permissions:[_.a.VesselGET],onOpen:B.a.openDrawer.bind(null,null!==(c=null===(l=null===(n=null===(r=o.portCall)||void 0===r?void 0:r.ownedByVoyage)||void 0===n?void 0:n.vessel)||void 0===l?void 0:l.key)&&void 0!==c?c:-1,i.a.vesselDrawer)}},{disabled:!0,fieldName:"referenceNo",label:q.voyage,overrideObject:new D.a(Object(b.a)(o,"portCall.ownedByVoyage.voyageHeader")||{}),overrideType:d.a.voyageheader,openObject:{permissions:[_.a.VoyageGET],onOpen:B.a.openDrawer.bind(null,null!==(m=null===(u=null===(s=o.portCall)||void 0===s?void 0:s.ownedByVoyage)||void 0===u?void 0:u.key)&&void 0!==m?m:-1,i.a.voyageDrawer)}},{disabled:!0,fieldName:"portName",label:q.port,overrideObject:new A.a(Object(b.a)(o,"portCall.port")||{}),overrideType:d.a.port,openObject:{permissions:[_.a.PortCallGET],onOpen:B.a.openDrawer.bind(null,null!==(y=null===(p=o.portCall)||void 0===p?void 0:p.key)&&void 0!==y?y:-1,i.a.portCallDrawer)}},{disabled:!0,fieldName:"reasonForCallDesc",label:q.reasonForCall,overrideObject:new x.a(Object(b.a)(o,"portCall.reasonForCall")||{}),overrideType:d.a.reasonforcall,typeaheadProps:{shouldPreload:!0}},{disabled:!0,fieldName:"terminalName",label:q.terminal,overrideObject:new k.a(Object(b.a)(o,"portCall.terminal")||{}),overrideType:d.a.terminal},{disabled:!0,fieldName:"businessPartnerName",label:q.agent,overrideObject:new T.a(Object(b.a)(o,"portCall.agent")||{}),typeaheadProps:{shouldPreload:!0,objectPaths:F.b.businessPartner,fields:F.a.businessPartner},openObject:{permissions:[_.a.BusinessPartnerGET],onOpen:B.a.openDrawer.bind(null,null!==(g=null===(v=null===(f=o.portCall)||void 0===f?void 0:f.agent)||void 0===v?void 0:v.key)&&void 0!==g?g:-1,i.a.businessPartnerDrawer)},overrideType:d.a.businesspartner},{disabled:!0,fieldName:"eventLogDate",label:q.eta,overrideComponent:V},{disabled:!0,fieldName:"eventLogDate",label:q.etb,overrideComponent:$},{disabled:!0,fieldName:"eventLogDate",label:q.etd,overrideComponent:z},{disabled:!0,fieldName:"userName",label:q.responsibleOperator,overrideObject:new I.a(Object(b.a)(o,"portCall.ownedByVoyage.voyageHeader.operator")||{}),overrideType:d.a.user,typeaheadProps:{shouldPreload:!0},openObject:{permissions:[_.a.UserGET],onOpen:B.a.openDrawer.bind(null,null!==(P=null===(h=null===(j=null===(C=null===(O=o.portCall)||void 0===O?void 0:O.ownedByVoyage)||void 0===C?void 0:C.voyageHeader)||void 0===j?void 0:j.operator)||void 0===h?void 0:h.key)&&void 0!==P?P:-1,i.a.userDrawer)}},{disabled:!0,fieldName:"userName",label:q.responsibleAccountant,overrideObject:new I.a(Object(b.a)(o,"portCall.ownedByVoyage.voyageHeader.accountantResponsible")||{}),overrideType:d.a.user,typeaheadProps:{shouldPreload:!0},openObject:{permissions:[_.a.UserGET],onOpen:B.a.openDrawer.bind(null,null!==(G=null===(U=null===(N=null===(E=null===(S=o.portCall)||void 0===S?void 0:S.ownedByVoyage)||void 0===E?void 0:E.voyageHeader)||void 0===N?void 0:N.accountantResponsible)||void 0===U?void 0:U.key)&&void 0!==G?G:-1,i.a.userDrawer)}}],updateResponseFields:w.a,object:o,type:d.a.serviceorder,userLocale:a,reactKeyPrefix:e})}var G=a(75),q=a(258),V=a.n(q),$=a(130);function z(e){var t,a,n;const{classes:l,i:c,serviceOrder:i,userLocale:s,reactKeyPrefix:d}=e,u=null!==(t=Object(b.a)(i,"portCall.port.portName"))&&void 0!==t?t:"",m=null!==(a=Object(b.a)(i,"portCall.ownedByVoyage.portCalls"))&&void 0!==a?a:[],p=null!==(n=Object(b.a)(i,"portCall.portCallSequence"))&&void 0!==n?n:0,y=null==m?void 0:m.filter(e=>p-1>=1&&e.portCallSequence===p-1),f=null==m?void 0:m.filter(e=>p+1<=m.length&&e.portCallSequence===p+1),v=Object(o.useMemo)(()=>{var e,t,a;return r.a.createElement("div",{className:l.flexDiv},0!==(null==y?void 0:y.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement($.a,{variant:"body1",className:l.secondaryPort}," ",Object(b.a)(y[0],"port.portName")),r.a.createElement($.a,{variant:"caption",align:"center",className:l.secondaryPort},null!==(e=Object(b.a)(y[0],"agent.businessPartnerName"))&&void 0!==e?e:"")),r.a.createElement(V.a,{className:l.serviceOrderDrawerArrow})):"",u&&r.a.createElement("div",null,r.a.createElement($.a,{variant:"body1"},u),r.a.createElement($.a,{variant:"caption",align:"center",className:l.secondaryPort},null!==(t=Object(b.a)(i,"portCall.agent.businessPartnerName"))&&void 0!==t?t:"")),0!==(null==f?void 0:f.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{className:l.serviceOrderDrawerArrow}),r.a.createElement("div",null,r.a.createElement($.a,{variant:"body1",className:l.secondaryPort},Object(b.a)(f[0],"port.portName")),r.a.createElement($.a,{variant:"caption",align:"center",className:l.secondaryPort},null!==(a=Object(b.a)(f[0],"agent.businessPartnerName"))&&void 0!==a?a:""))):"")},[l.flexDiv,l.seaPassageArrow,f,u,y]);return r.a.createElement("div",{className:l.container},r.a.createElement(G.a,{title:c.lang().common.portCallDetails}),u&&y&&f&&v,r.a.createElement(N.a,{reactKeyPrefix:d+"-fields",items:U(d,c,s,i||new j.a({})),breakpoints:{xs:6,sm:6,md:4,lg:4,xl:4}}))}var W=a(28),H=a(199),X=a(41);function Y(e,t,a,o,r,n){var l,c;const{common:i,model:s}=t.lang(),u=(null!==(c=null===(l=r.status)||void 0===l?void 0:l.statusTypeSequence)&&void 0!==c?c:0)>(n?n.statusTypeSequence:0),m=Object(H.a)(o,[{fieldName:"orderDate",label:i.orderDate,formControlProps:{required:!0}},{authorizationType:X.a.PERMISSION,executePermissions:[_.a.ServiceOrderPOST],fieldName:"businessPartner",label:s.supplier,disabled:u,formControlProps:{required:!0},noWriteProp:u?void 0:"disabled",readPermissions:[_.a.ServiceOrderGET],typeaheadProps:{shouldPreload:!0,objectPaths:F.b.businessPartner,fields:F.a.businessPartner},writePermissions:[_.a.ServiceOrderPOST]},{fieldName:"currency",label:i.orderCurrency,typeaheadProps:{objectPaths:["currencyCode"],shouldPreload:!0},formControlProps:{required:!0}},{fieldName:"amountVoyageCurrency",disabled:!0,label:s.costVoyageCurrency,InputProps:{endAdornment:Object(b.a)(r,"portCall.ownedByVoyage.voyageCurrency.currencyCode")},formControlProps:{required:!1}},{disabled:!0,fieldName:"amount",label:s.costOrderCurrency,InputProps:{endAdornment:Object(b.a)(r,"currency.currencyCode")},formControlProps:{required:!1}},{fieldName:"amountAdvanced",label:s.amountAdvanced,InputProps:{endAdornment:Object(b.a)(r,"amountAdvancedCurrency.currencyCode")},formControlProps:{required:!1}},{fieldName:"amountAdvancedCurrency",label:s.advanceCurrency,typeaheadProps:{shouldPreload:!0,objectPaths:["currencyCode"]},formControlProps:{required:!0}},{fieldName:"exchangeRate",label:s.exchangeRate,formControlProps:{required:!0},numberInputProps:{maskSettings:W.a.mask10}}]);return Object(R.a)({fieldOptions:m,updateResponseFields:w.a,object:r,type:d.a.serviceorder,userLocale:a,reactKeyPrefix:e})}var Q=a(32);function J(e){var t,a;const{classes:n,i:l,serviceOrder:c,userLocale:i,reactKeyPrefix:s}=e,u=null!==(t=Object(O.a)(Q.a))&&void 0!==t?t:new I.a({}),p=null!==(a=Object(O.a)(m.a.getAllTSModelsBuilt,d.a.statustype,{statusTypeSequence:"*",statusClass:{statusClassCode:"*"},statusTypeCode:"*"}))&&void 0!==a?a:[],y=Object(o.useCallback)(()=>{if(p.length>0)return p.find(e=>{var t;return"EST"===e.statusTypeCode&&"SO"===(null===(t=e.statusClass)||void 0===t?void 0:t.statusClassCode)?e:null})},[p]);return r.a.createElement("div",{className:n.container},r.a.createElement(G.a,{title:l.lang().common.orderDetails}),r.a.createElement(N.a,{reactKeyPrefix:"123",items:Y(s,l,i,u,c||new j.a({}),y()),breakpoints:{xs:6,sm:6,md:4,lg:4,xl:3}}))}a(93);var Z=a(67),ee=a(5),te=a(126),ae=a(100),oe=a.n(ae),re=a(14),ne=a(1294);const le=Object(te.a)((e,t)=>[{content:e.lang().common.service,contentType:ee.a.TEXT},{content:`${e.lang().common.estimated} (${t||e.lang().common.amount})`,contentType:ee.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:`${e.lang().common.revised} (${t||e.lang().common.amount})`,contentType:ee.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:`${e.lang().common.final} (${t||e.lang().common.amount})`,contentType:ee.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:e.lang().common.costOf,contentType:ee.a.TEXT},{content:e.lang().common.description,contentType:ee.a.TEXT}]);function ce(e){const{serviceOrder:t,i:a,userLocale:n,reactKeyPrefix:l}=e,[c,i]=Object(o.useState)(!1),[s,d]=Object(o.useState)(void 0),{common:u}=a.getLanguageFile(),m=Object(o.useMemo)(()=>t?t.serviceOrderLines.map(ie):[],[t]),p=Object(b.a)(t,"currency.currencyCode"),y=Object(o.useCallback)(()=>{i(!1),d(void 0)},[]),f=Object(o.useCallback)(()=>i(!0),[]),v=[{disabled:!1,icon:oe.a,iconButtonProps:{color:"primary","aria-label":u.create},label:u.create,onClick:f,reactKeyPrefix:l+"primary-actions"}],g=Object(o.useCallback)(e=>{if(t){const a=t.serviceOrderLines.find(t=>t.key===e);d(a),f()}},[f,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{data:m,headers:le(a,p),reactKeyPrefix:l+"service-order-lines-table",userLocale:n,title:a.lang().common.orderLines,pagination:{enabled:!0,rowsPerPage:[25]},primaryActions:v,onRowClick:g,customisation:{responsive:!0}}),r.a.createElement(ne.a,{reactKeyPrefix:l+"order-line-modal",showDialog:c,closeDialog:y,serviceOrder:t,serviceOrderLine:s,isEditing:!!s}))}function ie(e){const t=re.a.get(y.a.IInternationalization);return{content:[Object(b.a)(e,"serviceCode.description",""),e.amountEstimate,e.amountRevised,e.amountFinal,e.isCharterersCost?t.lang().model.charterer:e.isOwnersCost?t.lang().model.owner:"",Object(b.a)(e,"description","")],id:e.key}}var se=a(87),de=a(58);const ue=Object(se.a)(["cargo.commodity.commodityName","cargo.cargoQuantity","cargo.cargoReference","cargo.cargoPorts.reasonForCall.reasonForCall","cargo.cargoPorts.cargoPortSequence","cargo.cargoPorts.port.portName","cargo.charterer.businessPartnerName"]);function me(e){var t;const{i:a,serviceOrder:l,userLocale:c,reactKeyPrefix:p}=e,y=Object(n.g)(),b=Object(n.h)(),[f]=Object(s.a)([u.a.ITSModelActionsAsync]),{model:v,common:g}=a.getLanguageFile(),C=null!==(t=Object(O.a)(m.a.getTSModelsBuilt,d.a.cargoport,ue,"SERVICE_ORDER_CARGO_DETAILS_IDENTIFIER"))&&void 0!==t?t:[];Object(o.useEffect)(()=>{l&&l.portCall&&f.loadMultipleAction({type:d.a.cargoport,fields:ue,query:"filter=portCall(EQ)"+l.portCall.key,identifier:"SERVICE_ORDER_CARGO_DETAILS_IDENTIFIER",overwriteKeysOnLoad:!0})},[]);const j=Object(o.useMemo)(()=>[{content:v.cargoReference,contentType:ee.a.TEXT},{content:v.loadPort,contentType:ee.a.TEXT},{content:v.dischargePort,contentType:ee.a.TEXT},{content:v.charterer,contentType:ee.a.TEXT},{content:v.quantity+"("+g.mt+")",contentType:ee.a.NUMBER},{content:v.commodity,contentType:ee.a.TEXT}],[g,v]),h=Object(o.useMemo)(()=>{var e,t,a,o;const r=[];for(const n of C){const l=null==n?void 0:n.cargo,c=(null==l?void 0:l.commodity)?l.commodity.commodityName:"",i=(null==l?void 0:l.cargoReference)?l.cargoReference:"",s=(null==l?void 0:l.cargoPorts)?null===(t=null===(e=de.a.getFirstLoadCargoPort(null==l?void 0:l.cargoPorts))||void 0===e?void 0:e.port)||void 0===t?void 0:t.portName:"",d=(null==l?void 0:l.cargoPorts)?null===(o=null===(a=de.a.getLastDischargeCargoPort(null==l?void 0:l.cargoPorts))||void 0===a?void 0:a.port)||void 0===o?void 0:o.portName:"",u={content:[i,null!=s?s:"",null!=d?d:"",(null==l?void 0:l.charterer)?l.charterer.businessPartnerName:"",(null==l?void 0:l.cargoQuantity)?l.cargoQuantity:"",c],id:l?null==l?void 0:l.key:0};r.push(u)}return r},[C]),P=Object(o.useMemo)(()=>({responsive:!0}),[]),S=Object(o.useCallback)(e=>B.a.openDrawer(e,i.a.cargoDrawer,b,y),[y,b]);return r.a.createElement(Z.a,{headers:j,data:h,reactKeyPrefix:p,userLocale:c,title:v.cargo,customisation:P,onRowClick:S})}var pe=a(44),ye=a(20),be=a(1775),fe=a.n(be),ve=a(66),ge=a(95),Oe=a(412);const Ce="doc-common-components-drawer-service-order-drawer";function je(){var e;const[t,a,h,P]=Object(s.a)([y.a.IInternationalization,u.a.ISelectedTSModelActions,u.a.ITSModelActionsAsync,ye.a.IServiceOrderDrawerController]),S=Object(o.useRef)(null),{drawerId:N,tabId:R}=Object(n.i)(),T=Object(O.a)(m.a.getTSModelBuilt,d.a.serviceorder,N||0,w.a)||new j.a({}),x=Object(O.a)(p.a.getUserLocale)||l.f[0],k=E({}),{common:A,model:D}=t.getLanguageFile(),[M,L]=Object(o.useState)(!1),[K,F]=Object(o.useState)(!1),[_,B]=Object(o.useState)(""),[U,G]=Object(o.useState)(!1);Object(o.useEffect)(()=>{P.getDataloyInfo().then(e=>{var t;G(null!==(t=e.isAgencyNomination)&&void 0!==t&&t)})},[]);const q=()=>{if(T.businessPartner){if(T.businessPartner.user)return T.businessPartner.user.email;if(T.businessPartner.contactInfo[0])return T.businessPartner.contactInfo[0].email}},V=null!==(e=Object(O.a)(Q.a))&&void 0!==e?e:new I.a({}),$=Object(o.useCallback)(()=>{F(!1)},[]),W=Object(n.g)(),H=Object(n.h)();Object(o.useEffect)(()=>{N&&h.loadSingleAction({key:N,type:d.a.serviceorder,fields:w.a,callback:(e,t)=>{!e&&t&&a.setAction(d.a.serviceorder,t.key)}})},[N]);const X=Object(o.useCallback)(()=>{P.getNominationMailBody(T.key).then(e=>{if(e){const t=fe.a.sanitize(e,{FORCE_BODY:!0});B(t),F(!0)}})},[P,T.key]),Y=Object(o.useCallback)(()=>{if(T){const e=`${A.delete} ${D.serviceOrder}`,t=`${A.deleteConfirmation} ${D.serviceOrder}?`;Object(g.a)(e,t).then(e=>{e&&h.deleteAction({key:T.key,type:d.a.serviceorder}).then(()=>{var e,t;(null===(t=null===(e=T.portCall)||void 0===e?void 0:e.ownedByVoyage)||void 0===t?void 0:t.key)&&h.loadSingleAction({key:T.portCall.ownedByVoyage.key,type:d.a.voyage,fields:{variousCost:"*",portCost:"*"}});const a=Object(Oe.a)();if(a&&a.length>1&&a[0].id!==T.key){const e=a.pop();if(e&&e.id===T.key){const t=()=>W.push(H.pathname.replace(`/${e.hash}/${e.id}`,"")),a=Object(Oe.a)().find(e=>"voyage-drawer"===e.hash);if(a){const e=a.id;e&&h.loadSingleAction({key:e,type:d.a.voyage,fields:{variousCost:"*",handlingCost:"*",portCost:"*",partOfSchedule:{variousCost:"*",handlingCost:"*",portCostCurrency:"*"}}}).then(()=>t())}else t()}}else W&&W.goBack()})})}},[T,A.delete,A.deleteConfirmation,D.serviceOrder,h,W,H.pathname]),Z=Object(o.useMemo)(()=>[{text:`${A.edit} ${D.daReference}`,onClick:()=>L(!0),disabled:!1},{disabled:!1,onClick:Y,text:A.delete}],[A.delete,A.edit,D.daReference,Y]),ee=Object(o.useCallback)(()=>{L(!1)},[]),te=Object(o.useCallback)(()=>{var e;T&&h.updateSingleAction({callback:()=>{$()},data:{key:T.key,status:null===(e=S.current)||void 0===e?void 0:e.key},fields:w.a,key:T.key,type:d.a.serviceorder})},[T,$,h]),ae=Object(o.useCallback)(e=>{S.current=e,"ESA"===e.statusTypeCode&&U?X():te()},[X,U,te]),oe=Object(o.useMemo)(()=>Object(ve.c)([ge.a.AGENCY],V),[V]),re=Object(o.useMemo)(()=>T?[{id:"main-details",label:A.mainDetails,content:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{reactKeyPrefix:Ce+"main-details",i:t,serviceOrder:T,userLocale:x,classes:k}),r.a.createElement(J,{reactKeyPrefix:Ce+"editable-details",i:t,serviceOrder:T,userLocale:x,classes:k}),r.a.createElement(ce,{reactKeyPrefix:Ce+"order-lines",i:t,serviceOrder:T,userLocale:x,classes:k}))},{id:"cargo",content:()=>r.a.createElement(me,{reactKeyPrefix:Ce+"-cargo-table",i:t,serviceOrder:T,userLocale:x,classes:k}),label:D.cargo,disabled:oe}]:[],[T,A.mainDetails,D.cargo,oe,t,x,k]),ne=Object(o.useCallback)(e=>{!function(e,t,a){t&&a.updateSingleAction({key:t.key,type:d.a.serviceorder,fields:w.a,data:{externalReferenceNo:e}})}(e,T,h)},[T,h]),le=T&&T.externalReferenceNo?T.externalReferenceNo:`<${A.noReference}>`;return T?r.a.createElement(c.a,{reactKeyPrefix:Ce,status:{statusObject:T.status,type:C.b.TRANSITION,onClick:ae},drawerKey:Number(N)||0,drawerRoute:i.a.serviceOrderDrawer,key:i.a.serviceOrderDrawer+N,subject:D.serviceOrder,subjectName:le,subjectLoaded:!!T,tsModelType:d.a.serviceorder,secondaryActions:Z,reloadParentDrawer:()=>{},tabs:re,tabId:R},r.a.createElement(f.a,{reactKeyPrefix:Ce+"edit-order-reference-modal",title:`${A.edit} ${D.daReference}`,value:Object(b.a)(T,"externalReferenceNo"),showModal:M,onClose:ee,onConfirm:ne,required:!0,characterRequirements:{maxLength:v.a.serviceorder.externalReferenceNo.limit}}),K&&r.a.createElement(pe.a,{reactKeyPrefix:Ce+"mail-view-modal",open:K,title:D.agencyNomination,disableConfirmBtn:null===q(),confirmBtnName:A.send,onConfirm:te,cancelBtnName:A.cancel,onCloseModal:$,fullWidth:!0,maxWidth:"md"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:_}}))):null}},1905:function(e,t,a){"use strict";a.d(t,"a",(function(){return H}));a(10),a(11);var o=a(0),r=a.n(o),n=a(97),l=a(486),c=a(6),i=a(23),s=a(1),d=a(21),u=a(42),m=a(35),p=a(3),y=a(82),b=a(15),f=a(20),v=a(37),g=a(12),O=a(75),C=a(71),j=(a(93),a(57)),h=a(19),P=a(154),S=a(70);const E=(e,t,a,o)=>{const{common:r,model:n}=t.getLanguageFile(),c=[{fieldName:"vatDesc",label:r.description,formControlProps:{required:!0}},{fieldName:"vatCode",label:r.code,formControlProps:{required:!0},textInputProps:{characterRequirements:{maxLength:P.a.vat.vatCode.limit},letterCase:j.a.UPPERCASE,validation:S.b.VatCode}},{fieldName:"vatCategory",label:r.categoryDesc,formControlProps:{required:!0},typeaheadProps:{objectPaths:["vatCategoryDesc"],reactKeyPrefix:e+"-vat-category-desc"}},{fieldName:"glAccount",label:r.glAccount},{fieldName:"country",label:n.country,formControlProps:{required:!0},typeaheadProps:{shouldPreload:!0,isClearable:!1,objectPaths:["countryName"]}}];return Object(h.a)({fieldOptions:c,updateResponseFields:l.a,object:o,type:s.a.vat,userLocale:a,reactKeyPrefix:e})},w=({reactKeyPrefix:e,i:t,userLocale:a,tax:o})=>{const{common:n}=t.getLanguageFile();return r.a.createElement(C.a,null,r.a.createElement(O.a,{title:n.mainDetails}),r.a.createElement(v.a,{reactKeyPrefix:e+"-fields",items:E(e,t,a,o),breakpoints:g.h}))};var N=a(67),R=a(5),T=a(40),x=a(105);const[k]=Object(c.a)([p.a.IInternationalization]),{common:A,model:I}=k.getLanguageFile(),D={getHeaders:[{content:A.validFrom,contentType:R.a.DATE,dateTimeFormatOptions:m.a.shortLocalizedDate},{content:I.rate,contentType:R.a.NUMBER,numberFormatOptions:{minDecimals:2,maxDecimals:2}},{content:A.status,contentType:R.a.ELEMENT}],getRow:e=>{const{key:t,fromDate:a,vatRate:o,isObjectActive:n}=e,l=n?null:A.disabled,c=l?r.a.createElement(T.a,{label:l,priority:x.a.getStatusPriority("",s.a.vatrate)}):null;return{content:[null!=a?a:new Date,null!=o?o:0,{rawValue:l,content:c}],id:t}}};var M=a(100),L=a.n(M),K=a(51),F=a(28),_=a(429);function B(e,t,a,o,r){const{common:n,model:l}=r.getLanguageFile(),c=[{fieldName:"fromDate",label:n.validFrom,formControlProps:{required:!0},onUpdateOverride:e=>{a("fromDate",Object(_.a)(e))}},{fieldName:"vatRate",label:l.rate,formControlProps:{required:!1},onUpdateOverride:a.bind(null,"vatRate"),numberInputProps:{maskSettings:F.a.mask2}}];t.key&&c.push({fieldName:"isObjectActive",label:n.enabled,formControlProps:{required:!1},onUpdateOverride:a.bind(null,"isObjectActive")});const i={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:c,object:t,type:s.a.vatrate,userLocale:o};return Object(h.a)(i)}const U=({reactKeyPrefix:e,i:t,userLocale:a,tax:n,authorized:c,onUpdate:i})=>{const{common:d}=t.getLanguageFile(),[u,m]=Object(o.useState)(!1),[p,y]=Object(o.useState)(),b=Object(o.useCallback)(()=>{m(!u)},[u]),f=Object(o.useCallback)(e=>!e.fromDate,[]),v=Object(o.useCallback)(e=>{const t=n.vatRates.find(t=>t.key===e);t&&(y(t),b())},[b,n.vatRates]),O=Object(o.useMemo)(()=>D.getHeaders,[]),C=Object(o.useMemo)(()=>n.vatRates.map(e=>D.getRow(e)),[n.vatRates]),j=[{disabled:!c,icon:L.a,iconButtonProps:{color:"primary","aria-label":d.create},label:d.create,onClick:()=>{b()},reactKeyPrefix:e+"-create-button-action"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{title:d.rates,userLocale:a,headers:O,data:C,reactKeyPrefix:e+"-rates-table",primaryActions:j,onRowClick:c?v:void 0}),r.a.createElement(K.a,{modalProps:{reactKeyPrefix:e+"-create-edit-modal",maxWidth:"xs",open:u,title:d.updateCreateTaxRate(!!(null==p?void 0:p.key)),confirmBtnName:(null==p?void 0:p.key)?d.save:d.create,onCloseModal:()=>{y(void 0),b()}},getColSpec:B,isConfirmDisabled:f,updateProps:{shouldKeepValues:!0,objPropToUpdate:"vatRates",objToUpdate:n,fields:{vatRates:l.b},objToUpdateType:s.a.vat,shouldUseArray:!0,type:s.a.vatrate,callback:i},selectedObject:p,allowDelete:!!(null==p?void 0:p.key)&&!(null==p?void 0:p.isObjectActive),breakpoints:g.e,stopDeleteSinglePropagation:!0}))},G=e=>{const{i:t,reactKeyPrefix:a,userLocale:o,tax:n,authorized:l,onUpdate:c}=e;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{i:t,reactKeyPrefix:a+"-tax-details-section",tax:n,userLocale:o}),r.a.createElement(U,{i:t,reactKeyPrefix:a+"-tax-rates-section",tax:n,userLocale:o,authorized:l,onUpdate:c})):r.a.createElement(r.a.Fragment,null)};var q=a(150),V=a(66),$=a(30),z=a(32),W=a(43);const H=()=>{var e,t,a;const[v,g]=Object(c.a)([p.a.IInternationalization,f.a.ITaxController]),{model:O,common:C}=v.getLanguageFile(),{drawerId:j,tabId:h}=Object(n.i)(),P=null!==(e=Object(i.a)(u.a.getUserLocale))&&void 0!==e?e:m.f[0],S=null!==(t=Object(i.a)(z.a))&&void 0!==t?t:new W.a({}),E=Object(V.a)([$.a.VatPUT],S);Object(o.useEffect)(()=>{j&&g.loadTaxes(j)},[g,j]);const w=Object(i.a)(d.a.getTSModelBuilt,s.a.vat,null!=j?j:0,l.a),N=Object(o.useCallback)(()=>{w&&g.loadTaxRates(w.key)},[g,w]),R=Object(o.useMemo)(()=>w?[{id:"overview",label:C.overview,content:()=>r.a.createElement(G,{i:v,reactKeyPrefix:"doc-common-components-drawer-taxes-drawer-overview",userLocale:P,tax:w,authorized:E,onUpdate:N})}]:[],[E,C.overview,v,N,w,P]),T=!!(null==w?void 0:w.isObjectActive),x=Object(o.useMemo)(()=>j?Object(q.a)({isActive:T,key:j,type:s.a.vat,deleteTitle:O.tax}):[],[j,T,O.tax]);return j?r.a.createElement(y.a,{key:b.a.taxDrawer+j,reactKeyPrefix:"doc-common-components-drawer-taxes-drawer",subject:O.tax,subjectName:null!==(a=null==w?void 0:w.vatDesc)&&void 0!==a?a:"",subjectLoaded:!!w,drawerRoute:b.a.taxDrawer,drawerKey:Number(j),tabs:R,tabId:h,tsModelType:s.a.vat,secondaryActions:x}):r.a.createElement(r.a.Fragment,null)}},1914:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));a(59),a(109),a(10),a(11);var o=a(149),r=a.n(o),n=a(371),l=a.n(n),c=a(274),i=a.n(c),s=a(0),d=a.n(s),u=a(97),m=a(944),p=a(208),y=a(44),b=a(6),f=a(47),v=a(1),g=a(33),O=a(21),C=a(1774),j=a(42),h=a(7),P=a(310),S=a(3),E=a(82),w=a(15),N=a(209),R=a(2537),T=a(1392),x=a(260);const k=e=>{var t;const{reactKeyPrefix:a,scenario:o,userLocale:r}=e,[n]=Object(b.a)([S.a.IInternationalization]),{model:l,common:c}=n.getLanguageFile(),i=r.isoCode,s=x.a.getCurrencyCode(),u=o.voyages.length,m=u?Object(R.a)(o.voyages,"tcResultDay"):0,p=u?Object(R.a)(o.voyages,"daysTotal"):0,y=n.formatNumber(null!==(t=Object(T.a)(o.voyages,"daysTotal"))&&void 0!==t?t:0,{maxDecimals:1,locale:i}),f=[{primaryTitle:{text:c.averageTCE},primaryText:{text:`${n.formatNumber(m,{maxDecimals:0,locale:i})} ${s}`,tooltip:c.averageTCE}},{primaryTitle:{text:c.averageDays},primaryText:{text:`${n.formatNumber(p,{maxDecimals:1,locale:i})} ${c.daysLowercase}`,tooltip:c.averageDays}},{primaryTitle:{text:l.daysTotal},primaryText:{text:""+y,tooltip:l.daysTotal}}];return d.a.createElement(N.a,{data:f,reactKeyPrefix:a,breakpoints:{xs:12,sm:4,md:4,lg:4,xl:4}})};var A=a(37),I=a(75),D=a(71),M=a(12);const L=e=>{const{reactKeyPrefix:t,scenario:a}=e,[o]=Object(b.a)([S.a.IInternationalization]),r=Object(s.useMemo)(()=>function(e,t){const{model:a,common:o,cargoes:r,voyages:n}=t.getLanguageFile(),{isBudget:l,voyages:c,cargos:i}=e,s=c.filter(e=>{var t;return null===(t=e.voyageHeader)||void 0===t?void 0:t.isTemplate}).length,d=c.length-s,u=i.filter(e=>!(null==e?void 0:e.isTemplate)).length;return[{label:a.budget,value:l?o.yes:o.no},{label:n.numberOfVoyages,value:""+d},{label:n.numberOfTemplateVoyages,value:""+s},{label:r.numberOfCargoes,value:""+u}]}(a,o),[o,a]);return d.a.createElement(D.a,null,d.a.createElement(I.a,{title:o.lang().common.overview}),d.a.createElement(A.a,{items:r,reactKeyPrefix:t+"-list",breakpoints:M.h}))};var K=a(214);const F=d.a.memo(e=>{const{reactKeyPrefix:t,scenario:a,userLocale:o}=e;return d.a.createElement(d.a.Fragment,null,d.a.createElement(k,{reactKeyPrefix:t+"-tile-group",scenario:a,userLocale:o}),d.a.createElement(K.a,{container:!0,spacing:2},d.a.createElement(K.a,{item:!0,md:12,xs:12},d.a.createElement(L,{reactKeyPrefix:t+"-overview",scenario:a}))))});a(118);var _=a(100),B=a.n(_),U=a(5),G=a(67),q=a(92),V=a(123),$=a(102),z=a(20);function W({reactKeyPrefix:e,userLocale:t,scenario:a}){const[o,r]=Object(b.a)([S.a.IInternationalization,z.a.IScenarioDrawerController]),{common:n,menu:l,model:c,vessel:i}=o.getLanguageFile(),[u,m]=Object(s.useState)(!1),[p,f]=Object(s.useState)(a.vessels),g=[{content:i.vesselName,contentType:U.a.TEXT},{content:c.vesselType,contentType:U.a.TEXT},{content:c.dwtSummer,contentType:U.a.TEXT}],O=Object(s.useCallback)(()=>m(!u),[u]),C=Object(s.useCallback)(()=>{if(O(),p){const e={vessels:p.map(e=>({key:e.key}))};r.dispatchUpdateScenario(a.key,e)}},[r,O,a.key,p]),j=Object(s.useCallback)(e=>{f(e)},[]),h=[{reactKeyPrefix:e+"-primary-actions",disabled:!1,icon:B.a,iconButtonProps:{color:"primary","aria-label":`${n.add} ${c.vessel}`},label:n.add,onClick:O}],P=Object(s.useMemo)(()=>{if(a&&a.vessels.length>0){const e=(e,t)=>e.vesselName.localeCompare(t.vesselName);return a.vessels.sort(e).map(e=>{var t,a,o,r;const n=V.a.formatNumber(e.dwtSummer,q.b.format0),l=null!==(a=null===(t=null==e?void 0:e.vesselType)||void 0===t?void 0:t.vesselTypeDesc)&&void 0!==a?a:"",c=`${n} ${null!==(r=null===(o=e.dwtMeasurement)||void 0===o?void 0:o.measurementCode)&&void 0!==r?r:""}`;return{content:[e.vesselName,l,c],id:e.key}})}return[]},[a]);return d.a.createElement(d.a.Fragment,null,d.a.createElement(G.a,{title:l.vessels,headers:g,data:P,reactKeyPrefix:e+"-vessels-table",userLocale:t,customisation:{responsive:!0,disableSorting:!0},primaryActions:h}),u&&d.a.createElement(y.a,{title:`${n.select} ${l.vessels}`,reactKeyPrefix:e+"-add-vessels-modal",onCloseModal:O,open:u,onConfirm:C,maxWidth:"sm",fullWidth:!0},d.a.createElement($.b,{label:c.vessel,reactKeyPrefix:e+"-add-vessels-modal-typeahead",type:v.a.vessel,objectPaths:["vesselName"],shouldPreload:!0,onChange:j,isMulti:!0,overrideDefaultSelectedOptions:!0,defaultSelectedOptions:p,query:"filter=vesselCodes.isSchedulable(EQ)true"})))}var H=a(1257),X=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function l(e){try{i(o.next(e))}catch(e){n(e)}}function c(e){try{i(o.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,c)}i((o=o.apply(e,t||[])).next())}))};const Y="doc-common-components-drawer-scenario-drawer";class Q extends s.PureComponent{constructor(e){super(e),this.state=Object.assign(Object.assign({},e.state),{scenarioId:null,showDeleteModal:!1,showScenarioNameModal:!1,showCopyScenarioModal:!1}),this.loadScenario=this.loadScenario.bind(this),this.getScenarioId=this.getScenarioId.bind(this),this.onChangeScenarioName=this.onChangeScenarioName.bind(this),this.deleteScenario=this.deleteScenario.bind(this),this.onClickOpenScenario=this.onClickOpenScenario.bind(this),this.showDeleteModal=this.showDeleteModal.bind(this),this.closeDeleteModal=this.closeDeleteModal.bind(this),this.toggleScenarioNameModal=this.toggleScenarioNameModal.bind(this),this.toggleCopyScenarioModal=this.toggleCopyScenarioModal.bind(this)}UNSAFE_componentWillMount(){this.getScenarioId(this.props.match)}UNSAFE_componentWillReceiveProps(e){this.getScenarioId(e.match),this.setState(Object.assign({},e.state))}loadScenario(){const{scenarioId:e}=this.state,[t]=this.props.deps;e&&t.dispatchLoadScenario(e,m.a)}getScenarioId(e){const{dispatchAction:t,deps:[,,,,a]}=this.props;if(e){const o=e.params.drawerId?e.params.drawerId:"0",r=parseInt(o,10);r!==this.state.scenarioId&&(t(a.setAction(r)),this.setState({scenarioId:r},()=>this.loadScenario()))}}onChangeScenarioName(e){const{scenario:t}=this.state,[a]=this.props.deps;t&&a.dispatchUpdateScenario(t.key,{scenarioName:e},{scenarioName:"*"})}showDeleteModal(){this.setState({showDeleteModal:!0})}closeDeleteModal(){this.setState({showDeleteModal:!1})}deleteScenario(){return X(this,void 0,void 0,(function*(){const{scenario:e}=this.state,[t]=this.props.deps;e&&(yield t.deleteScenario(e)),this.props.history.push(g.a.scenarios.url)}))}onClickOpenScenario(){const{scenario:e}=this.state,{dispatchAction:t,deps:[,,a,o]}=this.props;(null==e?void 0:e.isBudget)?(t(a.setAction(e.key)),this.props.history.push(g.a.budgets.url)):(null==e?void 0:e.key)&&(o.setAction(v.a.scenario,e.key),this.props.history.push(g.a.fleetPlans.url))}getSecondaryActions(){const[,e]=this.props.deps,{fas:t}=e.getLanguageFile();return[{disabled:P.a.isMasterScenario(this.state.scenario),onClick:this.toggleScenarioNameModal,text:t.editScenarioName}]}toggleScenarioNameModal(){const{scenario:e}=this.state;e&&this.setState({showScenarioNameModal:!this.state.showScenarioNameModal})}toggleCopyScenarioModal(){const{scenario:e}=this.state;e&&this.setState({showCopyScenarioModal:!this.state.showCopyScenarioModal})}getPrimaryActions(){const{scenario:e}=this.state,[,t]=this.props.deps,{common:a,fas:o}=t.getLanguageFile(),n=P.a.isMasterScenario(e);return[{disabled:!1,icon:l.a,label:(null==e?void 0:e.isBudget)?o.viewInBudgets:o.viewInBoard,onClick:this.onClickOpenScenario},{disabled:n,icon:r.a,label:a.delete,onClick:this.showDeleteModal},{disabled:!1,icon:i.a,label:o.copyScenario,onClick:this.toggleCopyScenarioModal}]}render(){const[,e]=this.props.deps,{common:t,fas:a,menu:o,model:r}=e.getLanguageFile(),{scenario:n,scenarioId:l,showDeleteModal:c,showScenarioNameModal:i,userLocale:d,showCopyScenarioModal:u}=this.state;return l&&n?s.createElement(s.Fragment,null,s.createElement(E.a,{reactKeyPrefix:Y,drawerKey:l,drawerRoute:w.a.scenarioDrawer,key:w.a.scenarioDrawer+l,primaryActions:this.getPrimaryActions(),secondaryActions:this.getSecondaryActions(),subject:r.scenario,subjectLoaded:!!(null==n?void 0:n.key),subjectName:n.scenarioName,tsModelType:v.a.scenario,reloadParentDrawer:()=>{},tabs:[{id:"main-details",content:()=>s.createElement(F,{scenario:n,reactKeyPrefix:Y+"-main-details",userLocale:d}),label:t.mainDetails},{id:"vessels",content:()=>s.createElement(W,{userLocale:d,scenario:n,reactKeyPrefix:Y+"-vessels"}),label:o.vessels}],tabId:this.props.match.params.tabId}),c&&s.createElement(y.a,{reactKeyPrefix:Y+"-delete-modal",fullWidth:!0,maxWidth:"xs",onCloseModal:this.closeDeleteModal,onConfirm:this.deleteScenario,open:c,title:t.delete},t.deleteConfirmation+r.scenario+"?"),i&&s.createElement(p.a,{reactKeyPrefix:Y+"-edit-name-modal",title:a.editScenarioName,value:n.scenarioName,showModal:i,onClose:this.toggleScenarioNameModal,onConfirm:this.onChangeScenarioName,required:!0}),u&&s.createElement(H.a,{reactKeyPrefix:Y+"-copy-scenario-modal",scenarioToCopy:n,onClose:this.toggleCopyScenarioModal,userLocale:d})):null}}const J=Object(f.a)(e=>{const t=C.a.get(e);let a=null;t&&(a=O.a.getTSModelBuilt(e,v.a.scenario,t,m.a));return{scenario:a,userLocale:j.a.getUserLocale(e)}},Object(b.b)([z.a.IScenarioDrawerController,S.a.IInternationalization,h.a.ISelectedBudgetScenarioActions,h.a.ISelectedTSModelActions,h.a.ISelectedScenarioDrawerActions],Object(u.k)(Q)))},1947:function(e,t,a){"use strict";a.d(t,"a",(function(){return ne}));a(10),a(11);var o=a(0),r=a.n(o),n=a(274),l=a.n(n),c=a(97),i=a(35),s=a(82),d=a(15),u=a(6),m=a(23),p=a(1),y=a(32),b=a(7),f=a(21),v=a(42),g=a(3),O=a(94),C=a(48),j=a(43),h=a(392),P=a(515),S=(a(118),a(213)),E=a(187),w=a(19),N=a(12),R=a(37),T=a(245),x=a(323),k=a(535),A=a(132),I=a(16),D=a(555),M=a(1222);const L=Object(S.a)(e=>Object(E.a)({filterComponent:{display:"flex",WebkitFlex:"none",alignItems:"center",marginBottom:e.spacing(1),"& > *:not(:last-child)":{marginRight:e.spacing(1)},overflowX:"scroll",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{width:0,height:0}},container:{backgroundColor:Object(T.a)(e.palette.primary.main,.05),borderRadius:"10px",padding:"20px"}})),K=({securityGroup:e,user:t,userLocale:a,reactKeyPrefix:n,entityRelease:l})=>{var c,i,s;const[d,y]=Object(u.a)([g.a.IInternationalization,b.a.ITSModelActionsAsync]),v=L({}),j=null!==(c=Object(m.a)(O.a.getFiltersByGroupCode,"CREATE_SECURITY_GROUP_ROLES_FILTER"))&&void 0!==c?c:[],P=null!==(i=Object(m.a)(O.a.getFiltersByGroupCode,"CREATE_SECURITY_GROUP_ROLES_FILTER"))&&void 0!==i?i:[],S=null!==(s=Object(m.a)(f.a.getTSModelsBuilt,p.a.securityrole,h.b))&&void 0!==s?s:[],[E,T]=Object(o.useState)([]),[K,F]=Object(o.useState)(!1),{model:_,common:B}=d.getLanguageFile(),U=Object(o.useMemo)(()=>window.location.hostname.includes(C.a.DATA_REPO_URL,0),[]),G=Object(o.useMemo)(()=>"DATALOY"===t.userCode,[t.userCode]);Object(o.useEffect)(()=>{y.loadMultipleAction({fields:h.b,type:p.a.securityrole})},[y]),Object(o.useEffect)(()=>{U?U&&l&&y.loadMultipleAction({fields:D.c.fields,type:p.a.securityrole,query:"filter=entityRelease.releaseNumber(EQ)"+(null==l?void 0:l.releaseNumber),sorts:[{field:"roleName",groupCode:"SECURITY_GROUP_DRAWER_ROLES_SORT_CODE",operator:I.b.ASC,queryParamName:"roleName"}],callback:(e,t)=>{T(t)}}):T(S)},[l]),Object(o.useEffect)(()=>{setTimeout(()=>F(!0))});const q=Object(o.useMemo)(()=>e.securityRoles.map(e=>e.key),[e.securityRoles]),V=Object(o.useMemo)(()=>U?Object(A.e)(E||[],j).sort(D.d):Object(A.e)(S||[],j).sort(D.d),[U,S,E,j]),$=Object(o.useMemo)(()=>V?Object(D.a)(V):[],[V]),z=Object(o.useMemo)(()=>G?[{fieldName:"isInternal",label:_.internal},{fieldName:"isProtected",label:_.proctected}]:[],[G,_.internal,_.proctected]),W=Object(o.useMemo)(()=>Object(w.a)({fieldOptions:z,object:e,parentData:{key:e.key,type:p.a.securitygroup},type:p.a.securitygroup,updateResponseFields:h.a,userLocale:a,reactKeyPrefix:n}),[z,e,a,n]),H=r.a.createElement(R.a,{reactKeyPrefix:n+"horizontal_list",key:n+"horizontal_list",items:W,breakpoints:N.a}),X=Object(o.useCallback)(t=>{e&&0!==e.key&&y.updateSingleAction({data:Object(D.b)(t),fields:h.a,key:e.key,type:p.a.securitygroup})},[e,y]),Y=Object(o.useMemo)(()=>{const{isProtected:t,isInternal:a}=e;return!G&&(t||a)},[G,e]),Q=Object(o.useMemo)(()=>r.a.createElement("div",{className:v.filterComponent},r.a.createElement(M.a,{reactKeyPrefix:n+"quick-filters",filters:P,groupCode:"CREATE_SECURITY_GROUP_ROLES_FILTER"})),[v.filterComponent,n,P]);return r.a.createElement("div",null,Q,G?H:null,K?r.a.createElement(k.a,{reactKeyPrefix:n+"tree",data:$,selected:q,amount:V?V.length:0,callback:X,disabled:Y}):r.a.createElement(x.a,{p:2,textAlign:"center"},B.loading))};var F=a(112),_=a(208),B=a(70),U=a(46),G=a(57),q=a(44),V=a(27);const $=r.a.memo((function(e){const{showDialog:t,securityGroup:a,onClose:n,reactKeyPrefix:l}=e,[i,s]=Object(u.a)([g.a.IInternationalization,b.a.ITSModelActions]),m=Object(c.g)(),y=Object(c.h)(),{common:f,model:v}=i.getLanguageFile(),[O,C]=Object(o.useState)(a.securityGroupName),[j,h]=Object(o.useState)(!1),[P,S]=Object(o.useState)(!1);Object(o.useEffect)(()=>{h(O.toLowerCase()!==a.securityGroupName.toLowerCase())},[O,a.securityGroupName]);const E=Object(o.useCallback)(()=>{s.copySingleAction({callback:(e,t)=>{null!==t&&(V.a.openDrawer(t.key,d.a.securityGroupDrawer,y,m),U.a.next()),n()},data:{securityGroupName:O},key:a.key,type:p.a.securitygroup})},[s,O,a.key,n,y,m]);return r.a.createElement(q.a,{reactKeyPrefix:l,open:t,onCloseModal:n,maxWidth:"sm",fullWidth:!0,title:f.copySecurityGroup,onConfirm:E,confirmBtnName:f.create,disableConfirmBtn:!j||!P,fullscreenOnMobile:!0},r.a.createElement(G.b,{reactKeyPrefix:l+"text-input",onKeyDown:e=>{"Enter"===e.key&&j&&P&&E()},label:v.securityGroupName,required:!0,autoFocus:!0,error:void 0,onInputChange:(e,t)=>{C(e),S(t)},validation:B.b.SecurityGroupName}))}));var z=a(61),W=a(5),H=a(14);const X={company:{companyName:"*"},contactInfo:{mobileNo:"*",phoneNo:"*"},email:"*",isObjectActive:"*",lastLoginDate:"*",office:{officeName:"*"},userCode:"*",userName:"*"},Y=H.a.get(g.a.IInternationalization),{model:Q}=Y.getLanguageFile(),J=e=>{var t,a,o,r;return[e.userCode,e.userName,e.email,e.company?e.company.companyName:"",e.office?e.office.officeName:"",null!==(a=null===(t=e.contactInfo[0])||void 0===t?void 0:t.phoneNo)&&void 0!==a?a:"",null!==(r=null===(o=e.contactInfo[0])||void 0===o?void 0:o.mobileNo)&&void 0!==r?r:"",e.lastLoginDate]},Z=[{content:Q.userCode,contentType:W.a.TEXT},{content:Q.userName,contentType:W.a.TEXT},{content:Q.email,contentType:W.a.TEXT},{content:Q.companyName,contentType:W.a.TEXT},{content:Q.officeName,contentType:W.a.TEXT},{content:Q.phoneNo,contentType:W.a.TEXT},{content:Q.mobileNo,contentType:W.a.TEXT},{content:Q.lastLoginDate,contentType:W.a.DATE,dateTimeFormatOptions:i.a.shortLocalizedDate}],ee=[{field:"User Name",groupCode:"USER_LIST_SORT_GROUP_CODE",operator:I.b.ASC,queryParamName:"userName"}],te=e=>{const{securityGroup:t,reactKeyPrefix:a}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{fields:X,listId:"SECURITY_GROUP_USER_LIST_ID",reactKeyPrefix:a+"-user-list",tsmodelType:p.a.user,getColSpec:J,queryStr:"filter=securityGroups(EQ)"+t.key,tableHeaders:Z,defaultSorts:ee}))};var ae=a(66),oe=a(95);const re="doc-common-components-drawer-security-group-drawer";function ne(){var e,t;const[a,n]=Object(u.a)([g.a.IInternationalization,b.a.ITSModelActions]),{model:S,common:E,menu:w}=a.getLanguageFile(),{drawerId:N,tabId:R}=Object(c.i)(),T=Object(o.useMemo)(()=>window.location.hostname.includes(C.a.DATA_REPO_URL,0),[]),x=Object(m.a)(f.a.getTSModelBuilt,p.a.securitygroup,null!=N?N:0,h.a)||new P.a({}),[k,A]=Object(o.useState)(null),I=null!==(e=Object(m.a)(O.a.getFiltersByGroupCode,F.d))&&void 0!==e?e:[];Object(o.useEffect)(()=>{T&&A(()=>{const e=I.find(e=>"releaseNumber"===e.field);if(e){const[t]=e.selectedObj;if(t!==k)return t}return null})},[]);const D=Object(m.a)(v.a.getUserLocale)||i.f[0],M=null!==(t=Object(m.a)(y.a))&&void 0!==t?t:new j.a({}),L=Object(c.g)(),[U,G]=Object(o.useState)(!1),[V,z]=Object(o.useState)(!1),[W,H]=Object(o.useState)(!1),X=Object(ae.c)([oe.a.ADMINISTRATOR,oe.a.USER_PROVISIONING],M);Object(o.useEffect)(()=>{N&&0!==parseInt(N)&&n.loadSingleAction({fields:h.a,key:N,type:p.a.securitygroup})},[N,n]);const Y=Object(o.useMemo)(()=>x?[{id:"overview",content:()=>r.a.createElement(K,{reactKeyPrefix:re+"group-overview",securityGroup:x,userLocale:D,user:M,entityRelease:null!=k?k:void 0}),label:E.overview},{id:"users",content:()=>r.a.createElement(te,{reactKeyPrefix:re,securityGroup:x}),label:w.users}]:[],[x,E.overview,w.users,D,M,k]),Q=Object(o.useCallback)(()=>{G(!0)},[]),J=Object(o.useCallback)(()=>{G(!1)},[]),Z=Object(o.useCallback)(e=>{x&&n.updateSingleAction({data:{securityGroupName:e},fields:h.a,key:x.key,type:p.a.securitygroup})},[x,n]),ee=Object(o.useCallback)(()=>{H(!0)},[]),ne=Object(o.useCallback)(()=>{H(!1)},[]),le=Object(o.useCallback)(()=>{x&&n.deleteAction({key:x.key,type:p.a.securitygroup,callback:()=>{L&&L.goBack()}})},[L,x,n]),ce=Object(o.useMemo)(()=>{const e=!T&&(x.isInternal||x.isProtected)||!T&&!x.isInternal&&!x.isProtected&&!X;return[{text:S.editSecurityGroupName,onClick:Q,disabled:e},{text:S.deleteSecurityGroup,onClick:ee,disabled:e}]},[S.editSecurityGroupName,S.deleteSecurityGroup,Q,T,ee,X,x]),ie=Object(o.useCallback)(()=>{z(!V)},[V]),se=[{disabled:!1,label:E.copy,icon:l.a,onClick:ie}];return x?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{reactKeyPrefix:re,secondaryActions:ce,primaryActions:se,drawerKey:Number(x.key)||0,drawerRoute:d.a.securityGroupDrawer,key:d.a.securityGroupDrawer+N,subject:S.securityGroup,subjectLoaded:!!x,subjectName:x?x.securityGroupName:"",tsModelType:p.a.securitygroup,tabs:Y,tabId:R}),r.a.createElement($,{reactKeyPrefix:re+"copy-security-group-modal",securityGroup:x,onClose:ie,showDialog:V}),r.a.createElement(_.a,{reactKeyPrefix:re+"edit-group-name-modal",title:S.editSecurityGroupName,value:x.securityGroupName,validation:B.b.SecurityGroupName,showModal:U,onClose:J,onConfirm:Z}),r.a.createElement(q.a,{reactKeyPrefix:re+"delete-security-group-modal",fullWidth:!0,maxWidth:"xs",onCloseModal:ne,onConfirm:le,open:W,title:`${E.delete} ${x.securityGroupName}?`},`${E.deleteConfirmation} ${S.securityGroup}?`)):null}},1966:function(e,t,a){"use strict";a.d(t,"a",(function(){return Z}));a(10),a(11);var o=a(274),r=a.n(o),n=a(0),l=a.n(n),c=a(97),i=a(548),s=a(35),d=a(82),u=a(15),m=a(57),p=a(70),y=a(46),b=a(44),f=a(6),v=a(1),g=a(7),O=a(27),C=a(3);const j=l.a.memo((function(e){const{showDialog:t,securityRole:a,onClose:o,reactKeyPrefix:r}=e,[i,s]=Object(f.a)([C.a.IInternationalization,g.a.ITSModelActions]),d=Object(c.g)(),j=Object(c.h)(),{common:h,model:P}=i.getLanguageFile(),[S,E]=Object(n.useState)(a.roleName),[w,N]=Object(n.useState)(!1),[R,T]=Object(n.useState)(!1);Object(n.useEffect)(()=>{N(S.toLowerCase()!==a.roleName.toLowerCase())},[S,a.roleName]);const x=Object(n.useCallback)(()=>{s.copySingleAction({callback:(e,t)=>{null!==t&&(O.a.openDrawer(t.key,u.a.securityRoleDrawer,j,d),y.a.next()),o()},data:{roleName:S},key:a.key,type:v.a.securityrole})},[S,a.key,d,j,o,s]);return l.a.createElement(b.a,{reactKeyPrefix:r,open:t,onCloseModal:o,maxWidth:"sm",fullWidth:!0,title:h.copySecurityRole,onConfirm:x,confirmBtnName:h.create,disableConfirmBtn:!w||!R,fullscreenOnMobile:!0},l.a.createElement(m.b,{reactKeyPrefix:r+"text-input",onKeyDown:e=>{"Enter"===e.key&&w&&R&&x()},label:P.roleName,required:!0,autoFocus:!0,error:void 0,onInputChange:(e,t)=>{E(e),T(t)},validation:p.b.SecurityRoleName}))}));a(118);var h=a(213),P=a(187),S=a(19),E=a(12),w=a(37),N=a(245),R=a(323),T=a(23),x=a(94),k=a(535),A=a(1224),I=a(438),D=a(1223),M=a(132),L=a(16),K=a(48);const F=Object(h.a)(e=>Object(P.a)({filterComponent:{display:"flex",WebkitFlex:"none",alignItems:"center",marginBottom:e.spacing(1),"& > *:not(:last-child)":{marginRight:e.spacing(1)},overflowX:"scroll",scrollbarWidth:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{width:0,height:0}},container:{backgroundColor:Object(N.a)(e.palette.primary.main,.05),borderRadius:"10px",padding:"20px"}})),_=e=>{var t,a;const o=F({}),{securityRole:r,user:c,userLocale:s,reactKeyPrefix:d,entityRelease:u}=e;let m=[];const p=Object(n.useMemo)(()=>r.securityPermissions.map(e=>e.key),[r.securityPermissions]),[y,b]=Object(f.a)([C.a.IInternationalization,g.a.ITSModelActionsAsync]),O=Object(n.useMemo)(()=>window.location.hostname.includes(K.a.DATA_REPO_URL,0),[]),{model:j,common:h}=y.getLanguageFile(),P=null!==(t=Object(T.a)(x.a.getFiltersByGroupCode,"SECURITY_ROLE_DRAWER_FILTER_GROUP_CODE"))&&void 0!==t?t:[],N=null!==(a=Object(T.a)(x.a.getFiltersByGroupCode,"SECURITY_ROLE_DRAWER_FILTER_GROUP_CODE"))&&void 0!==a?a:[],_=Object(T.a)(D.a.getAllSecurityPermissions,I.c),[B,U]=Object(n.useState)([]),[G,q]=Object(n.useState)(!1);Object(n.useEffect)(()=>{O?O&&u&&b.loadMultipleAction({fields:I.c.fields,type:v.a.securitypermission,query:"filter=entityRelease.releaseNumber(EQ)"+(null==u?void 0:u.releaseNumber),sorts:[{field:"permissionName",groupCode:"SECURITY_ROLE_DRAWER_PERMISSIONS_SORT_CODE",operator:L.b.ASC,queryParamName:"permissionName"}],callback:(e,t)=>{U(t)}}):U(_)},[u]),Object(n.useEffect)(()=>{setTimeout(()=>q(!0))});const V=Object(n.useMemo)(()=>O?Object(M.e)(B||[],P).sort(I.d):Object(M.e)(_||[],P).sort(I.d),[O,_,B,P]),$=Object(n.useMemo)(()=>V?Object(I.a)(V):[],[V]);"DATALOY"===c.userCode&&(m=[{fieldName:"isInternal",label:j.internal},{fieldName:"isProtected",label:j.proctected}]);const z=Object(n.useMemo)(()=>Object(S.a)({fieldOptions:m,object:r,parentData:{key:r.key,type:v.a.securityrole},type:v.a.securityrole,updateResponseFields:i.a,userLocale:s,reactKeyPrefix:d}),[m,r,s,d]),W=l.a.createElement(w.a,{reactKeyPrefix:d+"horizontal_list",key:d+"horizontal_list",items:z,breakpoints:E.a}),H=Object(n.useCallback)(e=>{r&&0!==r.key&&b.updateSingleAction({data:Object(I.b)(e),fields:i.a,key:r.key,type:v.a.securityrole})},[r,b]),X=Object(n.useMemo)(()=>{const{isProtected:e,isInternal:t}=r;return!("DATALOY"===c.userCode)&&(e||t)},[c,r]),Y=Object(n.useMemo)(()=>l.a.createElement("div",{className:o.filterComponent},l.a.createElement(A.a,{reactKeyPrefix:d+"sec-roles-quick-filters",filters:N,groupCode:"SECURITY_ROLE_DRAWER_FILTER_GROUP_CODE"})),[o.filterComponent,d,N]);return l.a.createElement("div",null,Y,"DATALOY"===c.userCode?W:null,G?l.a.createElement(k.a,{reactKeyPrefix:d+"tree",data:$,selected:p,amount:V?V.length:0,callback:H,disabled:X}):l.a.createElement(R.a,{p:2,textAlign:"center"},h.loading))};var B=a(362),U=a(32),G=a(21),q=a(42),V=a(112),$=a(43),z=a(51),W=a(408);function H(e,t,a,o,r,n){const{onChangeName:c,isSecurityRoleNameValid:i,roleName:s}=n,{validation:d,model:u}=r.getLanguageFile(),p={reactKeyPrefix:e,disableUpdate:!0,fieldOptions:[{overrideComponent:l.a.createElement(m.b,{reactKeyPrefix:e,InputProps:{style:{width:400}},placeholder:s,error:!i,helperText:i?"":d.alreadyExists(Object(W.a)(u.roleName,i)),FormHelperTextProps:{style:{width:400}},onInputChange:e=>{c(e)}})}],object:t,type:v.a.securityrole,userLocale:o};return Object(S.a)(p)}var X=a(208),Y=a(95),Q=a(66);const J="doc-common-components-drawer-security-role-drawer";function Z(){var e,t;const[a,o]=Object(f.a)([C.a.IInternationalization,g.a.ITSModelActions]),{model:m,common:y}=a.getLanguageFile(),{drawerId:O,tabId:h}=Object(c.i)(),P=Object(n.useMemo)(()=>window.location.hostname.includes(K.a.DATA_REPO_URL,0),[]),S=Object(T.a)(G.a.getTSModelBuilt,v.a.securityrole,null!=O?O:0,i.a)||new B.a({}),[E,w]=Object(n.useState)(null),N=null!==(e=Object(T.a)(x.a.getFiltersByGroupCode,V.e))&&void 0!==e?e:[],[R,k]=Object(n.useState)(!1),[A,I]=Object(n.useState)("");Object(n.useEffect)(()=>{P&&w(()=>{const e=N.find(e=>"releaseNumber"===e.field);if(e){const[t]=e.selectedObj;if(t!==E)return t}return null})},[]);const D=Object(T.a)(q.a.getUserLocale)||s.f[0],M=null!==(t=Object(T.a)(U.a))&&void 0!==t?t:new $.a({}),L=Object(Q.c)([Y.a.ADMINISTRATOR,Y.a.USER_PROVISIONING],M),F=Object(c.g)(),[W,Z]=Object(n.useState)(!1),[ee,te]=Object(n.useState)(!1),[ae,oe]=Object(n.useState)(!1),re=()=>{oe(!ae)},ne=Object(n.useCallback)(()=>{Z(!1)},[Z]),le=Object(n.useCallback)(()=>{te(!1)},[te]),ce=Object(n.useCallback)(()=>{Z(!0)},[Z]),ie=Object(n.useCallback)(()=>{te(!0)},[te]),se=Object(n.useMemo)(()=>{const e=!P&&(S.isInternal||S.isProtected)||!P&&!S.isInternal&&!S.isProtected&&!L;return[{text:m.editSecurityRoleName,onClick:ce,disabled:e},{text:m.deleteSecurityRole,onClick:ie,disabled:e}]},[m.editSecurityRoleName,m.deleteSecurityRole,ce,P,ie,L,S]),de=Object(n.useCallback)(e=>{!function(e,t,a){t&&a.updateSingleAction({key:t.key,type:v.a.securityrole,fields:i.a,data:{roleName:e}})}(e,S,o)},[S,o]),ue=Object(n.useCallback)(()=>{S&&o.deleteAction({key:S.key,type:v.a.securityrole,callback:()=>{F&&F.goBack()}})},[o,S,F]);Object(n.useEffect)(()=>{O&&0!==parseInt(O)&&o.loadSingleAction({fields:i.a,key:O,type:v.a.securityrole})},[O,o]);const me=Object(n.useMemo)(()=>S?[{id:"overview",content:()=>l.a.createElement(_,{reactKeyPrefix:J+"role-overview",securityRole:S,userLocale:D,user:M,entityRelease:null!=E?E:void 0}),label:y.overview}]:[],[S,y.overview,D,M,E]),pe=[{disabled:!1,label:y.copy,icon:r.a,onClick:re}],ye=Object(n.useCallback)(()=>{S&&o.updateSingleAction({data:{roleName:A},fields:i.a,key:S.key,type:v.a.securityrole}),ne()},[ne,S,A,o]),be=Object(n.useCallback)(e=>{""!==e&&S.entityRelease&&o.loadMultipleAction({type:v.a.securityrole,query:`filter=roleName(EQ)${e}&filter=entityRelease.releaseNumber(EQ)${S.entityRelease.releaseNumber}`,callback:(e,t)=>{k(!!t&&!t.length)}})},[S.entityRelease,o]),fe=Object(n.useCallback)(e=>{I(e),be(e)},[be]),ve=Object(n.useCallback)(()=>!R,[R]);return O?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{reactKeyPrefix:J,drawerKey:Number(O),drawerRoute:u.a.securityRoleDrawer,key:u.a.securityRoleDrawer+O,subject:m.securityRole,subjectLoaded:Number(O)===S.key,subjectName:S?S.roleName:"",tsModelType:v.a.securityrole,tabs:me,tabId:h,primaryActions:pe,secondaryActions:se}),l.a.createElement(j,{reactKeyPrefix:J+"copy-security-role-modal",securityRole:S,onClose:re,showDialog:ae}),P?l.a.createElement(z.a,{selectedObject:S,modalProps:{reactKeyPrefix:J+"edit-role-name-modal",maxWidth:"xs",onCloseModal:ne,open:W,title:m.editSecurityRoleName,confirmBtnName:y.save},getColSpec:H,contextData:{onChangeName:fe,roleName:S.roleName,isSecurityRoleNameValid:R},overrideOnConfirm:ye,isConfirmDisabled:ve}):l.a.createElement(X.a,{reactKeyPrefix:J+"edit-role-name-modal",title:m.editSecurityRoleName,value:S.roleName,validation:p.b.SecurityRoleName,showModal:W,onClose:ne,onConfirm:de}),l.a.createElement(b.a,{reactKeyPrefix:J+"delete-security-role-modal",fullWidth:!0,maxWidth:"xs",onCloseModal:le,onConfirm:ue,open:ee,title:`${y.delete} ${S.roleName}?`},`${y.deleteConfirmation} ${m.securityRole}?`)):null}},1998:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));a(10),a(11),a(93);var o=a(82),r=a(0),n=a.n(r),l=a(97),c=a(6),i=a(23),s=a(1),d=a(21),u=a(42),m=a(35),p=a(3),y=a(37),b=a(12),f=a(75),v=a(71),g=a(19),O=a(579);var C=a(556),j=a(20);const h=({reactKeyPrefix:e,service:t,userLocale:a,i:o,authorized:l})=>{const[i]=Object(c.a)([j.a.IServiceDrawerController]),{common:d}=o.lang(),u=Object(r.useMemo)(()=>Object(C.b)(e,t,a,o,l,e=>i.updateService(t.key,e)),[e,t,a,o,l,i]),m=Object(r.useMemo)(()=>((e,t,a,o,r)=>{const{model:n,common:l}=o.getLanguageFile(),c=!t.isOwnersCost&&!t.isCharterersCost&&t.isToBeAccrued,i=[{disabled:!r,fieldName:"glAccount",label:n.glAccount}];c&&i.push({disabled:!r,fieldName:"glAccountAccrual",label:n.glAccountAccrual},{disabled:!r,fieldName:"balanceAccountAccrualLiab",label:l.accrualLiabilityAccount},{disabled:!r,fieldName:"balanceAccountAccrualAsset",label:n.balanceAccountAccrualAsset});const d={updateResponseFields:O.a,reactKeyPrefix:e,fieldOptions:i,object:t,type:s.a.servicecode,userLocale:a};return Object(g.a)(d)})(e,t,a,o,l),[e,t,a,o,l]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(v.a,null,n.a.createElement(f.a,{title:d.mainDetails}),n.a.createElement(y.a,{reactKeyPrefix:e+"-main-details-field-list",items:u,breakpoints:b.h})),n.a.createElement(v.a,null,n.a.createElement(f.a,{title:d.glAccountMapping}),n.a.createElement(y.a,{reactKeyPrefix:e+"-gl-account-mapping-field-list",items:m,breakpoints:b.h})))};var P=a(15),S=a(150),E=a(43),w=a(32),N=a(66),R=a(30);const T=()=>{var e,t;const[a,y]=Object(c.a)([p.a.IInternationalization,j.a.IServiceDrawerController]),b=null!==(e=Object(i.a)(u.a.getUserLocale))&&void 0!==e?e:m.f[0],f=null!==(t=Object(i.a)(w.a))&&void 0!==t?t:new E.a({}),v=Object(r.useMemo)(()=>Object(N.a)([R.a.ServiceCodePUT],f),[f]),{common:g}=a.getLanguageFile(),{drawerId:C,tabId:T}=Object(l.i)();Object(r.useEffect)(()=>{C&&y.loadService(C)},[y,C]);const x=Object(i.a)(d.a.getTSModelBuilt,s.a.servicecode,null!=C?C:0,O.a),k=!!(null==x?void 0:x.isObjectActive),A=Object(r.useMemo)(()=>C?Object(S.a)({isActive:k,key:C,type:s.a.servicecode,deleteTitle:g.service}):[],[g.service,k,C]),I=Object(r.useMemo)(()=>x?[{id:"overview",label:g.overview,content:()=>n.a.createElement(h,{service:x,i:a,reactKeyPrefix:"doc-common-components-drawer-service-drawer-overview",userLocale:b,authorized:v})}]:[],[x,g.overview,a,b,v]);return x?n.a.createElement(o.a,{reactKeyPrefix:"doc-common-components-drawer-service-drawer",drawerKey:Number(C),drawerRoute:P.a.serviceDrawer,key:P.a.serviceDrawer+C,isObjectActive:x,subject:g.service,subjectLoaded:!!x,subjectName:x.description,tabs:I,tabId:T,tsModelType:s.a.servicecode,secondaryActions:A}):n.a.createElement(n.a.Fragment,null)}},499:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(87);const r=Object(o.a)(["amountAdvancedCurrency.currencyCode","businessPartner.addresses.city","businessPartner.businessPartnerName","businessPartner.businessPartnerType.businessPartnerTypeDesc","businessPartner.businessPartnerCode","businessPartner.contactInfo.email","businessPartner.user.email","currency.currencyCode","externalReferenceNo","orderDate","exchangeRate","portCall.agent.businessPartnerName","portCall.agent.businessPartnerType.businessPartnerTypeDesc","portCall.eventLogs.event.eventCode","portCall.eventLogs.event.eventDesc","portCall.eventLogs.eventLogDate","portCall.isPcFixed","portCall.ownedByVoyage.vessel.vesselName","portCall.ownedByVoyage.voyageCurrency.currencyCode","portCall.ownedByVoyage.voyageHeader.accountantResponsible.userName","portCall.ownedByVoyage.voyageHeader.operator.userName","portCall.ownedByVoyage.voyageHeader.referenceNo","portCall.cargoPorts.cargo.commodity.commodityName","portCall.cargoPorts.cargo.cargoQuantity","portCall.port.portName","portCall.reasonForCall.reasonForCallDesc","portCall.terminal.terminalName","portCall.portCallSequence","portCall.ownedByVoyage.portCalls.portCallSequence","portCall.ownedByVoyage.portCalls.port.portName","portCall.ownedByVoyage.portCalls.agent.businessPartnerName","portCall.handlingCost","portCall.portCost","portCall.portCostCurrency","portCall.variousCost","portCall.voyage.handlingCost","portCall.voyage.portCost","portCall.voyage.variousCost","portCall.voyage.tcResult","portCall.voyage.voyageResult","amountVoyageCurrency","amount","amountAdvanced","amountAdvancedCurrency.currencyCode","serviceOrderLines.description","serviceOrderLines.amountEstimate","serviceOrderLines.amountRevised","serviceOrderLines.amountFinal","serviceOrderLines.isCharterersCost","serviceOrderLines.isOwnersCost","serviceOrderLines.serviceCode.description","status.statusTypeDesc","status.statusTypeCode","status.statusClass.statusClassCode","status.statusTypeSequence"])},556:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return f}));a(93),a(10),a(11);var o,r=a(57),n=a(0),l=a.n(n),c=a(19),i=a(4),s=a(154),d=a(1),u=a(312),m=a(2108),p=a(579),y=a(323);!function(e){e[e.OUR=0]="OUR",e[e.OWNER=1]="OWNER",e[e.CHARTERER=2]="CHARTERER"}(o||(o={}));const b={[o.OUR]:{isOwnersCost:!1,isCharterersCost:!1},[o.OWNER]:{isOwnersCost:!0,isCharterersCost:!1},[o.CHARTERER]:{isOwnersCost:!1,isCharterersCost:!0}};const f=(e,t,a,n,f,v)=>{const{common:g,model:O}=n.getLanguageFile(),{isOwnersCost:C,isCharterersCost:j}=t;let h=function({isCharterersCost:e,isOwnersCost:t}){var a;return null!==(a=Object(m.a)(b,{isCharterersCost:e,isOwnersCost:t}))&&void 0!==a?a:o[0]}({isCharterersCost:j,isOwnersCost:C});const P=[{disabled:!f,fieldName:"description",label:g.description},{disabled:!f,fieldName:"serviceCode",label:g.code,textInputProps:{characterRequirements:{maxLength:s.a.servicecode.serviceCode.limit},letterCase:r.a.UPPERCASE}},{disabled:!f,fieldName:"account",label:g.groupAccount,formControlProps:{required:!0},typeaheadProps:{objectPaths:["accountDesc"],query:`filter=accountCode${i.c.IN}(PCO,HCO,VCO)`,type:d.a.account,shouldPreload:!0}},{overrideComponent:l.a.createElement(y.a,null)},{disabled:!f,fieldName:"cost",label:O.cost,formControlProps:{required:!0},overrideComponent:l.a.createElement(u.a,{reactKeyPrefix:e+"-cost-type",row:!0,onChange:e=>{const t=e.target.value;h=t,v(b[t])},selectedValue:h,options:[{label:g.our,value:o.OUR},{label:O.owner,value:o.OWNER},{label:O.charterer,value:o.CHARTERER}]})},...t.isOwnersCost?[{formControlProps:{required:!1},disabled:!f,fieldName:"commissionOwnersCost",label:O.commission}]:[{disabled:!f,fieldName:"isToBeAccrued",label:g.accrue}]],S={updateResponseFields:p.a,reactKeyPrefix:e,fieldOptions:P,object:t,type:d.a.servicecode,userLocale:a};return Object(c.a)(S)}}}]);